<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>gitä½¿ç”¨</title>
      <link href="/2024/01/16/git-shi-yong/"/>
      <url>/2024/01/16/git-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="gitä½¿ç”¨"><a href="#gitä½¿ç”¨" class="headerlink" title="gitä½¿ç”¨"></a>gitä½¿ç”¨</h2><h3 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h3><p>åœ¨å£³å£³å­å·¥ä½œä¸€å¹´æœ‰ä½™ï¼Œå›å¤´æ¥çœ‹ï¼Œå¯¹å·¥å…·çš„ä½¿ç”¨æ€»å½’å·®äº†ç‚¹æ„æ€ï¼Œé¦–æ¡£å…¶å†²çš„å°±æ˜¯gitäº†ã€‚</p><p>å¯¹äºgitï¼Œæ€»æœ‰ç§æ™¦æ¶©éš¾æ˜çš„æƒ…ç»ªï¼Œè¿™æ˜¯æˆ‘åœ¨å£³å£³å­åšæŠ€æœ¯åˆ†äº«çš„ç¬¬ä¸€ä¸ªä¸»é¢˜ï¼Œå½“åˆé’ˆå¯¹åŸç†ã€åŸºç¡€ä½¿ç”¨ã€é«˜çº§ä½¿ç”¨ä¾ƒä¾ƒè€Œè°ˆã€‚ç°å¦‚ä»Šï¼Œå¯¹äºgitå‘¼ä¹‹æ¬²å‡ºçš„å°è±¡ï¼Œå´ä»…æœ‰git pullã€git addå‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼Œæ¢è¨€ä¹‹ï¼Œåˆ°åº•è¿˜æ˜¯èµ°äº†èƒ½ç”¨å°±è¡Œçš„è€è·¯ã€‚</p><p>è¿™ç§è®¤çŸ¥ä¸èƒ½ç®—é”™ï¼Œä½†åœ¨æŸäº›æ—¶æœºï¼Œ<strong>é‚£äº›é«˜çº§çš„ç”¨æ³•ã€ä¹ ä»¥ä¸ºå¸¸çš„gitè§„èŒƒã€é€šç”¨çš„åŸç†å¾€å¾€èƒ½è®©äººåœ¨æ£˜æ‰‹é—®é¢˜å‰æ¸¸åˆƒæœ‰ä½™</strong>ã€‚</p><p>è¿™ç§æŠ•å…¥å°‘æ•°ç²¾åŠ›å°±èƒ½å®ç°å·®å¼‚åŒ–ç«äº‰çš„é¢†åŸŸï¼Œå…¶å®å¾ˆå€¼å¾—æŠ•å…¥ï¼Œæ‰€ä»¥åœ¨å·¥ä½œä¸€å¹´åŠä¹‹åçš„ä»Šå¤©ï¼Œé‡æ–°æ‹¾èµ·è½ç°çš„gitç¥æŠ€ï¼Œä¹Ÿæ˜¯ä»¶æ°´åˆ°æ¸ æˆçš„äº‹æƒ…äº†ã€‚</p><p>åœ¨æ­£å¼ä¹¦å†™ä¹‹å‰ï¼Œæœ‰ä¸€ç‚¹ä»éœ€è¦åå¤å‘Šè¯«è‡ªå·±ï¼š</p><p><code>ä»¥å‰é‚£ç§ç²¾è€•ç»†ä½œçš„åšå®¢è®°å½•æ–¹å¼å·²ç»ä¸é€‚ç”¨äº†ï¼Œç”¨æœ€å°‘çš„ç»“æ„åŒ–è¯­è¨€æè¿°æœ€é‡è¦çš„ç‚¹ï¼Œæ‰æ˜¯å½“åŠ¡ä¹‹æ€¥</code></p><h3 id="äºŒã€èƒŒæ™¯"><a href="#äºŒã€èƒŒæ™¯" class="headerlink" title="äºŒã€èƒŒæ™¯"></a>äºŒã€èƒŒæ™¯</h3><p>åœ¨2024å¹´ï¼Œå¦‚æœä¸€ä¸ªå¼€å‘äººå‘˜ä¸èƒ½ç†Ÿç»ƒä½¿ç”¨gitï¼Œé‚£ä»–æ˜¾ç„¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰èŒä¸šç´ å…»çš„ç¨‹åºå‘˜ã€‚</p><p>gitå¦‚æ­¤é‡è¦çš„åŸå› ï¼Œæ˜¯å› ä¸ºå…¶ä»£è¡¨äº†å›¢é˜Ÿçš„åˆ†å¸ƒå¼åä½œæ¨¡å¼ï¼Œè¿™ç§å¯<strong>P2Pä¸CSç»“åˆçš„æ¶æ„æ–¹å¼</strong>ï¼Œè®©å®ƒæ—¢å®ç°äº†é«˜æ•ˆåä½œï¼Œä¹Ÿæ»¡è¶³é›†ä¸­ç®¡ç†çš„è¯‰æ±‚ã€‚</p><h3 id="ä¸‰ã€æ¦‚è¿°"><a href="#ä¸‰ã€æ¦‚è¿°" class="headerlink" title="ä¸‰ã€æ¦‚è¿°"></a>ä¸‰ã€æ¦‚è¿°</h3><blockquote><p>gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œä¸é›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ç›¸æ¯”ï¼Œå®ƒæœ‰ç€ä¸€ä¸‹ä¼˜ç‚¹ï¼š</p><ol><li>å¯ç¦»çº¿è®¿é—®ï¼Œé€Ÿåº¦å¿«ï¼Œå› ä¸ºæœ¬åœ°ä»“åº“ï½è¿œç«¯ä»“åº“</li><li><code>è®°å½•å¿«ç…§è€Œédiff</code>ï¼ŒGitå­˜å‚¨çš„æ˜¯æ¯ä¸ªæ–‡ä»¶çš„å®Œæ•´å†…å®¹</li><li>åˆ†æ”¯ç®¡ç†åŠŸèƒ½å¼ºå¤§</li></ol></blockquote><h3 id="å››ã€å…·ä½“ä½¿ç”¨"><a href="#å››ã€å…·ä½“ä½¿ç”¨" class="headerlink" title="å››ã€å…·ä½“ä½¿ç”¨"></a>å››ã€å…·ä½“ä½¿ç”¨</h3><h4 id="1-ä½¿ç”¨å‰é…ç½®"><a href="#1-ä½¿ç”¨å‰é…ç½®" class="headerlink" title="1. ä½¿ç”¨å‰é…ç½®"></a>1. ä½¿ç”¨å‰é…ç½®</h4><p>æœ‰çŠ¶æ€åè®®è‡ªç„¶éœ€è¦è¯†åˆ«ç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•ï¼š</p><ol><li><p>ä¸‹è½½git</p></li><li><p>ä½¿ç”¨å…¬å¸å†…éƒ¨ç”¨æˆ·ä¿¡æ¯ç™»é™†ä»£ç å¹³å°</p></li><li><p>æœ¬åœ°ç”Ÿæˆsshç§˜é’¥ï¼Œå°†å…¬é’¥å¤åˆ¶åˆ°ä»£ç å¹³å°,åœ¨é€šä¿¡æ—¶ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹å¼éªŒè¯æœ¬åœ°çš„ç§é’¥ä¸è¿œç«¯çš„å…¬é’¥</p><pre class=" language-sh"><code class="language-sh">ssh-keygen -t rsa -C "å…¬å¸å†…éƒ¨é‚®ç®±åœ°å€"cat ~/.ssh/id_rsa.pub add ssh key</code></pre></li><li><p>é…ç½®é€šä¿¡ç”¨çš„ç”¨æˆ·ä¿¡æ¯</p><pre class=" language-shell"><code class="language-shell">git config --global user.name "xxx"git config --global user.email "xxx@xx.com"</code></pre></li></ol><h4 id="2-ç”¨ä¸€ä¸ªä¾‹å­è®¤è¯†git"><a href="#2-ç”¨ä¸€ä¸ªä¾‹å­è®¤è¯†git" class="headerlink" title="2. ç”¨ä¸€ä¸ªä¾‹å­è®¤è¯†git"></a>2. ç”¨ä¸€ä¸ªä¾‹å­è®¤è¯†git</h4><p>åœºæ™¯ï¼šæ‹‰å–ä¸€ä¸ªæ–°é¡¹ç›®å¹¶ä¿®æ”¹å…¶ä¸­çš„checkstyle.xmlæ–‡ä»¶</p><p>å®è·µï¼š</p><pre class=" language-sh"><code class="language-sh">#ä½¿ç”¨https/sshçš„æ–¹å¼æ‹‰å–ï¼Œé€šå¸¸ä½¿ç”¨sshåœ°å€git clone è¿œç«¯gitåœ°å€ #åœ¨é¡¹ç›®æ–‡ä»¶çš„æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤ äº¤ç”±gitç®¡ç†git init #ä¿®æ”¹æ–‡ä»¶  #æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºgit add checkstyle.xml#ä¸ç¡®å®šæ”¹åŠ¨æ˜¯å¦åˆé€‚ï¼Œè¿˜ä¸åˆ°commitçš„æ—¶æœºï¼Œä½†è¦çœ‹åˆ«çš„ä»£ç ï¼Œé‚æš‚å­˜ç°åœºgit stash git stash listgit stash pop/apply#ç¡®å®šæ”¹åŠ¨æ˜¯åˆé€‚ä¸”æ˜¯ä¸€ä¸ªé˜¶æ®µçš„æœ€ç»ˆç»“æœï¼Œé‚æäº¤git commit -mâ€œfeatï¼šä¿®æ”¹checkstyle.xmlæ–‡ä»¶â€#è®¤ä¸ºæäº¤ä¿¡æ¯è¦æ›´æ”¹ï¼Œé‚ä¿®æ”¹git commit --amend#æœ¬æ¬¡åšçš„å˜æ›´æ²¡æœ‰æ„ä¹‰ï¼Œè®¤ä¸ºåº”è¯¥å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ --softï¼Œ--mixedå’Œ--hardgit reset HEAD #ä¿®æ”¹ä¿¡æ¯ï¼Œé‡æ–°æäº¤ï¼Œå‡†å¤‡éƒ¨ç½²åˆ°è¿œç«¯git pull#åˆ«äººä¹Ÿä¿®æ”¹äº†ç›¸åŒçš„ä»£ç ï¼Œä»£ç å‡ºç°å†²çª è¿™ä¸€æ­¥å»ºè®®ä½¿ç”¨å¯è§†åŒ–å·¥å…·åˆå¹¶git merge åˆ†æ”¯å #äº§å“è¯´è¿™ä¸ªåŠŸèƒ½ä¸ç”¨åšäº†ï¼Œå›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬ git revert ç‰ˆæœ¬å·</code></pre><h4 id="3-å¥‡æŠ€æ·«å·§"><a href="#3-å¥‡æŠ€æ·«å·§" class="headerlink" title="3. å¥‡æŠ€æ·«å·§"></a>3. å¥‡æŠ€æ·«å·§</h4><h5 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h5><blockquote><p>éº»äº†ï¼Œå…ˆå†™çš„git reflogå‘½ä»¤ï¼Œç„¶åå®è·µçš„git resetï¼Œä½†å› ä¸ºé€‰æ‹©äº†â€“hardé€‰é¡¹ï¼ŒæŠŠæœªæäº¤çš„è¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ææ²¡äº†ï¼ŒçœŸå°±ç°å­¦ç°ç”¨äº†ğŸ˜³</p></blockquote><p><code>æè¿°ï¼š</code>ä¿®æ”¹HEADæŒ‡é’ˆçš„æŒ‡å‘ï¼Œè°¨æ…é€‰æ‹©soft/hardå‚æ•°</p><p><code>ç”¨æ³•ï¼š</code></p><pre class=" language-sh"><code class="language-sh">git reset [--mixed | --soft | --hard | --merge | --keep] [-q] [<æäº¤>]</code></pre><p><code>ç¤ºä¾‹ï¼š</code></p><pre class=" language-sh"><code class="language-sh">3cb5bf1c (HEAD -> master, origin/master) HEAD@{0}: reset: moving to 3cb5bf1c0cf04a97 HEAD@{1}: commit: æµ‹è¯•rest3cb5bf1c (HEAD -> master, origin/master) HEAD@{2}: pull: Merge made by the 'ort' strategy.</code></pre><h5 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h5><p><code>æè¿°ï¼š</code>ä»å·²pushçš„è®°å½•ä¸­æŠŠæŸæ¡commitçš„ä¿®æ”¹å†…å®¹å¹²æ‰ã€‚æœ¯è¯­æ¥è¯´å°±æ˜¯ï¼šå›é€€å·²ç»pushçš„commitï¼Œä½†HEADæŒ‡é’ˆä¸ä¼šå›é€€ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€æ¡æ–°çš„commitè®°å½•ï¼ŒHEADæŒ‡é’ˆåç§»</p><p><code>ç”¨æ³•ï¼š</code></p><pre class=" language-sh"><code class="language-sh">git revert [<é€‰é¡¹>] <æäº¤å·>... æˆ–ï¼šgit revert <å­å‘½ä»¤>    --quit                ç»ˆæ­¢åè½¬æˆ–æ‹£é€‰æ“ä½œ    --continue            ç»§ç»­åè½¬æˆ–æ‹£é€‰æ“ä½œ    --abort               å–æ¶ˆåè½¬æˆ–æ‹£é€‰æ“ä½œ    --skip                è·³è¿‡å½“å‰æäº¤å¹¶ç»§ç»­</code></pre><p><code>ç¤ºä¾‹ï¼š</code></p><pre><code>git revert æŸæ¡commitHas</code></pre><h5 id="git-cherry-pick"><a href="#git-cherry-pick" class="headerlink" title="git cherry-pick"></a>git cherry-pick</h5><p><code>æè¿°ï¼š</code>ä¸€ä¸ªæŒºæœ‰æ„æ€ä¸”å¾ˆå¥½ç”¨çš„å‘½ä»¤ï¼Œå…·ä½“åŠŸèƒ½ï¼šå¤åˆ¶æŸåˆ†æ”¯çš„æŸæ¡commitæ‰€åšçš„å˜æ›´åˆ°å½“å‰åˆ†æ”¯</p><p><code>ç”¨æ³•ï¼š</code></p><pre class=" language-sh"><code class="language-sh">ç”¨æ³•ï¼šgit cherry-pick [<é€‰é¡¹>] <æäº¤å·>...  æˆ–ï¼šgit cherry-pick <å­å‘½ä»¤>    --quit                ç»ˆæ­¢åè½¬æˆ–æ‹£é€‰æ“ä½œ    --continue            ç»§ç»­åè½¬æˆ–æ‹£é€‰æ“ä½œ    --abort               å–æ¶ˆåè½¬æˆ–æ‹£é€‰æ“ä½œ    --skip                è·³è¿‡å½“å‰æäº¤å¹¶ç»§ç»­git cherry-pick commit1 commit2 #å¤åˆ¶å¤šæ¡commitgit cherry-pick commit1^..commit2  #åŒºé—´å¤åˆ¶</code></pre><p><code>ç¤ºä¾‹ï¼š</code></p><pre class=" language-sh"><code class="language-sh">git cherry-pick commit1 commit2 #å¤åˆ¶å¤šæ¡commit</code></pre><h5 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h5><p><code>æè¿°ï¼š</code>åˆ—å‡ºå¼•èµ·HEADæŒ‡é’ˆå˜åŠ¨çš„gitå‘½ä»¤è®°å½•ï¼ŒåŒ…å«commitHashå€¼</p><p><code>ç”¨æ³•ï¼š</code></p><pre class=" language-sh"><code class="language-sh">git reset [--mixed | --soft | --hard | --merge | --keep] [-q] [<æäº¤>]</code></pre><p><code>ç¤ºä¾‹ï¼š</code></p><pre class=" language-sh"><code class="language-sh">git reflog3cb5bf1c (HEAD -> master, origin/master) HEAD@{0}: reset: moving to 3cb5bf1c0cf04a97 HEAD@{1}: commit: æµ‹è¯•rest</code></pre><h3 id="äº”ã€å»¶ä¼¸ï¼šgitè®¾è®¡"><a href="#äº”ã€å»¶ä¼¸ï¼šgitè®¾è®¡" class="headerlink" title="äº”ã€å»¶ä¼¸ï¼šgitè®¾è®¡"></a>äº”ã€å»¶ä¼¸ï¼šgitè®¾è®¡</h3><p>è¯´åˆ°gitçš„è®¾è®¡ï¼Œå…¶å®æœ‰å¾ˆå¤šå¯è¯´ï¼Œæƒ³è¯´çš„ï¼Œå½“å¹´åˆšå…¥èŒæ—¶åˆ†äº«gitçš„åŸç†å¯æ˜¯å†™äº†1000å­—æœ‰ä½™å‘¢ã€‚å¯é‚£æ˜¯ä¸“å±é‚£ä¸ªå¹´çºªçš„itæµªæ¼«ï¼Œå¦‚ä»Šï¼Œä¹¦ä¿¡ä¸å†ï¼Œè½¦é©¬æ¸å¿«ã€‚ç²¾åŠ›çè´µï¼Œæˆ‘ä»…ç®€è¦ä»‹ç»ä¸‹ï¼š</p><p>å¯¹gitç³»ç»Ÿé¦–å…ˆè¦å»ºç«‹ä¸€ä¸ªé‡è¦è®¤çŸ¥ï¼šgité¢å‘åº”ç”¨æ—¶æ˜¯ä»£ç ç®¡ç†å·¥å…·ï¼Œé¢å‘è¿‡ç¨‹æ—¶æ˜¯æ–‡ä»¶ç³»ç»Ÿ(.gitç›®å½•)ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿè‡ªç„¶æ˜¯ä»¥æ–‡ä»¶å¯¹è±¡ä¸ºä¸»ä½“å±•å¼€çš„ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå°†ä¿®æ”¹æ·»åŠ åˆ°indexåŒºï¼Œgitå°±ä¼šä¸ºæ–‡ä»¶ä¸­çš„å†…å®¹æ ¹æ®SHAç®—æ³•ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œå€¼ä½œä¸ºæ–‡ä»¶çš„å¼•ç”¨ï¼Œæ“ä½œæ–‡ä»¶åä¹Ÿä¼šä¿®æ”¹æ–‡ä»¶çš„å¼•ç”¨å€¼ï¼Œè€Œå¦å¼€åˆ†æ”¯ä¿®æ”¹åˆ™æ˜¯æ”¹å˜äº†HEADæŒ‡é’ˆæŒ‡å‘ã€‚</p><p>å°±ç®€è¦è¯´è¿™äº›ï¼Œshow you code:</p><pre class=" language-sh"><code class="language-sh">1. å‡è®¾æˆ‘ä»¬è¿›å…¥åˆ°ä¸€ä¸ªæ–°ç›®å½•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª README æ–‡ä»¶ã€‚æ­¤æ—¶æš‚å­˜åŒºä¸ºç©ºï¼Œæäº¤å†å²ä¸ºç©ºï¼ŒHEAD å¼•ç”¨æŒ‡å‘æœªåˆ›å»ºçš„ master åˆ†æ”¯ã€‚2. ç°åœ¨æˆ‘ä»¬æƒ³æäº¤è¯¥æ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡ git add å°†å…¶æ·»åŠ åˆ°æš‚å­˜åŒºã€‚æ­¤æ—¶ Git å°†åœ¨ .git/objects ç›®å½•ä¸­ä»¥è¯¥æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆä¸€ä¸ª blob å¯¹è±¡ï¼Œå¹¶å°† blob å¯¹è±¡çš„ä¿¡æ¯æ·»åŠ åˆ° .git/index æ–‡ä»¶ä¸­ã€‚3. æ¥ç€è¿è¡Œ git commit ï¼Œå®ƒä¼šå–å¾—æš‚å­˜åŒºä¸­çš„å†…å®¹ç”Ÿæˆä¸€ä¸ª tree å¯¹è±¡ï¼Œè¯¥ tree å¯¹è±¡å³ä¸ºå·¥ä½œåŒºæ–‡ä»¶çš„æ°¸ä¹…å¿«ç…§ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥ tree å¯¹è±¡çš„æäº¤å¯¹è±¡ï¼Œæœ€åæ›´æ–° master æŒ‡å‘æœ¬æ¬¡æäº¤ã€‚4. å‡å¦‚æˆ‘ä»¬åœ¨å·¥ä½œåŒºç¼–è¾‘äº†æ–‡ä»¶ï¼ŒGit ä¼šå°†å…¶ä¸æš‚å­˜åŒºç°æœ‰æ–‡ä»¶å¿«ç…§è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨ git add äº†æ›´æ”¹çš„æ–‡ä»¶åï¼Œæ ¹æ®æ–‡ä»¶å½“å‰å†…å®¹ç”Ÿæˆæ–°çš„ blob å¯¹è±¡å¹¶æ›´æ–° .git/index æ–‡ä»¶ä¸­çš„å¼•ç”¨ IDã€‚git commit çš„è¿‡ç¨‹ä¸ä¹‹å‰ç±»ä¼¼ï¼Œä½†æ˜¯æ–°çš„æäº¤å¯¹è±¡ä¼šä»¥ HEAD å¼•ç”¨æŒ‡å‘çš„æäº¤ä½œä¸ºçˆ¶æäº¤ï¼Œç„¶åæ›´æ–°å…¶å¼•ç”¨çš„ master æŒ‡å‘æ–°åˆ›å»ºçš„æäº¤ã€‚5. å½“æˆ‘ä»¬ git checkout ä¸€ä¸ªåˆ†æ”¯æˆ–æäº¤æ—¶ï¼Œå®ƒä¼šä¿®æ”¹ HEAD æŒ‡å‘æ–°çš„åˆ†æ”¯å¼•ç”¨æˆ–æäº¤ï¼Œå°†æš‚å­˜åŒºå¡«å……ä¸ºè¯¥æ¬¡æäº¤çš„æ–‡ä»¶å¿«ç…§ï¼Œç„¶åå°†æš‚å­˜åŒºçš„å†…å®¹è§£åŒ…å¤åˆ¶åˆ°å·¥ä½œåŒºä¸­ã€‚</code></pre><p>å†é™„ä¸Šå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ“ä½œè®°å½•ï¼š</p><pre class=" language-shell"><code class="language-shell">zyz@bogon î‚° ~/Desktop/myblog/hexo-theme-yuzhe/.git/objects î‚° pwd/Users/zyz/Desktop/myblog/hexo-theme-yuzhe/.git/objects zyz@bogon î‚° ~/Desktop/myblog/hexo-theme-yuzhe/.git/objects î‚° git cat-file -t 60fc2990commit zyz@bogon î‚° ~/Desktop/myblog/hexo-theme-yuzhe/.git/objects î‚° git cat-file -p 60fc2990tree 13ddbeacacc3f9628813a85a4361556e893a8559parent 94ba448f2e678a4ec4ad632bb180a856ac708402author zhangyuzhe <2824353085@qq.com> 1705499171 +0800committer zhangyuzhe <2824353085@qq.com> 1705499171 +0800fix:ä¿®æ”¹ä¿¡æ¯</code></pre><h3 id="å…­ã€å‚è€ƒç›®å½•"><a href="#å…­ã€å‚è€ƒç›®å½•" class="headerlink" title="å…­ã€å‚è€ƒç›®å½•"></a>å…­ã€å‚è€ƒç›®å½•</h3><p><a href="https://waynerv.com/posts/git-undo-intro/" target="_blank" rel="noopener">https://waynerv.com/posts/git-undo-intro/</a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> æ–‡ä»¶ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mavenä½¿ç”¨</title>
      <link href="/2024/01/16/maven-shi-yong/"/>
      <url>/2024/01/16/maven-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="Mavenä½¿ç”¨"><a href="#Mavenä½¿ç”¨" class="headerlink" title="Mavenä½¿ç”¨"></a>Mavenä½¿ç”¨</h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸¤å¹´å‰å†™çš„ä¸€ç¯‡æ–‡ç« ï¼š<code>mavenä»å…¥é—¨åˆ°å…¥å‘</code>å·²ç»å¯¹mavençš„å…¨è²Œåšäº†è¯¦ç»†ä»‹ç»ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ä»…ä»ä¸€ä¸ªè‡ªç„¶çš„æ€ç»´é¡ºåºç®€è¦åœ°æè¿°mavençš„ä½¿ç”¨ï¼ŒåŠ›æ±‚åšåˆ°ä¸å®é™…ç´§å¯†ç»“åˆ</p><hr><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€å¼€å§‹æ‰‹åŠ¨å¯¼å…¥jaråŒ…é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š<code>å„ä¸ªæ¨¡å—éƒ½åœ¨å…¶ç›®å½•ä¸‹å¯¼å…¥ä¼šå¯¼è‡´é‡å¤</code>ã€<code>å¤šä¸ªåŒ…å¦‚ä½•ç®¡ç†ç‰ˆæœ¬</code>ã€<code>åŒ…ä¸æ¨¡å—è®¾è®¡çš„ç†å¿µæ˜¯å¦åº”è¯¥ä¸€è‡´</code></p><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Mavenå°±æ˜¯ä¸“é—¨<code>ä¸ºJavaé¡¹ç›®æ‰“é€ çš„ç®¡ç†å’Œæ„å»ºå·¥å…·</code>ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š</p><ul><li>æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ï¼›</li><li>æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„æ„å»ºæµç¨‹ï¼ˆç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œå‘å¸ƒâ€¦â€¦ï¼‰ï¼›</li><li>æä¾›äº†ä¸€å¥—ä¾èµ–ç®¡ç†æœºåˆ¶ã€‚</li></ul><h3 id="å…·ä½“ä½¿ç”¨"><a href="#å…·ä½“ä½¿ç”¨" class="headerlink" title="å…·ä½“ä½¿ç”¨"></a>å…·ä½“ä½¿ç”¨</h3><h4 id="mavené…ç½®æ–‡ä»¶ç»“æ„"><a href="#mavené…ç½®æ–‡ä»¶ç»“æ„" class="headerlink" title="mavené…ç½®æ–‡ä»¶ç»“æ„"></a>mavené…ç½®æ–‡ä»¶ç»“æ„</h4><p>ä»¥ä¸€ä¸ªæ ‡å‡†åŒ–åœ°mavené…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼Œç®€è¦ä»‹ç»ä¸€äº›æ ‡ç­¾ç”¨é€”ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--mavençš„æœ¬åœ°ä»“åº“åœ°å€--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">></span></span>/Users/zyz/.m2/repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!--mavençš„é•œåƒä»“åº“ ä¹Ÿå°±æ˜¯ç››åjaråŒ…ä»å“ªä¸ªä»“åº“æ‹‰å– é€‰å–æ—¶è€ƒè™‘ä¸¤ä¸ªç‚¹ï¼šjaråŒ…æ˜¯å¦å…¨é¢ã€è®¿é—®é€Ÿåº¦æ˜¯å¦å¤Ÿå¿«--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>aliyun maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>              <span class="token comment" spellcheck="true">&lt;!--ä»“åº“ç±»å‹ï¼šä¸­å¤®ä»“åº“ ä»“åº“åˆ†ç±»ï¼šä¸­å¤®ä»“åº“ã€è¿œç¨‹ä»“åº“ã€æœ¬åœ°ä»“åº“--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--ä»£ç†æœåŠ¡å™¨ï¼šå’ŒVPNåŒç†ï¼Œè®©å®é™…çš„ipåœ°å€å˜å¾—é€æ˜ï¼Œä»å¤–ç•Œæ¥çœ‹ï¼Œå®é™…è¯·æ±‚çš„å‘å‡ºæ–¹æ˜¯é…ç½®çš„åœ°å€--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxy</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--å…·ä½“å¼€å‘ç¯å¢ƒé…ç½®ï¼šæ¯”å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå°†jaråŒ…éƒ¨ç½²åˆ°å„è‡ªçš„ä»“åº“åœ°å€--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">></span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">></span></span>      <span class="token comment" spellcheck="true">&lt;!--åä¸ºnexusçš„å¼€å‘ç¯å¢ƒ--></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>local private nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.oschina.net/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--æ’ä»¶ä»“åº“åœ°å€--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepositories</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepository</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>local private nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.oschina.net/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepository</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepositories</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span></code></pre><h4 id="mavenè¯´æ˜æ–‡ä»¶"><a href="#mavenè¯´æ˜æ–‡ä»¶" class="headerlink" title="mavenè¯´æ˜æ–‡ä»¶"></a>mavenè¯´æ˜æ–‡ä»¶</h4><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--é¡¹ç›®ç»“æ„ä¸ç‰ˆæœ¬--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.ke.nervecenter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>utopia-nerve-center<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>utopia-nerve-center<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>Demo project for ke.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--ç‰ˆæœ¬çº¦å®š--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--æ¨¡å—çº¦å®š--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">></span></span>utopia-nerve-center-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">></span></span>utopia-nerve-center-db<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">></span></span>        ...  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--å…·ä½“ä¾èµ–--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-collections4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--å°†jaråŒ…ï¼ˆæ­£å¼/æµ‹è¯•ï¼‰éƒ¨ç½²åˆ°å“ªä¸ªä»“åº“--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>distributionManagement</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshotRepository</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshotRepository</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>distributionManagement</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--ä»£ç æ ¼å¼çš„æ ¡éªŒæ’ä»¶ï¼šéœ€è¦å£°æ˜idã€è§„åˆ™æ–‡ä»¶åœ°å€ã€å‡ºç°é”™è¯¯åçš„å¤„ç†ç­‰--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-checkstyle-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>checkstyle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">></span></span>validate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">></span></span>check<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configLocation</span><span class="token punctuation">></span></span>checkstyle.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configLocation</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>suppressionsLocation</span><span class="token punctuation">></span></span>checkstyle-suppression.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>suppressionsLocation</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>failOnViolation</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>failOnViolation</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>failsOnError</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>failsOnError</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>consoleOutput</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>consoleOutput</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includeTestSourceDirectory</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includeTestSourceDirectory</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.puppycrawl.tools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>checkstyle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>9.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></code></pre><h4 id="mavenå¸¸ç”¨å‘½ä»¤"><a href="#mavenå¸¸ç”¨å‘½ä»¤" class="headerlink" title="mavenå¸¸ç”¨å‘½ä»¤"></a>mavenå¸¸ç”¨å‘½ä»¤</h4><ol><li><p>ä¿®æ”¹å„ä¸ªæ¨¡å—çš„ç‰ˆæœ¬å¹¶éƒ¨ç½²</p><pre class=" language-sh"><code class="language-sh">mvn versions:set -DnewVersion=2.9.8-SNAPSHOTmvn -U clean deploy  -Dmaven.test.skip=true</code></pre></li><li><p>æµ‹è¯•</p><pre class=" language-sh"><code class="language-sh">mvn test</code></pre></li></ol><h4 id="IDEAä¸­çš„mavenæ’ä»¶"><a href="#IDEAä¸­çš„mavenæ’ä»¶" class="headerlink" title="IDEAä¸­çš„mavenæ’ä»¶"></a>IDEAä¸­çš„mavenæ’ä»¶</h4><p>Maven-helper</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202401161647182.png" alt="image-20240116164747068"></p><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
            <tag> æ¨¡å—è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.16-2.16 å·¥ä½œæ•´ä½“æ¡†æ¶</title>
      <link href="/2024/01/16/1-16-2-16-gong-zuo-zheng-ti-kuang-jia/"/>
      <url>/2024/01/16/1-16-2-16-gong-zuo-zheng-ti-kuang-jia/</url>
      
        <content type="html"><![CDATA[<p>å·¥ä½œæ•´ä½“æ¡†æ¶<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202401161435348.png" alt="image-20240116143520166"></p><table><thead><tr><th>æ—¥æœŸ</th><th>ä¸»çº¿</th><th>æ”¯çº¿1</th><th>æ”¯çº¿2</th><th>æ”¯çº¿3</th></tr></thead><tbody><tr><td>1.16-1.20</td><td>å·¥å…·ç¯‡å®Œç»“ï¼ˆæ ¸å¿ƒå·¥å…·ç†Ÿç»ƒä½¿ç”¨ï¼Œå…¶ä»–å·¥å…·é¢å‘ä½¿ç”¨ï¼‰</td><td></td><td></td><td></td></tr><tr><td>1.21</td><td>ä»£ç æ•´æ´ä¹‹é“ä¸¤ç« ã€effective javaä¸€ç« </td><td></td><td></td><td></td></tr><tr><td>1.22-1.26</td><td>ä¸šåŠ¡ç¯‡å®Œæ•´ä¸»é“¾è·¯åˆ†æã€å®Œæˆä¸€ä¸ªçºµå‘éœ€æ±‚</td><td>ä¸šåŠ¡ç¯‡å®Œæ•´ä¸»é“¾è·¯æŠ€æœ¯åˆ†ædebug</td><td>ç»„ä»¶ç®€å•ä½¿ç”¨å†ç¡®è®¤</td><td>å·¥å…·å†ç†Ÿç»ƒï¼Œåœ¨ä¹‹å‰åšæ–‡åŸºç¡€ä¸Šæ·»åŠ å°æŠ€å·§</td></tr><tr><td>1.27-1.28</td><td>ä¸šåŠ¡ç¯‡å®Œæ•´ä¸»é“¾è·¯æŠ€æœ¯åˆ†ædebugå®Œæˆï¼Œåšæ–‡æ•´ç†å®Œæˆã€ç–‘é—®æ•´ç†å®Œæˆ</td><td></td><td></td><td></td></tr><tr><td>1.29-2.2</td><td>å®Œæˆä¸€ä¸ªæ¨ªå‘/çºµå‘éœ€æ±‚ã€ä¸»é“¾è·¯ä¸šåŠ¡/æŠ€æœ¯é—®é¢˜è§£å†³</td><td>æ•´ç†æ•°æ®åº“è®¾è®¡ç›¸å…³é—®é¢˜ã€è§£å†³é—®é¢˜</td><td></td><td></td></tr><tr><td>2.3</td><td>èŒä¸šç´ å…»ç¯‡-è¯´æ˜¯ä¸è¯´å¦</td><td></td><td></td><td></td></tr><tr><td>2.4-2.8</td><td>è§£å†³æ•°æ®åº“è®¾è®¡ç›¸å…³é—®é¢˜ã€å®Œæˆä¸€ä¸ªéœ€æ±‚</td><td>åˆæ­¥äº†è§£ç”¨æˆ·æ¨¡å‹</td><td></td><td></td></tr><tr><td>è¿‡å¹´æœŸé—´</td><td></td><td>ä»£ç æ•´æ´ä¹‹é“ã€effective java</td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä»¥é™åˆ¶åŠ¨</title>
      <link href="/2024/01/14/yi-jing-zhi-dong/"/>
      <url>/2024/01/14/yi-jing-zhi-dong/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¹ æƒ¯ï¼šä»¥é™åˆ¶åŠ¨"><a href="#ä¹ æƒ¯ï¼šä»¥é™åˆ¶åŠ¨" class="headerlink" title="ä¹ æƒ¯ï¼šä»¥é™åˆ¶åŠ¨"></a>ä¹ æƒ¯ï¼šä»¥é™åˆ¶åŠ¨</h2><p>Oï¼šæŒç»­åœ°åšä¸€ä»¶äº‹æƒ…çš„åŠ¨åŠ›</p><p>Kï¼šå®Œæˆåº¦80%ä»¥ä¸Š</p><p>R: äºŒåŠ¨ã€äºŒå¹³ã€ä¸‰é™</p><hr><p>æ€»çº¿ï¼šä»¥é™åˆ¶åŠ¨</p><p>äº‹é¡¹ä¸€ï¼šæ—©ä¸Šé”»ç‚¼ã€æ™šä¸Šæ•£æ­¥30min</p><p>äº‹é¡¹äºŒï¼šæ—©ä¸Šæ€»ç»“ã€æ™šä¸Šè¯»ä¹¦30min</p><p>äº‹é¡¹ä¸‰ï¼šæ—©ã€ä¸­ã€æ™šå†¥æƒ³5min</p><table><thead><tr><th>äº‹é¡¹/æ‰“å¡</th><th>Day1</th><th>Day2</th><th>Day3</th><th>Day4</th><th>Day5</th><th>Day6</th><th>Day7</th><th>Day8</th><th>Day9</th><th>Day10</th><th>Day11</th><th>Day12</th><th>Day13</th><th>Day14</th><th>Day15</th><th>Day16</th><th>Day17</th><th>Day18</th><th>Day19</th><th>Day20</th><th>Day21</th><th>æ‰“å¡æ•°</th></tr></thead><tbody><tr><td>æ—©é™</td><td>âŒ</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>åˆé™</td><td>âœ…</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>æ™šé™</td><td>âœ…</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>é”»ç‚¼</td><td>âœ…</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>æ•£æ­¥</td><td>âœ…</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>æ—©æ€»ç»“</td><td>âŒ</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>æ™šè¯»ä¹¦</td><td>âŒ</td><td>âœ…</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>å®Œæˆåº¦</td><td>60%</td><td>100%</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é»˜</title>
      <link href="/2023/12/18/mo/"/>
      <url>/2023/12/18/mo/</url>
      
        <content type="html"><![CDATA[<h2 id="é»˜"><a href="#é»˜" class="headerlink" title="é»˜"></a>é»˜</h2><h3 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h3><blockquote><p>è¿™æ˜¯ä¸€æ¬¡ä¸ºæœŸä¸¤æœˆä¸æ¯äº²ã€ä¸è‡ªå·±çš„çµé­‚å¯¹è¯ï¼Œä¸€æ¬¡æˆ–æ•‘èµï¼Œæˆ–å è½çš„è¿‡ç¨‹ã€‚</p></blockquote><p><code>å‡ºå‘ç‚¹</code>ï¼šäººæœ€çè´µçš„èµ„äº§æ— è¿‡äºç²¾åŠ›ï¼Œç²¾åŠ›åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯æœ‰é™çš„ï¼Œå¦‚ä½•åˆ©ç”¨æœ‰é™çš„ç²¾åŠ›æ˜¯å€¼å¾—æ·±æ€çš„ï¼Œè¯¥é˜¶æ®µè®¾å®šæ¯æ—¥ç²¾åŠ›10hï¼ˆ24-ä¼‘æ¯æ—¶é—´9.5-åšé¥­åƒé¥­æ—¶é—´2-ä¸å¯åˆ©ç”¨ç²¾åŠ›3.5ï¼‰</p><h4 id="1-åŸåˆ™"><a href="#1-åŸåˆ™" class="headerlink" title="1. åŸåˆ™"></a>1. åŸåˆ™</h4><table><thead><tr><th>åŸåˆ™</th><th>æè¿°</th><th>é‡è¦ç¨‹åº¦</th><th>å¤±ä¿¡çš„ä»£ä»·</th></tr></thead><tbody><tr><td>ç§¯æä¸»åŠ¨</td><td>ç›®æ ‡æ˜ç¡®ä¹‹åå°±ç«‹åˆ»å»åšï¼Œäººæ€§æ°¸è¿œæ˜¯æ‡’æƒ°çš„ï¼Œä¸€å®šè¦æ‘†è„±äººæ€§çš„å‘å¿ƒåŠ›</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆåŸåˆ™-ï¼‰æ—¶é•¿+45min</td></tr><tr><td>ä¿æŒæ›´æ–°</td><td>å»ºç«‹ä¸€ä¸ªçš„æ–°ç§©åºçš„è¿‡ç¨‹ä¸ä¼šä¸€å¸†é£é¡ºï¼Œä¸æ–­è¿­ä»£ç®—æ³•ã€ä¿æŒæ›´æ–°</td><td>ğŸŒŸğŸŒŸğŸŒŸ</td><td>ç”Ÿæ´»æ¯”ä¾‹+1h</td></tr><tr><td>çœŸè¯šå®ˆä¿¡</td><td>å¾…äººæ¥ç‰©ï¼Œä¸è¿‡å¦‚æ˜¯</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆäº²å¯†-ï¼‰+45min</td></tr><tr><td>å¹³ç¨³åšå®š</td><td>åšäº‹æƒ…æœ€é‡è¦çš„æ˜¯å¯é </td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆå¾®ä¹ æƒ¯ï¼‰+45min</td></tr><tr><td>å®è·µå¤§äºè¨€è¯­</td><td>ä¸è¦çœ‹äººå¦‚ä½•è¯´ï¼Œè¦çœ‹ä»–æ€æ ·åš</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>å·¥ä½œ+45min</td></tr></tbody></table><h4 id="2-æ–¹æ³•è®º"><a href="#2-æ–¹æ³•è®º" class="headerlink" title="2. æ–¹æ³•è®º"></a>2. æ–¹æ³•è®º</h4><table><thead><tr><th>æ–¹æ³•è®º</th><th>æè¿°</th><th>è¡Œä¸ºä¿è¯</th><th>é‡è¦ç¨‹åº¦</th><th>å¤±ä¿¡çš„ä»£ä»·ï¼ˆå½±å“ç¬¬äºŒå¤©ï¼‰</th></tr></thead><tbody><tr><td>ç³»ç»Ÿè®º</td><td>å…ˆç³»ç»Ÿåæ¨¡å—</td><td>OKRç®¡ç† æœ‰è¿¹å¯å¾ª</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç›®æ ‡ä¿æŒæ¡Œé¢ä¸€å¤©</td></tr><tr><td>ç®¡ç†ç²¾åŠ›</td><td>ä¸“æ³¨å­¦ä¹  ä¸“æ³¨ä¼‘æ¯</td><td>ç•ªèŒ„æ—¶é—´</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>å±å¹•å€’è®¡æ—¶å¸¸äº®ä¸€å¤©</td></tr><tr><td>å¾®ä¹ æƒ¯</td><td>ä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œ</td><td>æ™šä¸Šæ•£æ­¥+ç™½å¤©ä¸¤æ¬¡å†¥æƒ³+å“‘é“ƒ</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>1å¤©æœªå®Œæˆï¼š+2å¤© éœ€è¦å®Œæˆåº¦-10%</td></tr><tr><td>æŒæ§ä¹ æƒ¯</td><td>æç¤ºã€ååº”ã€å¥–åŠ±</td><td>è®¡åˆ’èµ°èµ·</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>æ—¶é•¿+1</td></tr><tr><td>åˆ»æ„ç»ƒä¹ </td><td>ä¸“æ³¨ã€å›é¡¾</td><td>è´¹æ›¼å­¦ä¹ æ³•</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>å›é¡¾ã€ä¿®æ­£ä¹‹å‰çš„æ‰€æœ‰ç§¯ç´¯</td></tr></tbody></table><h4 id="3-ç³»ç»Ÿ"><a href="#3-ç³»ç»Ÿ" class="headerlink" title="3. ç³»ç»Ÿ"></a>3. ç³»ç»Ÿ</h4><table><thead><tr><th>å››å¤§æ¨¡å—</th><th>æè¿°</th><th>ä¸¾ä¾‹</th><th>é‡è¦ç¨‹åº¦-ç°é˜¶æ®µ</th><th>å¤±ä¿¡çš„ä»£ä»·ï¼ˆå½±å“ç¬¬äºŒå¤©ï¼‰</th></tr></thead><tbody><tr><td><strong>ç”Ÿæ´»</strong></td><td><code>åƒ</code></td><td>æ—©é¤åˆé¤æ™šé¤</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¼‘æ¯æ—¶é•¿+30min</td></tr><tr><td></td><td><code>å–</code></td><td>å–æ°´</td><td>ğŸŒŸğŸŒŸğŸŒŸ</td><td>å–æ°´æ¬¡æ•°+1</td></tr><tr><td></td><td><code>ç©</code></td><td>ä¸åˆ«äººçš„äº¤äº’ï¼ˆæ‰“æ¸¸æˆï¼‰</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¹çš„æ—¶é•¿+15min</td></tr><tr><td></td><td><code>ä¹</code></td><td>çœ‹åœ†è„¸çš„è§†é¢‘ã€æ•£æ­¥</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿-30min</td></tr><tr><td></td><td><code>ä¼‘æ¯</code></td><td>ç¡çœ ã€çŸ­ä¼‘æ¯</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¼‘æ¯æ—¶é•¿+30min</td></tr><tr><td><strong>å·¥ä½œ</strong></td><td><code>å·¥ä½œå†…è‡ªèº«</code></td><td>å®Œæˆéœ€æ±‚ä»»åŠ¡</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç©ã€ä¹æ—¶é•¿-30%ã€è‡ªèº«ä»»åŠ¡é‡-10%</td></tr><tr><td></td><td><code>å·¥ä½œå¤–å­¦ä¹ </code></td><td>å­¦ä¹ æ‰¿è½½çŸ¥è¯†</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç©ã€ä¹æ—¶é•¿-30%ã€è‡ªèº«ä»»åŠ¡é‡-10%</td></tr><tr><td></td><td><code>å·¥ä½œå†…æ²‰æ·€</code></td><td>è½å®éœ€æ±‚é•¿è¿›</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç©ã€ä¹æ—¶é•¿-30%ã€è‡ªèº«ä»»åŠ¡é‡-10%</td></tr><tr><td><strong>ä¸ªäººæˆé•¿</strong></td><td><code>è¯»ä¹¦</code></td><td>äººæ–‡ç­‰</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>è¿åŠ¨+ä¸åŠ¨</code></td><td>è·‘æ­¥ã€å†¥æƒ³ç­‰</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>æŒ‘æˆ˜è‡ªå·±</code></td><td>å“‘é“ƒç­‰</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td><strong>ç¤¾ä¼šå…³ç³»</strong></td><td><code>å®¶äººè”ç³»</code></td><td>ä¸¤å¤©ä¸€æ¶ˆæ¯ï¼Œä¸‰å¤©ä¸€è§†é¢‘</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>å¥½æœ‹å‹ã€äº²æˆšè”ç³»</code></td><td>ä¸‰å¤©ä¸€æ¶ˆæ¯ã€äº”å¤©ä¸€è”ç»œ</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>åŒäº‹è”ç³»</code></td><td>ä¸€å‘¨ä¸€æ¶ˆæ¯</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>æ™®é€šæœ‹å‹è”ç³»</code></td><td>ä¸€æœˆä¸€æ¶ˆæ¯</td><td>ğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªèº«æ—¶é•¿+15minã€ç©ä¹æ—¶é•¿-15min</td></tr></tbody></table><h3 id="äºŒã€ç³»ç»Ÿä¸æ¨¡å—"><a href="#äºŒã€ç³»ç»Ÿä¸æ¨¡å—" class="headerlink" title="äºŒã€ç³»ç»Ÿä¸æ¨¡å—"></a>äºŒã€ç³»ç»Ÿä¸æ¨¡å—</h3><h5 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h5><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181609459.png" alt="image-20231218160404544"></p><ol><li>ç¡çœ å­ç³»ç»Ÿ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181633146.png" alt="image-20231218163252473"></p><ol start="2"><li>å¸¸è§„ç”Ÿæ´»å­ç³»ç»Ÿ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181646586.png" alt="image-20231218164515028">3.  ä¸ªäººæˆé•¿å­ç³»ç»Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181711911.png" alt="image-20231218171117870"></p><ol start="4"><li>å·¥ä½œå­ç³»ç»Ÿ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181720693.png" alt="image-20231218172019659"></p><ol start="5"><li>ç©ä¹å­ç³»ç»Ÿ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181729212.png" alt="image-20231218172908173"></p><ol start="6"><li>çŸ­ä¼‘æ¯å­ç³»ç»Ÿ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181746853.png" alt="image-20231218174643817"></p><h3 id="ä¸‰ã€å…·ä½“æ‰§è¡Œ"><a href="#ä¸‰ã€å…·ä½“æ‰§è¡Œ" class="headerlink" title="ä¸‰ã€å…·ä½“æ‰§è¡Œ"></a>ä¸‰ã€å…·ä½“æ‰§è¡Œ</h3><p><code>ä¸»æ¨¡ç‰ˆï¼š</code></p><p>æ•´ç†è‡ªå·±-ã€‹æ•´ç†ç¯å¢ƒ-ã€‰èµ°å‡ºå®¶é—¨-ã€‹è¿åŠ¨å‡ºæ±—-ã€‹ç›‘æ§è‡ªå·±çš„å°é‡‘åº“ï¼ˆä¸åŒ…æ‹¬è‚¡ç¥¨åŸºé‡‘ï¼‰-ã€‹å…³é—­ä¸å¿…è¦çš„é€šçŸ¥ã€æˆ’æ‰æˆç˜¾ä¹ æƒ¯-ã€‹ç«‹å³åˆ¶å®šç­–ç•¥-ã€‹è‡£æœäºè‡ªå·±è¦åšçš„äº‹æƒ…-ã€‰å‘è€å¦ˆæ‰“å¡ï¼Œå‘è‡ªå·±ç•™è¨€</p><h4 id="ç¬¬ä¸€é˜¶æ®µ"><a href="#ç¬¬ä¸€é˜¶æ®µ" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µ"></a>ç¬¬ä¸€é˜¶æ®µ</h4><ol><li><p>æ—¶é•¿ï¼šä¸€å¤©</p></li><li><p>ç›®æ ‡ï¼šç®€è¦æ¡†æ¶èµ°ä¸€é</p></li><li><p>å¥–åŠ±ï¼š<strong>å®‰è£…è‹±é›„è”ç›Ÿå¤–æœ</strong></p></li><li><p>æ æ†è§£ï¼š<strong>11ç‚¹ä¼‘æ¯ ç•ªèŒ„æ—¶é—´</strong></p></li><li><p>æ¨¡ç‰ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181809997.png" alt="image-20231218180955957"></p></li></ol><ol start="6"><li><p>åæ€ä¸æ€»ç»“</p><p><code>ç›®å‰é¢ä¸´æœ€æ˜¾è‘—çš„é—®é¢˜æ˜¯ï¼šæ€»è®¤ä¸ºçŠ¶æ€ä¸ä½³ï¼Œæ²¡æœ‰å‡†å¤‡å¥½ï¼Œä¸ç¡®å®šè¦ä¸è¦ç°åœ¨å¼€å§‹å·¥ä½œå†…å®¹</code></p><p><code>å¯¹äºè¿™ä¸€ç‚¹ï¼Œæˆ‘æ–°çš„åšå®šçš„è®¤ä¸ºï¼Œäººæ°¸è¿œä¸å¯èƒ½æœ‰å‡†å¤‡å¥½çš„é‚£ä¸€åˆ»ï¼Œæˆ‘ä»¬åªä¼šåœ¨ä¸æ–­å°è¯•ä¸­å®Œå–„è‡ªå·±</code></p></li></ol><h4 id="ç¬¬äºŒé˜¶æ®µ"><a href="#ç¬¬äºŒé˜¶æ®µ" class="headerlink" title="ç¬¬äºŒé˜¶æ®µ"></a>ç¬¬äºŒé˜¶æ®µ</h4><ol><li><p>æ—¶é•¿ï¼šä¸‰å¤©</p></li><li><p>ç›®æ ‡ï¼šç®€è¦æ¡†æ¶èµ°ä¸€é</p></li><li><p>å¥–åŠ±ï¼š<strong>ä¹°ä¸¤æœ¬çº¸è´¨ä¹¦</strong></p></li><li><p>æ æ†è§£ï¼š<strong>ç¡çœ  ç•ªèŒ„æ—¶é—´ æ—©æ™šè¯»ä¹¦</strong></p></li><li><p>æ¨¡ç‰ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181806375.png" alt="image-20231218180628341"></p></li></ol><ol start="6"><li><p><strong>åæ€ä¸æ€»ç»“</strong></p><ol><li><p>day1</p><p><code>åœ¨åˆ¶å®šå¥½è®¡åˆ’åï¼Œå¯¹è‡ªå·±è¦åšå¯¹äº‹æƒ…ä¿æŒç»å¯¹çš„æœä»ï¼Œå…³é—­å¯èƒ½çš„å¹²æ‰°ï¼Œå…è®¸å¦„å¿µï¼Œä½†å®ƒçš„å‡ºç°æ—¶æœºä¸åº”è¯¥æ˜¯æ­£å¸¸çš„æµç¨‹å†…</code> </p><p>è¦åšçš„ä¸¾æªï¼šåœ¨ä¸“æ³¨æ—¶ã€‚å…³é—­ç»å¸¸å‘æ¶ˆæ¯çš„ç¾¤</p></li><li><p>day2</p><p><code>ç”Ÿæ´»æ˜¯å……æ»¡ä¸ç¡®å®šæ€§çš„ï¼Œæˆ‘èƒ½åšï¼Œå°±æ˜¯å¢å¼ºè‡ªå·±çš„ç¡®å®šæ€§ã€ç¨³å®šæ€§ã€‚å½“å¤§æµªæ·˜æ²™è¿‡åï¼Œç•™ä¸‹çš„éƒ½æ˜¯è¶³å¤Ÿé¡½å¼ºã€è¶³å¤Ÿç¨³å®šçš„äº‹ç‰©</code></p><p>è¦åšçš„ä¸¾æªï¼šå¯¹è®¡åˆ’å¥½çš„äº‹æƒ…ä¿æŒæœ€èµ·ç çš„å°Šé‡</p></li><li><p>day3</p><p>ä»Šæ—¥é¦–è¦çš„ä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œè€Œä¸”çŠ¯äº†å¾ˆå¤šé”™è¯¯ï¼š<code>åœ¨æ‰“æ¸¸æˆçš„åŒæ—¶æ— ç›®çš„çš„çœ‹ç¢ç‰‡è§†é¢‘</code>ã€<code>æƒ…ç»ªä¸ç¨³å®š</code>ã€<code>ä¸æƒ³åšã€ä½†å¦‚æœæ¨è¿Ÿåªä¼šè®©äº‹æƒ…æ›´ç³Ÿçš„çš„äº‹ä»¶æ€»ç»™è‡ªå·±æ‰¾ç†ç”±é€ƒé¿</code>ã€<code>é™·å…¥äº†å¯æ€•çš„æ— é™åˆ¶çš„çœ‹è§†é¢‘æ™šç¡ä¸­</code></p><p>æ•…è€Œï¼Œæ…é‡å†³å®šé‡‡å–æœ€é¡¶æ ¼çš„æƒ©ç½šï¼šæœ¬é˜¶æ®µ+2å¤©</p><p><strong>è¿™2å¤©åœ¨å®Œæˆå›ºæœ‰çš„ï¼ˆä»»åŠ¡é‡-1hï¼‰ä»»åŠ¡åŸºç¡€ä¸Šï¼Œè¿˜å¿…é¡»ä¿è¯è¿™äº›é”™è¯¯ä¸ä¼šé‡çŠ¯</strong></p><p>ä½ çŸ¥é“çš„ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„å¾ˆå¤šå¹´ä»¥å¾ˆå¤šæ–¹å¼æµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œå¦‚æœä½ è¿˜æƒ³æˆä¸ºä¸€ä¸ªä½ è®¤å¯çš„äººï¼Œé‚£è¿™æ®µè‰°éš¾çš„å²æœˆæ˜¯æˆ‘ä»¬ç»ä¸å¯é€ƒé¿çš„ã€‚</p><ol><li><p>day1</p><p>ä»Šå¤©å°½åŠ›å®Œæˆäº†ä¸€éƒ¨åˆ†çš„ä»»åŠ¡ï¼Œä½†ä¹Ÿæš´éœ²å‡ºä¸€äº›æ·±å±‚æ¬¡çš„é—®é¢˜ï¼š<code>ä¸€ä¸ªäººçš„æ—¶å€™ï¼Œæ²¡æœ‰å®Œå…¨ä¸“æ³¨äºè‡ªå·±çš„äº‹æƒ…ï¼Œè€Œæ˜¯è¢«å½¢å½¢è‰²è‰²çš„è¯±æƒ‘ç‰µå¼•ç€èµ°</code>ï¼Œè¦åšçš„æ”¹è¿›å¾ˆæ˜ç¡®ï¼šå¯¹å·²ç»è®¡åˆ’å¥½çš„äº‹æƒ…ä¿æŒè¶³å¤Ÿçš„æ•¬æ„</p></li><li><p>day2</p><p>ä»Šå¤©ä¸¥æ ¼æ„ä¹‰ä¸Šåªè¯æ˜äº†ä¸€ä»¶äº‹ï¼š<code>ç¡çœ æœ‰å¯èƒ½æ˜¯æ‰“å¼€æ½˜å¤šæ‹‰é­”ç›’çš„é’¥åŒ™ã€ä¹Ÿå¯èƒ½æ˜¯å¼€å¯å‘ä¸Šçš„åŠ©æ¨å™¨</code></p></li></ol></li></ol></li></ol><h4 id="ç¬¬ä¸‰é˜¶æ®µ"><a href="#ç¬¬ä¸‰é˜¶æ®µ" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µ"></a>ç¬¬ä¸‰é˜¶æ®µ</h4><blockquote><p>ç¬¬ä¸‰é˜¶æ®µçš„O-å³è§£å†³ç¬¬äºŒé˜¶æ®µå‡ºç°çš„æ¯”è¾ƒæ˜æ˜¾çš„é—®é¢˜ï¼Œæœ€ç»ˆè¾¾åˆ°ä¸€ä¸ªåŸºæœ¬ç¨³å®šçš„çŠ¶æ€</p><ol><li>åœ¨æ‰“æ¸¸æˆçš„åŒæ—¶æ— ç›®çš„çš„çœ‹ç¢ç‰‡è§†é¢‘</li><li>æƒ…ç»ªä¸ç¨³å®š</li><li>ä¸æƒ³åšã€ä½†å¦‚æœæ¨è¿Ÿåªä¼šè®©äº‹æƒ…æ›´ç³Ÿçš„çš„äº‹ä»¶æ€»ç»™è‡ªå·±æ‰¾ç†ç”±é€ƒé¿</li><li>é™·å…¥äº†å¯æ€•çš„æ— é™åˆ¶çš„çœ‹è§†é¢‘æ™šç¡ä¸­</li></ol></blockquote><ol><li><p>æ—¶é•¿ï¼šäº”å¤©</p></li><li><p>ç›®æ ‡ï¼šç®€è¦æ¡†æ¶èµ°ä¸€é</p></li><li><p>å¥–åŠ±ï¼š<strong>ç•™ä¸€ä¸ªå°æ—¶å¥½å¥½æ€è€ƒä¸‹æˆ‘ä»¬ä¸¤çš„æœªæ¥</strong></p></li><li><p>æ æ†è§£ï¼š<strong>ç¡çœ  ä¸“æ³¨ä¼‘æ¯/å­¦ä¹  æ—©æ™šè¯»ä¹¦</strong></p></li><li><p>æ¨¡ç‰ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202312181806375.png" alt="image-20231218180628341"></p></li></ol><ol start="6"><li><p>åæ€ä¸æ€»ç»“</p><ol><li><p>day1</p><p>ç»ˆç©¶è¿˜æ˜¯ç¢°åˆ°äº†è¿™å µå¢™</p><p>æ¯«æ— ç–‘é—®ï¼Œè¿™æ˜¯æ‰§è¡Œè¿™ä¸ªè®¡åˆ’ä»¥æ¥æœ€å‡¶é™©çš„ä¸€ä¸ªé˜¶æ®µï¼Œè™½ç„¶ä»…ä»è¿™ä¸€å¤©å®Œæˆçš„äº‹é¡¹æ¥è¯´ï¼Œç”šè‡³å¯ä»¥è¯´å®Œå…¨æ˜¯æ­£å‘çš„åé¦ˆ</p><p>ä½†å¹³é™èƒŒåçš„å¤±è½ã€èŒ«ç„¶ã€ä¸åšå®šå´åœ¨ä¸æ–­çš„æ­»ç°å¤ç‡ƒ</p><p>è¿™ç§æƒ…å†µçš„ç»ˆæè§£æ³•æ˜¯å»ºç«‹ä¿¡ä»°ï¼Œä½†è°ˆä½•å®¹æ˜“ï¼Œç°é˜¶æ®µæ²¡æœ‰éå¸¸æ˜ç¡®çš„ç›®æ ‡ã€æ²¡æœ‰ç‰©è´¨åé¦ˆã€é™ç¥åé¦ˆå¾ˆéš¾å®ç°è‡ªæˆ‘è®¤å¯ã€‚</p><p>æ²¡æœ‰ä¸€ä¸ªç»å¯¹åˆé€‚ã€ç»å¯¹å®Œç¾çš„è§£æ³•ï¼Œå¯¹æ­¤ï¼Œå†³å®šå»¶è¿Ÿä¸¤å¤©ã€‚</p><p><code>è®©ç»å¯¹çš„æ­£å‘é™åˆ¶åœ¨è§„åˆ™ä¸‹è¿è½¬ï¼Œæ—¶é•¿å…­å¤©ï¼Œè®¡åˆ’å‘½ä»¤ï¼šç ´æ™“</code></p><p>å…·ä½“æ‰§è¡Œï¼šå¤§çš„å¾ªç¯ä¸å˜ï¼Œæ¯”é‡å˜åŒ–å¦‚ä¸‹ï¼š</p><ol><li>å­¦ä¹ å››å°æ—¶ï¼šå›ºå®šæ—©8ä¸­12:ä¸»è¦æ˜¯ç®—æ³•ã€é¡¹ç›®</li><li>è¿åŠ¨ä¸€å°æ—¶ï¼šåˆä¼‘è¿‡åä¸€å°æ—¶è¿åŠ¨æ—¶é—´</li><li>è¯»ä¹¦ä¸‰å°æ—¶ï¼šè¿åŠ¨è¿‡åè¯»ä¹¦ä¸‰å°æ—¶</li><li>åšé¥­åƒé¥­ä¸‰å°æ—¶ï¼šä¿æŒå¹³é™ã€åšå®šã€æ”¾æ¾</li><li>ç¡çœ ï¼šæ—©7ç‚¹åŠæ™š10</li></ol></li><li><p>day2</p><p>å•¥ä¹Ÿä¸æ˜¯ï¼ŒåŠ ç»ƒä¸¤å¤©:ä¸»è¦ç›®æ ‡ï¼šå¯¹æ¯ä¸ªå­ç³»ç»Ÿä¸¥æ ¼æ‹†è§£ï¼Œæ‰¾åˆ°é—®é¢˜ï¼Œç¬¬äºŒå¤©å¿…é¡»è§£å†³é—®é¢˜</p><ol><li><p>day1</p><p>å¹²å¾—æ¼‚äº®ï¼Œç»§ç»­åŠ æ²¹ æœ€æµ®èºçš„é˜¶æ®µï¼Œä¸€å®šè¦æœ€åšå®ˆ</p></li></ol><ol start="2"><li><p>day2</p><p>è¦è·¨å¹´äº†ï¼Œå¦‚æœè¦å¯¹2023çš„è¿‡å¾€æ¦‚æ‹¬çš„è¯ï¼Œé‚£ä¾¿æ˜¯ï¼š<code>å¦‚æ˜¯å› ï¼Œå¦‚æ˜¯æœ</code></p><p><code>2024ï¼Œæ–°å¹´ä¼Šå§‹ï¼Œä¸‡è±¡æ›´æ–°ã€‚</code></p></li></ol></li><li><p>day3</p><ol><li><p>é‡å¤æ‰§è¡Œï¼Œè®¡åˆ’ä¸å˜</p><p>å®Œç¾çš„ä¸€å¤©ï¼Œè®¡åˆ’æ‰§è¡Œçš„éå¸¸æ£’ï¼Œå†æ›´æ–°ä¸€å¥è¯ï¼š</p><blockquote><p>ä¹ æƒ¯ä¸æ˜¯ä¸€å‘³çš„å¼ºè¿«è‡ªå·±åšæŒï¼Œè€Œæ˜¯å‘è‡ªå†…å¿ƒçš„æƒ³æˆä¸ºé‚£æ ·çš„äºº</p></blockquote></li></ol></li><li><p>day4</p></li></ol></li></ol><p>â€‹                    è®¡åˆ’ï¼šé‡å¤æ‰§è¡Œã€è®¡åˆ’ä¸å˜</p><p>â€‹                    å®Œç¾çš„ä¸€å¤©ï¼Œè®¡åˆ’æ‰§è¡Œçš„åŒæ ·å¾ˆæ£’ï¼Œé’ˆå¯¹ç¡çœ çš„ä¹ æƒ¯æ›´æ–°ä¸€å¥è¯ï¼š</p><p>â€‹                    <code>å¸¸æ€€æ„Ÿæ©ï¼Œä½ è‹¥ç››å¼€ï¼Œé²œèŠ±è‡ªæ¥</code></p><p>â€‹        5.    Day5    </p><p>â€‹                è®¡åˆ’ä¸å˜ï¼Œå†²å†²å†²</p><p>â€‹                æ€»ç»“ï¼šå……æ»¡å†²çªçš„ä¸€å¤©ï¼Œä¸ç¡®å®šäº‹æƒ…å¯¹ç¨³å®šäº‹æƒ…çš„æ‰§è¡Œç ´åæ€§æå¤§ã€‚å¦å¤–æš´éœ²å‡ºè¯­è¨€æ²Ÿé€š                ä¸Šå­˜åœ¨é—®é¢˜ï¼Œéœ€è¦è¯»ä¹¦+æ²Ÿé€šæ”¹å–„ã€‚æ­¤å¤–ï¼Œ<code>æœ€é‡è¦çš„ä»æ˜¯ç¡çœ ï¼Œå°±æ˜¯å¤©å¡Œä¸‹æ¥ï¼Œç¡çœ è¯¥ç¡ä¹Ÿ                        å¿…é¡»ç¡</code>ã€‚æ€»ä¹‹ï¼Œæ˜¯ç ´åä¹ æƒ¯çš„ä¸€å¤©ï¼Œå…è®¸å”¯äºŒçŠ¯é”™çš„æœºä¼šã€‚</p><h4 id="ç¬¬å››é˜¶æ®µ"><a href="#ç¬¬å››é˜¶æ®µ" class="headerlink" title="ç¬¬å››é˜¶æ®µ"></a>ç¬¬å››é˜¶æ®µ</h4><ol><li><p>æ—¶é•¿ï¼šä¸ƒå¤©</p></li><li><p>ç›®æ ‡ï¼š<strong>èšç„¦ç¡çœ ã€å·©å›ºä¹ æƒ¯æ¡†æ¶ï¼Œåšå¥½å·¥ä½œå‡†å¤‡</strong></p></li><li><p>å¥–åŠ±ï¼š<strong>å‘¨æœ«ç¡ä¸ªæ‡’è§‰</strong></p></li><li><p>æ æ†è§£ï¼š<strong>ç¡çœ </strong></p></li><li><p>æ¨¡ç‰ˆï¼š</p><p> <img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202401041223285.png" alt="image-20240104122330764"></p></li></ol><ol start="6"><li>åæ€ä¸æ€»ç»“</li></ol><ol><li><p>day1</p><p>æŒ‰æ¨¡ç‰ˆèµ°</p><p>æ€»ç»“ï¼šåªèƒ½è¯´å±å®èµ°çš„ä¸æ€ä¹ˆæ ·ï¼Œä»Šå¤©ä¹Ÿå°±ç®—æ˜¯è€—å…‰äº†å”¯äºŒçš„ä¸¤æ¬¡çŠ¯é”™æœºä¼šã€‚éœ€è¦é‡ç‚¹åŠ å¼ºçš„æ˜¯ï¼š</p><p>å¿…é¡»è®©åºŠå’Œç¡çœ é«˜ç»‘å®š</p></li></ol><ol start="2"><li><p>day2</p><p>æ˜¨æ™šçš„ç¡çœ ç¡®å®èµ·äº†ä¸ªåå¤´ï¼Œå…¶ä»–è¡¨ç°è¿˜æ˜¯ä¸é”™çš„ï¼Œå€¼å¾—æœŸå¾…</p><p>æ€»ç»“ï¼šä»Šå¤©çš„è¡¨ç°å…¶å®ä¸ç®—å·®ï¼Œæ¯•ç«Ÿæ ¸å¿ƒçš„äº‹æƒ…éƒ½åšäº†ï¼Œä¹ æƒ¯ä¹Ÿæ‰§è¡Œäº†ã€‚ä½†æ˜¯åœ¨å¯¹æœªæ¥çš„å¤„ç†ä¸Šæœ‰äº›ä¸¾æ£‹ä¸å®šï¼Œæ˜¾è€Œæ˜“è§çš„ï¼Œæˆ‘éœ€è¦ä¸°å¯Œäººé™…äº¤å¾€ã€ä¸“ä¸šçŸ¥è¯†è¡¥å……ã€ç²¾åŠ›ç®¡ç†ã€æƒ…ç»ªç®¡ç†å„ç§äº‹æƒ…ï¼Œè€Œæ—¶é—´çŸ­æš‚ï¼Œç°ä¸–å®‰é€¸ï¼Œå±…å®‰è€Œä¸æ€å±ï¼Œç»ˆæœ‰ä¸€ç¥¸å‘€</p></li><li><p>Day3</p><p>ä¿è¯è¿™æ ·çš„è”åŠ¨ï¼šåšé¥­-è¯»ä¹¦-é”»ç‚¼ åæ€ å‡†å¤‡ç§Ÿæˆ¿ 11ç‚¹å‰ç¡è§‰</p></li><li><p>day4</p><p>å·®åŠ²çš„ã€å¤±å»ç›®æ ‡çš„ä¸€å¤©ã€‚</p><p>è¿™å››å¤©å±å®ä¸å¯¹åŠ²ï¼Œå¿…é¡»æ‰­è½¬è¿™ç§é¢“åŠ¿ï¼Œé‡æ–°å¼€å§‹è¿™ä¸ªé˜¶æ®µï¼ï¼ï¼</p></li></ol><hr><ol><li><p>day1</p><p>å­¦ä¹ ç¡çœ çŸ¥è¯†ï¼Œæ”¹å˜ç¡çœ æ„è¯†</p><p>æ€»ç»“ï¼šä»Šå¤©ç™½å¤©æ•´ä½“è¿˜ä¸é”™ æ™šä¸Šç¡çœ æ„è¯†ä¸é”™ ä½†å®é™…è¡¨ç°ä¸ä½³ ä½†è¿™ä¹Ÿä¸æ˜¯ä¸€æ—¶åŠä¼šå°±èƒ½åšæˆçš„äº‹æƒ…ï¼Œè¦å•ç‹¬å¼€ä¸ªç¡çœ ç³»åˆ—ï¼Œæ•´ä¸ª21å¤©çš„ï¼Œå†æ¥å†å‰å§</p></li><li><p>day2</p><p>æ²¡åˆ«çš„ï¼Œä¿æŒä¹ æƒ¯æƒ¯æ€§ï¼Œåšäº›å…·ä½“çš„äº‹æƒ…ï¼šå·¥å…·ç¯‡ã€ç§Ÿæˆ¿ç¯‡ã€è½¬ç§Ÿç¯‡ã€ç¡çœ ç¯‡</p></li></ol><hr><p>ä¸­é—´åœé¡¿äº†å¾ˆå¤šå¤©ï¼Œç©¶å…¶åŸå› æ˜¯åå¹´å¦‚ä¸€æ—¥çš„å¤§è„‘ç»“æ„è¯ç—…å˜æ‰€å¯¼è‡´çš„ä¸€ç§å‘†æ»çŠ¶æ€ï¼Œä½†å¥½çš„ä¸œè¥¿ã€ä¹ æƒ¯ä»ç„¶è¦åšæŒè´¯å½»ã€‚ä½†åŒæ—¶ä¹Ÿå¿…é¡»æœ‰åº•çº¿ï¼šå°Šé‡è‡ªå·±æ‰€åšçš„æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œå…è®¸çŠ¯é”™ï¼Œä½†æœºä¼šæœ‰é™ï¼Œåˆ°æ­¤åˆ»å·²ç»ç”¨å®Œäº†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„ç³»ç»ŸåŒ–æ”¹å˜éœ€è¦å…¨èº«å¿ƒæŠ•å…¥ï¼Œæ²¡æœ‰buffçš„ä½™åœ°äº†ã€‚</p><hr><ol><li><p>day1</p><p>æ—©ä¸Šå†…å¾ªç¯ï¼ˆæ´—è„¸åˆ·ç‰™é”»ç‚¼æ—©ç‚¹å–æ°´è®¡åˆ’æ•£æ­¥ï¼‰-ã€‹å­¦ä¹ -ã€‰é¥®é£Ÿå­ç³»ç»Ÿ-ã€‹ä¸­åˆå†…å¾ªç¯ï¼ˆå­¦ä¹ -ã€‰è¿åŠ¨-ã€‹å­¦ä¹ ï¼‰-ã€‰é¥®é£Ÿå­ç³»ç»Ÿ-ã€‹å­¦ä¹ -ã€‰è¯»ä¹¦-ã€‹ç¡çœ </p><p>æ€»ç»“ï¼šè¿˜ä¸é”™çš„ä¸€å¤©ï¼Œç»§ç»­ä¿æŒ</p></li><li><p>day2</p><p>ç»§ç»­ï¼</p><p>æ€»ç»“ï¼šä¸é”™çš„ä¸€å¤©ï¼Œç»§ç»­åšæŒï¼Œå”¯ä¸€çš„ç‘•ç–µå°±æ˜¯ï¼šç¡è§‰å°±æ˜¯ç¡è§‰ï¼Œä¸è¦ä¹±YY</p></li><li><p>day3</p><p>å°å“²å†²å†²å†²</p><p>æ€»ç»“ï¼šå…¶ä»–æŒ‰éƒ¨å°±ç­ï¼Œè¡¨ç°è¿˜ä¸é”™ï¼Œä½†æ˜¯ç¡çœ çš„é—®é¢˜ä¾ç„¶å¾ˆçªå‡ºï¼Œè€Œå¯¼è‡´ç¡çœ é—®é¢˜çš„å°±æ˜¯yy/æƒ…ç»ªï¼Œè¿™ä¸ƒå¤©çš„å°å‘¨æœŸå°½å…¨åŠ›è§£å†³è¿™ä¸ªé—®é¢˜</p></li><li><p>day4</p><p>æ¬å®¶çš„ä¸€å¤©ï¼Œæ— å¯åšéï¼Œé‡ç‚¹å…³æ³¨ä¸‹ç¡çœ </p><p>æ€»ç»“ï¼šç¡çœ ç»§ç»­åŠ å¼ºï¼ŒåŸ¹å…»ä»ªå¼æ„Ÿ</p></li><li><p>day5</p><p>æ€»ç»“ï¼šåˆ«åœ¨æ— æ„ä¹‰åœ°å¿™ç¢Œä¸­å¤±å»æ„ŸçŸ¥æ–¹å‘çš„èƒ½åŠ›ï¼Œå®å¯ç—›è‹¦ï¼Œç»ä¸éº»æœ¨</p></li><li><p>day6</p><p>ä»Šå¤©æœ€æ·±çš„ä½“éªŒï¼šä¹±èŠ±æ¸æ¬²è¿·äººçœ¼ï¼Œè¦ç¡®å®šçš„é“¾è·¯ï¼Œè¦å­¦çš„å†…å®¹ï¼Œè¦å°è¯•çš„æŠ€æœ¯ï¼Œå¤ªå¤šå¤ªå¤šäº†</p><p>ä½†è¿·èŒ«åªèƒ½æ˜¯ä¸€æ—¶çš„ï¼Œåšå®šåœ°æ…¢æ…¢èµ°å§ï¼Œè¿™ä¸ªå‘¨å…­å¯ä»¥åœ¨å·¥å…·è¿™éƒ¨åˆ†æ·±è€•ä¸‹ï¼Œå‘¨æœ«åœ¨ä»£ç effective javaé¡¹ç›®éƒ¨åˆ†æ·±è€•ä¸‹</p><p>å€¼å¾—è‚¯å®šçš„æ˜¯ç¡çœ è¿˜ä¸é”™ï¼Œç»§ç»­å‡ºå‘å§</p></li><li><p>day7</p><p>ä»ä»Šå¤©èµ·ï¼Œç®¡ç†è®¡åˆ’çš„ç­–ç•¥æœ‰æ‰€è½¬å˜ï¼Œç¡çœ ç”±21å¤©ä»¥é™åˆ¶åŠ¨è®¡åˆ’ä¸“é¡¹ç®¡ç†ï¼Œè¿™ä¸ªç³»åˆ—åªå¤„ç†ç™½å¤©çš„äº‹æƒ…ï¼Œæ—©èµ·åšæ˜¨å¤©çš„å›é¡¾ï¼Œä»¥åŠä»Šå¤©çš„è®¡åˆ’ï¼Œæ™šç¡ä¹‹å‰åšä¸€å¤©çš„æ€»ç»“ï¼ŒåŒæ—¶åšè®¡åˆ’æ‰§è¡Œçš„æ€»ç»“</p><p>æ€»ç»“ï¼šä»Šå¤©æ€»ä½“è¿˜ä¸é”™ï¼Œå› ä¸ºç©æ¸¸æˆè€½æäº†ä¸€äº›æ—¶é—´ï¼Œå…¶ä»–éƒ½æŒ‰éƒ¨å°±ç­å®Œæˆäº†ã€‚å¯¹äºæ¸¸æˆï¼Œæ€»æœ‰ç§æ™¦æ¶©éš¾æ˜çš„æƒ…ç»ªï¼Œæƒ³æ”¾æ¾ç©ä¼šä½†åˆæ”¶ä¸ä½ï¼Œç°åœ¨è¿™ä¸ªé˜¶æ®µéå¸¸é‡è¦ï¼Œæš‚æ—¶å…ˆä»æºå¤´è§£å†³é—®é¢˜ï¼Œèšç„¦ç²¾åŠ›åœ¨å·¥ä½œä¸Šã€‚</p></li></ol><hr><p>ä¸ƒå¤©å°é˜¶æ®µå®Œç»“äº†ï¼Œæœ‰æ”¶è·ï¼Œæ¯•ç«Ÿåœ¨æ—©ä¸Šå°é˜¶æ®µå’Œä¸­åˆè¿ç»­ä¹ æƒ¯ä¸Šåšçš„è¿˜ä¸é”™ï¼Œä½†å¯æƒœçš„æ˜¯ï¼Œæ•´ä¸ªç³»ç»Ÿè¿˜å·®ä¸€ä¸¤æ­¥æ²¡æœ‰èµ°é€šï¼Œä¿—è¯­è¯´ï¼Œè¡Œç™¾é‡Œè€…åŠä¹åï¼Œç°åœ¨è¦è¿›å…¥è¿™ä¸ªè‰°éš¾çš„æ”»åšåŒºäº†ï¼Œæ”»åšåŒºé¢ä¸´çš„ä¸»è¦é—®é¢˜æœ‰ä¸¤ç‚¹ï¼š<code>æ¸¸æˆ</code>ã€<code>æ€ç»´</code></p><p>è¯´æ˜¯æ¸¸æˆï¼Œå…¶å®æŠ½è±¡ç‚¹è¯´ï¼Œæ˜¯ç©è¿™ä¸ªæ¸ é“ç¼ºä¹åˆé€‚çš„æƒ…ç»ªå‡ºå£ï¼Œæš‚æ—¶å…ˆç”¨è›‹ä»”æ´¾å¯¹è¿™ç§è½»å¨±ä¹çš„æ–¹å¼ä»£æ›¿ç‹è€…ï¼Œæ€ç»´æ–¹é¢</p><p>è¿˜æœ‰ä¸€ç‚¹éœ€è¦è¡¥å……çš„ï¼šæ—¢ç„¶æ˜¯å·¥ä½œä¸ºä¸»ä½“ï¼Œé‚£å»ºç«‹å¼€å§‹ä¸€å¤©å·¥ä½œçš„è¿ç»­ä»ªå¼ä¹ æƒ¯å¾ˆé‡è¦ï¼Œä¸»è¦å®‰æ’å¦‚ä¸‹ï¼š</p><p><code>ä¸ƒç‚¹æ´—è„¸åˆ·ç‰™åƒæ—©ç‚¹å°è¿åŠ¨-8ç‚¹åˆ°å…¬å¸-15åˆ†é’Ÿè·‘æ­¥æœº-åŠå°æ—¶ä»£ç è§£ææ—¶é—´-æ˜¨æ—¥å›é¡¾ä¸ä»Šæ—¥è®¡åˆ’-ä¸Šç­</code></p><h4 id="ç¬¬äº”é˜¶æ®µ"><a href="#ç¬¬äº”é˜¶æ®µ" class="headerlink" title="ç¬¬äº”é˜¶æ®µ"></a>ç¬¬äº”é˜¶æ®µ</h4><ol><li><p>æ—¶é•¿ï¼šåå››å¤©</p></li><li><p>ç›®æ ‡ï¼šå·¥ä½œç³»ç»Ÿæ”»åšå…‹éš¾</p></li><li><p>å¥–åŠ±ï¼š<strong>1æœˆ3æ—¥å—äº¬èµ°ä¸€è¶Ÿ</strong></p></li><li><p>æ æ†è§£ï¼š<strong>ç¡çœ  å·¥ä½œæ—¥æ—©ä»ªå¼ä¹ æƒ¯</strong></p></li><li><p>æ¨¡ç‰ˆï¼š</p><p> <img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202401211141101.png" alt="image-20240121114129962"></p></li><li><p>è®¡åˆ’ä¸æ€»ç»“</p><ol><li><p>day1</p><p>é“é˜»ä¸”é•¿ï¼Œè¡Œåˆ™å°†è‡³</p><p>æ€»ç»“ï¼šæ•´ä½“è¿˜æ˜¯è¯´çš„è¿‡å»çš„ï¼Œç›®å‰æ‘†åœ¨çœ¼å‰æœ€å¤§çš„ä¸€ä¸ªé—®é¢˜ï¼šæ‚å¿µå¤ªå¤šï¼Œä¼‘æ¯ä¸å¥½ã€‚ä½†è¿™ä¸ªç³»åˆ—ï¼Œè¿™ä¸ªé˜¶æ®µæœ€é‡è¦çš„ä»æ˜¯æ—©ä¸Šè¿ç»­çš„ä»ªå¼ä¹ æƒ¯ã€‚è€Œå¯¹äºŒåä¸€å¤©è®¡åˆ’ï¼Œå¿…é¡»å†³æ–­æ€§åœ°æ”¹å˜æ–¹å‘ã€‚</p></li><li><p>day2</p><p>æ…¢æ…¢è®©ä»ªå¼ä¹ æƒ¯å˜å¾—æœ‰è¿¹å¯å¾ª</p><p>æ€»ç»“ï¼šæ„ŸçŸ¥ï¼Œæ„ŸçŸ¥ï¼Œæ„ŸçŸ¥ï¼</p></li><li><p>day3</p><p>æ—©ä¸Šè¿˜æ˜¯æœ‰å¿…è¦å®šåŸºè°ƒçš„ï¼</p><p>æ€»ç»“ï¼šåœ¨ä¸æ–­çš„å¤±å»æ„ŸçŸ¥çš„èƒ½åŠ›çš„åŒæ—¶ï¼Œå¯¹ä¹ æƒ¯ä»ªå¼çš„æ‰§è¡Œç¨‹åº¦ä¹Ÿé™å¾—å¾ˆä½ï¼Œæ¶æ€§å¾ªç¯ä¸‹å¯¹è‡ªå·±è®¡åˆ’çš„èµ·ç å°Šé‡ä¹Ÿç¼ºå¤±äº†ï¼Œå¿…é¡»æ‰“ç ´è¿™ä¸ªåçš„å¾ªç¯</p></li><li><p>day4</p><p>å‘¨å…­äº†ï¼Œä»Šå¤©å’Œæ˜å¤©ä¼šæ˜¯éå¸¸ä¸¥æ ¼çš„ä¸€å¤©ï¼Œæ„åœ¨é‡å¡‘ä¹ æƒ¯ï¼š</p><ol><li>å­¦ä¹ ä¸­é—´ç©¿æ’ä¸€æ¬¡å“‘é“ƒ</li><li>ä¸“æ³¨ä¼‘æ¯ï¼Œä¸“æ³¨å­¦ä¹ </li><li>æ™šæ€»ç»“çš„ä¹ æƒ¯å¿…é¡»æ‹¾èµ·æ¥</li><li>æ™šä¸Šä¸è¦å†æ‰“æ¸¸æˆäº†ï¼Œç¡å‰åŠå°æ—¶è¯»ä¹¦æ•´èµ·æ¥</li><li>11ç‚¹å‰ç¡è§‰</li></ol><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªé˜¶æ®µæœ€æœ€é‡è¦çš„å°±æ˜¯ä¿æŒä½“èƒ½ç²¾åŠ›ï¼Œåšåˆ°è¯¥ä¸ç”¨å¤§è„‘çš„æ—¶å€™å°±ä¸ç”¨å¤§è„‘</p></li><li><p>day5</p><p>ç›´æ¥è¿‡åº¦åˆ°å‘¨ä¸€äº†ï¼Œè¿™ä¸ªé˜¶æ®µçš„æ ¸å¿ƒæ˜¯æ—©æ™¨çš„ä»ªå¼ä¹ æƒ¯ï¼Œéå¸¸æœ‰éš¾åº¦ï¼Œä½†å€¼å¾—ä¸€è¯•</p><p>æ€»ç»“ï¼šä»Šå¤©é™¤äº†æ—©æ™¨çš„ä»ªå¼ä¹ æƒ¯ï¼Œå…¶ä»–éƒ½ä¸é”™ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œé“é˜»ä¸”é•¿ï¼Œè¡Œåˆ™å°†è‡³ï¼</p></li><li><p>å‘¨äºŒ</p><p>ç°åœ¨æ²¡æœ‰èƒ½å¤Ÿæ‰¿è¢­çš„è¿è´¯çš„ä»ªå¼ä¹ æƒ¯ï¼Œè¿˜æ˜¯éœ€è¦å°½å¿«åŸ¹å…»å‡ºæ¥</p><p>æ€»ä½“æ¥è¯´ï¼Œä»Šå¤©è¡¨ç°è¿˜æ˜¯æ¯”è¾ƒå¹³ç¨³çš„ï¼Œä¸å¥½çš„ä¸€ç‚¹åœ¨äºæ ¹æ·±è’‚å›ºçš„æ€è€ƒæ€ç»´ï¼Œè¿™ç‚¹éœ€è¦æ…¢æ…¢åšåŠªåŠ›ï¼ŒçŸ­æ—¶é—´å€’ä¹Ÿæ— ä¼¤å¤§é›…</p></li></ol></li></ol><h4 id="ç¬¬å…­é˜¶æ®µ"><a href="#ç¬¬å…­é˜¶æ®µ" class="headerlink" title="ç¬¬å…­é˜¶æ®µ"></a>ç¬¬å…­é˜¶æ®µ</h4><p>æ²¡æœ‰æŒ‰ç…§è‡ªå·±çš„è®¾å®šå¹³æ»‘çš„è¿‡æ¸¡åˆ°è¿™ä¸ªé˜¶æ®µè¿˜æ˜¯æŒºé—æ†¾çš„ï¼Œä½†å¹´å…³å°†è‡³ï¼Œæ€»è¦åšäº›äº‹æƒ…ï¼Œä¸ºç³Ÿç³•çš„2023åšæœ€åçš„å‘Šæ…°</p><p>è¿™ä¸ªé˜¶æ®µä»…6å¤©ï¼Œè¦åšçš„äº‹æƒ…ä¹Ÿå¾ˆæ˜ç¡®ï¼šä»ªå¼ä¹ æƒ¯ï¼Œä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ—©ä¸Šï¼ˆåˆ·ç‰™æ´—è„¸å‡ºå‘ä¸“é¡¹ï¼‰ä¸­åˆï¼ˆä¿è¯æ¯æ¬¡ä¼‘æ¯æ—¶é•¿okï¼‰æ™šä¸Šï¼ˆæ•£æ­¥ï¼‰</p><hr><p>Day1</p><p>å¯èˆªå§</p><p>æ€»ç»“ï¼šåœ¨ä¸€ä¸ªå°é˜¶æ®µå†…ï¼Œåªè¦ç›¯ç´§ç›®æ ‡ä¸è·‘åï¼Œæ”¶è·æ€»å½’è¿˜æ˜¯ä¸é”™çš„</p><p>è¯´å›ä¸¤ä¸ªä¸“é¡¹ï¼šæ—©ä¸Šok+ä¸­åˆæœªå®Œæˆ+æ™šä¸Šæœªæ•£æ­¥</p><p>Day2</p><p>æ€»ç»“ï¼šæ—©ä¸Š50%+ä¸­åˆ50%+æ™šä¸Šæœªå®Œæˆ</p><p>Day3</p><p>æ€»ç»“ï¼šæ—©ä¸Šæœªå®Œæˆ+ä¸­åˆæœªå®Œæˆ+æ™šä¸Š50%</p><p>Day4</p><p>æ€»ç»“ï¼šæ—©ä¸Šæœªå®Œæˆ+ä¸­åˆ30%+æ™šä¸Š100%</p><blockquote><p>äººä¹‹æ‰€ä»¥é•¿å­˜ï¼Œæ˜¯å› ä¸ºäººçš„è¿‡å»ã€ç°åœ¨ã€æœªæ¥æ˜¯ç›¸äº’äº¤ç»‡ï¼Œå½¼æ­¤å½±å“çš„</p></blockquote><hr><h2 id="æ–°å¹´æ–°æ°”è±¡"><a href="#æ–°å¹´æ–°æ°”è±¡" class="headerlink" title="æ–°å¹´æ–°æ°”è±¡"></a>æ–°å¹´æ–°æ°”è±¡</h2><p>æ–°çš„ä¸€å¹´å•¦ï¼Œå¥½çš„ä¸œè¥¿è¿˜æ˜¯åº”è¯¥åšæŒã€‚</p><p>ä»¥æ¨¡å—è‡ªå¾ªç¯ä¸ºæ ¸å¿ƒçš„åŸºç¡€å†å¤ç›˜ä¸‹ï¼Œæ•´ç†å‡ºä¸€å¥—æ–°çš„ï¼Œç»è¿‡æ£€éªŒçš„ï¼Œå¯æ‰§è¡Œçš„åŸåˆ™</p><p>åŸåˆ™ä¹‹ä¸Šï¼Œæ¨¡å—çš„è®¾å®šï¼Œè¦åšçš„äº‹æƒ…åŸºæœ¬ä¸å˜ã€‚å˜åŒ–çš„æ˜¯æ¯ä¸ªé˜¶æ®µçš„ç›®æ ‡</p><ol><li><p>åŸåˆ™ï¼ˆæ¯æ—¥ç¡å‰åæ€ï¼‰</p><table><thead><tr><th>åŸåˆ™</th><th>æè¿°</th><th>é‡è¦ç¨‹åº¦</th><th>å¤±ä¿¡çš„ä»£ä»·</th></tr></thead><tbody><tr><td>ç§¯æä¸»åŠ¨</td><td>ç›®æ ‡æ˜ç¡®ä¹‹åå°±ç«‹åˆ»å»åšï¼Œäººæ€§æ°¸è¿œæ˜¯æ‡’æƒ°çš„ï¼Œä¸€å®šè¦æ‘†è„±äººæ€§çš„å‘å¿ƒåŠ›</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆè¿åŠ¨ï¼‰+15min</td></tr><tr><td>å¹³ç¨³åšå®š</td><td>åšäº‹æƒ…æœ€é‡è¦çš„æ˜¯å¯é ï¼Œå¯ä¿¡èµ–</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆè¿åŠ¨ï¼‰+15min</td></tr><tr><td>å°‘è¯´å¤šåš</td><td>ä¸è¦çœ‹äººå¦‚ä½•è¯´ï¼Œè¦çœ‹ä»–æ€æ ·åš</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>å·¥ä½œ+30min</td></tr><tr><td>ä¿æŒæ›´æ–°</td><td>å»ºç«‹ä¸€ä¸ªçš„æ–°ç§©åºçš„è¿‡ç¨‹ä¸ä¼šä¸€å¸†é£é¡ºï¼Œä¸æ–­è¿­ä»£ç®—æ³•ã€ä¿æŒæ›´æ–°</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆè¿åŠ¨ï¼‰+15min</td></tr><tr><td>çœŸè¯šå®ˆä¿¡</td><td>å¾…äººæ¥ç‰©ï¼Œä¸è¿‡å¦‚æ˜¯</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸ªäººæˆé•¿ï¼ˆè¯»ä¹¦ï¼‰+15min</td></tr></tbody></table></li><li><p>æ–¹æ³•è®º</p><table><thead><tr><th>æ–¹æ³•è®º</th><th>æè¿°</th><th>è¡Œä¸ºä¿è¯</th><th>é‡è¦ç¨‹åº¦</th><th>å¤±ä¿¡çš„ä»£ä»·ï¼ˆå½±å“ç¬¬äºŒå¤©ï¼‰</th></tr></thead><tbody><tr><td>ç³»ç»Ÿè®º</td><td>å…ˆç³»ç»Ÿåæ¨¡å—</td><td>OKRç®¡ç† æœ‰è¿¹å¯å¾ª</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ç­åæ•£æ­¥15min</td></tr><tr><td>ç®¡ç†ç²¾åŠ›</td><td>ä¸“æ³¨å­¦ä¹  ä¸“æ³¨ä¼‘æ¯</td><td>ç•ªèŒ„æ—¶é—´</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ç­åæ•£æ­¥15min</td></tr><tr><td>å¾®ä¹ æƒ¯</td><td>å¯å°‘åšï¼Œä¸å¯ä¸åš</td><td>æ—©ä¸Šä»ªå¼ä¹ æƒ¯</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>æœ€å¤šå¯å¤±ä¿¡3æ¬¡ï¼Œæ¯æ¬¡å¤±ä¿¡ç½šè‡ªå·±æ—©ä¸Šæ—©èµ·åŠå°æ—¶</td></tr><tr><td>æŒæ§ä¹ æƒ¯</td><td>æç¤ºã€ååº”ã€å¥–åŠ±</td><td>æŒç»­è¿½è¸ª</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ç­åæ•£æ­¥15min</td></tr><tr><td>åˆ»æ„ç»ƒä¹ </td><td>ä¸“æ³¨ã€å›é¡¾</td><td>è´¹æ›¼å­¦ä¹ æ³•</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ç­åæ•£æ­¥15min</td></tr></tbody></table></li><li><p>ç³»ç»Ÿ</p><table><thead><tr><th>å››å¤§æ¨¡å—</th><th>æè¿°</th><th>ä¸¾ä¾‹</th><th>é‡è¦ç¨‹åº¦-ç°é˜¶æ®µ</th><th>å¤±ä¿¡çš„ä»£ä»·ï¼ˆå½±å“ç¬¬äºŒå¤©ï¼‰</th></tr></thead><tbody><tr><td><strong>ç”Ÿæ´»</strong></td><td><code>åƒ</code></td><td>æ—©é¤åˆé¤æ™šé¤</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>è‡ªå·±åšæ—©é¤</td></tr><tr><td></td><td><code>å–</code></td><td>å–æ°´</td><td>ğŸŒŸğŸŒŸğŸŒŸ</td><td>å–æ°´æ¬¡æ•°+1</td></tr><tr><td></td><td><code>ç©</code></td><td>å’Œä¹ã€å®¶äººã€æœ‹å‹èŠå¤©</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>å–æ°´çš„æ¬¡æ•°+1</td></tr><tr><td></td><td><code>ä¹</code></td><td>çœ‹åœ†è„¸çš„è§†é¢‘ã€æ•£æ­¥</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>å–æ°´çš„æ¬¡æ•°+1</td></tr><tr><td></td><td><code>ä¼‘æ¯</code></td><td>ç¡çœ ã€çŸ­ä¼‘æ¯</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç¬¬äºŒå¤©åˆä¼‘æè¡¨å¤šç¡15min</td></tr><tr><td><strong>å·¥ä½œ</strong></td><td><code>å·¥ä½œå†…è‡ªèº«</code></td><td>å®Œæˆæ—¥å¸¸éœ€æ±‚ä»»åŠ¡</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç©ã€ä¹æ—¶é•¿-30%ã€è‡ªèº«ä»»åŠ¡é‡-10%</td></tr><tr><td></td><td><code>å·¥ä½œå¤–å­¦ä¹ </code></td><td>æ™šä¸ƒç‚¹åå­¦ä¹ æ—¶é—´</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç©ã€ä¹æ—¶é•¿-30%ã€è‡ªèº«ä»»åŠ¡é‡-10%</td></tr><tr><td></td><td><code>å·¥ä½œå†…æ²‰æ·€</code></td><td>ä¸¤å‘¨ä¸€ç¯‡åšå®¢</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç©ã€ä¹æ—¶é•¿-30%ã€è‡ªèº«ä»»åŠ¡é‡-10%</td></tr><tr><td><strong>ä¸ªäººæˆé•¿</strong></td><td><code>è¯»ä¹¦</code></td><td>ä¸è®ºå¤šå°‘ï¼Œæ¯å¤©è¯»ä¹¦</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç¡çœ +15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>è¿åŠ¨+ä¸åŠ¨</code></td><td>è·‘æ­¥/å†¥æƒ³</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç¡çœ +15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td></td><td><code>æŒ‘æˆ˜è‡ªå·±</code></td><td>ä¸¤å¤©ä¸€å“‘é“ƒ</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ç¡çœ +15minã€ç©ä¹æ—¶é•¿-15min</td></tr><tr><td><strong>ç¤¾ä¼šå…³ç³»</strong></td><td><code>å®¶äººè”ç³»</code></td><td>ä¸¤å¤©ä¸€æ¶ˆæ¯ï¼Œäº”å¤©ä¸€è§†é¢‘</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ä¸ªå‘¨æœŸèŠå¤©åŠ å€</td></tr><tr><td></td><td><code>å¥½æœ‹å‹ã€äº²æˆšè”ç³»</code></td><td>ä¸‰å¤©ä¸€æ¶ˆæ¯ã€äº”å¤©ä¸€è”ç»œ</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ä¸ªå‘¨æœŸèŠå¤©åŠ å€</td></tr><tr><td></td><td><code>ä¹”ä¹è”ç³»</code></td><td>æ¯å¤©è”ç³»</td><td>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ä¸ªå‘¨æœŸèŠå¤©åŠ å€</td></tr><tr><td></td><td><code>æ™®é€šæœ‹å‹è”ç³»</code></td><td>ä¸€æœˆä¸€æ¶ˆæ¯</td><td>ğŸŒŸğŸŒŸğŸŒŸ</td><td>ä¸‹ä¸ªå‘¨æœŸåŠä¸ªæœˆä¸€è”ç³»</td></tr></tbody></table></li><li><p>ç³»ç»Ÿä¸æ¨¡å—</p><p>å¥½çš„ä¸œè¥¿å°±è¦å»¶ç»­ï¼ŒåŒä¸Š</p></li><li><p>å…·ä½“æ‰§è¡Œ</p><ol><li><p>ç¬¬ä¸€é˜¶æ®µ</p><ol><li><p>æ—¶é•¿ï¼šå…­å¤©</p></li><li><p>ç›®æ ‡ï¼šå·¥ä½œç³»ç»Ÿæ”»åšå…‹éš¾</p></li><li><p>å¥–åŠ±ï¼šä¹°ä¸ªè¡£æœã€è¥¿å®‰æ‰¾ä¹”ä¹</p></li><li><p>æ æ†è§£ï¼š<strong>ç§¯æä¸»åŠ¨ å·¥ä½œæ—¥æ—©ä»ªå¼ä¹ æƒ¯</strong></p></li><li><p>æ¨¡ç‰ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img4/202402241957589.png" alt="image-20240224195718500"></p><ol start="6"><li><p>tips</p><p>æ¯å¤©æ´—è„¸ã€æ´—æ¾¡ç”¨ç‚¹å¿ƒï¼ï¼ï¼</p></li></ol></li></ol></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è’è…”èµ°æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexoæ¡†æ¶ã€masteryä¸»é¢˜çš„ä¸ªäººåšå®¢æ­å»º[å°ç™½æ•™ç¨‹]</title>
      <link href="/2021/07/21/ji-yu-hexo-kuang-jia-mastery-zhu-ti-de-ge-ren-bo-ke-da-jian-xiao-bai-jiao-cheng/"/>
      <url>/2021/07/21/ji-yu-hexo-kuang-jia-mastery-zhu-ti-de-ge-ren-bo-ke-da-jian-xiao-bai-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>å€Ÿé‰´äº†å¤§ä½¬ä»¬çš„ä¸ªäººåšå®¢æ­å»ºæŒ‡å—åï¼Œæˆ‘å¾—ä»¥æœ‰äº†äº’è”ç½‘æ—¶ä»£å±äºè‡ªå·±çš„å°å¤©åœ°ã€‚</p><p>ä½†åœ¨æ­å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†å¤§å¤šæ•°çš„åšå®¢æ­å»ºåšæ–‡å¯¹äºåƒæˆ‘è¿™æ ·çš„å‰ç«¯å°ç™½å…¶å®æ˜¯ä¸å‹å¥½çš„ï¼Œå®ƒä»¬å¾€å¾€å…ˆå…¥ä¸ºä¸»çš„é™ˆè¿°Hexoæ­å»ºçš„ä¼˜åŠ¿ï¼Œå´å¿½ç•¥äº†ä»é™æ€çš„HTMLé¡µé¢å˜è¿è‡³Hexoçš„è¿‡ç¨‹ï¼Œè¯•æƒ³ä¸€ä¸ªè¿Hexoéƒ½æ²¡å¬è¿‡çš„äººï¼Œä¸€ä¸Šæ¥å°±æ˜¯ä¸€å †é™Œç”Ÿçš„åè¯ï¼Œè‡ªç„¶ä¼šæœ›è€Œå´æ­¥ã€‚</p><p>è€Œåœ¨æ¥ä¸‹æ¥çš„ç¯‡å¹…ä¸‹ï¼Œæˆ‘ä¼šå¼•å¯¼å°ä¼™ä¼´ä»¬ä¸»åŠ¨æ€è€ƒï¼Œä»ä¸€ä¸ªæœ€åŸºç¡€çš„Ideaå‡ºå‘ï¼Œä¸€æ­¥æ­¥ç‚¹äº®è¿™ä¸ªç«å…‰ï¼Œæœ€ç»ˆæ„å»ºå‡ºä»¥Hexoä¸ºæ ¸å¿ƒçš„æ¡†æ¶ã€‚</p><h2 id="äºŒã€Idea"><a href="#äºŒã€Idea" class="headerlink" title="äºŒã€Idea"></a>äºŒã€Idea</h2><p>è¯´åˆ°ä¸ªäººåšå®¢ï¼Œä½ å¯èƒ½ä¼šè„‘æµ·ä¸­æµ®ç°è¿™æ ·ç®€æ´è€Œæ¸…æ–°çš„ç•Œé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262027543.png" alt="image-20210721092923885"></p><p>æŠ‘æˆ–è¿™æ ·æ¸©é¦¨ä¸”ä¸­äºŒï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262027910.png" alt="image-20210721092956147"></p><p>ä½†ä¸è®ºé‚£ç§ç±»å‹çš„é¡µé¢ï¼Œå½“ä½ è½»å‡»å³é”®ï¼ŒæŸ¥çœ‹ç½‘ç«™æºä»£ç æ—¶ï¼Œå‘ç°å¤§å®¶æ®Šé€”åŒå½’ï¼Œæœ€ç»ˆéƒ½è¢«æ¸²æŸ“ä¸ºHTMLé¡µé¢ï¼Œå†å…·ä½“ä¸€ç‚¹è¯´ï¼š</p><h3 id="1-0ç‰ˆæœ¬"><a href="#1-0ç‰ˆæœ¬" class="headerlink" title="1.0ç‰ˆæœ¬"></a>1.0ç‰ˆæœ¬</h3><p>é¦–å…ˆæˆ‘ä»¬è¾“å…¥åšå®¢åŸŸåï¼ŒæœåŠ¡å™¨ä¸ºæˆ‘ä»¬å±•ç¤ºé™æ€çš„htmlç½‘é¡µï¼Œä½†æˆ‘ä»¬å¾ˆå¿«å‘ç°æ¯ä¸ªé¡µé¢åœ¨å¸ƒå±€ä¸Šéƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œæˆ‘ä»¬å°†è¿™æ ·çš„å¸ƒå±€ç§°ä¸ºä¸»é¢˜ï¼Œå®ƒä»¬ä¸å†…å®¹æ— å…³ï¼›è€Œå¦ä¸€éƒ¨åˆ†å³æ˜¯å›´ç»•å†…å®¹å±•å¼€çš„ï¼Œæ¯”å¦‚ï¼šå†…å®¹æ‰€å±çš„ä½œè€…ã€æ ‡é¢˜ã€åˆ†ç±»ç­‰ç­‰</p><p>è¯´åˆ°è¿™ï¼Œèªæ˜çš„ä½ ä¸€å®šä¼šæƒ³åˆ°ï¼Œ<code>æœ€ç»ˆçš„HTMLé¡µé¢éœ€è¦ç”±é€šç”¨çš„å¸ƒå±€ä¸ä¸åŒçš„å†…å®¹ç»„æˆ</code></p><h3 id="1-1ç‰ˆæœ¬"><a href="#1-1ç‰ˆæœ¬" class="headerlink" title="1.1ç‰ˆæœ¬"></a>1.1ç‰ˆæœ¬</h3><p>æ—¢ç„¶å¸ƒå±€æ˜¯é€šç”¨çš„ï¼Œé‚£ç”¨HTMLå†™æ˜¾ç„¶<code>èšåˆä¸åˆ°ä¸€èµ·</code>ï¼Œéœ€è¦æœ‰ä¸€ç§<code>æ¨¡æ¿è¯­è¨€</code>åªå°†é€šç”¨çš„éƒ¨åˆ†å†™ä¸€éï¼Œæœ€ç»ˆäº¤ç»™æœåŠ¡å™¨èšåˆ,å¹¶è§£ææˆhtmlé¡µé¢ã€‚</p><p>EJSå°±æ˜¯æ»¡è¶³æˆ‘ä»¬éœ€æ±‚çš„æ¨¡æ¿è¯­è¨€ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€è¦çš„çœ‹ä¸‹å®ƒçš„ä»‹ç»ï¼š</p><blockquote><p>EJS æ˜¯ä¸€å¥—ç®€å•çš„æ¨¡æ¿è¯­è¨€ï¼Œå¸®ä½ åˆ©ç”¨æ™®é€šçš„ <strong>JavaScript ä»£ç </strong>ç”Ÿæˆ HTML é¡µé¢ã€‚EJS æ²¡æœ‰å¦‚ä½•ç»„ç»‡å†…å®¹çš„æ•™æ¡ï¼›ä¹Ÿæ²¡æœ‰å†é€ ä¸€å¥—è¿­ä»£å’Œæ§åˆ¶æµè¯­æ³•ï¼›æœ‰çš„åªæ˜¯æ™®é€šçš„ JavaScript ä»£ç è€Œå·²ã€‚</p></blockquote><p>å®ƒçš„è¯­æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p><pre class=" language-ejs"><code class="language-ejs"><ul>  <% users.forEach(function(user){ %>    <%- include('user/show', {user: user}); %>  <% }); %></ul></code></pre><p>é‚£EJSä»£ç å¦‚ä½•è¢«è§£æä¸ºHTMLé¡µé¢å‘¢ï¼ŸæœåŠ¡å™¨æ˜¾ç„¶éœ€è¦ä¸€ç§å¯ä»¥è¿è¡ŒjavaScriptä»£ç çš„ç¯å¢ƒï¼Œè¿™å°±å¼•å‡ºäº†Node.js:</p><blockquote><p>Node.js æ˜¯èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡ŒJavaScript çš„å¼€æ”¾æºä»£ç ã€è·¨å¹³å°è¿è¡Œç¯å¢ƒã€‚</p></blockquote><h3 id="2-0ç‰ˆæœ¬"><a href="#2-0ç‰ˆæœ¬" class="headerlink" title="2.0ç‰ˆæœ¬"></a>2.0ç‰ˆæœ¬</h3><p>ç°åœ¨æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨è£…æœ‰node.jsç¯å¢ƒçš„è®¡ç®—æœºä¸Šè·‘EJSçš„ä»£ç ï¼Œå¹¶è®©å®ƒç”Ÿæˆé™æ€é¡µé¢ï¼Œä½†è¦åˆ«äººå¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬çš„é¡µé¢ï¼Œæ˜¾ç„¶è¿˜éœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯è…¾è®¯äº‘/é˜¿é‡Œäº‘å¥½åƒéƒ½ä»·æ ¼ä¸è²ï¼Œèƒ½ä¸èƒ½æ—¢å…è´¹ï¼Œè¿˜æŠŠé¡¹ç›®ç»™éƒ¨ç½²äº†ï¼Ÿ</p><p>githubä¸ºæˆ‘ä»¬æä¾›äº†ç™½å«–çš„æœºä¼š~æˆ‘ä»¬åªéœ€æ–°å»ºä¸€ä¸ªç¬¦åˆè§„èŒƒçš„ä»“åº“å°±æå®šäº†ï¼Œæœç„¶å¾ˆé¦™ã€‚ä½†åæœŸæˆ‘ä»¬å¦‚ä½•ç»´æŠ¤æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å‘¢ï¼Ÿ</p><p>ä½¿ç”¨<strong>ç‰ˆæœ¬æ§åˆ¶å·¥å…·</strong>ï¼ï¼ï¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·æœ‰å¾ˆå¤šï¼Œé€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p><p>å½“ç„¶æ˜¯gitå’¯ï¼Œå®ƒå’Œå…¶ä»–ç‰ˆæœ¬æ§åˆ¶å·¥å…·æœ‰ç€è¿™æ ·çš„å·®å¼‚ï¼š</p><ul><li><input checked disabled type="checkbox"> ç›´æ¥è®°å½•å¿«ç…§ï¼Œè€Œéå·®å¼‚æ¯”è¾ƒ</li></ul><p>è¿™æ ·è¯´æ¯”è¾ƒæ™¦æ¶©ï¼Œä½†å®ƒçš„å¦ä¸€ä¸ªå¥½å¤„ç¡®å®éå¸¸å®åœ¨ï¼š</p><blockquote><p><strong>è¿‘ä¹æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œ</strong></p></blockquote><p>ç”¨è¿‡SVNçš„å°ä¼™ä¼´åº”è¯¥ä½“ä¼šè¿‡é‚£ç§<code>è¢«ç½‘é€Ÿæ”¯é…çš„ææƒ§</code>ï¼Œè€ŒGitå®Œå…¨æ²¡æœ‰è¿™æ–¹é¢çš„é¡¾è™‘ï¼</p><h3 id="3-0ç‰ˆæœ¬"><a href="#3-0ç‰ˆæœ¬" class="headerlink" title="3.0ç‰ˆæœ¬"></a>3.0ç‰ˆæœ¬</h3><p>ä»»ä½•ä¸€ä¸ªç³»ç»Ÿçš„è®¾è®¡ï¼Œéƒ½åº”è¯¥è€ƒè™‘åˆ°ä¸°å¯Œçš„<code>é›†æˆæ€§ä¸å¯æ‰©å±•æ€§</code>ï¼Œå¦‚æœåˆ°è¿™é‡Œæˆ›ç„¶è€Œæ­¢ï¼Œé‚£æˆ‘ä»¬åªæ˜¯åšå‡ºä¸€ä¸ªç”Ÿç¡¬çš„é¡µé¢è€Œå·²ï¼Œå¦‚æœè¦åœ¨åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªè¯„è®ºæ¨¡å—ï¼Œæˆ–æ˜¯æ›´æ¢ä¸€ä¸ªä¸»é¢˜ï¼Œæ•´ä¸ªç³»ç»Ÿç»´æŠ¤èµ·æ¥éå¸¸ç¬¨é‡ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä¸»è§’Hexoç™»åœºäº†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262029040.png" alt="image-20210720160710051"></p><p>è¿™æ ·ä¸€ä¸ª<strong>ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆæ‰æ˜¯è®¾è®¡çš„æœ€ç»ˆå½’å®¿</strong>ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å¯¹äºä¸€ä¸ªæ¡†æ¶åº”è¯¥å…·æœ‰ä»€ä¹ˆç»„ä»¶å·²ç»äº†ç„¶äºèƒ¸ï¼Œå¼€å§‹åŠ¨æ‰‹å®è·µå§â€”â€”</p><h2 id="ä¸‰ã€æ­å»ºè¿‡ç¨‹"><a href="#ä¸‰ã€æ­å»ºè¿‡ç¨‹" class="headerlink" title="ä¸‰ã€æ­å»ºè¿‡ç¨‹"></a>ä¸‰ã€æ­å»ºè¿‡ç¨‹</h2><h3 id="1-ä¸‹è½½Node-js"><a href="#1-ä¸‹è½½Node-js" class="headerlink" title="1.ä¸‹è½½Node.js"></a>1.ä¸‹è½½Node.js</h3><p>è¿™é‡Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„è¦æ±‚ï¼Œä¸‹è½½ä¸€ä¸ªé•¿æœŸç¨³å®šï¼Œä¸é«˜ä¸ä½çš„ç‰ˆæœ¬å³å¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262029674.png" alt="image-20210720161140877"></p><p>æ³¨ï¼š<strong>åƒä¸‡åˆ«ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</strong>ï¼Œå› ä¸ºå…¶ä»–ç»„ä»¶å¯èƒ½è¿˜æ²¡æœ‰å¯¹å®ƒæä¾›æ”¯æŒï¼Œä¸é€‚é…å¯¼è‡´çš„ç»“æœå¯èƒ½ä¼šæ˜¯è«åå…¶å¦™çš„æŠ¥é”™ã€‚</p><p>å®‰è£…å¥½ä»¥åï¼Œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥<code>node -v</code>ï¼Œå¦‚æœå‡ºç°ç‰ˆæœ¬å·ï¼Œå°±å®‰è£…æˆåŠŸå•¦ã€‚</p><p>æ¥ç€è¾“å…¥<code>npm -v</code>,éªŒè¯åŒ…ç®¡ç†å·¥å…·æ˜¯å¦å¯ç”¨ï¼Œä½¿ç”¨è¿‡linuxç³»ç»Ÿçš„å°ä¼™ä¼´åœ¨å®‰è£…è½¯ä»¶æ—¶ï¼Œå°±ä¼šä½“ä¼šåˆ°npmçš„ä¾¿åˆ©ã€‚</p><p>ä¸‹è½½å®‰è£…åŒ…æ—¶ï¼Œnpmä¼šè¯·æ±‚å®ƒçš„é•œåƒæºï¼Œå¦‚æœè¿™ä¸ªé•œåƒæºä¸­æ²¡æœ‰æˆ‘ä»¬æƒ³è¦çš„åŒ…ï¼Œå°±éœ€è¦åˆ‡æ¢é•œåƒæºï¼Œ<code>nrmå°±æ˜¯æ¥ä¿è¯å¿«é€Ÿåˆ‡æ¢çš„</code>ã€‚</p><p>nrmçš„ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™ç¯‡åšæ–‡ï¼š<a href="https://segmentfault.com/a/1190000017419993" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017419993</a></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨ç»ˆç«¯è¿è¡Œnpm install -g nrmå‘½ä»¤å³å¯å®‰è£…nrmï¼Œæ¥ç€ä½¿ç”¨nrm lså‘½ä»¤åˆ—å‡ºå¯é€‰æ‹©çš„æºï¼Œè¿™é‡Œæ¨èä½¿ç”¨æ·˜å®é•œåƒæºï¼š</p><h3 id="2-å®‰è£…git"><a href="#2-å®‰è£…git" class="headerlink" title="2.å®‰è£…git"></a>2.å®‰è£…git</h3><p>åšä¸»æ˜¯ä¸€è·¯nextçš„ï¼Œåªéœ€è¦ä¿è¯å¯ä»¥ä½¿ç”¨<code>å‘½ä»¤è¡Œæ‰“å¼€</code>å³å¯ã€‚</p><p>å®‰è£…å®Œæˆåï¼Œå‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨<code>git --version</code>å‘½ä»¤éªŒè¯</p><h3 id="3-åˆ›å»ºgit-pagesä»“åº“"><a href="#3-åˆ›å»ºgit-pagesä»“åº“" class="headerlink" title="3.åˆ›å»ºgit pagesä»“åº“"></a>3.åˆ›å»ºgit pagesä»“åº“</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262029942.png" alt="image-20210720164923978"></p><p>æ–°å»ºä»“åº“åï¼Œç‚¹å‡»ä»“åº“å¤„çš„settingé€‰é¡¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262030549.png" alt="image-20210720165118917"></p><p>æ‰¾åˆ°ä¸‹é¢çš„github pagesé€‰é¡¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262030619.png" alt="image-20210720165156373"></p><p>å†è®¾ç½®ä¸€é€šï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262031253.png" alt="image-20210720165456776"></p><h3 id="4-å®‰è£…Hexo"><a href="#4-å®‰è£…Hexo" class="headerlink" title="4.å®‰è£…Hexo"></a>4.å®‰è£…Hexo</h3><p>åœ¨åˆé€‚çš„åœ°æ–¹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹(ç¼–ç¨‹å…šå»ºè®®è¿™æ ·ï¼š<code>/develop/blog/</code>),ç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„åšå®¢æ–‡ä»¶ã€‚</p><p>åœ¨è¯¥ç›®å½•ä¸‹å³é”®ç‚¹å‡»<code>Git Bash Here</code>ï¼Œæ‰“å¼€gitçš„æ§åˆ¶å°çª—å£ï¼Œä»¥åæˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œéƒ½åœ¨gitæ§åˆ¶å°è¿›è¡Œï¼Œç¬¨é‡çš„å‘½ä»¤æç¤ºç¬¦å¯ä»¥å‘Šä¸€æ®µè½äº†ã€‚</p><p>è¾“å…¥<code>npm -i hexo-cli -g</code>å®‰è£…hexoï¼Œå¦‚æœæœ‰æŠ¥é”™ï¼Œæ•¬è¯·æ— è§†ã€‚å®‰è£…å®Œåè¾“å…¥<code>hexo -v</code>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><p>æ¥ä¸‹æ¥å°±è¦åˆå§‹åŒ–æˆ‘ä»¬çš„ç½‘ç«™ï¼Œè¾“å…¥<code>hexo init</code>åˆå§‹åŒ–æ–‡ä»¶å¤¹ï¼Œæ¥ç€è¾“å…¥<code>npm install</code>å®‰è£…å¿…å¤‡çš„ç»„ä»¶ã€‚</p><p>è¿™æ ·æœ¬åœ°çš„ç½‘ç«™é…ç½®ä¹Ÿå¼„å¥½å•¦ï¼Œè¾“å…¥<code>hexo g</code>ç”Ÿæˆé™æ€ç½‘é¡µï¼Œç„¶åè¾“å…¥<code>hexo s</code>æ‰“å¼€æœ¬åœ°æœåŠ¡å™¨ï¼Œç„¶åæµè§ˆå™¨æ‰“å¼€<a href="http://localhost:4000/ï¼Œ" target="_blank" rel="noopener">http://localhost:4000/</a>å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„åšå®¢å•¦ï¼š</p><h3 id="5-è¿æ¥Githubä¸æœ¬åœ°"><a href="#5-è¿æ¥Githubä¸æœ¬åœ°" class="headerlink" title="5.è¿æ¥Githubä¸æœ¬åœ°"></a>5.è¿æ¥Githubä¸æœ¬åœ°</h3><p>è¦ä½¿ç”¨gitç®¡ç†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“ï¼Œå°±éœ€è¦å»ºç«‹è¿æ¥ï¼Œä¸ºäº†ä¿è¯è¿æ¥çš„å®‰å…¨æ€§ï¼Œä½¿ç”¨SSHè¿›è¡ŒåŠ å¯†ï¼š</p><blockquote><p>Secure Shellæ˜¯ä¸€ç§åŠ å¯†çš„<code>ç½‘ç»œä¼ è¾“åè®®</code>ï¼Œå¯åœ¨ä¸å®‰å…¨çš„ç½‘ç»œä¸­ä¸ºç½‘ç»œæœåŠ¡æä¾›å®‰å…¨çš„ä¼ è¾“ç¯å¢ƒã€‚SSHé€šè¿‡åœ¨ç½‘ç»œä¸­åˆ›å»º<code>å®‰å…¨éš§é“</code>æ¥å®ç°SSHå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ã€‚</p></blockquote><ul><li><input checked disabled type="checkbox"> æ³¨ï¼šSSHä¸SSLçš„åŒºåˆ«ï¼š<ol><li>SSHæ˜¯åŠ å¯†çš„shell</li><li>SSLæ˜¯é€šä¿¡é“¾è·¯çš„é™„åŠ å±‚</li></ol></li></ul><p>è¿™é‡Œ<strong>ä»¥æˆ‘çš„githubè´¦å·ä¸ºä¾‹</strong>ï¼Œåœ¨æœ¬åœ°åšå®¢æ ¹ç›®å½•ä¸‹æ‰“å¼€git bash,ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config --global user.name YuZhe727<span class="token function">git</span> config --global user.email zhangyuzhe727@gmail.com</code></pre><p>ç„¶åç”Ÿæˆå¯†é’¥SSH keyï¼š</p><pre class=" language-bash"><code class="language-bash">ssh-keygen -t rsa -C <span class="token string">"zhangyuzhe727@gmail.com"</span></code></pre><p>åœ¨éœ€è¦è¾“å…¥æ—¶ï¼Œå¹²å‡€åˆ©è½åœ°æ¥ä¸ªå›è½¦ï¼Œä¸‰ä¸ªå›è½¦å°±OKäº†ï¼ŒæŒ‰ç…§æç¤ºï¼Œç”Ÿæˆçš„å¯†é’¥æ˜¯æ”¾åœ¨è¿™é‡Œçš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262031043.png" alt="image-20210720171700663"></p><ul><li><code>id_rsa</code>: ä½¿ç”¨å“ˆå¸Œç®—æ³•rsaç”Ÿæˆçš„ç§é’¥ï¼›</li><li><code>id_rsa.pub</code>: ç”Ÿæˆçš„å…¬é’¥</li><li><code>known_hosts</code>: é€šä¿¡åŒæ–¹çš„ip</li></ul><p>æ˜¾ç„¶è¿™é‡Œä½¿ç”¨çš„æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œå®‰å…¨æ€§æ›´å¥½ï¼Œå°†ç”Ÿæˆçš„å…¬é’¥å¤åˆ¶ï¼Œæ”¾åœ¨è¿œç¨‹ä»“åº“ç«¯ï¼Œå…·ä½“æ“ä½œï¼š<br>æ‰“å¼€githubï¼Œåœ¨å¤´åƒä¸‹é¢ç‚¹å‡»settingsï¼Œå†ç‚¹å‡»SSH and GPG keysï¼Œæ–°å»ºä¸€ä¸ªSSHï¼Œåå­—éšä¾¿ï¼Œå†å°†å¤åˆ¶çš„å…¬é’¥ç²˜è´´è¿›å»å³å¯ã€‚</p><p>ç„¶åè¾“å…¥<code>ssh -T git@github.com</code>éªŒè¯æ˜¯å¦è¿æ¥æˆåŠŸï¼Œå‡ºç°ç”¨æˆ·åå°±è¯´æ˜æˆåŠŸå•¦ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262031874.png" alt="image-20210720172854704"></p><p>æœ€ååœ¨æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶æ³¨æ˜<code>ä»¥æ€æ ·çš„æ–¹å¼å°†æœ¬åœ°ä»“åº“éƒ¨ç½²åˆ°è¿œç«¯ä»“åº“çš„å“ªä¸ªç›®å½•ä¸‹</code>å°±OKäº†ã€‚</p><hr><h3 id="6-æ¢¦å¼€å§‹çš„åœ°æ–¹"><a href="#6-æ¢¦å¼€å§‹çš„åœ°æ–¹" class="headerlink" title="6.æ¢¦å¼€å§‹çš„åœ°æ–¹"></a>6.æ¢¦å¼€å§‹çš„åœ°æ–¹</h3><p>è‡³æ­¤ï¼Œä¸€ä¸ªæœ€åŸºç¡€çš„åŸºäºHexoçš„åšå®¢å°±æ­å»ºå®Œæˆäº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„ç›®å½•ç»“æ„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262031183.png" alt="image-20210720184026599"></p><ul><li><code>.deploy_git:</code>å°†è¢«éƒ¨ç½²åˆ°è¿œç«¯ä»“åº“çš„æ–‡ä»¶ç›®å½•ï¼Œè¾“å…¥<code>hexo d</code>å‘½ä»¤åç”Ÿæˆè¯¥ç›®å½•ï¼›</li><li><code>.git:</code>å£°æ˜æœ¬åœ°ä»“åº“ä¸è¿œç«¯å“ªä¸ªä»“åº“çš„å“ªä¸ªåˆ†æ”¯ç›¸å…³</li><li><code>node_modules</code>ï¼šnpmå®‰è£…åŒ…çš„å­˜æ”¾ç›®å½•ï¼›</li><li><code>public</code>ï¼šå‘ç”¨æˆ·å±•ç¤ºçš„é™æ€æ–‡ä»¶ï¼Œè¾“å…¥<code>hexo g</code>å‘½ä»¤åï¼Œç”±sourceç›®å½•è‡ªåŠ¨ç”Ÿæˆï¼ŒåŒ…å«css,js,htmlç­‰ç”¨äºæ¸²æŸ“çš„æ–‡ä»¶å’Œmarkdownæ ¼å¼çš„æ•°æ®æ–‡ä»¶</li><li><code>scaffolds:</code>æè¿°é¡µé¢å†…å®¹çš„é¦–éƒ¨ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æ ·å¼æ–‡ä»¶;</li><li><code>source</code>ï¼šç”¨æˆ·èµ„æºç›®å½•ï¼Œæˆ‘ä»¬å†™çš„æ–‡ç« å°±æ˜¯æ”¾åœ¨_postç›®å½•ä¸‹çš„ï¼›</li><li><code>themes:</code>ä¸»é¢˜ï¼Œå¯æ ¹æ®ä¸ªäººåå¥½æ›´æ”¹çš„éƒ¨åˆ†ï¼Œåªéœ€è¦åœ¨å¤–éƒ¨çš„_config.ymlä¸­æ˜¾å¼å£°æ˜ä½¿ç”¨çš„ä¸»é¢˜åå³å¯.</li><li><code>.gitignore:</code>åœ¨ä½¿ç”¨gitéƒ¨ç½²æ—¶å“ªäº›æ–‡ä»¶åº”è¯¥è¢«å¿½ç•¥ï¼Œä»¥å‡è½»ä¸Šä¼ è´Ÿæ‹…</li><li><code>_config.yml:</code>æœ€é‡è¦çš„åœ°æ–¹ï¼Œåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€äº›å…¨å±€ä¿¡æ¯</li><li><code>package-lock.json&amp;package.json:</code>ä½¿ç”¨npmå®‰è£…åŒ…æ—¶ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨é‡Œé¢çœ‹åˆ°æ‰€å®‰è£…åŒ…çš„ç‰ˆæœ¬æƒ…å†µã€‚</li></ul><p>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹<strong>hexo g &amp; hexo s hexo d</strong>ä¸‰è¿åï¼Œè¾“å…¥<code>githubç”¨æˆ·å.github.io</code>ï¼Œå³å¯çœ‹åˆ°ä¸€ä¸ªç›¸è²Œå¹³å¹³çš„é¡µé¢~</p><p>ä¸å¦‚æˆ‘ä»¬æ¥æ¢ä¸ªç‚«é…·çš„ä¸»é¢˜å§ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262032775.png" alt="image-20210720190529308"></p><p>æƒè¡¡ä¹‹ä¸‹ï¼Œé€‰æ‹©äº†<strong>é—ªçƒä¹‹ç‹å¤§ä½¬</strong>çš„åšå®¢ä¸»é¢˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262032951.png" alt="image-20210720190808008"></p><h2 id="å››ã€ä¸ªæ€§åŒ–è®¾è®¡"><a href="#å››ã€ä¸ªæ€§åŒ–è®¾è®¡" class="headerlink" title="å››ã€ä¸ªæ€§åŒ–è®¾è®¡"></a>å››ã€ä¸ªæ€§åŒ–è®¾è®¡</h2><p>åœ¨themesç›®å½•ä¸‹æ‰§è¡Œ<code>git clone git@github.com:blinkfox/hexo-theme-matery.git</code>å‘½ä»¤ï¼Œå‘ç°æ™šä¸Šçš„ç½‘é€Ÿç€å®æ„Ÿäººã€‚åˆ†æä¸€æ‰‹ï¼Œåº”è¯¥æ˜¯å‘èµ·DNSæŸ¥è¯¢çš„æ—¶å€™ç»•äº†ä¸€å¤§åœˆï¼Œè§£å†³æ–¹å¼ï¼šåœ¨æœ¬æœº<code>æ“ä½œç³»ç»Ÿç¼“å­˜hostæ–‡ä»¶</code>ä¸­åŠ å…¥ä¸¤æ¡è®°å½•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262032562.png" alt="image-20210720192925773"></p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262032504.png" alt="image-20210720193017067"></p><p>é‡æ–°å°è¯•ï¼Œé€Ÿåº¦ç›´æ¥èµ·é£ï¼Œæœç„¶å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ã€‚</p><hr><p>æ¥ç€åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸»é¢˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262032824.png" alt="image-20210720200803910"></p><p>ç„¶åä¸‰è¿ï¼Œå±•ç¤ºçš„é¡µé¢æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262033683.png" alt="image-20210720200953438"></p><p>é€ä¸ªç‚¹å‡»åï¼Œå‘ç°æœ‰çš„é¡µé¢å±•ç¤ºä¸å‡ºæ¥ï¼Œè¿™æ ·å¤§è‡´æœ‰äº†ä¸€ä¸ªä¿®æ­£çš„æ–¹å‘ï¼Œç„¶ååœ¨å»åˆ«äººçš„åšå®¢é€›é€›ï¼Œå‘ç°äº†ä¸€äº›ç‚«é…·çš„ä¸ªæ€§åŒ–è®¾è®¡ï¼š</p><ol><li>é›ªèŠ±ç‰¹æ•ˆï¼›</li><li>é¦–é¡µéŸ³ä¹</li><li>ç«™é•¿æäº¤ï¼›</li><li>SEOä¼˜åŒ–</li><li>å›¾ç‰‡æ°´å°</li><li>äºŒçº§ç›®å½•</li></ol><p>è¿™äº›æš‚æ—¶éƒ½ä½œä¸ºå¾…æ›´æ–°å†…å®¹</p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººåšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> hexo </tag>
            
            <tag> mastery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMç³»åˆ—çŸ¥è¯†ç‚¹æ€»ç»“</title>
      <link href="/2021/07/12/jvm-xi-lie-zhi-shi-dian-zong-jie/"/>
      <url>/2021/07/12/jvm-xi-lie-zhi-shi-dian-zong-jie/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäºè¯¸è‘›è€å¸ˆå…¬å¼€è¯¾</p></blockquote><p>ç¬”è®°å¤§è‡´é•¿è¿™ä¸ªæ ·å­â€”â€”</p><iframe id="embed_dom" name="embed_dom" frameborder="0" style="display:block;width:525px; height:245px;" src="https://www.processon.com/embed/60bf39d31efad44afd674f39"></iframe><p>ä¹Ÿå¯ç›´æ¥è®¿é—®æˆ‘çš„ProcessOné“¾æ¥ï¼š</p><p><a href="https://www.processon.com/view/link/60ec0200f346fb6bcd28aadd" target="_blank" rel="noopener">JVMçŸ¥è¯†å…¨æ™¯å›¾</a></p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlæ•°æ®åº“ç³»åˆ—â€”â€”æŒç»­æ›´æ–°ä¸­</title>
      <link href="/2021/07/12/mysql-shu-ju-ku-xi-lie-chi-xu-geng-xin-zhong/"/>
      <url>/2021/07/12/mysql-shu-ju-ku-xi-lie-chi-xu-geng-xin-zhong/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ‰ä¸€æ®µæ—¶é—´æˆ‘å¾ˆå›°æƒ‘ï¼Œå¦‚ä½•åœ¨æœ‰é™çš„æ—¶é—´å†…å±•å¼€ç¹æ‚çš„å†…å®¹ï¼Œæœ€ç»ˆåœ¨è¯„è®ºåŒºæ‰¾åˆ°äº†ç­”æ¡ˆï¼š</p><blockquote><p>å°†æ¯ä¸€å°èŠ‚çš„å†…å®¹æç‚¼æˆé—®é¢˜ï¼Œé€šè¿‡å›ç­”è¿™äº›é—®é¢˜æ¥æŒæ¡çŸ¥è¯†ï¼Œè¯¦ç•¥åˆ†æ˜ä¸”é«˜æ•ˆï¼</p></blockquote><h2 id="ä¸€-ä¸€æ¡sqlæŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„"><a href="#ä¸€-ä¸€æ¡sqlæŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„" class="headerlink" title="ä¸€.ä¸€æ¡sqlæŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„"></a>ä¸€.ä¸€æ¡sqlæŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„</h2><h3 id="1-mysqlçš„æ¡†æ¶æœ‰å“ªäº›åŸºæœ¬ç»„ä»¶ï¼Œå„æ˜¯ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ"><a href="#1-mysqlçš„æ¡†æ¶æœ‰å“ªäº›åŸºæœ¬ç»„ä»¶ï¼Œå„æ˜¯ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ" class="headerlink" title="1.mysqlçš„æ¡†æ¶æœ‰å“ªäº›åŸºæœ¬ç»„ä»¶ï¼Œå„æ˜¯ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ"></a>1.mysqlçš„æ¡†æ¶æœ‰å“ªäº›åŸºæœ¬ç»„ä»¶ï¼Œå„æ˜¯ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ</h3><p>æ‰€æœ‰çš„æ•…äº‹ï¼Œéƒ½ä»ä¸€å¼ å›¾å¼€å§‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252112890.png" alt="img"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œmysqlå¤§è‡´åˆ†ä¸ºserverå±‚ä¸å­˜å‚¨å¼•æ“å±‚ï¼š</p><ul><li><code>serverå±‚ï¼š</code>åŒ…å«è¿æ¥å™¨ï¼ŒæŸ¥è¯¢ç¼“å­˜ï¼Œåˆ†æå™¨ï¼Œæ‰§è¡Œå™¨ç­‰ï¼Œæ¶µç›–äº†mysqlçš„å¤§å¤šæ•°çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä»¥åŠæ‰€æœ‰çš„å†…ç½®å‡½æ•°(æ—¥æœŸï¼Œæ—¶é—´ï¼Œæ•°å­¦ï¼ŒåŠ å¯†å‡½æ•°ï¼‰,æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½éƒ½åœ¨è¿™ä¸€å±‚å®ç°ï¼Œå¦‚å­˜å‚¨è¿‡ç¨‹ï¼Œè§¦å‘å™¨ï¼Œè§†å›¾ã€‚</li><li><code>å­˜å‚¨å¼•æ“å±‚ï¼š</code>å®ƒä»¥æ’ä»¶å¼çš„æ¶æ„æ–¹å¼è´Ÿè´£æ•°æ®çš„å­˜å‚¨ä¸æå–ï¼Œæ”¯æŒInnoDB,Memory,MyISAMç­‰å­˜å‚¨å¼•æ“ï¼Œé»˜è®¤å¼•æ“æ˜¯<strong>InnoDB</strong>.</li><li>å…³ç³»ï¼š<strong>æ‰€æœ‰å­˜å‚¨å¼•æ“å…±ç”¨ä¸€ä¸ªserverå±‚</strong>ã€‚</li></ul><h3 id="2-serverå±‚åŒ…å«å“ªäº›ç»„ä»¶ï¼Ÿå®ƒä»¬å„æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#2-serverå±‚åŒ…å«å“ªäº›ç»„ä»¶ï¼Ÿå®ƒä»¬å„æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="2.serverå±‚åŒ…å«å“ªäº›ç»„ä»¶ï¼Ÿå®ƒä»¬å„æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>2.serverå±‚åŒ…å«å“ªäº›ç»„ä»¶ï¼Ÿå®ƒä»¬å„æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><ol><li><p><code>è¿æ¥å™¨</code>ï¼šè¿æ¥å™¨è´Ÿè´£å’ŒmysqlæœåŠ¡å™¨ç«¯<strong>å»ºç«‹è¿æ¥ï¼Œè·å–æƒé™ï¼Œç»´æŒå’Œç®¡ç†è¿æ¥</strong></p><pre class=" language-sql"><code class="language-sql">mysql <span class="token operator">-</span>h$ip <span class="token operator">-</span>P$port <span class="token operator">-</span>u$<span class="token keyword">user</span> <span class="token operator">-</span>p</code></pre><p>åœ¨è¿æ¥å»ºç«‹åï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œå°±ä¼šè¿›å…¥sleepçŠ¶æ€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252116918.png" alt="img"></p><p>å¦‚æœå®¢æˆ·ç«¯å¤ªä¹…æ²¡åŠ¨ä½œï¼ˆ<strong>wait_timeout=8å°æ—¶</strong>ï¼‰ï¼Œè¿æ¥å™¨å°±ä¼šå°†å…¶è‡ªåŠ¨æ–­å¼€ã€‚</p><p>å½“ç„¶ï¼Œä¸Šé¢çš„æƒ…å†µæ˜¯åŸºäºé•¿è¿æ¥çš„ï¼Œè€Œé•¿è¿æ¥æ­£å¦‚æˆ‘ä»¬åœ¨è®¡ç½‘ä¸­äº†è§£çš„ä¸€æ ·ï¼š<strong>å¦‚æœå®¢æˆ·ç«¯æŒç»­æœ‰è¯·æ±‚ï¼Œåˆ™ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥</strong>ã€‚é•¿è¿æ¥æœ‰æ•ˆå‡å°‘äº†é¢‘ç¹å»ºç«‹ï¼Œé”€æ¯è¿æ¥çš„æˆæœ¬ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼š</p><ul><li><input checked disabled type="checkbox"> mysqlåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶ä½¿ç”¨çš„å†…å­˜æ˜¯ç®¡ç†åœ¨è¿æ¥å¯¹è±¡ä¸­çš„ï¼Œå¦‚æœè¿æ¥é•¿æœŸå­˜åœ¨ï¼Œä¼šå¯¼è‡´Mysqlå ç”¨å†…å­˜è¿‡å¤šï¼Œæœ€ç»ˆå¯¼è‡´OOM</li></ul><p>è€Œé’ˆå¯¹é•¿è¿æ¥å ç”¨å†…å­˜è¿‡å¤šçš„é—®é¢˜ï¼Œé€šå¸¸æœ‰è¿™æ ·ä¸¤ç§è§£å†³æ–¹å¼ï¼š</p><ul><li><strong>å®šæœŸæ–­å¼€è¿æ¥</strong></li><li>MYSQL5.7ä»¥åï¼Œå¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œæ¯”è¾ƒå¤§çš„æ“ä½œåï¼Œæ‰§è¡Œ<strong>mysql_reset_connection</strong>æ¥é‡æ–°åˆå§‹åŒ–è¿æ¥èµ„æºã€‚</li></ul></li><li><p><code>æŸ¥è¯¢ç¼“å­˜</code>ï¼š</p><p>é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼šä¸å»ºè®®ä½¿ç”¨åŠŸèƒ½ç¼“å­˜ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><p>æˆ‘ä»¬åœ¨æ‹¿åˆ°ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚åï¼Œé¦–å…ˆä¼šæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨<strong>ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨çš„è®°å½•</strong>ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œä¹Ÿæ— é¡»å†æ‰§è¡Œåç»­ç¯èŠ‚ï¼Œç›´æ¥è¿”å›å‘½ä¸­ç»“æœå³å¯ã€‚å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­æµç¨‹ã€‚</p><p>ä½†å¦‚æœæˆ‘ä»¬æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªæ›´æ–°è¯·æ±‚å‘¢ï¼Ÿé‚£æŸ¥è¯¢ç¼“å­˜ä¸ä»…æ²¡ç”¨ï¼Œè¿˜éœ€è¦æ¸…ç©ºç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<strong>ç¼“å­˜å¤±æ•ˆ</strong>ï¼Œåœ¨ä¸€ä¸ªæ›´æ–°è¯­å¥é¢‘ç¹çš„ç³»ç»Ÿä¸­ï¼Œè¦æŸ¥è¯¢ç¼“å­˜æœ‰ä½•ç”¨ï¼Ÿ</p><p>è®©äººæˆè°‘çš„æ˜¯ï¼Œåœ¨mysql8.0ä»¥åï¼ŒæŸ¥è¯¢ç¼“å­˜å½»åº•æˆäº†è¿‡å»å¼ã€‚</p></li><li><p><code>åˆ†æå™¨</code>ï¼š</p><ol><li>è¯æ³•åˆ†æï¼šæˆ‘ä»¬è¾“å…¥æ˜¯ç”±å¤šä¸ªå­—ç¬¦ä¸²å’Œç©ºæ ¼ç»„æˆçš„ä¸€æ¡sqlè¯­å¥ï¼Œmysqléœ€è¦è¯†åˆ«é‡Œé¢çš„å­—ç¬¦ä¸²åˆ†åˆ«æ˜¯å•¥ï¼Œå¦‚éœ€è¦æŠŠå­—ç¬¦ä¸²testè¯†åˆ«ä¸ºè¡¨testã€‚</li><li>è¯­æ³•åˆ†æï¼šç®€è¨€ä¹‹ï¼Œåˆ¤æ–­sqlè¯­å¥çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚</li></ol></li><li><p><code>ä¼˜åŒ–å™¨</code>ï¼š</p><p>å“ªäº›æ–¹é¢æœ‰ä¼˜åŒ–ç©ºé—´å‘¢ï¼Ÿ<strong>joinçš„è¿æ¥é¡ºåºï¼Œç´¢å¼•</strong>ï¼Œæ‰€ä»¥ä¼˜åŒ–å™¨ä¼šå†³å®šé€‰æ‹©å“ªä¸€ä¸ªã€‚</p></li><li><p><code>æ‰§è¡Œå™¨</code>ï¼š</p><p>åœ¨æ‰§è¡Œä¹‹å‰ï¼Œé¦–å…ˆæŸ¥çœ‹æ˜¯å¦å…·æœ‰æ‰§è¡Œæƒé™ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¿”å›é”™è¯¯ã€‚å¦‚æœå‘½ä¸­ï¼Œåˆ™<strong>åœ¨æŸ¥è¯¢ç¼“å­˜è¿”å›ç»“æœçš„æ—¶å€™åšæƒé™éªŒè¯</strong>ã€‚</p><p>å¦‚æœæœ‰æƒé™ï¼Œåˆ™æ‰§è¡Œå™¨è°ƒç”¨å¼•æ“æä¾›çš„æ¥å£ï¼Œè°ƒç”¨APIï¼Œå®Œæˆæ“ä½œã€‚</p></li></ol><h3 id="3-å­˜å‚¨å¼•æ“å±‚æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#3-å­˜å‚¨å¼•æ“å±‚æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="3.å­˜å‚¨å¼•æ“å±‚æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>3.å­˜å‚¨å¼•æ“å±‚æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p>ç•™ä¸ªå‘</p><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="äºŒ-ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"><a href="#äºŒ-ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="äºŒ.ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"></a>äºŒ.ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h2><h3 id="1-redo-logçš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#1-redo-logçš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="1.redo logçš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"></a>1.redo logçš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ</h3><p><code>redo-log</code>ï¼šå³é‡åšæ—¥å¿—ï¼Œå®ƒç‹¬å±äºInnoDBå¼•æ“ï¼Œæ˜¯ä¸€ç§ç‰©ç†æ—¥å¿—ï¼Œè®°å½•äº†åœ¨æ•°æ®é¡µä¸Šçš„æ“ä½œï¼Œå¯ä»¥ä¿è¯crash safe.</p><p><code>åŸç†</code>ï¼šå‡å¦‚åœ¨æ‰§è¡Œæ›´æ–°è¯­å¥åï¼Œç›´æ¥å°†æ›´æ–°å†™å›ç£ç›˜ï¼Œå°±ä¼šå½±å“å³æ—¶ä½“éªŒã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€Ÿé‰´è¿™æ ·çš„æ€æƒ³ï¼š</p><blockquote><p>ã€Šå­”ä¹™å·²ã€‹ä¸­çš„é…’åº—æŒæŸœä¸ä¼šç›´æ¥å°†è¿˜è´¦è®°å½•å†™åˆ°<strong>è´¦æœ¬(ç£ç›˜)</strong>ä¸­ï¼Œè€Œä¼šå°†<strong>è¿˜è´¦(æ›´æ–°</strong>,å³åšäº†ä»€ä¹ˆ)è®°å½•åœ¨<strong>ç²‰æ¿(redo-log)</strong>ä¸Šï¼Œåœ¨ç©ºé—²æ—¶ï¼Œåœ¨å…¨éƒ¨å†™å…¥è´¦æœ¬ä¸­ã€‚</p></blockquote><p><code>åº•å±‚åŸç†</code>ï¼šInnoDBçš„redo-logæ˜¯å›ºå®šå¤§å°çš„ï¼Œå¦‚å¯ä»¥é…ç½®ä¸ºä¸€ç»„4ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¤§å°1GBï¼Œè®°å½•æ—¥å¿—æ—¶ä½¿ç”¨<strong>å¾ªç¯é˜Ÿåˆ—</strong>çš„æ•°æ®ç»“æ„ï¼Œå½“å¾ªç¯é˜Ÿåˆ—å·²æ»¡ï¼Œä¼šå°†æœ€ä¹…çš„æ—¥å¿—æ“¦é™¤(å†™å…¥ç£ç›˜)ï¼Œç„¶åä½¿ç”¨æ–°çš„æ—¥å¿—å¡«å……ç©ºé—´ã€‚</p><p>redo-logå¹¶éç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå®ƒä¼šé¦–å…ˆå­˜å‚¨åˆ°<code>redo-log buffer</code>ï¼Œæ¥ç€å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿçš„<code>page cache</code>,æœ€åæ‰<code>æŒä¹…åŒ–</code>åˆ°ç£ç›˜ã€‚</p><h3 id="2-ä»€ä¹ˆæ˜¯WALï¼ˆwrite-ahead-loggingï¼‰æœºåˆ¶ï¼Œå¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-ä»€ä¹ˆæ˜¯WALï¼ˆwrite-ahead-loggingï¼‰æœºåˆ¶ï¼Œå¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.ä»€ä¹ˆæ˜¯WALï¼ˆwrite ahead loggingï¼‰æœºåˆ¶ï¼Œå¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.ä»€ä¹ˆæ˜¯WALï¼ˆwrite ahead loggingï¼‰æœºåˆ¶ï¼Œå¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç›´ç™½çš„è¯´ï¼Œå°±æ˜¯<code>å…ˆå†™æ—¥å¿—ï¼Œå†å†™å…¥ç£ç›˜</code>ï¼Œæ—¥å¿—æ˜¯è¢«åŠ è½½åˆ°å†…å­˜ä¸­çš„ï¼Œå†™å…¥é€Ÿåº¦å¿«ï¼Œè€Œå†™å…¥ç£ç›˜æ˜¯æœºæ¢°è¿åŠ¨ï¼Œå†™å…¥é€Ÿåº¦éå¸¸æ…¢ã€‚</p><h3 id="3-redo-logæ˜¯å¦‚ä½•ä¿è¯crash-safeçš„ï¼Ÿ"><a href="#3-redo-logæ˜¯å¦‚ä½•ä¿è¯crash-safeçš„ï¼Ÿ" class="headerlink" title="3.redo logæ˜¯å¦‚ä½•ä¿è¯crash-safeçš„ï¼Ÿ"></a>3.redo logæ˜¯å¦‚ä½•ä¿è¯crash-safeçš„ï¼Ÿ</h3><p>æ‰€è°“crashï¼ŒæŒ‡çš„<code>æ˜¯æ•°æ®åº“å¼‚å¸¸é‡å¯</code>çš„åœºæ™¯ï¼Œæ˜¾ç„¶ï¼Œå¦‚æœä¸ä½¿ç”¨redo-logæœºåˆ¶ï¼Œæ­¤æ—¶ä»…æœ‰è´Ÿè´£å½’æ¡£(ç”¨äºå¤‡ä»½)çš„bin-logï¼Œæ•°æ®çš„æ›´æ–°ä¸ä¼šè¢«åˆ·æ–°åˆ°ç£ç›˜ä¸­å»ã€‚</p><p>è€Œredo-logæœºåˆ¶è´Ÿè´£ç‰©ç†æ›´æ–°åˆ·æ–°åˆ°ç£ç›˜ä¸­å»ï¼Œ<code>ä¸ä¼šå‡ºç°ç‰©ç†ä¸é€»è¾‘æ•°æ®ä¸ä¸€è‡´</code>çš„çŠ¶å†µã€‚</p><h3 id="4-binlogå¦‚ä½•ç†è§£ï¼Œå®ƒçš„åº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Œå®ƒå¯ä»¥ä¿è¯crash-safeå—ï¼Ÿ"><a href="#4-binlogå¦‚ä½•ç†è§£ï¼Œå®ƒçš„åº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Œå®ƒå¯ä»¥ä¿è¯crash-safeå—ï¼Ÿ" class="headerlink" title="4.binlogå¦‚ä½•ç†è§£ï¼Œå®ƒçš„åº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Œå®ƒå¯ä»¥ä¿è¯crash-safeå—ï¼Ÿ"></a>4.binlogå¦‚ä½•ç†è§£ï¼Œå®ƒçš„åº•å±‚å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Œå®ƒå¯ä»¥ä¿è¯crash-safeå—ï¼Ÿ</h3><p><code>bin-log</code>:å³å½’æ¡£æ—¥å¿—ï¼Œç”±serverå±‚å®ç°ï¼Œè®°å½•æ•°æ®åº“çš„é€»è¾‘æ“ä½œï¼Œç”¨äºå…¨é‡å¤‡ä»½ã€‚å½“éœ€è¦æ¢å¤æ•°æ®æ—¶ï¼Œå¯ä»¥å–å‡ºæŸä¸ªæ—¶é—´æ®µå†…çš„bin-logè¿›è¡Œé‡æ”¾æ¢å¤ã€‚</p><p><code>åº•å±‚åŸç†</code>ï¼šbin-logåŒºåˆ«äºredo-logï¼Œå®ƒæ²¡æœ‰æ–‡ä»¶å¤§å°çš„é™åˆ¶ï¼Œä¼šè¿½åŠ å†™ï¼›</p><p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„binlog cache,ä½†æ˜¯ä¼šå…±ç”¨ä¸€ä»½binlogæ–‡ä»¶ã€‚</p><p>æŒä¹…åŒ–åˆ°ç£ç›˜åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šé¦–å…ˆå°†æ—¥å¿—å†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„<strong>page cache</strong>,æ­¤æ—¶å¹¶æ²¡æœ‰æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è¾ƒå¿«ï¼›æ¥ç€<strong>fsync</strong>,å³æ˜¯å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œä¸€èˆ¬è®¤ä¸ºåªæœ‰fsyncæ‰å ç£ç›˜çš„<strong>IOPS</strong>ã€‚</p><p><code>crash-safe</code>:crashè¦è§£å†³çš„é—®é¢˜æ˜¯é€»è¾‘æ•°æ®ä¸ç‰©ç†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¿è¯å°†å†…å­˜ä¸­ç‰©ç†æ•°æ®åˆ·æ–°åˆ°å†…å­˜ï¼Œä½†bin-logè¡¨ç¤ºæˆ‘åšä¸åˆ°~</p><h3 id="5-å¯¹æ¯”redo-logå’Œbin-log"><a href="#5-å¯¹æ¯”redo-logå’Œbin-log" class="headerlink" title="5.å¯¹æ¯”redo-logå’Œbin-log."></a>5.å¯¹æ¯”redo-logå’Œbin-log.</h3><table><thead><tr><th></th><th>redo-log</th><th>bin-log</th></tr></thead><tbody><tr><td>æ–‡ä»¶å¤§å°</td><td>è¦†ç›–å†™</td><td>è¿½åŠ å†™</td></tr><tr><td>å±‚çº§</td><td>serverå±‚</td><td>InnoDBå¼•æ“</td></tr><tr><td>æ—¥å¿—å½¢å¼</td><td>ç‰©ç†æ—¥å¿—</td><td>é€»è¾‘æ—¥å¿—</td></tr><tr><td>ä½œç”¨</td><td>åˆ·æ–°åˆ°ç£ç›˜ï¼Œç‰©ç†ä¸€è‡´æ€§</td><td>å½’æ¡£ï¼Œé€»è¾‘ä¸€è‡´æ€§</td></tr><tr><td>crash-safe</td><td>âˆš</td><td>Ã—</td></tr><tr><td>å®è´¨</td><td>è®°å½•æ•°æ®é¡µåšäº†ä»€ä¹ˆæ“ä½œ</td><td>statmentæ¨¡å¼ï¼šè®°å½•sqlè¯­å¥    rowæ¨¡å¼ï¼šè®°å½•æ›´æ–°å‰åçš„è¡Œï¼Œä¸€èˆ¬ä½¿ç”¨rowæ¨¡å¼</td></tr></tbody></table><h3 id="6-ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"><a href="#6-ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="6.ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"></a>6.ä¸€æ¡sqlæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h3><blockquote><p>update test set c=c+1 where id = 1</p></blockquote><ol><li>æ‰§è¡Œå™¨å…ˆæ‰¾å¼•æ“æ‰¾ID=1çš„è¿™ä¸€è¡Œï¼ŒIDä¸ºä¸»é”®ï¼Œå¼•æ“ä½¿ç”¨B+æ ‘çš„ä¸»é”®ç´¢å¼•æ‰¾åˆ°è¿™ä¸€è¡Œã€‚å¦‚æœè¯¥è¡Œåœ¨å†…å­˜ä¸­ï¼Œç›´æ¥è¿”å›ç»™æ‰§è¡Œå™¨ï¼›å¦åˆ™ï¼Œå…ˆä»ç£ç›˜è¯»å–åˆ°å†…å­˜ä¸­ï¼Œå†è¿”å›ï¼›</li><li>æ‰§è¡Œå™¨æ‰§è¡Œå¾—åˆ°æ–°æ•°æ®ï¼Œè°ƒç”¨å¼•æ“æ¥å£å†™å…¥æ–°çš„è¡Œè®°å½•ï¼›</li><li>å¼•æ“å°†è¿™è¡Œè®°å½•æ›´æ–°åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†æ›´æ–°çš„æ“ä½œè®°å½•å†™åˆ°redo-logä¸­ï¼Œredo-logè¿›è¡ŒprepareçŠ¶æ€ï¼›</li><li>æ‰§è¡Œå™¨ç”Ÿæˆbin-logï¼Œå°†bin-logå†™å…¥ç£ç›˜ï¼›</li><li>redo-logæ”¹ä¸ºcommitçŠ¶æ€ï¼Œæ›´æ–°å®Œæˆã€‚</li></ol><h3 id="7-å¦‚æœæ•°æ®åº“è¯¯æ“ä½œï¼Œå¦‚ä½•å°†æ•°æ®æ¢å¤ï¼Ÿ"><a href="#7-å¦‚æœæ•°æ®åº“è¯¯æ“ä½œï¼Œå¦‚ä½•å°†æ•°æ®æ¢å¤ï¼Ÿ" class="headerlink" title="7.å¦‚æœæ•°æ®åº“è¯¯æ“ä½œï¼Œå¦‚ä½•å°†æ•°æ®æ¢å¤ï¼Ÿ"></a>7.å¦‚æœæ•°æ®åº“è¯¯æ“ä½œï¼Œå¦‚ä½•å°†æ•°æ®æ¢å¤ï¼Ÿ</h3><p>æ‰¾åˆ°æœ€è¿‘ä¸€æ¬¡çš„å…¨é‡å¤‡ä»½ï¼Œ<code>ä»å¤‡ä»½æ—¶é—´ç‚¹å¼€å§‹</code>ï¼Œå°†å¤‡ä»½çš„bin-logä¾æ¬¡å–å‡ºï¼Œé‡æ”¾åˆ°è¯¯åˆ æ—¶åˆ»ã€‚</p><h3 id="8-ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤-å¦‚æœä¸ä¸¤é˜¶æ®µæäº¤ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#8-ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤-å¦‚æœä¸ä¸¤é˜¶æ®µæäº¤ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="8.ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤?å¦‚æœä¸ä¸¤é˜¶æ®µæäº¤ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>8.ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤?å¦‚æœä¸ä¸¤é˜¶æ®µæäº¤ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3><p>å³ç¡®å®šredo-logä¸bin-logæäº¤æ—¶æœºï¼Œé€šè¿‡<code>ä¸¤é˜¶æ®µæäº¤æ¥ä¿è¯è·¨ç³»ç»Ÿç»´æŒæ•°æ®é€»è¾‘ä¸€è‡´æ€§</code>ã€‚å¦‚æœæ²¡æœ‰ä¸¤é˜¶æ®µæäº¤ï¼Œå°±å¥½æ¯”è¯»åˆ°äº†äº‹åŠ¡çš„è„æ•°æ®ã€‚</p><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="ä¸‰-äº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§"><a href="#ä¸‰-äº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§" class="headerlink" title="ä¸‰.äº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§"></a>ä¸‰.äº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§</h2><h3 id="1-äº‹åŠ¡çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-äº‹åŠ¡çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.äº‹åŠ¡çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.äº‹åŠ¡çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote><p>äº‹åŠ¡æ˜¯å¯¹æ•°æ®åº“ä¸­æ•°æ®æ“ä½œçš„<code>ä¿è¯æ•°æ®é€»è¾‘ä¸€è‡´æ€§çš„æœ€å°æ“ä½œå•å…ƒ</code>ã€‚</p></blockquote><h3 id="2-ç®€è¿°æŸä¸€åœºæ™¯ä¸‹ï¼Œä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«çš„åŒºåˆ«"><a href="#2-ç®€è¿°æŸä¸€åœºæ™¯ä¸‹ï¼Œä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«çš„åŒºåˆ«" class="headerlink" title="2.ç®€è¿°æŸä¸€åœºæ™¯ä¸‹ï¼Œä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«çš„åŒºåˆ«"></a>2.ç®€è¿°æŸä¸€åœºæ™¯ä¸‹ï¼Œä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«çš„åŒºåˆ«</h3><p>æœ‰è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252119793.png" alt="img"></p><p>åœ¨è¯¥åœºæ™¯ä¸‹ï¼Œä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰ä¸åŒçš„è¿”å›å€¼ï¼š</p><ul><li><p><code>è¯»æœªæäº¤</code>ï¼šå³åœ¨äº‹åŠ¡Bæ²¡æœ‰æäº¤çš„æ—¶å€™ï¼Œå®ƒåšçš„å˜æ›´å°±å¯ä»¥è¢«äº‹åŠ¡Açœ‹åˆ°ã€‚æ‰€ä»¥è¯»åˆ°çš„å€¼åˆ†åˆ«æ˜¯1,2,2ï¼›</p></li><li><p><code>è¯»å·²æäº¤</code>ï¼šå³åªæœ‰åœ¨äº‹åŠ¡Aæäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰èƒ½è¢«äº‹åŠ¡Açœ‹åˆ°ï¼Œæ‰€ä»¥è¯»åˆ°çš„å€¼ä¸ºï¼š1,1,2ï¼›</p></li><li><p><code>å¯é‡å¤è¯»</code>ï¼šå³äº‹åŠ¡Aæ‰§è¡ŒæœŸé—´è¯»åˆ°çš„å€¼å’Œäº‹åŠ¡Aå¼€å¯æ—¶è¯»åˆ°çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¯»åˆ°çš„å€¼æ˜¯1,1,2ï¼›</p></li><li><p><code>ä¸²è¡ŒåŒ–</code>ï¼šå³äº‹åŠ¡Aï¼Œäº‹åŠ¡Bå¯¹äºåŒä¸€è¡Œè®°å½•ï¼Œä¼šé€šè¿‡åŠ è¯»å†™é”çš„æ–¹å¼æ¥é™åˆ¶å¦ä¸€ä¸ªäº‹åŠ¡ã€‚æ‰€ä»¥è¯»åˆ°çš„å€¼æ˜¯1,1,2.</p></li></ul><h3 id="3-è¯»å·²æäº¤ï¼Œå¯é‡å¤è¯»æ˜¯æ€æ ·é€šè¿‡è§†å›¾æ„å»ºå®ç°çš„ï¼Ÿ"><a href="#3-è¯»å·²æäº¤ï¼Œå¯é‡å¤è¯»æ˜¯æ€æ ·é€šè¿‡è§†å›¾æ„å»ºå®ç°çš„ï¼Ÿ" class="headerlink" title="3.è¯»å·²æäº¤ï¼Œå¯é‡å¤è¯»æ˜¯æ€æ ·é€šè¿‡è§†å›¾æ„å»ºå®ç°çš„ï¼Ÿ"></a>3.è¯»å·²æäº¤ï¼Œå¯é‡å¤è¯»æ˜¯æ€æ ·é€šè¿‡è§†å›¾æ„å»ºå®ç°çš„ï¼Ÿ</h3><p>é¦–å…ˆäº†è§£ä¸‹è§†å›¾çš„æ¦‚å¿µï¼š</p><blockquote><p>è§†å›¾æ˜¯å¯¹å¤æ‚sqlè¯­å¥çš„å°è£…ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ‹·è´é™æ€æ•°æ®ï¼Œå¯¹è§†å›¾åšçš„å˜æ›´ä¸ä¼šåŒæ­¥åˆ°æ•°æ®åº“ä¸­ã€‚</p></blockquote><ul><li><p><code>å¯é‡å¤è¯»</code>ï¼šåœ¨è¯¥éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ•°æ®åº“åœ¨äº‹åŠ¡å¯åŠ¨æ—¶åˆ›å»ºäº†ä¸€ä¸ªè§†å›¾ï¼Œè®¿é—®æ—¶ä»¥è§†å›¾çš„é€»è¾‘ç»“æœä¸ºå‡†ï¼Œåœ¨<strong>äº‹åŠ¡å­˜åœ¨æœŸé—´</strong>éƒ½ä¼šä½¿ç”¨è¿™ä¸ªè§†å›¾ã€‚ä»–ä¸ºmysqlçš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼›</p></li><li><p><code>è¯»æœªæäº¤</code>ï¼šç›´æ¥è¿”å›è®°å½•æœ€æ–°å€¼ï¼Œæ²¡æœ‰è§†å›¾æ¦‚å¿µï¼›</p></li><li><p><code>è¯»å·²æäº¤</code>ï¼šè§†å›¾åœ¨<strong>sqlè¯­å¥å¼€å§‹æ‰§è¡Œæ—¶</strong>åˆ›å»ºã€‚å®ƒä¸ºoracleçš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚</p></li><li><input checked disabled type="checkbox"> <p>æ³¨:é…ç½®æ–¹å¼ï¼štransaction-isolation=READ-COMMITED</p></li></ul><h3 id="4-ç®€è¦è¯´æ˜å¯é‡å¤è¯»çš„ä½¿ç”¨åœºæ™¯"><a href="#4-ç®€è¦è¯´æ˜å¯é‡å¤è¯»çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="4.ç®€è¦è¯´æ˜å¯é‡å¤è¯»çš„ä½¿ç”¨åœºæ™¯"></a>4.ç®€è¦è¯´æ˜å¯é‡å¤è¯»çš„ä½¿ç”¨åœºæ™¯</h3><p>åœ¨è®°è´¦çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚</p><h3 id="5-äº‹åŠ¡éš”ç¦»æ˜¯æ€æ ·é€šè¿‡read-viewå®ç°çš„"><a href="#5-äº‹åŠ¡éš”ç¦»æ˜¯æ€æ ·é€šè¿‡read-viewå®ç°çš„" class="headerlink" title="5.äº‹åŠ¡éš”ç¦»æ˜¯æ€æ ·é€šè¿‡read-viewå®ç°çš„?"></a>5.äº‹åŠ¡éš”ç¦»æ˜¯æ€æ ·é€šè¿‡read-viewå®ç°çš„?</h3><p>ä¹‹å‰æˆ‘ä»¬æåˆ°ï¼Œåœ¨äº‹åŠ¡éš”ç¦»ä¸­ï¼Œæä¾›äº†<code>è§†å›¾è¿™ç§æ•°æ®æ‹·è´</code>çš„æ–¹å¼ï¼Œè€Œåœ¨äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œæˆ‘ä»¬ä¼šè¯»åˆ°ä¸åŒçš„æ•°æ®ï¼Œè¿™è¯´æ˜æ˜¯å­˜åœ¨å¤šä¸ªè§†å›¾çš„ï¼Œä¹Ÿå°±æ˜¯read-viewã€‚</p><p>åœ¨MYSQLä¸­ï¼Œå®é™…ä¸Šæ¯æ¡è®°å½•åœ¨æ›´æ–°æ—¶éƒ½ä¼šè®°å½•ä¸€æ¡<code>å›æ»šæ“ä½œ</code>ï¼Œé€šè¿‡å›æ»šæ“ä½œï¼Œå¯ä»¥å¾—åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€çš„å€¼ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252120128.png" alt="img"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>åŒä¸€ä¸ªè®°å½•åœ¨æ•°æ®åº“ä¸­æ˜¯å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„</code>ï¼Œå½“æˆ‘ä»¬è¦è¯»å–æ•°æ®æ—¶ï¼Œè¦åˆ¤æ–­è¿™ä¸ªæ•°æ®çš„ç‰ˆæœ¬å¯¹äºå½“å‰äº‹åŠ¡æ˜¯å¦å¯è§ï¼Œå¦‚æœä¸å¯è§ï¼Œå°±é€šè¿‡<code>undo-log</code>è®¡ç®—å¾—åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç›´åˆ°æ‰¾åˆ°æ­£ç¡®ç‰ˆæœ¬ä¸ºæ­¢ã€‚</p><p>åœ¨ä¸éœ€è¦çš„æ—¶å€™ï¼Œæ•°æ®åº“ç³»ç»Ÿä¼šå°†å›æ»šæ—¥å¿—åˆ é™¤ã€‚</p><h3 id="6-å¹¶å‘ç‰ˆæœ¬æ§åˆ¶çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ"><a href="#6-å¹¶å‘ç‰ˆæœ¬æ§åˆ¶çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="6.å¹¶å‘ç‰ˆæœ¬æ§åˆ¶çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ"></a>6.å¹¶å‘ç‰ˆæœ¬æ§åˆ¶çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ</h3><p><code>æ¦‚å¿µ</code>ï¼šåŒä¸€ä¸ªæ•°æ®è¡Œï¼Œåœ¨æ•°æ®åº“ä¸­å­˜åœ¨<code>å¤šä¸ªç‰ˆæœ¬å·</code>ï¼Œè¿™ä¸ªç‰ˆæœ¬å·å¯ä»¥ç†è§£ä¸ºå½“å‰æ“ä½œè¿™è¡Œæ•°æ®çš„<code>äº‹åŠ¡çš„ID</code>ã€‚</p><p><code>å®ç°</code>ï¼šåœ¨è¿›è¡Œå¹¶å‘æ“ä½œæ—¶ï¼Œä¼šä½¿ç”¨<code>è¯¥è¡Œçš„ç‰ˆæœ¬å·ä¸å½“å‰äº‹åŠ¡çš„ç‰ˆæœ¬å·</code>è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåˆšå¥½ç­‰äºï¼Œä¹Ÿå°±æ˜¯è¯´è¿™è¡Œæ•°æ®æ˜¯ç”±è¿™ä¸ªäº‹åŠ¡æäº¤ç”Ÿæˆçš„ã€‚</p><h3 id="7-é•¿äº‹åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨é•¿äº‹åŠ¡ä¼šæ‹–å®æ•´ä¸ªåº“ï¼Ÿå¦‚ä½•æŸ¥è¯¢å„ä¸ªè¡¨ä¸­çš„é•¿äº‹åŠ¡ï¼Œé‚£åº”è¯¥å¦‚ä½•é¿å…ä½¿ç”¨é•¿äº‹åŠ¡ï¼Ÿ"><a href="#7-é•¿äº‹åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨é•¿äº‹åŠ¡ä¼šæ‹–å®æ•´ä¸ªåº“ï¼Ÿå¦‚ä½•æŸ¥è¯¢å„ä¸ªè¡¨ä¸­çš„é•¿äº‹åŠ¡ï¼Œé‚£åº”è¯¥å¦‚ä½•é¿å…ä½¿ç”¨é•¿äº‹åŠ¡ï¼Ÿ" class="headerlink" title="7.é•¿äº‹åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨é•¿äº‹åŠ¡ä¼šæ‹–å®æ•´ä¸ªåº“ï¼Ÿå¦‚ä½•æŸ¥è¯¢å„ä¸ªè¡¨ä¸­çš„é•¿äº‹åŠ¡ï¼Œé‚£åº”è¯¥å¦‚ä½•é¿å…ä½¿ç”¨é•¿äº‹åŠ¡ï¼Ÿ"></a>7.é•¿äº‹åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨é•¿äº‹åŠ¡ä¼šæ‹–å®æ•´ä¸ªåº“ï¼Ÿå¦‚ä½•æŸ¥è¯¢å„ä¸ªè¡¨ä¸­çš„é•¿äº‹åŠ¡ï¼Œé‚£åº”è¯¥å¦‚ä½•é¿å…ä½¿ç”¨é•¿äº‹åŠ¡ï¼Ÿ</h3><p><code>æ¦‚å¿µ</code>ï¼šéœ€è¦æ‰§è¡Œå¾ˆä¹…çš„äº‹åŠ¡ï¼›</p><p><code>åº•å±‚</code>ï¼šé•¿äº‹åŠ¡æ„å‘³ç€ç³»ç»Ÿä¸­æœ‰éå¸¸å¤šçš„ä¸èƒ½è¢«åˆ é™¤çš„äº‹åŠ¡è§†å›¾ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡çš„<code>ç©ºé—´å ç”¨</code>ï¼Œè€Œåœ¨mysql5.5ä¹‹å‰ï¼Œå³ä¾¿é•¿äº‹åŠ¡è¢«æäº¤ï¼Œ<code>å›æ»šæ®µè¢«æ¸…ç†ï¼Œæ–‡ä»¶ä¹Ÿä¸ä¼šå˜å°</code>ï¼Œå¦å¤–é•¿äº‹åŠ¡è¿˜<code>å ç”¨é”èµ„æº</code>ï¼Œè¿™æ—¶å…¶ä»–å°±ä¼šå› é”ç­‰å¾…é‡æ–°å»ºç«‹è¿æ¥ï¼Œ<code>mysqlçš„è¿æ¥è¢«å ç”¨çˆ†æ»¡</code>ï¼Œå¯¼è‡´æ‹–å®æ•´ä¸ªåº“ã€‚</p><p><code>æŸ¥è¯¢</code>ï¼šSELECT * FROM information_schema.INNODB_TRX</p><p><code>é¿å…</code>ï¼š</p><ol><li>è®¾ç½®autocommmit=1,å³è‡ªåŠ¨æäº¤ï¼›</li><li>å†™è„šæœ¬ç›‘æ§information_schema.INNODB_TRXçš„å†…å®¹ï¼Œå‘ç°é•¿äº‹åŠ¡å°±killæ‰å®ƒï¼›</li><li>è®¾ç½®SQLè¯­å¥æ‰€èƒ½æ‰§è¡Œçš„æœ€å¤§è¿è¡Œæ—¶é—´ï¼›</li><li>è®¾ç½®å›æ»šè¡¨å•ç‹¬å­˜æ”¾ï¼Œä¾¿äºå›æ”¶è¡¨ç©ºé—´ã€‚</li><li>å°½é‡å»ä½¿ç”¨å°äº‹åŠ¡ã€‚</li></ol><h3 id="8-äº‹åŠ¡çš„å¯åŠ¨æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ"><a href="#8-äº‹åŠ¡çš„å¯åŠ¨æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ" class="headerlink" title="8.äº‹åŠ¡çš„å¯åŠ¨æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ"></a>8.äº‹åŠ¡çš„å¯åŠ¨æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ</h3><ul><li><code>begin:</code></li><li><code>start trasaction:</code>ä¸beginæ•ˆæœä¸€è‡´ï¼›</li><li><code>start trasaction with consistent snaps hot:</code>è¯¥è¯­å¥æ‰§è¡Œåï¼Œä¼šåˆ›å»ºä¸€è‡´æ€§è§†å›¾ï¼Œåˆ†é…äº‹åŠ¡IDã€‚</li></ul><h3 id="9-commit-work-and-chainçš„è¯­æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#9-commit-work-and-chainçš„è¯­æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="9.commit work and chainçš„è¯­æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>9.commit work and chainçš„è¯­æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p>æäº¤å½“å‰äº‹åŠ¡+å¼€å¯ä¸‹ä¸€ä¸ªäº‹åŠ¡=begin+commit;</p><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="å››-æ·±å…¥æµ…å‡ºç´¢å¼•ä¸Š"><a href="#å››-æ·±å…¥æµ…å‡ºç´¢å¼•ä¸Š" class="headerlink" title="å››.æ·±å…¥æµ…å‡ºç´¢å¼•ä¸Š"></a>å››.æ·±å…¥æµ…å‡ºç´¢å¼•ä¸Š</h2><h3 id="1-ç´¢å¼•çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-ç´¢å¼•çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.ç´¢å¼•çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.ç´¢å¼•çš„æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>æ¦‚å¿µ</strong>ï¼šç´¢å¼•æ˜¯ä¸€ä¸ªç›¸å¯¹æŠ½è±¡çš„æ•°æ®ç»“æ„ï¼Œåœ¨ä¹¦ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸æŠ½å–<code>ç›®å½•åä¸å¯¹åº”çš„é¡µç å·ä½œä¸ºç›®å½•ä»¥å¿«é€Ÿå®šä½æ•°æ®</code>ï¼Œåœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œç´¢å¼•å°±æ˜¯ä»¥è¿™æ ·çš„ä½œç”¨å­˜åœ¨çš„ï¼Œå®ƒæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä¸€ä¸ª<code>æ’åº</code>çš„æ•°æ®ç»“æ„)ï¼Œä»¥<code>ååŠ©å¿«é€ŸæŸ¥è¯¢</code>ã€æ›´æ–°æ•°æ®åº“è¡¨ä¸­æ•°æ®ã€‚</p><p><strong>ç±»æ¯”</strong>ï¼šæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨<strong>inode</strong>æ¥å”¯ä¸€æ ‡è¯†æ–‡ä»¶ï¼Œåœ¨inodeä¸­ï¼Œè®°å½•äº†å„ä¸ª<code>æ–‡ä»¶åˆ†åˆ«åŒ…å«å“ªäº›ç£ç›˜å—</code>ï¼Œç»™å®šinode,å°±å¯ä»¥æ‰¾åˆ°æ–‡ä»¶çš„æ‰€æœ‰å—ï¼Œåœ¨inodeä¸­ï¼ŒåŒæ ·å­˜å‚¨äº†æ–‡ä»¶å±æ€§çš„ç£ç›˜åœ°å€ã€‚</p><h3 id="2-ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹å“ˆå¸Œè¡¨"><a href="#2-ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹å“ˆå¸Œè¡¨" class="headerlink" title="2.ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹å“ˆå¸Œè¡¨"></a>2.ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹å“ˆå¸Œè¡¨</h3><p><strong>æ¦‚è¿°</strong>ï¼šå“ˆå¸Œè¡¨æ˜¯ä¸€ç§ä»¥<code>é”®å€¼å¯¹</code>å­˜å‚¨æ•°æ®çš„ç»“æ„ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥å¾…æŸ¥æ‰¾çš„keyï¼Œå°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„value,å“ˆå¸Œè¡¨çš„æ€è·¯å¾ˆç®€å•ï¼ŒæŠŠå€¼æ”¾åœ¨æ•°ç»„ä¸­ï¼Œç”¨ä¸€ä¸ª<code>å“ˆå¸Œå‡½æ•°æŠŠkeyæ¢ç®—æˆä¸€ä¸ªç¡®å®šçš„ä½ç½®</code>ï¼Œç„¶åå°†valueæ”¾åœ¨æ•°ç»„çš„è¿™ä¸ªä½ç½®ã€‚</p><p><strong>å“ˆå¸Œå†²çª</strong>ï¼šä½¿ç”¨é“¾è¡¨æ³•è§£å†³ï¼›</p><p><strong>ç¤ºä¾‹</strong>ï¼š<img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252121333.png" alt="img"></p><p><strong>ç‰¹ç‚¹</strong>ï¼šåªé€‚ç”¨äº<code>ç­‰å€¼æŸ¥è¯¢</code>ï¼Œå¯ä»¥åº”ç”¨äºNoSQLä¸èƒ½åš<code>åŒºé—´æŸ¥è¯¢</code>ã€‚</p><h3 id="3-ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹æœ‰åºæ•°ç»„"><a href="#3-ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹æœ‰åºæ•°ç»„" class="headerlink" title="3.ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹æœ‰åºæ•°ç»„"></a>3.ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹æœ‰åºæ•°ç»„</h3><p><strong>æ¦‚è¿°</strong>ï¼šå°†å…ƒç´ æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åˆ—ï¼Œè¿™é‡Œçš„é¡ºåº<code>ä¸ä¸€å®šæ˜¯ä¸¥æ ¼è‡ªå¢</code>ï¼Œè€Œæ˜¯æŒ‰ç…§æŸä¸€å±æ€§ä»å°åˆ°å¤§æ’åºã€‚å‡å¦‚æœ‰ä¸€ä¸ªæŒ‰ç…§èº«ä»½è¯å·æ’åˆ—çš„æœ‰åºæ•°ç»„ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢æŸä¸€ä¸ªèº«ä»½è¯å·çš„åå­—ï¼Œé€šè¿‡<code>äºŒåˆ†æ³•</code>å°±å¯ä»¥æ‰¾åˆ°ã€‚</p><p><strong>ç¤ºä¾‹</strong>ï¼š<img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252122045.png" alt="img"></p><p><strong>ç‰¹ç‚¹</strong>ï¼šå¯¹äº<code>ç­‰å€¼æŸ¥æ‰¾</code>å’Œ<code>èŒƒå›´æŸ¥æ‰¾</code>éƒ½è¾ƒå‹å¥½ï¼ŒæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(logN)</code>,ä½†å®é™…ä¸Šæœ‰åºæ•°ç»„å¹¶æ²¡æœ‰å¾—åˆ°å¤§é‡åº”ç”¨ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ’å…¥å…ƒç´ æ—¶éœ€è¦å¤§é‡çš„<code>æ•°æ®æ¬ç§»</code>ï¼Œä¹Ÿå› æ­¤æœ‰åºæ•°ç»„è¢«å¤§é‡åº”ç”¨äº<code>é™æ€å­˜å‚¨å¼•æ“</code>ã€‚</p><h3 id="4-ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹B-æ ‘"><a href="#4-ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹B-æ ‘" class="headerlink" title="4.ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹B+æ ‘"></a>4.ç®€è¿°ç´¢å¼•æ¨¡å‹ä¹‹B+æ ‘</h3><p><strong>æ¦‚è¿°</strong>ï¼šB+æ ‘æ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œå®ƒçš„èŠ‚ç‚¹éµå¾ªä¸¥æ ¼çš„å¤§å°å…³ç³»ï¼Œ<code>äºŒå‰æœç´¢æ ‘çš„æŸ¥è¯¢ï¼Œæ›´æ–°çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logN)</code>,</p><p><strong>ç¤ºä¾‹</strong>ï¼š<img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310252122217.png" alt="img"></p><p><strong>ç‰¹ç‚¹</strong>ï¼š<code>B+æ ‘</code>å³ä¸ºInnoDBçš„å¼•æ“æ¨¡å‹ï¼Œä½†è€ƒè™‘åˆ°æ€§èƒ½ï¼Œæ›´å¤šè¢«ä½¿ç”¨çš„å®åˆ™æ˜¯<code>å¤šå‰æ ‘</code>ã€‚</p><h3 id="5-ä¸ºä»€ä¹ˆNå‰æ ‘è¢«å¹¿æ³›åº”ç”¨åˆ°æ•°æ®åº“å¼•æ“ä¸­ï¼Ÿ"><a href="#5-ä¸ºä»€ä¹ˆNå‰æ ‘è¢«å¹¿æ³›åº”ç”¨åˆ°æ•°æ®åº“å¼•æ“ä¸­ï¼Ÿ" class="headerlink" title="5.ä¸ºä»€ä¹ˆNå‰æ ‘è¢«å¹¿æ³›åº”ç”¨åˆ°æ•°æ®åº“å¼•æ“ä¸­ï¼Ÿ"></a>5.ä¸ºä»€ä¹ˆNå‰æ ‘è¢«å¹¿æ³›åº”ç”¨åˆ°æ•°æ®åº“å¼•æ“ä¸­ï¼Ÿ</h3><p>æˆ‘ä»¬å…ˆè®¾æƒ³äºŒå‰æ ‘å­˜å‚¨çš„åœºæ™¯ï¼šå‡å¦‚äºŒå‰æ ‘<code>æ ‘é«˜20</code>ï¼Œå­˜å‚¨äº†100ä¸‡è¡Œæ•°æ®ï¼Œ<code>éœ€è¦è¯»å–20ä¸ªæ•°æ®å—(è¿ç»­çš„å­˜å‚¨ç©ºé—´)</code>ï¼Œåœ¨æœºæ¢°ç¡¬ç›˜æ—¶ä»£ï¼Œè¯»å–ç¡¬ç›˜æ˜¯é¾Ÿé€Ÿï¼Œè€Œè¿™æ ·çš„é¾Ÿé€Ÿï¼Œå±…ç„¶è¦è¿ç»­æŸ¥è¯¢20æ¬¡ï¼Œé‚£æ€ä¹ˆæé«˜æŸ¥è¯¢çš„æ€§èƒ½å‘¢ï¼Ÿ</p><p>å‡å°‘æ ‘é«˜ï¼Œå¢åŠ ä¸€ä¸ªæ•°æ®å—ä¸­çš„æ•°æ®ï¼Œå³<code>ä½¿ç”¨Nå‰æ ‘</code>ã€‚</p><h3 id="6-åŸºäºä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„æŸ¥è¯¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#6-åŸºäºä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„æŸ¥è¯¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="6.åŸºäºä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„æŸ¥è¯¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>6.åŸºäºä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„æŸ¥è¯¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>å‰æ</strong>ï¼šåœ¨InnoDBä¸­ï¼Œ<code>è¡¨æ˜¯æ ¹æ®ä¸»é”®é¡ºåºä»¥ç´¢å¼•çš„å½¢å¼å­˜æ”¾</code>ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼è¢«ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ã€‚åˆå› ä¸ºç´¢å¼•æ˜¯B+æ ‘çš„æ•°æ®ç»“æ„ï¼Œå³æ•°æ®å­˜å‚¨åœ¨B+æ ‘ä¸­ï¼Œè€Œ<code>æ¯ä¸€ä¸ªç´¢å¼•åœ¨InnoDBé‡Œé¢å¯¹åº”ä¸€å¼ è¡¨</code>ã€‚å†è¿›ä¸€æ­¥ï¼Œåˆ™å¯ä»¥è®¤ä¸ºè¡¨æ˜¯ä»¥å¤šä¸ªB+æ ‘çš„å½¢å¼å­˜å‚¨çš„ã€‚</p><p><strong>ä¸»é”®ç´¢å¼•</strong>ï¼šä¸»é”®ç´¢å¼•çš„å¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯<code>æ•´è¡Œæ•°æ®</code>ï¼Œä¹Ÿå› æ­¤å¾—åèšç°‡ç´¢å¼•ã€‚</p><p><strong>æ™®é€šç´¢å¼•</strong>ï¼šéä¸»é”®ç´¢å¼•çš„å¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯<code>ä¸»é”®çš„å€¼</code>ï¼Œå› æ­¤å¾—åäºŒçº§ç´¢å¼•ã€‚</p><p><strong>åŒºåˆ«</strong>ï¼šå¦‚æœwhereæ¡ä»¶éœ€è¦èµ°ä¸»é”®ç´¢å¼•ï¼Œåˆ™åªéœ€è¦æœç´¢ä¸»é”®çš„B+æ ‘ï¼Œå¦‚æœwhereæ¡ä»¶èµ°çš„æ˜¯æ™®é€šç´¢å¼•ï¼Œåˆ™å°±éœ€è¦å…ˆæŸ¥è¯¢æ™®é€šç´¢å¼•çš„B+æ ‘ï¼Œå¾—åˆ°ä¸»é”®ï¼Œå†å»æŸ¥è¯¢æ™®é€šç´¢å¼•ï¼Œå³<code>å›è¡¨</code></p><h3 id="7-ç®€è¿°ç»´æŠ¤B-æ ‘ç´¢å¼•æ—¶çš„é¡µåˆ†è£‚ä¸é¡µåˆå¹¶ï¼Ÿ"><a href="#7-ç®€è¿°ç»´æŠ¤B-æ ‘ç´¢å¼•æ—¶çš„é¡µåˆ†è£‚ä¸é¡µåˆå¹¶ï¼Ÿ" class="headerlink" title="7.ç®€è¿°ç»´æŠ¤B+æ ‘ç´¢å¼•æ—¶çš„é¡µåˆ†è£‚ä¸é¡µåˆå¹¶ï¼Ÿ"></a>7.ç®€è¿°ç»´æŠ¤B+æ ‘ç´¢å¼•æ—¶çš„é¡µåˆ†è£‚ä¸é¡µåˆå¹¶ï¼Ÿ</h3><ul><li><strong>é¡µåˆ†è£‚</strong>ï¼šåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœå½“å‰æ•°æ®é¡µå·²æ»¡ï¼Œå°±ä¼šç”³è¯·ä¸€ä¸ªæ–°çš„æ•°æ®é¡µï¼Œå¯¼è‡´<code>ç©ºé—´åˆ©ç”¨ç‡ä¸‹é™</code>ï¼›</li><li><strong>é¡µåˆå¹¶</strong>ï¼šå¦‚æœå› ä¸ºåˆ é™¤æ•°æ®ï¼Œå¯¼è‡´<code>åˆ©ç”¨ç‡å˜ä½</code>ï¼Œåˆ™é¡µåˆå¹¶å°±æˆäº†å¯é€‰çš„ä¼˜åŒ–æ–¹å¼ã€‚</li></ul><h3 id="8-å“ªäº›åœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œè€Œå“ªäº›åœºæ™¯ä¸åº”è¯¥"><a href="#8-å“ªäº›åœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œè€Œå“ªäº›åœºæ™¯ä¸åº”è¯¥" class="headerlink" title="8.å“ªäº›åœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œè€Œå“ªäº›åœºæ™¯ä¸åº”è¯¥"></a>8.å“ªäº›åœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œè€Œå“ªäº›åœºæ™¯ä¸åº”è¯¥</h3><p><code>è‡ªå¢ä¸»é”®é€‚åˆé€’å¢æ’å…¥</code>çš„åœºæ™¯ï¼Œè¿™æ ·è¿½åŠ æ•°æ®æ—¶ï¼Œå°±ä¸éœ€è¦æ•°æ®æ¬ç§»å’¯ã€‚æ‰€ä»¥<strong>å¤§å¤šæ•°çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨è‡ªå¢ä¸»é”®</strong>ã€‚</p><p>è€Œåœ¨æœ‰ä¸šåŠ¡é€»è¾‘çš„å­—æ®µåšä¸»é”®æ—¶ï¼Œæ•°æ®æˆæœ¬å°±ä¼šå˜é«˜å•¦ã€‚</p><p>å¦‚æœåœ¨<code>å…¸å‹çš„KVåœºæ™¯ä¸‹ï¼Œå°±éœ€è¦ä½¿ç”¨æ™®é€šç´¢å¼•</code>ã€‚</p><h3 id="9-åˆ é™¤ä¸»é”®ç´¢å¼•ä¸æ™®é€šç´¢å¼•æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#9-åˆ é™¤ä¸»é”®ç´¢å¼•ä¸æ™®é€šç´¢å¼•æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="9.åˆ é™¤ä¸»é”®ç´¢å¼•ä¸æ™®é€šç´¢å¼•æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"></a>9.åˆ é™¤ä¸»é”®ç´¢å¼•ä¸æ™®é€šç´¢å¼•æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h3><p>åˆ é™¤ï¼Œé‡å»ºä¸»é”®ç´¢å¼•åï¼Œéœ€è¦åŒæ—¶<code>ä¿®æ”¹æ™®é€šç´¢å¼•å¯¹åº”çš„ä¸»é”®ç´¢å¼•</code>ï¼Œè€Œåˆ é™¤ï¼Œé‡å»ºæ™®é€šç´¢å¼•åˆ™è®©äººçœå¿ƒä¸å°‘ã€‚</p><h3 id="10-ç´¢å¼•çš„ä¼˜åŒ–"><a href="#10-ç´¢å¼•çš„ä¼˜åŒ–" class="headerlink" title="10.ç´¢å¼•çš„ä¼˜åŒ–"></a>10.ç´¢å¼•çš„ä¼˜åŒ–</h3><ol><li><strong>è¦†ç›–ç´¢å¼•ï¼š</strong>å¦‚æœæŸ¥è¯¢æ¡ä»¶ä½¿ç”¨çš„æ˜¯æ™®é€šç´¢å¼•ï¼Œæˆ–è€…è”åˆç´¢å¼•çš„æœ€å·¦åŸåˆ™å­—æ®µï¼ŒæŸ¥è¯¢ç»“æœæ˜¯è”åˆç´¢å¼•çš„å­—æ®µæˆ–è€…ä¸»é”®ï¼Œ<code>ä¸ç”¨å›è¡¨æ“ä½œï¼Œç›´æ¥è¿”å›ç»“æœ</code>ï¼Œå‡å°‘ç£ç›˜è¯»å†™çš„æ¬¡æ•°ï¼Œæé«˜IOæ€§èƒ½ã€‚</li><li><strong>æœ€å·¦å‰ç¼€ï¼š</strong>è”åˆç´¢å¼•çš„<code>æœ€å·¦Nä¸ªå­—æ®µ</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç´¢å¼•çš„å‰Mä¸ªå­—ç¬¦ï¼›</li><li><strong>è”åˆç´¢å¼•ï¼š</strong>æ ¹æ®åˆ›å»º<code>è”åˆç´¢å¼•</code>çš„é¡ºåºï¼Œ<code>ä»¥æœ€å·¦åŸåˆ™è¿›è¡Œwhereæ£€ç´¢</code>ï¼Œæ¯”å¦‚(age,name)ä»¥age=1æˆ–è€…age=1 and name=â€™å¼ ä¸‰â€™å¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œå•ä»¥name=â€å¼ ä¸‰â€ä¸ä¼šä½¿ç”¨ç´¢å¼•ã€‚è€ƒè™‘åˆ°å­˜å‚¨ç©ºé—´çš„é—®é¢˜ï¼Œè¿˜éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå°†æŸ¥æ‰¾é¢‘ç¹çš„æ•°æ®è¿›è¡Œé å·¦åˆ›å»ºç´¢å¼•ã€‚</li><li><strong>ç´¢å¼•ä¸‹æ¨ï¼š</strong>like â€œhello%â€ and age&gt;10æ£€ç´¢ï¼Œåœ¨mysql5.6ä¹‹å‰ï¼Œä¼šå¯¹åŒ¹é…çš„æ•°æ®è¿›è¡Œä¼šå›è¡¨æŸ¥è¯¢ï¼Œ5.6ç‰ˆæœ¬ä»¥åï¼Œ<code>ä¼šå…ˆè¿‡æ»¤ä¸åˆæ³•çš„æ•°æ®ï¼Œå†å¯¹åˆæ³•çš„æ•°æ®è¿›è¡Œå›è¡¨</code>ï¼Œä»è€Œé™ä½å›è¡¨ç‡ï¼Œæå‡æ£€ç´¢ç‡ã€‚</li></ol><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="äº”-å…¨å±€é”å’Œè¡¨é”ï¼šç»™è¡¨åŠ ä¸ªå­—æ®µæ€ä¹ˆæœ‰é‚£ä¹ˆå¤šé˜»ç¢"><a href="#äº”-å…¨å±€é”å’Œè¡¨é”ï¼šç»™è¡¨åŠ ä¸ªå­—æ®µæ€ä¹ˆæœ‰é‚£ä¹ˆå¤šé˜»ç¢" class="headerlink" title="äº”.å…¨å±€é”å’Œè¡¨é”ï¼šç»™è¡¨åŠ ä¸ªå­—æ®µæ€ä¹ˆæœ‰é‚£ä¹ˆå¤šé˜»ç¢"></a>äº”.å…¨å±€é”å’Œè¡¨é”ï¼šç»™è¡¨åŠ ä¸ªå­—æ®µæ€ä¹ˆæœ‰é‚£ä¹ˆå¤šé˜»ç¢</h2><h3 id="1-ç®€è¿°å…¨å±€é”é”"><a href="#1-ç®€è¿°å…¨å±€é”é”" class="headerlink" title="1.ç®€è¿°å…¨å±€é”é”"></a>1.ç®€è¿°å…¨å±€é”é”</h3><p><strong>æ¦‚è¿°</strong>ï¼šå¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚<br><strong>åŠ é”æ–¹å¼</strong>ï¼š<code>Flush tables with read lock(FTWRL)</code>ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥ä½¿æ•´ä¸ªåº“å¤„äºåªè¯»çŠ¶æ€ã€‚ä½¿ç”¨è¯¥å‘½ä»¤ä¹‹åï¼Œæ•°æ®æ›´æ–°è¯­å¥ã€æ•°æ®å®šä¹‰è¯­å¥å’Œæ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ç­‰æ“ä½œéƒ½ä¼š<code>è¢«é˜»å¡</code>ã€‚<br><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå…¨åº“é€»è¾‘å¤‡ä»½ã€‚<br><strong>é£é™©</strong>ï¼š<br>    1.å¦‚æœåœ¨<code>ä¸»åº“å¤‡ä»½</code>ï¼Œåœ¨å¤‡ä»½æœŸé—´ä¸èƒ½æ›´æ–°ï¼Œ<code>ä¸šåŠ¡åœæ‘†</code><br>    2.å¦‚æœåœ¨<code>ä»åº“å¤‡ä»½</code>ï¼Œå¤‡ä»½æœŸé—´ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥çš„binlogï¼Œå¯¼è‡´<code>ä¸»ä»å»¶è¿Ÿ</code></p><h3 id="2-InnoDBæ˜¯å¦‚ä½•å®ç°å…¨å±€å¤‡ä»½çš„"><a href="#2-InnoDBæ˜¯å¦‚ä½•å®ç°å…¨å±€å¤‡ä»½çš„" class="headerlink" title="2.InnoDBæ˜¯å¦‚ä½•å®ç°å…¨å±€å¤‡ä»½çš„"></a>2.InnoDBæ˜¯å¦‚ä½•å®ç°å…¨å±€å¤‡ä»½çš„</h3><p><strong>mysqldump</strong>ï¼šå®˜æ–¹è‡ªå¸¦çš„é€»è¾‘å¤‡ä»½å·¥å…·mysqldumpï¼Œå½“mysqldumpä½¿ç”¨å‚æ•°<code>--single-transaction</code>çš„æ—¶å€™ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç¡®ä¿æ‹¿åˆ°<code>ä¸€è‡´æ€§è§†å›¾</code>ã€‚è€Œç”±äº<code>MVCC</code>çš„æ”¯æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸æ›´æ–°çš„ã€‚</p><p>ä¸€è‡´æ€§è¯»æ˜¯å¥½ï¼Œä½†æ˜¯å‰ææ˜¯å¼•æ“è¦æ”¯æŒè¿™ä¸ªéš”ç¦»çº§åˆ«ã€‚</p><h2 id="3-å¦‚æœè¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set-global-readonly-trueçš„æ–¹å¼ï¼Ÿ"><a href="#3-å¦‚æœè¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set-global-readonly-trueçš„æ–¹å¼ï¼Ÿ" class="headerlink" title="3.å¦‚æœè¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set global readonly=trueçš„æ–¹å¼ï¼Ÿ"></a>3.å¦‚æœè¦å…¨åº“åªè¯»ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨set global readonly=trueçš„æ–¹å¼ï¼Ÿ</h2><p>1.åœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œ<code>readonlyçš„å€¼ä¼šè¢«ç”¨æ¥åšå…¶ä»–é€»è¾‘</code>ï¼Œæ¯”å¦‚åˆ¤æ–­ä¸»å¤‡åº“ã€‚æ‰€ä»¥ä¿®æ”¹globalå˜é‡çš„æ–¹å¼å½±å“å¤ªå¤§ã€‚<br>2.åœ¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸Šæœ‰å·®å¼‚ã€‚å¦‚æœæ‰§è¡ŒFTWRLå‘½ä»¤ä¹‹åç”±äºå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸æ–­å¼€ï¼Œé‚£ä¹ˆMySQLä¼šè‡ªåŠ¨é‡Šæ”¾è¿™ä¸ªå…¨å±€é”ï¼Œæ•´ä¸ªåº“å›åˆ°å¯ä»¥æ­£å¸¸æ›´æ–°çš„çŠ¶æ€ã€‚è€Œå°†æ•´ä¸ªåº“è®¾ç½®ä¸ºreadonlyä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ•°æ®åº“å°±ä¼šä¸€ç›´ä¿æŒreadonlyçŠ¶æ€ï¼Œè¿™æ ·ä¼š<code>å¯¼è‡´æ•´ä¸ªåº“é•¿æ—¶é—´å¤„äºä¸å¯å†™çŠ¶æ€ï¼Œé£é™©è¾ƒé«˜</code>ã€‚</p><h2 id="4-è¡¨é”ç®€è¿°"><a href="#4-è¡¨é”ç®€è¿°" class="headerlink" title="4.è¡¨é”ç®€è¿°"></a>4.è¡¨é”ç®€è¿°</h2><p><strong>æ¦‚è¿°</strong>ï¼šmysqlé‡Œé¢è¡¨é”æœ‰ä¸¤ç§ï¼šè¡¨é”å’ŒMDL(å…ƒæ•°æ®é”)ï¼Œè¡¨é”ä¸å»ºè®®åŠ ï¼ŒMDLä¼šé»˜è®¤åŠ ä¸Šï¼›</p><p><strong>è¡¨é”</strong>ï¼š</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">LOCK</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">[</span> <span class="token keyword">AS</span> alias_name <span class="token punctuation">]</span> <span class="token keyword">READ</span></code></pre><p><strong>MDL</strong>ï¼šä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Šï¼ŒMDLåŒ…å«<code>è¯»é”å’Œå†™é”</code>ï¼Œ<code>è¯»é”ä¹‹é—´ä¸äº’æ–¥</code>ï¼Œå¯å¤šçº¿ç¨‹å…±äº«ï¼Œ<code>å†™é”äº’æ–¥</code>ï¼Œæ¥ä¿è¯è¡¨ç»“æ„å˜æ›´æ—¶çš„å®‰å…¨æ€§ã€‚</p><p><strong>é£é™©</strong>ï¼šMDLç›´åˆ°äº‹åŠ¡æäº¤æ‰ä¼šè¢«é‡Šæ”¾ï¼Œå› æ­¤ä¸ºäº†é˜²æ­¢MDLå­˜åœ¨æ—¶é—´è¿‡é•¿ï¼Œä»è€ŒMYSQLå¼‚å¸¸é‡å¯ï¼Œåº”è¯¥é¿å…é•¿äº‹åŠ¡ã€‚</p><h3 id="5-å¦‚ä½•å®‰å…¨åœ°å°è¡¨åŠ ä¸€ä¸ªå­—æ®µ"><a href="#5-å¦‚ä½•å®‰å…¨åœ°å°è¡¨åŠ ä¸€ä¸ªå­—æ®µ" class="headerlink" title="5.å¦‚ä½•å®‰å…¨åœ°å°è¡¨åŠ ä¸€ä¸ªå­—æ®µ"></a>5.å¦‚ä½•å®‰å…¨åœ°å°è¡¨åŠ ä¸€ä¸ªå­—æ®µ</h3><ol><li>æŸ¥è¯¢é•¿äº‹åŠ¡ï¼Œæš‚åœæˆ–killæ‰é•¿äº‹åŠ¡ï¼›</li><li>åœ¨alter tableè¯­å¥ä¸­æŒ‡å®šç­‰å¾…æ—¶é—´ï¼Œé¿å…é˜»å¡ã€‚</li></ol><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="å…­-è¡Œé”åŠŸè¿‡ï¼šæ€ä¹ˆå‡å°‘è¡Œé”å¯¹æ€§èƒ½çš„å½±å“"><a href="#å…­-è¡Œé”åŠŸè¿‡ï¼šæ€ä¹ˆå‡å°‘è¡Œé”å¯¹æ€§èƒ½çš„å½±å“" class="headerlink" title="å…­.è¡Œé”åŠŸè¿‡ï¼šæ€ä¹ˆå‡å°‘è¡Œé”å¯¹æ€§èƒ½çš„å½±å“"></a>å…­.è¡Œé”åŠŸè¿‡ï¼šæ€ä¹ˆå‡å°‘è¡Œé”å¯¹æ€§èƒ½çš„å½±å“</h2><h3 id="1-è¡Œé”çš„æ¦‚è¿°"><a href="#1-è¡Œé”çš„æ¦‚è¿°" class="headerlink" title="1.è¡Œé”çš„æ¦‚è¿°"></a>1.è¡Œé”çš„æ¦‚è¿°</h3><p>è¡Œé”å³æ˜¯å¯¹æ•°æ®åº“çš„<code>è¡Œè®°å½•åŠ é”</code>ï¼Œåœ¨å¼•æ“å±‚å®ç°ï¼Œä»…<code>InnoDB</code>æ”¯æŒè¡Œé”ã€‚</p><h3 id="2-ç®€è¿°ä¸¤é˜¶æ®µé”åè®®"><a href="#2-ç®€è¿°ä¸¤é˜¶æ®µé”åè®®" class="headerlink" title="2.ç®€è¿°ä¸¤é˜¶æ®µé”åè®®"></a>2.ç®€è¿°ä¸¤é˜¶æ®µé”åè®®</h3><p><strong>æ¦‚å¿µ</strong>ï¼šåœ¨InnoDBäº‹åŠ¡ä¸­ï¼Œè¡Œé”æ˜¯åœ¨éœ€è¦çš„æ—¶å€™åŠ ä¸Šçš„ï¼Œä½†éœ€è¦ç­‰å¾…<code>äº‹åŠ¡æäº¤æ‰ä¼šé‡Šæ”¾</code>ï¼›</p><p><strong>å»ºè®®</strong>ï¼š<code>å¦‚æœä½ çš„äº‹åŠ¡ä¸­éœ€è¦é”å¤šä¸ªè¡Œï¼Œè¦æŠŠæœ€å¯èƒ½é€ æˆé”å†²çªï¼Œæœ€å¯èƒ½å½±å“å¹¶å‘åº¦çš„é”å¾€åæ”¾</code>ã€‚</p><h3 id="3-ç®€è¿°æ­»é”"><a href="#3-ç®€è¿°æ­»é”" class="headerlink" title="3.ç®€è¿°æ­»é”"></a>3.ç®€è¿°æ­»é”</h3><p><strong>æ¦‚å¿µ</strong>ï¼šå½“ä¸¤ä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…å¯¹æ–¹é”æŒæœ‰çš„èµ„æºæ—¶ï¼Œå°±ä¼šäº§ç”Ÿæ­»é”ï¼›</p><p><strong>é¢„é˜²æ­»é”</strong>ï¼š</p><ol><li><p>è®¾ç½®<code>è¶…æ—¶å‚æ•°</code>ï¼Œé»˜è®¤ä¸º50sï¼Œè¿™æ ·æ˜¾ç„¶äº¤äº’ä¸å¥½ï¼Œä½†å¦‚æœè®¾ç½®è¿‡å°ï¼Œåˆä¼šé”™å°†æ­£å¸¸ç­‰å¾…çš„çº¿ç¨‹å½“åšæ­»é”å¤„ç†ï¼Œå› æ­¤<strong>ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹æ¡ˆ</strong>ï¼›</p></li><li><p><code>æ­»é”æ£€æµ‹</code>ï¼Œå‘ç°æ­»é”ï¼Œé©¬ä¸Š<code>å›æ»š</code>ã€‚è¿™é‡Œå¯ä»¥<code>ç±»æ¯”springä¸­çš„å¾ªç¯ä¾èµ–</code>ï¼Œéƒ½æ˜¯éœ€è¦æŸ¥çœ‹è‡ªå·±æ‰€ä¾èµ–çš„çº¿ç¨‹æœ‰æ²¡æœ‰è¢«åˆ«äººé”ä½ã€‚ä½†è¿™ç§æ–¹æ¡ˆä»æœ‰éšæ‚£ï¼Œå‡è®¾æœ‰100ä¸ªçº¿ç¨‹å¹¶å‘ä¿®æ”¹ï¼Œ<code>éƒ½å»æŸ¥çœ‹è‡ªå·±ä¾èµ–çš„çº¿ç¨‹æœ‰æ²¡æœ‰é”ä½ï¼Œå°±å¿…ç„¶éœ€è¦å¤§é‡çš„CPUèµ„æº</code>ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå³ä¾¿å¾ˆå°çš„å¹¶å‘é‡ï¼ŒCPUå ç”¨ç‡ä¹Ÿå¯èƒ½å¾ˆé«˜çš„åŸå› ã€‚</p><blockquote><p>æ€æ ·è§£å†³ç”±è¿™ç§çƒ­ç‚¹è¡Œæ›´æ–°å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼Ÿ</p></blockquote><ul><li>åœ¨<code>ç¡®è®¤ä¸ä¼šå‘ç”Ÿæ­»é”çš„æƒ…å†µä¸‹ï¼Œå¯å…³é—­æ­»é”æ£€æµ‹</code>ï¼Œä½†é—®é¢˜åœ¨äºå…³æ‰æ­»é”æ£€æµ‹å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ï¼Œè¿™æ˜¯ä¸šåŠ¡æœ‰æŸçš„ï¼›</li><li>æ§åˆ¶å¹¶å‘åº¦ï¼Œå…·ä½“åœ°è¯´ï¼Œæ˜¯åœ¨æ•°æ®åº“æœåŠ¡ç«¯å®ç°è¯¥é€»è¾‘ï¼Œå®ç°æ–¹å¼è‡ªç„¶æ˜¯<code>ç‰¹å®šå¤§å°çš„ç­‰å¾…é˜Ÿåˆ—</code>ï¼›</li><li>ä»è®¾è®¡ä¸Šçœ‹ï¼Œå¯ä»¥è€ƒè™‘å°†ä¸€è¡Œæ”¹æˆé€»è¾‘ä¸Šçš„å¤šè¡Œã€‚</li></ul></li></ol><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><h2 id="ç•ªå¤–"><a href="#ç•ªå¤–" class="headerlink" title="ç•ªå¤–"></a>ç•ªå¤–</h2><h3 id="1-mysqlçš„æœåŠ¡å™¨é…ç½®æ–‡ä»¶"><a href="#1-mysqlçš„æœåŠ¡å™¨é…ç½®æ–‡ä»¶" class="headerlink" title="1.mysqlçš„æœåŠ¡å™¨é…ç½®æ–‡ä»¶"></a>1.mysqlçš„æœåŠ¡å™¨é…ç½®æ–‡ä»¶</h3><p><a href="https://zhuanlan.zhihu.com/p/430679474" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/430679474</a></p><h3 id="2-my-cnf-my-inié…ç½®æ–‡ä»¶è¯¦è§£"><a href="#2-my-cnf-my-inié…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="2.my.cnf/my.inié…ç½®æ–‡ä»¶è¯¦è§£"></a>2.my.cnf/my.inié…ç½®æ–‡ä»¶è¯¦è§£</h3><p><a href="https://www.cnblogs.com/kuoAT/p/7080770.html" target="_blank" rel="noopener">https://www.cnblogs.com/kuoAT/p/7080770.html</a></p><h3 id="3-mysqlæ—¥å¿—ç³»ç»Ÿè¯¦è§£"><a href="#3-mysqlæ—¥å¿—ç³»ç»Ÿè¯¦è§£" class="headerlink" title="3.mysqlæ—¥å¿—ç³»ç»Ÿè¯¦è§£"></a>3.mysqlæ—¥å¿—ç³»ç»Ÿè¯¦è§£</h3><p><a href="https://segmentfault.com/a/1190000023827696" target="_blank" rel="noopener">https://segmentfault.com/a/1190000023827696</a></p><h3 id="4-æŸ¥çœ‹mysqlä¸‹çš„å‡ ä¸ªæ—¥å¿—"><a href="#4-æŸ¥çœ‹mysqlä¸‹çš„å‡ ä¸ªæ—¥å¿—" class="headerlink" title="4.æŸ¥çœ‹mysqlä¸‹çš„å‡ ä¸ªæ—¥å¿—"></a>4.æŸ¥çœ‹mysqlä¸‹çš„å‡ ä¸ªæ—¥å¿—</h3><p><a href="https://blog.csdn.net/xuheng8600/article/details/79823875" target="_blank" rel="noopener">https://blog.csdn.net/xuheng8600/article/details/79823875</a></p><ol><li><p><strong>æ…¢æŸ¥è¯¢æ—¥å¿—</strong>æ˜¯è®°å½•äº†æ‰§è¡Œæ—¶é—´è¶…è¿‡å‚æ•°long_query_time(å•ä½æ˜¯ç§’)æ‰€è®¾å®šå€¼çš„SQLè¯­å¥æ—¥å¿—ã€‚</p><p>Note:æ…¢æŸ¥è¯¢æ—¥å¿—å¯¹äºæˆ‘ä»¬å‘ç°æ€§èƒ½æœ‰é—®é¢˜çš„SQLæœ‰å¾ˆå¸®åŠ©ï¼Œå»ºè®®ä½¿ç”¨å¹¶ç»å¸¸åˆ†æï¼›</p></li><li><p><strong>æŸ¥è¯¢æ—¥å¿—</strong>è®°å½•äº†clinetçš„æ‰€æœ‰çš„è¯­å¥ã€‚</p><p>Note:ç”±äºlogæ—¥å¿—è®°å½•äº†æ•°æ®åº“æ‰€æœ‰æ“ä½œï¼Œå¯¹äºè®¿é—®é¢‘ç¹çš„ç³»ç»Ÿï¼Œæ­¤ç§æ—¥å¿—ä¼šé€ æˆæ€§èƒ½å½±å“ï¼Œå»ºè®®å…³é—­ã€‚</p></li><li><p><strong>é”™è¯¯æ—¥å¿—</strong>åœ¨Mysqlæ•°æ®åº“ä¸­å¾ˆé‡è¦ï¼Œå®ƒè®°å½•ç€mysqldå¯åŠ¨å’Œåœæ­¢ï¼Œä»¥åŠæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä»»ä½•é”™è¯¯çš„ç›¸å…³ä¿¡æ¯ã€‚</p></li><li><p><strong>äºŒè¿›åˆ¶æ—¥å¿—</strong>ä¹Ÿé€šå¸¸è¢«ç§°ä¸ºbinlog,å®ƒè®°å½“ç€æ‰€æœ‰çš„DDLå’ŒDMLï¼Œä½†ä¸åŒ…æ‹¬æ•°æ®æŸ¥è¯¢è¯­å¥ã€‚</p></li></ol><h2 id="é¢ç»é›†é”¦"><a href="#é¢ç»é›†é”¦" class="headerlink" title="é¢ç»é›†é”¦"></a>é¢ç»é›†é”¦</h2><ol><li><p>Explainçš„ä¸»è¦å­—æ®µ</p></li><li><p>b+æ ‘ç›¸æ¯”Bæ ‘çš„ä¼˜ç‚¹</p></li><li><p>å¯ä¸å¯ä»¥åˆ‡æ¢ç´¢å¼•ä¸ºå“ˆå¸Œç´¢å¼•ï¼Ÿ</p></li><li><p>åœºæ™¯é¢˜ï¼šé«˜å¹¶å‘åœºæ™¯ä¸‹æ•°æ®åº“å‹åŠ›å¾ˆå¤§ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p><p><code>ä½¿ç”¨ç´¢å¼•ï¼Œä½¿ç”¨ç¼“å­˜ï¼Œåˆ†åº“åˆ†è¡¨ï¼Œæ¶ˆæ¯é˜Ÿåˆ—</code></p></li><li><p>mysqlåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–</p><p><strong>ä¸€èˆ¬æŸ¥è¯¢ä¼šä»ç¬¬ä¸€æ¡è®°å½•å¼€å§‹æ‰¾èµ·</strong></p><ol><li><strong>å­æŸ¥è¯¢</strong>ï¼šè¿™ç§æ–¹å¼<code>å…ˆå®šä½åç§»ä½ç½®çš„ id</code>ï¼Œç„¶åå¾€åæŸ¥è¯¢ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨äº id é€’å¢çš„æƒ…å†µ</li><li><strong>idé™å®š</strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>id between and</code> æ¥æŸ¥è¯¢</li></ol><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨æ•°æ®åº“ä¸­å»ºç«‹è¡¨çš„æ—¶å€™ï¼Œå¼ºåˆ¶ä¸ºæ¯ä¸€å¼ è¡¨æ·»åŠ  id é€’å¢å­—æ®µï¼Œè¿™æ ·æ–¹ä¾¿æŸ¥è¯¢ã€‚</p></li><li><p>mysql è”åˆç´¢å¼•ä½¿ç”¨ A&gt;n and B=m å’Œ A=n and B=m çš„åŒºåˆ«</p><p>ç¬¬ä¸€éƒ¨åˆ†ï¼ˆAåˆ—ï¼‰æ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œæ— æ³•åˆ©ç”¨åˆ°ç´¢å¼•ã€‚å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒMySQLå¯èƒ½éœ€è¦è¿›è¡Œå…¨è¡¨æ‰«ææ¥æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„è®°å½•ã€‚</p></li><li><p>MySQLçš„InnoDBå’ŒMyISAMåŒºåˆ«</p><table><thead><tr><th>è§’åº¦</th><th>InnoDB</th><th>MyISAM</th></tr></thead><tbody><tr><td>äº‹åŠ¡</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¤–é”®</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>ç´¢å¼•</td><td>èšé›†ç´¢å¼•</td><td>éèšé›†ç´¢å¼•</td></tr><tr><td>è¡¨çš„å…·ä½“è¡Œæ•°</td><td>ä¸ä¿å­˜</td><td>ä¿å­˜</td></tr><tr><td>é”çš„ç²’åº¦</td><td>è¡Œé”</td><td>è¡¨é”</td></tr></tbody></table></li><li><p>ç´¢å¼•å¦‚ä½•ä¼˜åŒ–</p><p>å‘ç°ç´¢å¼•èµ°çš„ä¸å¥½ï¼š<strong>æ…¢æŸ¥è¯¢</strong></p><ol><li>åˆ©ç”¨<code>è¦†ç›–ç´¢å¼•</code>æ¥è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé¿å…å›è¡¨ï¼›</li><li><code>explainä¸­çš„å­—æ®µtype</code>ï¼šè‡³å°‘è¦è¾¾åˆ°rangeçº§åˆ«ï¼Œè¦æ±‚æ˜¯refçº§åˆ«ï¼Œå¦‚æœä¸º<strong>consts</strong>æœ€å¥½ä¸è¿‡ã€‚</li><li><code>è”åˆç´¢å¼•æœ€å·¦å‰ç¼€åŸåˆ™</code>ã€‚</li><li>unionï¼Œin,oréƒ½èƒ½å¤Ÿå‘½ä¸­ç´¢å¼•ï¼Œå»ºè®®ä½¿ç”¨<code>in</code>.</li></ol></li><li><p>ç®€è¿°ä¹è§‚é”ä¸æ‚²è§‚é”</p><p><strong>ä¹è§‚é”</strong>ï¼šæ‹¿æ•°æ®æ—¶ä¸ä¼šä¸Šé”ï¼Œä½†åœ¨æäº¤çš„æ—¶å€™ä¼šåˆ¤æ–­æ•°æ®æœ‰æ²¡æœ‰è¢«æ›´æ–°ï¼Œé€šå¸¸ä½¿ç”¨ç‰ˆæœ¬å·/æ—¶é—´æˆ³æ¥å®ç°ã€‚</p><p><strong>æ‚²è§‚é”</strong>ï¼šä¸€å¼€å§‹å°±å¯¹å•†å“åŠ ä¸Šé”ï¼ˆSELECT â€¦ <code>FOR UPDATE</code>ï¼‰</p></li><li><p>ç´¢å¼•ä¸€å®šä¼šå‘½ä¸­å—ï¼Ÿå¦‚ä½•ä¿è¯å‘½ä¸­</p><p>ä¸ä¸€å®šä¼šå‘½ä¸­ï¼Œä½¿ç”¨explainä¸­çš„refå­—æ®µåˆ¤æ–­ï¼Œforce index,å¼ºåˆ¶èµ°æŸä¸ªç´¢å¼•</p><pre class=" language-mysql"><code class="language-mysql">SELECT * FROM test01 FORCE INDEX(uk_index) WHERE NAME = 'æµ‹è¯•1' AND age=1 ;</code></pre></li><li><p>mysqlæ•°æ®åº“ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Nå‰æ ‘</p><p>ä¸€ä¸ªé¡µå°±æ˜¯ä¸€æ£µæ ‘B+æ ‘çš„èŠ‚ç‚¹ï¼Œæ•°æ®åº“I/Oæ“ä½œçš„æœ€å°å•ä½æ˜¯é¡µï¼Œä¸æ•°æ®åº“ç›¸å…³çš„å†…å®¹éƒ½ä¼šå­˜å‚¨åœ¨é¡µçš„ç»“æ„é‡Œã€‚</p><p>åœ¨ä¸€æ£µB+æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªé¡µï¼Œæ¯æ¬¡æ–°å»ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±ä¼šç”³è¯·ä¸€ä¸ªé¡µç©ºé—´</p><p>åŒä¸€å±‚çš„èŠ‚ç‚¹ä¹‹é—´ï¼Œé€šè¿‡é¡µçš„ç»“æ„æ„æˆäº†ä¸€ä¸ªåŒå‘é“¾è¡¨</p><p>éå¶å­èŠ‚ç‚¹åŒ…æ‹¬äº†å¤šä¸ªç´¢å¼•è¡Œï¼Œæ¯ä¸ªç´¢å¼•è¡Œé‡Œå­˜å‚¨ç´¢å¼•é”®å’ŒæŒ‡å‘ä¸‹ä¸€å±‚é¡µé¢çš„æŒ‡é’ˆ</p><p>å¶å­èŠ‚ç‚¹ä¸ºï¼Œå­˜å‚¨äº†å…³é”®å­—å’Œè¡Œè®°å½•ï¼Œåœ¨èŠ‚ç‚¹å†…éƒ¨(ä¹Ÿå°±æ˜¯é¡µç»“æ„çš„å†…éƒ¨)è®°å½•ä¹‹é—´æ˜¯ä¸€ä¸ªå•å‘çš„é“¾è¡¨</p><p><img src="https://img-blog.csdnimg.cn/20200404223041152.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xKRlBIUA==,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p></li><li><p>è¯´ä¸€ä¸‹ä½ çš„é¡¹ç›®é‡Œå…·ä½“çš„ä¸€ä¸ªè¡¨ï¼Œæœ‰æ²¡æœ‰å»ºç´¢å¼•ï¼Œå¦‚ä½•å»ºçš„ï¼Ÿ</p><p>shopè¡¨ï¼Œä¸»é”®shopIdï¼ˆä¸»é”®æœ¬èº«å°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç´¢å¼•ï¼‰,å¤–é”®userId,shopCategoryId</p><p><strong>shopId bigint not null auto_invreament primary key</strong></p><p>åœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ï¼Œè¯·æ°¸è¿œä½¿ç”¨ä¸€ä¸ªä¸ä¸šåŠ¡æ— å…³çš„è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®ï¼Œé™¤éé«˜å¹¶å‘å†™å…¥æ“ä½œå¯èƒ½éœ€è¦è¡¡é‡è‡ªå¢ä¸»é”®</p></li><li><p>innodb ç´¢å¼•æ–‡ä»¶çš„å­˜å‚¨å½¢å¼</p><p>æ€è·¯ï¼šä¸€ä¸ªè¡¨â€”â€”ã€‹å¤šä¸ªB+æ ‘â€”â€”ã€‹å¶å­èŠ‚ç‚¹(é¡µç»“æ„ï¼Œå³å¤šä¸ªç£ç›˜å—)+éå¶å­ç»“ç‚¹(é¡µç»“æ„ï¼Œå³å¤šä¸ªç£ç›˜å—)â€”â€”ã€‹è¡Œæ•°æ®+ç´¢å¼•æ•°æ®</p></li><li><p>mysqlä¸»é”®æ˜¯æ€ä¹ˆè‡ªå¢çš„ï¼ˆå…¶å®æ˜¯è¯´åº•å±‚çš„Auto-INCé”ï¼‰</p><p><strong>è‡ªå¢é•¿è®¡æ•°å™¨</strong>,<strong>Auto-INCé”</strong>,è¡¨é”</p></li></ol><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æå®¢æ—¶é—´ </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring IOCæºç æµ…æ</title>
      <link href="/2021/07/12/spring-ioc-yuan-ma-qian-xi/"/>
      <url>/2021/07/12/spring-ioc-yuan-ma-qian-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ç‚¹æ€è€ƒ"><a href="#ä¸€ç‚¹æ€è€ƒ" class="headerlink" title="ä¸€ç‚¹æ€è€ƒ"></a>ä¸€ç‚¹æ€è€ƒ</h2><p>åœ¨å¼€å§‹åˆ†æspring IOCçš„æºç ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆç†æ¸…å¤§è‡´çš„è„‰ç»œï¼Œè€Œæœ‰<strong>ä¸‰ä¸ªé—®é¢˜</strong>å¯¹è„‰ç»œçš„æ„å»ºè‡³å…³é‡è¦â€”â€”</p><ol><li><p><strong>ä»å“ªé‡Œå‡ºå‘</strong>ï¼šhello world~ è¦æƒ³é€šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè§†è§’æ‹‰å›<code>java web</code>ï¼Œä¸å¯ç½®å¦çš„æ˜¯javawebé€šè¿‡servletç»„ä»¶å¯ä»¥å®ç°ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½ï¼Œä½†å¯¹äºä¸€ä¸ªHTTPè¯·æ±‚ï¼Œæˆ‘ä»¬å¤„ç†çš„å…¨è¿‡ç¨‹åŒ…å«<code>æ¥æ”¶è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼Œè¿”å›è¯·æ±‚</code>ï¼Œåœ¨è¿™å…¶ä¸­åªæœ‰å¤„ç†è¯·æ±‚çš„<code>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ˜¯éœ€è¦æˆ‘ä»¬å»å®Œæˆ</code>çš„.</p><p>è€Œæ¥æ”¶è¯·æ±‚ï¼Œè¿”å›è¯·æ±‚æ˜¯æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ä¾æ‰˜çš„é€šç”¨éƒ¨åˆ†ï¼Œå®ƒä»¬å®Œæˆäº†æŠ¥æ–‡çš„<code>è§£å¤ç”¨ï¼Œè§£æï¼Œå°è£…</code>ï¼Œè¿™é‡Œçš„ä»»ä½•ä¸€é¡¹ç•™ç»™ç¨‹åºå‘˜å»åšï¼Œéƒ½è¶³ä»¥<code>è®©äººå¤´çš®å‘éº»</code>ã€‚è€Œæ¡†æ¶çš„å®ç°è€…æ·±çŸ¥è¿™ä¸€ç‚¹ï¼ŒæŠŠæœ€å¤æ‚ï¼Œä½†ä¹Ÿæœ€é€šç”¨çš„éƒ¨åˆ†æå–äº†å‡ºæ¥ã€‚</p><blockquote><p>å¦‚æœæˆ‘ä»¬æƒ³è¿è¡Œä»»ä½•ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€å¥ç®€å•çš„helloworldå°±èƒ½åƒç‚¹ç›ä¹‹ç¬”ä¸€èˆ¬è®©é¡¹ç›®æ¯æœ¨é€¢æ˜¥ã€‚</p></blockquote><p>è½¬å¿µå»æƒ³ï¼Œæˆ‘ä»¬å­¦ä¹ ä»»ä½•çŸ¥è¯†ä¼¼ä¹éƒ½åªéœ€è¦ä¸€å¥çš„hello worldï¼Œçœ‹æ¥æ‰€æœ‰çš„æ¡†æ¶éƒ½è®¤ä¸ºæˆ‘ä»¬ä¸æ€ä¹ˆèªæ˜çš„äºšå­ã€‚ã€‚</p></li><li><p><strong>ä»¥ä»€ä¹ˆä¸ºå‚è€ƒ</strong>ï¼šiocå®¹å™¨çš„åŠŸèƒ½æ˜¯åˆ›å»ºå¹¶ç®¡ç†å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¢«åˆ›å»ºï¼Œä»€ä¹ˆæ—¶å€™è¢«åˆå§‹åŒ–æ˜¯æ ¸å¿ƒã€‚</p></li><li><p><strong>è§£æçš„æŠ€å·§</strong>ï¼šè®©äººè¯Ÿç—…çš„æ¡†æ¶é€šå¸¸å·®çš„åƒå¥‡ç™¾æ€ªï¼Œä½†å¾€å¾€ä¸€ä¸ªä¼˜ç§€çš„æ¡†æ¶åœ¨å„ä¸ªæ–¹é¢éƒ½æ— å¯æŒ‘å‰”ï¼Œæ¯”å¦‚<code>æ³¨é‡Šï¼Œåç§°</code>ã€‚</p><p>è¿™äº›<strong>è·¯æ ‡</strong>èƒ½å¤ŸæŒ‡å¼•æ›´é«˜æ•ˆçš„å‰è¡Œã€‚</p><hr></li></ol><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>æˆ‘ä»¬é¦–å…ˆåœ¨springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†<strong>ä¸¤ä¸ªbeanå¯¹è±¡</strong>ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508101816973.png" alt="image-20210508101816973"></p><p>å¹¶é€šè¿‡ç®€æ˜“çš„helloworldç±»ä¸­<strong>æ‰“æ–­ç‚¹è§‚å¯Ÿæºç </strong>çš„è¿è¡Œè½¨è¿¹â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508102002505.png" alt="image-20210508102002505"></p><p>å¦‚æœæˆ‘ä»¬ç›´æ¥è¿è¡Œé¡¹ç›®ï¼Œä¼šåœ¨æ§åˆ¶å°è§‚å¯Ÿåˆ°è¿™äº›ä¿¡æ¯ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508102357843.png" alt="image-20210508102357843"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºåˆ›å»ºIOCå®¹å™¨è¿™ä¸€æ­¥æ‰“æ–­ç‚¹ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆâ€”â€”</p><h2 id="ç¬¬ä¸€ç«™"><a href="#ç¬¬ä¸€ç«™" class="headerlink" title="ç¬¬ä¸€ç«™"></a>ç¬¬ä¸€ç«™</h2><blockquote><p>æ‰€æœ‰çš„æ•…äº‹éƒ½ä»è¿™ä¸€å¥ä»£ç å¼€å§‹äº†ï¼šioc = new ClassPathXmlApplicationContext(â€œclasspath:applicationContext.xmlâ€);</p></blockquote><p>é¦–å…ˆæ¥çœ‹debugä¹‹åçš„ç‰ˆé¢åˆ†å¸ƒï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508102839427.png" alt="image-20210508102839427"></p><p>æ ¸å¿ƒçš„é€»è¾‘éƒ½åœ¨åˆ›å»ºIOCå®¹å™¨çš„è¿‡ç¨‹ä¸­å®Œæˆï¼Œæˆ‘ä»¬F5è¿›å»ç…ç…ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508103054925.png" alt="image-20210508103054925"></p><p>æ˜¾ç„¶ï¼Œè¿™æ˜¯åœ¨åšç±»åŠ è½½ç›¸å…³çš„äº‹æƒ…ï¼ŒF6ç»§ç»­ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508103210061.png" alt="image-20210508103210061"></p><p>åœ¨æ„é€ æ–¹æ³•ä¸­åˆè°ƒç”¨äº†å¦ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæœ‰è¶£çš„æ˜¯ä¸è®ºæ„é€ æ–¹æ³•æ€æ ·é‡æ„ï¼Œæœ€ç»ˆè°ƒç”¨çš„éƒ½æ˜¯è¿™ä¸€å¥ï¼Œçœ‹æ¥å®ƒå°±æ˜¯æ ¸å¿ƒå•¦ï¼Œè´´å‡ºæ¥çœ‹çœ‹â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508103417772.png" alt="image-20210508103417772"></p><p>æ˜¾ç„¶ï¼Œé…ç½®æ–‡ä»¶çš„è·¯å¾„è¢«ä½œä¸ºä¸€ä¸ª<strong>Stringæ•°ç»„</strong>ä¼ å…¥ï¼Œrefreshæ˜¯ä¸ªå¸ƒå°”å€¼ï¼Œå®ƒæ˜¯ä¹‹åçš„æ ¸å¿ƒï¼Œparentå°±æ˜¯è€ç”Ÿå¸¸è°ˆã€‚</p><p>æ¥ä¸‹æ¥è§£æxmlâ€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508103951949.png" alt="image-20210508103951949"></p><p>è¿™ä¸€æ­¥æ— éæ˜¯æ¡†æ¶å¯¹äºXMLæ–‡ä»¶çš„è§£æï¼ŒXMLæ–‡ä»¶ä¸­çš„ä¿¡æ¯éƒ½æ˜¯Stringç±»å‹çš„ï¼Œæ˜¾ç„¶éœ€è¦å°†å®ƒä»¬æå–å‡ºæ¥è¿˜åŸä¸ºçœŸå®çš„æ•°æ®ç±»å‹ã€‚ä½†è¿™ä¸æ˜¯æˆ‘ä»¬çš„é‡ç‚¹ï¼Œå…ˆè¿‡å’¯ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508104315170.png" alt="image-20210508104315170"></p><p>è¿›å…¥åˆ°refreshæ–¹æ³•ï¼Œæ˜ å…¥çœ¼å¸˜çš„æ˜¯å¤æ‚ä½†æœ‰è¿¹å¯å¾ªçš„æ–¹æ³•ï¼Œä»è¿™é‡Œå¼€å§‹ï¼Œæˆ‘ä»¬å·²ç»æ­å¼€äº†å®ƒçš„ç¬¬ä¸€å±‚é¢çº±ï¼Œå¼€å§‹ç¬¬äºŒç«™</p><h2 id="ç¬¬äºŒç«™"><a href="#ç¬¬äºŒç«™" class="headerlink" title="ç¬¬äºŒç«™"></a>ç¬¬äºŒç«™</h2><p>refreshæ–¹æ³•èµ·æ‰‹å°±æ˜¯ä¸€ä¸ªåŒæ­¥é”ï¼Œè¿™æ ·èƒ½å¤Ÿä¿è¯IOCå®¹å™¨åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œç»§ç»­â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508104811500.png" alt="image-20210508104811500"></p><p>æ”¾è¿‡è¿™ä¸€å¥åï¼Œæ§åˆ¶å°æ‰“å°å‡ºäº†<strong>æ­£åœ¨æ¬²åˆ·æ–°ApplicationContextçš„ä¿¡æ¯</strong>ï¼Œä¸æ˜¯æˆ‘ä»¬æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œnext-&gt;</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508105131661.png" alt="image-20210508105131661"></p><p>è¿™ä¸€æ­¥ç›´è§‚çš„çœ‹ï¼Œ<strong>åˆ·æ–°å†…éƒ¨beanå·¥å‚åˆ›å»ºå‡ºå­ç±»ConfigurableListableBeanFactory</strong>ï¼Œæ¥çœ‹ä¸‹BeanFactoryçš„é¡¶å±‚è®¾è®¡ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508105727464.png" alt="image-20210508105727464"></p><p>çœ‹æ¥ConfigurableListableBeanFactoryçš„åœ°ä½ä¸é«˜ï¼Œå®ƒçš„ç¥–çˆ·çˆ·<strong>BeanFactoryæ‰æ˜¯ä¸‡æ¶ä¹‹æº</strong>ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå®ƒç‹¬æœ‰çš„ä¸¤ä¸ªæ–¹æ³•ä¸€ä¸ªç”¨äº<strong>è¿”å›éå†beanåç§°çš„è¿­ä»£å™¨</strong>ï¼Œä¸€ä¸ªæ˜¯ä¸çŸ¥é“æœ‰å•¥ç”¨çš„<strong>å†»ç»“é…ç½®</strong>(ä½ åªè¯»çš„ï¼Œæˆ‘æ€ä¹ˆæ”¹â€¦)ã€‚</p><p>å½“æˆ‘ä»¬æ”¾è¿‡è¿™å¥åï¼Œæ§åˆ¶å°è¡¨ç¤ºæˆ‘æœ‰è¯è¯´ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508110312292.png" alt="image-20210508110312292"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå®ç°çš„æ˜¯<strong>è§£æXMLé…ç½®æ–‡ä»¶çš„Beanå®šä¹‰ï¼Œå¹¶åŠ è½½åˆ°ä¸€ä¸ªå®¹å™¨ä¸­</strong>é‚£åŠ è½½åˆ°å“ªé‡Œå‘¢ï¼ŸConfigurableListableBeanFactoryï¼Ÿæˆ‘ä»¬ä¸€çœ‹ä¾¿çŸ¥ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508111122589.png" alt="image-20210508111122589"></p><p>IOCå®¹å™¨è¯»å–XMLä¸­çš„é…ç½®åˆ°Beanå·¥å‚ä¸­ä»¥å¾…ä½¿ç”¨ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œå®ƒ<code>å°†Beanå¯¹è±¡çš„å®šä¹‰æ”¾å…¥äº†æ——ä¸‹çš„ä¸¤ä¸ªMap</code>ä¸­ï¼Œå¾å¾å›¾ä¹‹ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508111658655.png" alt="image-20210508111658655"></p><p>è§åçŸ¥æ„ï¼Œå‡†å¤‡Beanå·¥å‚ï¼Œæ”¾è¿‡åæ§åˆ¶å°ï¼Œå˜é‡æ²¡æœ‰ä»»ä½•è¡¨ç¤ºï¼Œnext-&gt;</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508111908977.png" alt="image-20210508111908977"></p><p>æ¥ä¸‹æ¥æ˜¯è¿™ä¸ªåç½®å¤„ç†å™¨çš„ä¸“åœºï¼Œä½†æ§åˆ¶å°ï¼Œå˜é‡å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œæ˜¾ç„¶å¹¶ä¸æ ¸å¿ƒï¼Œæˆ‘ä»¬ç®€è¦çš„è¯´æ˜ä»–ä»¬çš„åŠŸèƒ½â€”â€”</p><p>IOCå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åˆ›å»ºå¹¶ç®¡ç†Beanå¯¹è±¡ï¼Œä½†å®ƒçš„åŠŸèƒ½å´ä¸ä»…åŒ…å«è¿™ä¸ªï¼Œå®ƒæœ‰ä¸åŒç±»å‹çš„beanï¼Œå®ƒè¿˜è¦æ”¯æ’‘æ¡†æ¶è‡ªèº«çš„åŠŸèƒ½ï¼Œè€Œåç½®å¤„ç†å™¨å°±æ˜¯åšè¿™ä¸ªäº‹æƒ…çš„ã€‚ä¸‹ä¸€æ­¥å’¯ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508112239897.png" alt="image-20210508112239897"></p><p>åˆå§‹åŒ–æ¶ˆæ¯æºï¼Ÿå…¶å®è¿™ä¸€æ­¥æ˜¯ç”¨äºæ”¯æŒ<strong>å›½é™…åŒ–åŠŸèƒ½</strong>çš„ï¼Œä½†å®ƒåœ¨spring MVCæ‰ä¼šä¸€å±•èº«æ‰‹ï¼Œè¿™é‡Œè¿˜ä¸æ˜¯å®ƒå‡ºåœºçš„æ—¶æœºï¼Œä¸‹ä¸€æ­¥â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508112447315.png" alt="image-20210508112447315"></p><p>è¿™é‡Œ<strong>åˆå§‹åŒ–äº†äº‹ä»¶çš„è½¬åŒ–å™¨</strong>ï¼Œçœ‹ä¸æ‡‚ï¼Œä¹Ÿä¸å±äºæ ¸å¿ƒï¼Œè¿‡ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508112616745.png" alt="image-20210508112616745"></p><p>ç•™ç»™å­ç±»å®ç°ï¼Ÿå¦™ï¼Œèµ·ç æš‚æ—¶ä¸ç”¨æˆ‘å…³å¿ƒäº†å˜¿å˜¿ï¼Œä¸‹ä¸€ä¸ªâ€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508112735726.png" alt="image-20210508112735726"></p><p>åˆå§‹åŒ–æ‰€æœ‰ä¸æ˜¯æ‡’åŠ è½½(é¥¿æ±‰æ¨¡å¼ï¼Œå³<strong>å®¹å™¨å¯åŠ¨ä»¥åï¼Œå¯¹è±¡å°±ä¼šè¢«åˆ›å»º</strong>)çš„<strong>å•ä¾‹å¯¹è±¡</strong>ã€‚æ”¾è¿‡è¯•è¯•-ã€‹</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508120936682.png" alt="image-20210508120936682"></p><p>è¿™é‡Œåˆå§‹åŒ–äº†æ‰€æœ‰çš„å•å®ä¾‹beanå¯¹è±¡ï¼Œç»ˆäºåˆ°äº†æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸‰æ­¥å°±ä»è¿™é‡Œå¼€å§‹å§â€”â€”</p><h2 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h2><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508121322991.png" alt="image-20210508121322991"></p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¸ªæ–¹å¼éš¶å±äº<code>AbstractApplicationContext</code>,å®ƒæ˜¯<code>ConfigurableApplicationContext</code>çš„å®ç°ç±»ï¼Œå°†<code>ConfigurableListableBeanFactory</code>(æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„Beanå·¥å‚)ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p><p>åœ¨åˆšå¼€å§‹çš„éƒ¨åˆ†<strong>åˆå§‹åŒ–ç±»å‹è½¬æ¢æœåŠ¡</strong>ï¼Œä¸æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œç»§ç»­-ã€‹</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508122420754.png" alt="image-20210508122420754"></p><p>è¿™ä¸€æ­¥å°±æ˜¯åœ¨ä¸ºè§£æåšå‡†å¤‡äº†ï¼Œé‚£ä¸‹ä¸€æ­¥è‡ªç„¶å°±æ˜¯éœ€è¦è§£æçš„éƒ¨åˆ†ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508122755207.png" alt="image-20210508122755207"></p><p>ç”±äºæˆ‘ä»¬æ²¡æœ‰éœ€è¦Autowireçš„éƒ¨åˆ†ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å¯ä»¥ç›´æ¥è¿‡å•¦â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508122955688.png" alt="image-20210508122955688"></p><p>ç»§ç»­ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508123214114.png" alt="image-20210508123214114"></p><h2 id="é»æ˜æ—¶åˆ†"><a href="#é»æ˜æ—¶åˆ†" class="headerlink" title="é»æ˜æ—¶åˆ†"></a>é»æ˜æ—¶åˆ†</h2><p>è¿™é‡Œæ¯”è¾ƒæ ¸å¿ƒï¼Œæˆ‘ä»¬ä¸å†æˆªå›¾ï¼Œä¸Šä»£ç ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preInstantiateSingletons</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> BeansException <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//æ—¥å¿—è®°å½•</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Pre-instantiating singletons in "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>ã€            <span class="token comment" spellcheck="true">//ä»beanDefinitionNamesä¸­å–å¾—beanåç§°</span>        List<span class="token operator">&lt;</span>String<span class="token operator">></span> beanNames <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>beanDefinitionNames<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//æŒ‰ç…§xmlé…ç½®çš„beanåç§°åˆ›å»ºbeanå¯¹è±¡</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>String beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>                   <span class="token comment" spellcheck="true">//è·å–beançš„é…ç½®ä¿¡æ¯</span>            RootBeanDefinition bd <span class="token operator">=</span> <span class="token function">getMergedLocalBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//ç¡®è®¤è¿‡ä»£ç ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦çš„beanå¯¹è±¡</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bd<span class="token punctuation">.</span><span class="token function">isAbstract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> bd<span class="token punctuation">.</span><span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>bd<span class="token punctuation">.</span><span class="token function">isLazyInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">//æ˜¾ç„¶å¾—åˆ°çš„beanåç§°æ˜¯æˆ‘ä»¬å¸Œæœ›å®¹å™¨åˆ›å»ºçš„æ™®é€šbeanï¼Œè€Œä¸æ˜¯factoryBean</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFactoryBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">final</span> FactoryBean<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> factory <span class="token operator">=</span> <span class="token punctuation">(</span>FactoryBean<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token function">getBean</span><span class="token punctuation">(</span>FACTORY_BEAN_PREFIX <span class="token operator">+</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">boolean</span> isEagerInit<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> factory <span class="token keyword">instanceof</span> <span class="token class-name">SmartFactoryBean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        isEagerInit <span class="token operator">=</span> AccessController<span class="token punctuation">.</span><span class="token function">doPrivileged</span><span class="token punctuation">(</span><span class="token punctuation">(</span>PrivilegedAction<span class="token operator">&lt;</span>Boolean<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span>                                <span class="token punctuation">(</span><span class="token punctuation">(</span>SmartFactoryBean<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">)</span> factory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEagerInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                <span class="token function">getAccessControlContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span> <span class="token punctuation">{</span>                        isEagerInit <span class="token operator">=</span> <span class="token punctuation">(</span>factory <span class="token keyword">instanceof</span> <span class="token class-name">SmartFactoryBean</span> <span class="token operator">&amp;&amp;</span>                                <span class="token punctuation">(</span><span class="token punctuation">(</span>SmartFactoryBean<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">)</span> factory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEagerInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>isEagerInit<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                        <span class="token comment" spellcheck="true">//æˆ‘ç¥ç»éƒ½è¹¦ä¸€å—äº†ï¼Œä½ å°±ç»™æˆ‘çœ‹è¿™ä¸ª~</span>                <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// Trigger post-initialization callback for all applicable beans...</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>String beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>                   <span class="token comment" spellcheck="true">//é€šè¿‡åç§°å¼€å§‹åˆ›å»ºå¯¹è±¡å•¦</span>            Object singletonInstance <span class="token operator">=</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>singletonInstance <span class="token keyword">instanceof</span> <span class="token class-name">SmartInitializingSingleton</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">final</span> SmartInitializingSingleton smartSingleton <span class="token operator">=</span> <span class="token punctuation">(</span>SmartInitializingSingleton<span class="token punctuation">)</span> singletonInstance<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    AccessController<span class="token punctuation">.</span><span class="token function">doPrivileged</span><span class="token punctuation">(</span><span class="token punctuation">(</span>PrivilegedAction<span class="token operator">&lt;</span>Object<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>                        smartSingleton<span class="token punctuation">.</span><span class="token function">afterSingletonsInstantiated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">return</span> null<span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">getAccessControlContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span> <span class="token punctuation">{</span>                    smartSingleton<span class="token punctuation">.</span><span class="token function">afterSingletonsInstantiated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>æˆ‘ä»¬æ¥å¤§è‡´ç†ç†æ€ç»ªï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508124603963.png" alt="image-20210508124603963"></p><p><code>æ ¹æ®beanåç§°è·å–åˆ°beançš„é…ç½®ä¿¡æ¯-ã€‹ä»é…ç½®ä¿¡æ¯ä¸­åˆ¤æ–­æ˜¯å¦æ˜¯æˆ‘ä»¬éœ€è¦çš„beanå¯¹è±¡-ã€‹å¦‚æœæ˜¯ï¼Œå†åˆ¤æ–­æ˜¯å·¥å‚Beanè¿˜æ˜¯æ™®é€šBean-ã€‹æ™®é€šbeanï¼Œè°ƒç”¨getBeanã€‚</code></p><p>çœ‹æ¥æœ€ç»ˆåˆ›å»ºbeanå¯¹è±¡çš„å°±æ˜¯è¿™ä¸ªgetbeanæ–¹æ³•å’¯ï¼ŒF6ä¸€æ‰‹ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508124353828.png" alt="image-20210508124353828"></p><p>ä¸€ä¸ªbeanè¢«åˆ›å»ºï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€æ ·å®ç°çš„ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508124938259.png" alt="image-20210508124938259"></p><p>è¿›å»çœ‹çœ‹ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508125251963.png" alt="image-20210508125251963"></p><p>ä¹Ÿå°±æ˜¯æŸ¥è¯¢ç¼“å­˜å’¯ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç¬¬ä¸€æ¬¡æ³¨å†Œï¼Œæ˜¾ç„¶ä¸å­˜åœ¨è¿™ä¸ªBeanï¼Œç»§ç»­ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508130650268.png" alt="image-20210508130650268"></p><p>ç»§ç»­ï¼Œæ¥åˆ°äº†è¿™ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508130939660.png" alt="image-20210508130939660"></p><p>å¦‚æœå­˜åœ¨ä¾èµ–çš„beanï¼Œå°±éœ€è¦é¦–å…ˆå…ˆæŠŠè¿™ä¸ªbeanåˆ›å»ºå‡ºæ¥ï¼Œå½“å‰æ²¡æœ‰ï¼Œç»§ç»­ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508131336008.png" alt="image-20210508131336008"></p><p>ç»ˆäºåˆ›å»ºbeanå¯¹è±¡äº†ï¼Œæ‹¼å¤•å¤•çš„å¥—è·¯ä¹Ÿæ²¡ä½ æ·±^-^  </p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508131922757.png" alt="image-20210508131922757"></p><p>åˆ›å»ºå®Œæˆå•¦ï¼Œä½†æ˜¯æµç¨‹è¿˜æ²¡å®Œ~</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508133621893.png" alt="image-20210508133621893"></p><p>è¿™ä¸€æ­¥<strong>å°†åˆ›å»ºçš„singtonObjectåŠ å…¥åˆ°singletonObjects</strong>è¿™ä¸ªé›†åˆä¸­å»ï¼Œè€Œè¿™ä¸ªé›†åˆåˆéš¶å±äºæˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„beanå·¥å‚<code>ConfigurableListableBeanFactory</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ›å»ºçš„è¿™ä¸ªIOCå®¹å™¨æ˜¯ä¸€ä¸ªå¤šé›†åˆçš„å®¹å™¨ï¼Œè€Œå•ä¾‹å¯¹è±¡å®¹å™¨ä¸è¿‡æ˜¯å®ƒçš„ä¼—å¤šé›†åˆä¹‹ä¸€ã€‚</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508133336593.png" alt="image-20210508133336593"></p><p>åˆ°æ­¤ï¼Œå®¹å™¨ç»ˆäºåˆ›å»ºäº†ï¼Œé‚£æˆ‘ä»¬æ¥è·å–beanå¯¹è±¡è¯•è¯•â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508134719909.png" alt="image-20210508134719909"></p><p>å…ˆè·å–iocå®¹å™¨ï¼Œç„¶åè°ƒç”¨getbeanæ–¹æ³•ä»å•å®ä¾‹é›†åˆä¸­è·å–æŒ‡å®šåç§°çš„beanï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210508134941817.png" alt="image-20210508134941817"></p><h2 id="ç»ˆæ›²"><a href="#ç»ˆæ›²" class="headerlink" title="ç»ˆæ›²"></a>ç»ˆæ›²</h2><blockquote><p>ç®€è¿°ApplicationContextä¸BeanFactoryçš„åŒºåˆ«ï¼Ÿ</p></blockquote><p>ä»æ¡†æ¶è®¾è®¡æ¥çœ‹ï¼ŒApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ï¼ŒBeanFactoryæ˜¯springæ¡†æ¶æœ€åº•å±‚çš„æ¥å£ï¼Œå®ƒåŸºäºæœ€åŸºç¡€ï¼Œæœ€é€šç”¨ï¼Œ<strong>æœ€æ ¸å¿ƒçš„åŠŸèƒ½åˆ›å»ºbeanå¯¹è±¡</strong>ï¼Œè€ŒApplicationContextå®ƒåœ¨BeanFactoryçš„åŸºç¡€ä¸Šï¼Œ<strong>æ›´å¤šçš„å…³æ³¨å®¹å™¨åŠŸèƒ½çš„å®ç°</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿè¯†çš„<strong>IOC,DI,AOP</strong>ï¼Œå†è¿›ä¸€æ­¥è¯´ï¼Œ<strong>BeanFactoryæ˜¯ç»™ApplicationContextç­‰å­æ¥å£ç”¨çš„</strong>ï¼Œè€Œ<strong>ApplicationContextç›´æ¥å¯¹æ¥å¼€å‘äººå‘˜</strong>ï¼Œ</p><p>å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œspringä¸­åº”ç”¨æœ€å¤šçš„æ¨¡å¼å³ä¸ºå·¥å‚æ¨¡å¼ï¼Œå¯ä»¥è®¤ä¸ºæˆ‘ä»¬é€šè¿‡<strong>é…ç½®æ–‡ä»¶ï¼Œæ³¨è§£æ¥æ•´åˆæˆä¸€ä¸ªåˆ¶é€ è¯´æ˜è¯´ä¹¦</strong>ï¼Œè€Œåº•å±‚çš„å·¥å‚å¸®æˆ‘ä»¬å»åˆ¶é€ ï¼</p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mavenä»å…¥é—¨åˆ°å…¥å‘</title>
      <link href="/2021/07/12/maven-cong-ru-men-dao-ru-keng/"/>
      <url>/2021/07/12/maven-cong-ru-men-dao-ru-keng/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦ä¹ Mavençš„åŸºç¡€"><a href="#å­¦ä¹ Mavençš„åŸºç¡€" class="headerlink" title="å­¦ä¹ Mavençš„åŸºç¡€"></a>å­¦ä¹ Mavençš„åŸºç¡€</h1><p>ç›®å‰æ‰€æœ‰çš„é¡¹ç›®é¡¹ç›®éƒ½åœ¨ä½¿ç”¨Mavenï¼Œé‚£åˆ°åº•Mavenæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆMavenå¯ä»¥å¤§è¡Œå…¶é“ï¼Œå®ƒç©¶ç«Ÿä¸ºæˆ‘ä»¬çš„é¡¹ç›®å¼€å‘å¸¦æ¥äº†æ€æ ·çš„å¥½å¤„å‘¢â€”â€”</p><h2 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ Maven"><a href="#ä¸ºä»€ä¹ˆè¦å­¦ä¹ Maven" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­¦ä¹ Maven"></a>ä¸ºä»€ä¹ˆè¦å­¦ä¹ Maven</h2><ol><li>åœ¨å¼€å‘åºå¤§çš„é¡¹ç›®æ—¶ï¼Œä½¿ç”¨packageçš„ç»“æ„æ¥åŒºåˆ†å¤æ‚çš„ä»£ç ç»“æ„å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦å¼•å…¥<strong>æ¨¡å—(Module)</strong>çš„è®¾è®¡ç†å¿µã€‚è€ŒMavenå°±ä½¿ç”¨äº†è¿™ä¸€è®¾è®¡ç†å¿µï¼›</li><li>æ¯ä¸ªé¡¹ç›®ä¸‹å¯¼å…¥é‡å¤çš„jaråŒ…ï¼Œä¸ç¬¦åˆâ€write once,only onceâ€çš„è¿½æ±‚ï¼›</li><li>æ‰‹åŠ¨å¯¼åŒ…æ—¶å¯èƒ½ä¼šå¯¼è‡´æ¼åŒ…ï¼Œç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯¼è‡´é¡¹ç›®æœªæ‰§è¡Œé”™è¯¯ï¼›</li></ol><h2 id="Mavenæ˜¯ä»€ä¹ˆ"><a href="#Mavenæ˜¯ä»€ä¹ˆ" class="headerlink" title="Mavenæ˜¯ä»€ä¹ˆ"></a>Mavenæ˜¯ä»€ä¹ˆ</h2><p>Mavençš„æ ¸å¿ƒæ€æƒ³â€”â€”</p><blockquote><p>Mavençš„æ ¸å¿ƒæ€æƒ³ï¼šçº¦å®šå¤§äºé…ç½®ï¼Œå®ƒç”¨äºçº¦å®šjavaé¡¹ç›®æ¶æ„ï¼Œå¹¶æ¨å‡ºäº†å„ç§å„æ ·çš„æ¨¡æ¿é¡¹ç›®ã€‚</p></blockquote><h2 id="ä½¿ç”¨Mavençš„å¥½å¤„"><a href="#ä½¿ç”¨Mavençš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨Mavençš„å¥½å¤„"></a>ä½¿ç”¨Mavençš„å¥½å¤„</h2><ol><li>é€šä¿—çš„è¯´ï¼ŒMavenå¯ä»¥é€šè¿‡å¯¹<strong>pom.xml</strong>çš„é…ç½®å®ç°<strong>è‡ªåŠ¨å¯¼åŒ…</strong>ï¼Œä¸”å¯ä»¥è§£å†³ä»¤äººå¤´å¤§çš„jaråŒ…å†²çªï¼Œç‰ˆæœ¬å†²çªï¼Œä¸”å¯ä»¥å®ç°ä¸€æ¬¡é…ç½®ï¼Œå¤šæ¬¡å¤ç”¨çš„ç›®çš„ï¼›</li><li>Mavenæ¨¡å—ç®¡ç†çš„åŠŸèƒ½ä½¿é¡¹ç›®ç»“æ„æ›´åŠ æ˜æ™°ï¼Œé€šè¿‡é™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ä½¿é¡¹ç›®çš„å†å¼€å‘å˜å¾—å®¹æ˜“ï¼›</li><li>è‡ªåŠ¨ç”ŸæˆåŒ…å«æµ‹è¯•çš„ç›®å½•ç»“æ„å°±å¾ˆé¦™ï¼›</li><li>é€šå¸¸æˆ‘ä»¬çš„é¡¹ç›®åœ¨æ•´åˆæ—¶ä¼šåŒ…æ‹¬åºæ‚çš„ä»£ç ï¼Œé…ç½®æ–‡ä»¶ï¼Œæ‰“åŒ…ã€‚ç”šè‡³webå·¥ç¨‹çš„è¯è¿˜éœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚è€ŒMavenå´å¯ä»¥å¸®æˆ‘ä»¬æ„å»ºå·¥ç¨‹ï¼Œç®¡ç†jaråŒ…ï¼Œç¼–è¯‘è¿è¡Œæµ‹è¯•æ–‡ä»¶ï¼Œè‡ªåŠ¨æ‰“åŒ…ï¼Œç”Ÿæˆ<em>æŠ¥è¡¨</em>ã€‚å ªç§°ç¨‹åºå‘˜çš„è´´å¿ƒå°æ£‰è¢„ã€‚</li><li>ä½¿ç”¨Mavenæ„å»ºçš„é¡¹ç›®ï¼Œå¯¼å…¥çš„jaråŒ…åªæ˜¯ä¸€ä¸ª<strong>åæ ‡</strong>ã€‚å¤§å¤§å‡å°‘äº†æ‰“åŒ…åçš„é¡¹ç›®å¤§å°ã€‚</li></ol><h1 id="Mavençš„ä½¿ç”¨"><a href="#Mavençš„ä½¿ç”¨" class="headerlink" title="Mavençš„ä½¿ç”¨"></a>Mavençš„ä½¿ç”¨</h1><p>äº†è§£äº†Mavençš„æ¦‚å†µï¼Œä½ å¿ƒåŠ¨äº†å—ï¼Ÿ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬é¦–å…ˆå°†è¿›è¡ŒMavençš„å®‰è£…ï¼Œå› ä¸ºMavenåŒ…å«æ„å»ºçš„åŠŸèƒ½ï¼Œè¿™å°±éœ€è¦JAVA_HOMEçš„ç¯å¢ƒå˜é‡é…ç½®ï¼Œå½“æˆ‘ä»¬å®‰è£…å¥½Mavenåï¼Œå°±è¦è€ƒè™‘jaråŒ…å¦‚ä½•è·å–å‘¢ï¼Œè¿™æ—¶å°±éœ€è¦å¼•å…¥Mavenä»“åº“ã€‚å¦å¤–ï¼ŒMavenæ˜¯å¦‚ä½•ä½¿é¡¹ç›®ç»“æ„ä»¤äººè€³ç›®ä¸€æ–°çš„å‘¢ï¼Œå¸¸è¯´çš„ç”Ÿå‘½å‘¨æœŸåˆæ˜¯ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿâ€”â€”</p><hr><h2 id="Mavençš„å®‰è£…ä¸é…ç½®"><a href="#Mavençš„å®‰è£…ä¸é…ç½®" class="headerlink" title="Mavençš„å®‰è£…ä¸é…ç½®"></a>Mavençš„å®‰è£…ä¸é…ç½®</h2><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200810201856834.png" alt></p><ol><li><p>å› ä¸ºMavenæ˜¯æœåŠ¡äºjavaè¯­è¨€çš„ï¼Œé¦–å…ˆéœ€è¦æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦é…ç½®äº†JAVA_HOMEçš„ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå°±æ˜¯jdkçš„è·¯å¾„ï¼Œå³javaçš„è¿è¡Œç¯å¢ƒï¼›</p></li><li><p>é…ç½®Mavençš„ç›¸å…³ç¯å¢ƒå˜é‡</p><ol><li>é¦–å…ˆMavenæ”¯æŒä¸€é”®æ„å»ºçš„åŠŸèƒ½ï¼Œå› è€Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡<strong>PATH</strong>ï¼Œæ­¤å¤–ï¼ŒMavenå®‰è£…è·¯å¾„(<em>æ— ä¸­æ–‡ï¼Œæ— ç©ºæ ¼çš„ç›®å½•ä¸‹</em>)<strong>MAVEN_HOME</strong>çš„è¯´æ˜ä¹Ÿå¿…ä¸å¯å°‘ï¼</li><li><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200810202557992.png" alt="image-20200810202557992"></li></ol><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200810202753425.png" alt="image-20200810202753425"></p><ol><li><p>éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ</p><p>é”®å…¥<strong>mvn  -v</strong>å‘½ä»¤æŸ¥çœ‹mavenç‰ˆæœ¬ï¼Œå­˜åœ¨åˆ™é…ç½®æˆåŠŸï¼ï¼</p></li></ol></li></ol><h2 id="Mavenä»“åº“"><a href="#Mavenä»“åº“" class="headerlink" title="Mavenä»“åº“"></a>Mavenä»“åº“</h2><blockquote><p>Mavenæœ€ä¸ºäººæ‰€çŸ¥çš„åŠŸèƒ½ä¾¿æ˜¯<strong>è‡ªåŠ¨å¯¼åŒ…</strong>ã€‚é‚£å¯¼çš„jaråŒ…æ¥æºäºå“ªé‡Œå‘¢ï¼ŸMavenä»“åº“ä¾¿æ˜¯å­˜å‚¨jaråŒ…çš„åœ°æ–¹ã€‚</p></blockquote><h3 id="Mavenä»“åº“çš„åˆ†ç±»"><a href="#Mavenä»“åº“çš„åˆ†ç±»" class="headerlink" title="Mavenä»“åº“çš„åˆ†ç±»"></a>Mavenä»“åº“çš„åˆ†ç±»</h3><p>Mavenä»“åº“åˆ†ä¸ºæœ¬åœ°ä»“åº“ï¼Œè¿œç¨‹ä»“åº“ï¼Œä¸­å¤®ä»“åº“ã€‚</p><ul><li>æœ¬åœ°ä»“åº“ï¼šé»˜è®¤ä½ç½®ä¸ºC:\Users\zyz.m2\repository(mine)ï¼Œä¹Ÿå¯è‡ªå·±æŒ‡å®šä»“åº“ä½ç½®ã€‚</li><li>è¿œç¨‹ä»“åº“ï¼šåˆç§°ç§æœï¼Œå½“æœ¬åœ°ä»“åº“æ‰¾ä¸åˆ°jaråŒ…æˆ–è€…æ’ä»¶ï¼Œä¼šé»˜è®¤ä»è¿œç¨‹ä»“åº“è·å–ï¼Œè¿œç¨‹ä»“åº“å¯ä»¥åœ¨äº’è”ç½‘ä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨å±€åŸŸç½‘(å…¬å¸)ä¸­ï¼›</li><li>ä¸­å¤®ä»“åº“ï¼šåœ¨Mavenè½¯ä»¶ä¸­å†…ç½®äº†ä¸€ä¸ªè¿œç¨‹ä»“åº“çš„åœ°å€ï¼Œ<a href="http://repo1.maven.org/maven2ï¼Œå®ƒç”±Mavenå›¢é˜Ÿç»´æŠ¤ï¼Œæä¾›äº†å…¨é¢çš„jaråŒ…ï¼Œå…¶ä¸­åŒ…å«äº†ä¸–ç•Œå’Œæ˜¯å“ªä¸ªå¤§éƒ¨åˆ†æµè¡Œçš„å¼€æºé¡¹ç›®è½¯ä»¶ã€‚" target="_blank" rel="noopener">http://repo1.maven.org/maven2ï¼Œå®ƒç”±Mavenå›¢é˜Ÿç»´æŠ¤ï¼Œæä¾›äº†å…¨é¢çš„jaråŒ…ï¼Œå…¶ä¸­åŒ…å«äº†ä¸–ç•Œå’Œæ˜¯å“ªä¸ªå¤§éƒ¨åˆ†æµè¡Œçš„å¼€æºé¡¹ç›®è½¯ä»¶ã€‚</a></li></ul><h3 id="Mavenä»“åº“çš„é…ç½®"><a href="#Mavenä»“åº“çš„é…ç½®" class="headerlink" title="Mavenä»“åº“çš„é…ç½®"></a>Mavenä»“åº“çš„é…ç½®</h3><p>æ‰“å¼€MAVE_HOME/confç›®å½•</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200810205434607.png" alt="image-20200810205434607"></p><p>åœ¨settings.xmlæ–‡ä»¶ä¸­é…ç½®æœ¬åœ°ä»“åº“ä½ç½®</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200810205701220.png" alt="image-20200810205701220"></p><h3 id="Mavenä»“åº“çš„ä½¿ç”¨é¡ºåº"><a href="#Mavenä»“åº“çš„ä½¿ç”¨é¡ºåº" class="headerlink" title="Mavenä»“åº“çš„ä½¿ç”¨é¡ºåº"></a>Mavenä»“åº“çš„ä½¿ç”¨é¡ºåº</h3><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200817104957595.png" alt="image-20200817104957595"></p><h3 id="å…¨å±€settingä¸ç”¨æˆ·setting"><a href="#å…¨å±€settingä¸ç”¨æˆ·setting" class="headerlink" title="å…¨å±€settingä¸ç”¨æˆ·setting"></a>å…¨å±€settingä¸ç”¨æˆ·setting</h3><p>Mavençš„ä»“åº“åœ°å€ï¼Œç§æœç­‰çš„é…ç½®ä¿¡æ¯éœ€è¦åœ¨setting.xmlä¸­é…ç½®ï¼Œè€Œå®ƒçš„é…ç½®åˆåˆ†ä¸ºå…¨å±€settingå’Œç”¨æˆ·settingã€‚</p><ul><li><p>è§åçŸ¥æ„ï¼Œç”¨æˆ·settingï¼ŒæŒ‡çš„æ˜¯åœ¨ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹çš„settingï¼Œå³ï¼š${user.dir} /.m2/settings.xmlï¼Œå®ƒé‡Œé¢çš„é…ç½®ä¸»è¦æ˜¯ä¸ªæ€§é…ç½®ï¼›</p></li><li><p>å…¨å±€settingï¼Œå³ä¸ºMavenå®‰è£…ç›®å½•ä¸‹çš„settingï¼Œå¦‚D:\Maven\apache-maven-3.6.3\conf\settings.xmlã€‚å®ƒé‡Œé¢çš„é…ç½®åŒ…æ‹¬ä½¿ç”¨Mavenæ„å»ºçš„æ‰€æœ‰é¡¹ç›®</p><p><strong>å°ç»“</strong>ï¼šMavenä¼šå…ˆæ‰¾ç”¨æˆ·é…ç½®ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä½¿ç”¨å…¨å±€é…ç½®ã€‚</p></li></ul><h2 id="Mavençš„ç›®å½•ç»“æ„"><a href="#Mavençš„ç›®å½•ç»“æ„" class="headerlink" title="Mavençš„ç›®å½•ç»“æ„"></a>Mavençš„ç›®å½•ç»“æ„</h2><ul><li><input checked disabled type="checkbox"> æ³¨ï¼šå»ºè®®å°†æ‰€æœ‰çš„å¼€å‘æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹<strong>develop</strong>ä¸­</li></ul><p>Mavenå·¥ç¨‹<strong>çº¦å®šä¿—æˆ</strong>çš„ç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºâ€”â€”</p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200811000632615.png" alt="image-20200811000632615" style="zoom: 67%;"><p>ç›®å½•çš„æ¯ä¸€éƒ¨åˆ†éƒ½æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚</p><p>å½“é¡¹ç›®ç¼–è¯‘ä¹‹åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ<strong><em>target</em></strong>ç›®å½•ï¼Œç›®å½•ä¸­å­˜æ”¾ç¼–è¯‘åçš„classå­—èŠ‚ç æ–‡ä»¶ä»¥åŠé…ç½®æ–‡ä»¶ã€‚</p><h2 id="Mavençš„å¸¸ç”¨å‘½ä»¤"><a href="#Mavençš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Mavençš„å¸¸ç”¨å‘½ä»¤"></a>Mavençš„å¸¸ç”¨å‘½ä»¤</h2><ul><li><p>mvn cleanï¼šæ¸…ç†ä¹‹å‰ç¼–è¯‘å¾—åˆ°çš„æ–‡ä»¶</p></li><li><p>mvn compileï¼šç¼–è¯‘ä¸»ç¨‹åº</p></li><li><p>mvn test-compileï¼šç¼–è¯‘æµ‹è¯•ç¨‹åº</p></li><li><p>mvn testï¼šæ‰§è¡Œæµ‹è¯•</p></li><li><p>mvn packageï¼šæ‰“åŒ…</p></li><li><p>mvn installï¼šå®‰è£…</p></li><li><p>mvn deploy:éƒ¨ç½²</p><p>è¿™é‡Œåªæ¼”ç¤ºcompileå’Œinstallå‘½ä»¤â€”â€”</p><p>æ‰§è¡Œcompileç¼–è¯‘å‘½ä»¤ï¼Œç¼–è¯‘æŒ‡å°†srcç›®å½•ä¸‹çš„javaæ–‡ä»¶ç¼–è¯‘ä¸ºclassæ–‡ä»¶ï¼Œåˆ™é¦–å…ˆå®šä½åˆ°åˆ°é¡¹ç›®çš„srcç›®å½•ï¼Œå†æ‰§è¡Œmvn  compileå‘½ä»¤ã€‚</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200811003234622.png" alt></p></li></ul><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200811003633190.png" alt="image-20200811003633190" style="zoom:50%;"><h2 id="Mavençš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Mavençš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Mavençš„ç”Ÿå‘½å‘¨æœŸ"></a>Mavençš„ç”Ÿå‘½å‘¨æœŸ</h2><p>Mavenå¯¹é¡¹ç›®çš„æ„å»ºåˆ†ä¸º<strong>ä¸‰å¥—</strong>ç›¸äº’ç‹¬ç«‹çš„<strong>ç”Ÿå‘½å‘¨æœŸ</strong></p><ol><li><strong>Clean Lifecycle</strong> :åœ¨è¿›è¡ŒçœŸæ­£çš„æ„å»ºä¹‹å‰è¿›è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚</li><li><strong>Default Lifecycle</strong> :æ„å»ºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œéƒ¨ç½²ç­‰ç­‰ã€‚</li><li><strong>Site Lifecycle</strong> :ç”Ÿæˆé¡¹ç›®æŠ¥å‘Šï¼Œç«™ç‚¹ï¼Œå‘å¸ƒç«™ç‚¹ã€‚</li></ol><h1 id="Mavençš„ä¾èµ–ç®¡ç†"><a href="#Mavençš„ä¾èµ–ç®¡ç†" class="headerlink" title="Mavençš„ä¾èµ–ç®¡ç†"></a>Mavençš„ä¾èµ–ç®¡ç†</h1><p>Mavenåœ¨pom.xmlä¸­å¯¹ä¾èµ–è¿›è¡Œé…ç½®ä¸ç®¡ç†ï¼Œé‚£ä¹ˆpom.xmlä¸­çš„ä¾èµ–é…ç½®è¦ç¬¦åˆæ€æ ·çš„è§„èŒƒæ‰èƒ½ä»ä»“åº“ä¸­å–å¾—jaråŒ…å‘¢ï¼Œå½“ä½¿ç”¨ä¸€ä¸ªjaråŒ…æ—¶ï¼Œå®ƒæ‰€ä¾èµ–çš„jaråŒ…è¿˜éœ€è¦å¯¼å…¥å—ï¼Ÿå¦‚æœä¸éœ€è¦ï¼Œé‚£å› ä¸ºç‰ˆæœ¬å¼•å‘çš„å†²çªé—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸€ä¸€è§£æƒ‘â€”â€”</p><hr><h2 id="Mavençš„åæ ‡"><a href="#Mavençš„åæ ‡" class="headerlink" title="Mavençš„åæ ‡"></a>Mavençš„åæ ‡</h2><p>åœ¨pom.xmlæ–‡ä»¶ä¸­ï¼Œå°†å¯ä»¥æ‰¾åˆ°ä»“åº“ä¸­å¯¹åº”jarä½ç½®çš„è§„èŒƒå«åš<strong>åæ ‡</strong>ï¼Œåæ ‡åœ¨<dependencies>æ ‡ç­¾ä¸‹å®šä¹‰ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–å†™åœ¨<dependency>æ ‡ç­¾ä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹åæ ‡çš„ç»“æ„â€”â€”</dependency></dependencies></p><pre class=" language-java"><code class="language-java"> <span class="token operator">&lt;</span>dependency<span class="token operator">></span>            <span class="token operator">&lt;</span>groupId<span class="token operator">></span>junit<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>junit<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>            <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">4.12</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span>            <span class="token operator">&lt;</span>scope<span class="token operator">></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span></code></pre><ul><li><p>groupId:å…¬å¸ï¼Œä¸ªäººçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ä¸ºåŸŸåå€’å†™ï¼›</p></li><li><p>artifactId:é¡¹ç›®å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå³é¡¹ç›®åç§°</p></li><li><p>version:é¡¹ç›®çš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨SVNç‰ˆæœ¬æ§åˆ¶å·¥å…·ç®¡ç†ç‰ˆæœ¬ï¼Œå› è€Œä¸€ä¸ªé¡¹ç›®æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œç‰ˆæœ¬çš„æ ‡è¯†æœ‰RELEASEï¼ŒSNAPSHOT</p><ul><li><strong>RELEASE</strong>ï¼šæŒ‡æ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬</li><li><strong>SNAPSHOT</strong>ï¼šè¡¨ç¤ºæ­£åœ¨å¼€å‘çš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç‰ˆæœ¬çš„<strong>å¿«ç…§</strong>ï¼Œå¿«ç…§ç‰ˆæœ¬ï¼Œå¯ä»¥ç†è§£ä¸ºå®ƒæŒ‡å®šäº†<strong>æŸä¸ªå¼€å‘è¿›åº¦çš„å‰¯æœ¬</strong>ï¼ŒMavenæ¯æ¬¡æ„å»ºçš„æ—¶å€™éƒ½ä¼šåœ¨åœ¨ä»“åº“ä¸­æ£€æŸ¥æ–°çš„å¿«ç…§ç‰ˆæœ¬ã€‚</li></ul></li><li><p><strong>scope</strong>:æ¯ä¸ªjaråŒ…åœ¨ç¼–è¯‘æ—¶åº”ç”¨çš„æ—¶æœŸæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºéœ€è¦ä½¿ç”¨scopeæ¥æŒ‡å®š<strong>ä¾èµ–èŒƒå›´</strong>ã€‚scopeæœ‰å››ä¸ªå¸¸ç”¨çš„å–å€¼ï¼Œåˆ†åˆ«æ˜¯compile(ç¼–è¯‘é˜¶æ®µ)ï¼Œtest(æµ‹è¯•é˜¶æ®µ)ï¼Œprovide(ä¾›åº”é˜¶æ®µ),runtime(è¿è¡Œé˜¶æ®µ)â€”â€”</p><table><thead><tr><th align="center">ä¾èµ–èŒƒå›´</th><th align="center">ç¼–è¯‘æœ‰æ•ˆ</th><th align="center">æµ‹è¯•æœ‰æ•ˆ</th><th align="center">è¿è¡Œæœ‰æ•ˆ</th><th align="center">æ‰“åŒ…æœ‰æ•ˆ</th><th align="center">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="center">compile(<strong>é»˜è®¤</strong>)</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">spring-core</td></tr><tr><td align="center">test</td><td align="center">Ã—</td><td align="center">âˆš</td><td align="center">Ã—</td><td align="center">Ã—</td><td align="center">junit</td></tr><tr><td align="center">provided</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">Ã—</td><td align="center">javax.servlet-api</td></tr><tr><td align="center">runtime</td><td align="center">Ã—</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">âˆš</td><td align="center">JDBCé©±åŠ¨</td></tr></tbody></table></li></ul><h2 id="ä¾èµ–å†²çª"><a href="#ä¾èµ–å†²çª" class="headerlink" title="ä¾èµ–å†²çª"></a>ä¾èµ–å†²çª</h2><p>é¦–å…ˆæ¥äº†è§£å†²çªæ˜¯å¦‚ä½•äº§ç”Ÿçš„å‘¢ï¼Ÿ</p><blockquote><p>å½“æˆ‘ä»¬é¦–å…ˆå¼•å…¥spring-mvcçš„åæ ‡åï¼Œæˆ‘ä»¬å‘ç°spring-mvcæ‰€ä¾èµ–çš„spring-beansçš„åæ ‡ä¹Ÿè¢«å¼•å…¥äº†è¿›æ¥ï¼Œè¿™è¢«ç§°ä¸º<strong>ä¾èµ–ä¼ é€’</strong>ã€‚è¿™å›ºç„¶å‡è½»äº†æˆ‘ä»¬é€ä¸ªå¯¼åŒ…çš„ç¹å¤ï¼Œä½†ä¹Ÿç”±äº<strong>ç‰ˆæœ¬å†²çª</strong>å¯¼è‡´åæ ‡ä¸å¯ç”¨ã€‚</p></blockquote><p>è§£å†³ä¾èµ–å†²çªçš„çš„è°ƒè§£åŸåˆ™æœ‰ä¸‰ç§â€”â€”</p><ol><li>ç¬¬ä¸€å£°æ˜è€…ä¼˜å…ˆï¼šå¦‚æœä¸¤ä¸ªåŒ…çš„ä¾èµ–éƒ½åŒ…æ‹¬å¦ä¸€ä¸ªåŒ…ï¼Œä½†éœ€è¦çš„ç‰ˆæœ¬ä¸åŒï¼Œè¿™æ—¶ä»¥å…ˆå¯¼å…¥çš„ç‰ˆæœ¬ä¸ºå‡†ï¼›</li><li>è·¯å¾„è¿‘è€…ä¼˜å…ˆï¼šä¹Ÿå°±æ˜¯è¯´å¦‚æœå…ˆå¯¼å…¥æŸä¸€ä¸ªåŒ…ï¼Œå†å¯¼å…¥ä¾èµ–è¿™ä¸ªçš„åŒ…çš„å…¶ä»–åŒ…ï¼Œä¼šä»¥é¡ºåºåœ¨å‰çš„ä¸ºå‡†ï¼›</li><li>é”å®šç‰ˆæœ¬ï¼šåœ¨pom.xmlä¸­ï¼Œæœ‰ä¸€ä¸ªpropertiesæ ‡ç­¾ï¼Œå®ƒçš„ä½œç”¨æ˜¯é”å®šç‰ˆæœ¬ã€‚å®ƒçš„ç”¨æ³•å¦‚ä¸‹â€”â€”</li></ol><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>properties<span class="token operator">></span>        <span class="token operator">&lt;</span>spring<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">5.0</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token punctuation">.</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span>slf4j<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">1.6</span><span class="token punctuation">.</span><span class="token number">6</span><span class="token operator">&lt;</span><span class="token operator">/</span>slf4j<span class="token punctuation">.</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span>log4j<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">1.2</span><span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">&lt;</span><span class="token operator">/</span>log4j<span class="token punctuation">.</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span>oracle<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">12.1</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>oracle<span class="token punctuation">.</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span>mybatis<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>mybatis<span class="token punctuation">.</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span>spring<span class="token punctuation">.</span>security<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">5.0</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token punctuation">.</span>security<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">></span></code></pre><h1 id="åœ¨IDEAç¯å¢ƒä¸‹ï¼Œä½¿ç”¨Mavenæ„å»ºSSMå·¥ç¨‹"><a href="#åœ¨IDEAç¯å¢ƒä¸‹ï¼Œä½¿ç”¨Mavenæ„å»ºSSMå·¥ç¨‹" class="headerlink" title="åœ¨IDEAç¯å¢ƒä¸‹ï¼Œä½¿ç”¨Mavenæ„å»ºSSMå·¥ç¨‹"></a>åœ¨IDEAç¯å¢ƒä¸‹ï¼Œä½¿ç”¨Mavenæ„å»ºSSMå·¥ç¨‹</h1><p>å½“å¼€å‘æ¯”è¾ƒç¹ççš„é¡¹ç›®æ—¶ï¼ŒMavenè‡ªåŠ¨å¯¼åŒ…å’Œä¸€é”®æ„å»ºç‰¹æ€§çš„ä¼˜åŠ¿å¯è§ä¸€æ–‘â€”â€”</p><p>é¦–å…ˆï¼Œå›é¡¾ä¸€ä¸‹å¼€å‘é¡¹ç›®çš„åŸºæœ¬åŸåˆ™</p><ol><li>å…ˆä»<strong>è¢«ä¾èµ–çš„ï¼Œç®€å•çš„éƒ¨åˆ†</strong>å¼€å§‹ï¼›</li><li>æ­å¥½<strong>æ¡†æ¶</strong>æ˜¯é‡ä¸­ä¹‹é‡ï¼æ¡†æ¶ä¸­åº”è¯¥åŒ…å«å¼€å‘ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œåˆ†å±‚ç»“æ„ç­‰ã€‚</li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ€»ç»“å¼€å‘æµç¨‹</p><ol><li>æ–°å»ºä½¿ç”¨<strong>webappéª¨æ¶</strong>çš„é¡¹ç›®ï¼›</li><li>åœ¨<strong>pom.xm</strong>æ–‡ä»¶ä¸­ç¼–å†™ä¾èµ–ï¼Œ<strong>applicationContext</strong>æ–‡ä»¶ï¼Œ<strong>spring-mvc.xml</strong>ï¼Œ<strong>log.properties</strong>æ–‡ä»¶ï¼Œå¯¼å…¥<strong>db.properties</strong>æ–‡ä»¶ã€‚</li><li>åœ¨æ•°æ®åº“æ–°å»ºè¡¨ï¼Œåˆ›å»º<strong>pojoå®ä½“ç±»</strong>ï¼Œç¼–å†™<strong>xml</strong>æ˜ å°„æ–‡ä»¶ï¼Œ<strong>dao</strong>å±‚ï¼Œ<strong>service</strong>å±‚ï¼Œ<strong>controller</strong>å±‚ï¼Œ<strong>web</strong>å±‚ï¼›</li></ol><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200818233219851.png" alt="image-20200818233219851"></p><p>2.å¡«å†™é¡¹ç›®</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200818233351689.png" alt="image-20200818233351689"></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200818233900433.png" alt="image-20200818233900433"></p><p>é¦–å…ˆç¼–å†™pom.xmlæ–‡ä»¶,é™¤äº†è¿™éƒ¨åˆ†æœ‰åŒºåˆ«å¤–ï¼Œå…¶ä»–çš„å¯ä»¥å¤ç”¨</p><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>groupId<span class="token operator">></span>com<span class="token punctuation">.</span>zyz<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>  <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>mavenTest02<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>  <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">1.0</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span>  <span class="token operator">&lt;</span>packaging<span class="token operator">></span>war<span class="token operator">&lt;</span><span class="token operator">/</span>packaging<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç‰ˆæœ¬é”å®š<span class="token operator">--</span><span class="token operator">></span>  <span class="token operator">&lt;</span>properties<span class="token operator">></span>    <span class="token operator">&lt;</span>spring<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">5.0</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token punctuation">.</span>version<span class="token operator">></span>    <span class="token operator">&lt;</span>slf4j<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">1.6</span><span class="token punctuation">.</span><span class="token number">6</span><span class="token operator">&lt;</span><span class="token operator">/</span>slf4j<span class="token punctuation">.</span>version<span class="token operator">></span>    <span class="token operator">&lt;</span>log4j<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">1.2</span><span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">&lt;</span><span class="token operator">/</span>log4j<span class="token punctuation">.</span>version<span class="token operator">></span>    <span class="token operator">&lt;</span>shiro<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">1.2</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>shiro<span class="token punctuation">.</span>version<span class="token operator">></span>    <span class="token operator">&lt;</span>oracle<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">12.1</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>oracle<span class="token punctuation">.</span>version<span class="token operator">></span>    <span class="token operator">&lt;</span>mybatis<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>mybatis<span class="token punctuation">.</span>version<span class="token operator">></span>    <span class="token operator">&lt;</span>spring<span class="token punctuation">.</span>security<span class="token punctuation">.</span>version<span class="token operator">></span><span class="token number">5.0</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token punctuation">.</span>security<span class="token punctuation">.</span>version<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">></span></code></pre><p>åœ¨æ–°å»ºçš„resourcesç›®å½•ä¸‹ç»Ÿä¸€å­˜æ”¾é…ç½®æ–‡ä»¶</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200818234706165.png" alt="image-20200818234706165"></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200818234915712.png" alt="image-20200818234915712"></p><p>åˆ°è¿™é‡Œï¼Œé¡¹ç›®çš„éª¨æ¶å°±å·²ç»æ­å¥½äº†ï¼Œè¿™æ˜¯æœ€åŸºç¡€ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ã€‚æ¥ä¸‹æ¥å…·ä½“ç¼–å†™çš„å†…å®¹ä¾éœ€æ±‚è€Œæ˜“ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p><p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»äº†è§£Mavençš„å…¨è²Œäº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯,Mavençš„è¿›é˜¶åŠŸèƒ½â€”â€”ç»§æ‰¿ä¸èšåˆåŒæ ·å€¼å¾—ä¸€è°ˆã€‚</p><h2 id="Mavençš„ç»§æ‰¿ä¸èšåˆ"><a href="#Mavençš„ç»§æ‰¿ä¸èšåˆ" class="headerlink" title="Mavençš„ç»§æ‰¿ä¸èšåˆ"></a>Mavençš„ç»§æ‰¿ä¸èšåˆ</h2><p>åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœå‡ ä¸ªäº’ç›¸ä¾èµ–çš„ç±»å­˜åœ¨é‡å¤çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼šå°†å…¶æå–åˆ°çˆ¶ç±»ï¼Œåœ¨æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„æ€æƒ³å°†å…¶æå–åˆ°çˆ¶å·¥ç¨‹ä¸­ã€‚åŒæ—¶ï¼Œä¸ºäº†ä»£ç çš„äºŒæ¬¡å¼€å‘ï¼Œæ¨¡å—çš„è®¾è®¡ä¹Ÿåº”è¿è€Œç”Ÿã€‚æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹å¸¸è§çš„å¼€å‘ç»“æ„â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20200819082820315.png" alt="image-20200819082820315"></p><h3 id="ç†è§£ç»§æ‰¿å’Œèšåˆ"><a href="#ç†è§£ç»§æ‰¿å’Œèšåˆ" class="headerlink" title="ç†è§£ç»§æ‰¿å’Œèšåˆ"></a>ç†è§£ç»§æ‰¿å’Œèšåˆ</h3><ol><li>ä½•ä¸ºç»§æ‰¿ï¼Ÿ</li></ol><blockquote><p>ç»§æ‰¿æ˜¯ä¸ºäº†æ¶ˆé™¤é‡å¤ï¼Œå¦‚æœå°†daoï¼Œserviceï¼Œwebåˆ†å¼€åˆ›å»ºç‹¬ç«‹çš„å·¥ç¨‹ï¼Œåˆ™æ¯ä¸ªå·¥ç¨‹çš„pom.xmlæ–‡ä»¶ä¸­çš„å†…å®¹å­˜åœ¨é‡å¤ã€‚æ¯”å¦‚ï¼Œè®¾ç½®ç¼–è¯‘ç‰ˆæœ¬ï¼Œé”å®šspringçš„ç‰ˆæœ¬ç­‰ï¼Œå¯ä»¥å°†è¿™äº›é‡å¤çš„é…ç½®å‰”é™¤å‡ºæ¥åœ¨çˆ¶å·¥ç¨‹çš„pon.xmlä¸­å®šä¹‰ã€‚</p></blockquote><ol start="2"><li>ä½•ä¸ºèšåˆï¼Ÿ  </li></ol><blockquote><p>é¡¹ç›®å¼€å‘é€šå¸¸æ˜¯åˆ†ç»„åˆ†æ¨¡å—å¼€å‘ï¼Œæ¯ä¸ªæ¨¡å—å¼€å‘å®Œæˆè¦è¿è¡Œæ•´ä¸ªå·¥ç¨‹éœ€è¦å°†æ¯ä¸ªæ¨¡å—èšåˆåœ¨ä¸€èµ·è¿è¡Œï¼Œæ¯”å¦‚dao,service,webä¸‰ä¸ªå·¥ç¨‹æœ€ç»ˆå›ç­”ä¸€ä¸ªç‹¬ç«‹çš„warè¿è¡Œã€‚</p></blockquote><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><h3 id="è™šæ‹Ÿè·¯å¾„æ˜ å°„"><a href="#è™šæ‹Ÿè·¯å¾„æ˜ å°„" class="headerlink" title="è™šæ‹Ÿè·¯å¾„æ˜ å°„"></a>è™šæ‹Ÿè·¯å¾„æ˜ å°„</h3><p>æµç¨‹ï¼šé…ç½®IDEAä¸­çš„mavenï¼Œé…ç½®tomcatæœåŠ¡å™¨ï¼Œåœ¨contextå¤„å¯é€‰è‡ªå®šä¹‰çš„è™šæ‹Ÿè·¯å¾„ï¼Œæœ€ç»ˆéƒ¨ç½²é¡¹ç›®ã€‚</p><h3 id="å¯èƒ½å‡ºç°çš„é—®é¢˜"><a href="#å¯èƒ½å‡ºç°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½å‡ºç°çš„é—®é¢˜"></a>å¯èƒ½å‡ºç°çš„é—®é¢˜</h3><table><thead><tr><th>åºå·</th><th>å¯èƒ½å‡ºç°çš„é—®é¢˜</th><th>è§£å†³æ–¹å¼</th></tr></thead><tbody><tr><td>1</td><td>maven3.6.2æ˜¾ç¤ºå¯¼åŒ…é”™è¯¯</td><td><code>ç‰ˆæœ¬é™çº§</code></td></tr><tr><td>2</td><td>æ¯ä¸ªé¡¹ç›®éƒ½è¦é‡æ–°é…ç½®maven</td><td><code>é…ç½®mavençš„å…¨å±€è®¾ç½®</code></td></tr><tr><td>3</td><td>Mavené¡¹ç›®ä¸­çš„tomcatæ— æ³•è®¿é—®</td><td><code>é…ç½®ï¼Œserver-&gt;deployment</code></td></tr><tr><td>4</td><td>èµ„æºå¯¼å‡ºå¤±è´¥</td><td><code>åœ¨builderä¸­é…ç½®resource</code></td></tr></tbody></table><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•æ·å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€’å½’çš„åŸºæœ¬æ€æƒ³</title>
      <link href="/2021/07/12/di-gui-de-ji-ben-si-xiang/"/>
      <url>/2021/07/12/di-gui-de-ji-ben-si-xiang/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p>å‡è®¾Açš„æ¨èäººæ˜¯Bï¼ŒBçš„æ¨èäººæ˜¯Cï¼Œå¦‚ä½•æ¥æŸ¥æ‰¾Açš„æœ€ç»ˆæ¨èäººå‘¢ï¼Ÿ</p><p>è¿™é‡Œç›´æ¥ç»™å‡ºç­”æ¡ˆâ€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">long</span> <span class="token function">findRootRerfererId</span><span class="token punctuation">(</span><span class="token keyword">long</span> actorId<span class="token punctuation">)</span><span class="token punctuation">{</span>    Long refererId <span class="token operator">=</span> select referer_id from <span class="token punctuation">[</span>table<span class="token punctuation">]</span> where actor_id <span class="token operator">=</span> actorId<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>refererId <span class="token operator">==</span> null<span class="token punctuation">)</span>        <span class="token keyword">return</span> actorId<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">findRootRerfererId</span><span class="token punctuation">(</span>refererId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="é€’å½’æ¦‚è¿°"><a href="#é€’å½’æ¦‚è¿°" class="headerlink" title="é€’å½’æ¦‚è¿°"></a>é€’å½’æ¦‚è¿°</h2><p>é€’å½’æ˜¯ä¸€ç§åº”ç”¨éå¸¸å¹¿æ³›çš„ç®—æ³•ï¼Œäº¦å¯ç§°ä½œç¼–ç¨‹æŠ€å·§ã€‚</p><h2 id="é€’å½’çš„å¼•å‡º"><a href="#é€’å½’çš„å¼•å‡º" class="headerlink" title="é€’å½’çš„å¼•å‡º"></a>é€’å½’çš„å¼•å‡º</h2><p>é€’å½’é¡¾åæ€ä¹‰ï¼ŒåŒ…å«é€’ä¸å½’ä¸¤ä¸ªè¿‡ç¨‹ã€‚æˆ‘ä»¬ç”¨ä¸‹é¢çš„ä¾‹å­æ¥ä½“ä¼šä¸€ä¸‹ã€‚</p><p>å‡è®¾ä½ å»ç”µå½±é™¢çœ‹ç”µå½±ï¼Œä½ æƒ³çŸ¥é“è‡ªå·±ååœ¨ç¬¬å‡ æ’ï¼Œæ‰€ä»¥ä½ è¯¢é—®å‰æ’çš„äººï¼Œä½†å‰æ’çš„äººæœ‰ç›¸åŒçš„å›°æƒ‘ï¼Œä»–åˆå»é—®ä»–çš„å‰æ’ï¼Œç›´åˆ°ç¬¬ä¸€æ’çš„äººæ˜ç¡®è‡ªå·±ååœ¨ç¬¬å‡ æ’ã€‚ç„¶åæ¯ä¸€æ’çš„äººå°†ç»“æœå‘Šè¯‰è‡ªå·±çš„åæ’ï¼Œæ•´ä¸ªé€’å½’çš„è¿‡ç¨‹å°±å®Œæˆäº†ã€‚</p><p>è¿™ä¸ªå°ä¾‹å­ä¸­ï¼Œç¬¬ä¸€æ’æ˜¯ç»ˆæ­¢æ¡ä»¶ï¼Œä¸æ–­é—®å‰æ’çš„äººæ˜¯é€’å½’æ¡ä»¶ã€‚æ— ç–‘æ˜¯å¾ˆå…¸å‹çš„é€’å½’é—®é¢˜ï¼Œä½†é¢å¯¹é€’å½’é—®é¢˜æ›´é€šå¸¸çš„ååº”æ˜¯çœ‹äº†å…¨ä¼šï¼Œå†™äº†å…¨åºŸã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜è¦æŒ‰éƒ¨å°±ç­çš„å­¦ä¹ é€’å½’çš„çŸ¥è¯†ã€‚ã€‚ã€‚</p><h2 id="é€’å½’çš„ä¸‰ä¸ªæ¡ä»¶"><a href="#é€’å½’çš„ä¸‰ä¸ªæ¡ä»¶" class="headerlink" title="é€’å½’çš„ä¸‰ä¸ªæ¡ä»¶"></a>é€’å½’çš„ä¸‰ä¸ªæ¡ä»¶</h2><ol><li>ä¸€ä¸ªé—®é¢˜çš„è§£å¯ä»¥åˆ†è§£ä¸ºå‡ ä¸ªå­é—®é¢˜çš„è§£</li><li>è®¾ä¸ªé—®é¢˜ä¸åˆ†è§£åçš„é—®é¢˜é™¤äº†é—®é¢˜è§„æ¨¡ä¸åŒå¤–ï¼Œæ±‚è§£æ€è·¯å®Œå…¨ç›¸åŒ</li><li>å­˜åœ¨é€’å½’ç»ˆæ­¢æ¡ä»¶</li></ol><h2 id="å¦‚ä½•ç¼–å†™é€’å½’ä»£ç "><a href="#å¦‚ä½•ç¼–å†™é€’å½’ä»£ç " class="headerlink" title="å¦‚ä½•ç¼–å†™é€’å½’ä»£ç "></a>å¦‚ä½•ç¼–å†™é€’å½’ä»£ç </h2><p>ç¼–å†™é€’å½’ä»£ç çš„æ ¸å¿ƒæ— éå°±ä¸¤ä¸ªï¼š<strong>é€’å½’å…¬å¼+ç»ˆæ­¢æ¡ä»¶</strong>ã€‚æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å°ä¾‹å­æ¥ç†è§£ä¸‹â€”â€”</p><p>å‡è®¾æœ‰nä¸ªå°é˜¶ï¼Œæ¯æ¬¡ä½ è‡ªå·±å¯ä»¥è·¨è¶Š1ä¸ªå°é˜¶æˆ–è€…2ä¸ªå°é˜¶ã€‚è¯·é—®èµ°è¿™nä¸ªå°é˜¶å…±æœ‰å¤šå°‘ç§èµ°æ³•ï¼Ÿ</p><p>æˆ‘ä»¬ä¼šæƒ³åˆ°ï¼Œå¯ä»¥æŒ‰ç…§ç¬¬ä¸€æ­¥çš„èµ°æ³•å°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªå­é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯èµ°ä¸€æ­¥ä¹‹åçš„èµ°æ³•å’Œèµ°ä¸¤æ­¥ä¹‹åçš„èµ°æ³•ï¼Œå¯¹åº”çš„é€’å½’å…¬å¼å°±æ˜¯<br>$$<br>f(n) = f(n-1)+f(n-2)<br>$$<br>å†æ¥ç¡®å®šç»ˆæ­¢æ¡ä»¶ï¼Œæ˜¾ç„¶ï¼Œå½“åªæœ‰ä¸€ä¸ªå°é˜¶æ—¶å°±æ²¡å¿…è¦å†é€’å½’äº†ï¼Œä¹Ÿå°±æ˜¯ï¼š<br>$$<br>f(1)=1<br>$$<br>å°†è¿™ä¸ªé€’å½’ç»ˆæ­¢æ¡ä»¶å¸¦å…¥é€’å½’å…¬å¼åï¼Œå‘ç°f(2)æ˜¯æ— æ³•ç¡®å®šçš„ï¼Œæ‰€ä»¥ç»ˆæ­¢æ¡ä»¶è¿˜åº”è¯¥åŒ…å«<br>$$<br>f(2)=2<br>$$<br>è¡¨ç¤ºçš„å«ä¹‰æ˜¯èµ°ä¸¤ä¸ªå°é˜¶æœ‰ä¸¤ç§èµ°æ³•ã€‚æœ€åæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºä»£ç å®ç°â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç«™åœ¨å·¨äººçš„è‚©è†€â€”â€”</p><blockquote><p>å†™é€’å½’ä»£ç çš„å…³é”®åœ¨äºæ‰¾åˆ°å°†å¤§é—®é¢˜è½¬åŒ–ä¸ºå°é—®é¢˜çš„å…³é”®ï¼Œå¹¶ä¸”åŸºäºæ­¤å†™ä¸‹é€’å½’å…¬å¼ï¼Œç„¶åå†æ¨æ•²é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼Œæœ€ç»ˆå°†é€’å½’å…¬å¼å’Œé€’å½’æ¡ä»¶è½¬åŒ–ä¸ºä»£ç å®ç°ã€‚</p></blockquote><h2 id="é€’å½’ä»£ç è¦è­¦æƒ•å †æ ˆæº¢å‡º"><a href="#é€’å½’ä»£ç è¦è­¦æƒ•å †æ ˆæº¢å‡º" class="headerlink" title="é€’å½’ä»£ç è¦è­¦æƒ•å †æ ˆæº¢å‡º"></a>é€’å½’ä»£ç è¦è­¦æƒ•å †æ ˆæº¢å‡º</h2><p>é€’å½’ä»£ç åœ¨ç®€æ´å¯è¯»æ€§å¼ºçš„åŒæ—¶ï¼Œå´ä¹Ÿå¸¦æ¥äº†å †æ ˆæº¢å‡ºçš„éšæ‚£ã€‚</p><p>ä¹‹å‰æåˆ°è¿‡ç³»ç»Ÿæ²¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¼šå°†ä¸´æ—¶å˜é‡ä½œä¸ºæ ˆå¸§å‹æ ˆï¼Œç­‰åˆ°å‡½æ•°è¿”å›å†å¼¹æ ˆã€‚è€Œé€’å½’ä»£ç å› ä¸ºè°ƒç”¨çš„å‡½æ•°å±‚æ•°å¤šï¼Œåœ¨å‡½æ•°è°ƒç”¨æ—¶ä¸æ–­ç”³è¯·æ ˆç©ºé—´ã€‚ä»è€Œå¯¼è‡´ç©ºé—´å¤æ‚åº¦ä¸ç†æƒ³ã€‚</p><p>é‚£æ€æ ·é¿å…å‘¢ï¼Ÿç†æƒ³çš„æ–¹æ³•æ˜¯æ ¹æ®åœºæ™¯é€‰æ‹©é€’å½’ï¼Œå¦‚æœé€’å½’å±‚æ•°ä¸å¤šï¼Œåˆ™é™åˆ¶é€’å½’å±‚æ•°ï¼Œè¿™æ—¶ä½¿ç”¨é€’å½’æ˜¯åˆé€‚çš„ã€‚</p><h2 id="é€’å½’ä»£ç è¦è­¦æƒ•é‡å¤è®¡ç®—"><a href="#é€’å½’ä»£ç è¦è­¦æƒ•é‡å¤è®¡ç®—" class="headerlink" title="é€’å½’ä»£ç è¦è­¦æƒ•é‡å¤è®¡ç®—"></a>é€’å½’ä»£ç è¦è­¦æƒ•é‡å¤è®¡ç®—</h2><p>åœ¨åˆšæ‰èµ°å°é˜¶çš„ä¾‹å­ä¸­ï¼Œå°±ä¸å¯é¿å…çš„é‡åˆ°äº†é‡å¤è®¡ç®—çš„é—®é¢˜ï¼Œè¿™æ ·å¯¹é—®é¢˜çš„æ±‚è§£å¹¶æ²¡æœ‰éšœç¢ï¼Œä½†å¹¶ä¸ä¼˜é›…ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨å“ˆæ¯”è¡¨è¿™æ ·çš„æ•°æ®ç»“æ„åŠ¨æ€å­˜å‚¨æ¯ä¸ªå­é—®é¢˜çš„ç»“æœã€‚</p><h2 id="ä¸€ç‚¹æ€è€ƒ"><a href="#ä¸€ç‚¹æ€è€ƒ" class="headerlink" title="ä¸€ç‚¹æ€è€ƒ"></a>ä¸€ç‚¹æ€è€ƒ</h2><p>åœ¨é—®é¢˜è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„è°ƒè¯•æ–¹å¼â€”â€”</p><blockquote><ul><li>æ‰“å°æ—¥å¿—å‘ç°é€’å½’å€¼</li><li>ç»“åˆæ¡ä»¶æ–­ç‚¹è¿›è¡Œè°ƒè¯•</li></ul></blockquote><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å››ç§åŸºæœ¬çš„æ•°æ®ç»“æ„</title>
      <link href="/2021/07/12/si-chong-ji-ben-de-shu-ju-jie-gou/"/>
      <url>/2021/07/12/si-chong-ji-ben-de-shu-ju-jie-gou/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨å…·ä½“çš„ç®—æ³•é¢˜è§£ä¹‹å‰ï¼Œæˆ‘ä¼šå…ˆç®€è¦çš„æè¿°ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œè¿™äº›çŸ¥è¯†ç‚¹éƒ½æ˜¯åŸºäºæ•°æ®ç»“æ„ä¸ç®—æ³•ä¸“æ çš„æ€»ç»“ï¼Œå¯¹äºè¯¦ç»†çš„æ¨ç†ä¸å†æ¶‰åŠï¼Œä»…å½“åšç¬”è®°ä½¿ç”¨ã€‚</p></blockquote><h1 id="æˆ‘ä»¬æ‰€ç†Ÿè¯†çš„æ•°ç»„"><a href="#æˆ‘ä»¬æ‰€ç†Ÿè¯†çš„æ•°ç»„" class="headerlink" title="æˆ‘ä»¬æ‰€ç†Ÿè¯†çš„æ•°ç»„"></a>æˆ‘ä»¬æ‰€ç†Ÿè¯†çš„æ•°ç»„</h1><h2 id="1-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#1-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="1.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>1.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p>ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„è¦ä»0å¼€å§‹ç¼–å·ï¼Œè€Œä¸æ˜¯ä»1å¼€å§‹ï¼Ÿ</p><p>ä»æ•°ç»„å­˜å‚¨çš„å†…å­˜æ¨¡å‹æ¥çœ‹ï¼Œæ•°ç»„çš„ä¸‹æ ‡å®é™…ä¸ŠæŒ‡çš„æ˜¯å†…å­˜åœ°å€çš„åç§»ï¼Œå‡è®¾ç”¨aè¡¨ç¤ºæ•°ç»„çš„é¦–åœ°å€ï¼Œå°†æ•°ç»„å…ƒç´ çš„ç±»å‹æ‰€å å­—èŠ‚æ•°è®¡ä¸ºtype_sizeï¼Œé‚£ä¹ˆ<strong>a[k]è¡¨ç¤ºçš„å«ä¹‰å°±æ˜¯å­˜å‚¨åœ¨å†…å­˜ç©ºé—´k*typesize+base_addrå¤„çš„å…ƒç´ </strong>ï¼Œå¦‚æœä»1å¼€å§‹ç¼–å·çš„ï¼Œå…¬å¼å°±å˜æˆäº†è¿™æ ·â€”â€”<br>$$<br>(k-1)*typesize+base_addr<br>$$<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡éšæœºè®¿é—®æ•°ç»„å…ƒç´ æ—¶å¤šäº†ä¸€ä¸ªå‡æ³•æ“ä½œï¼ŒCPUå¤šäº†ä¸€æ¬¡å‡æ³•æŒ‡ä»¤çš„æ‰§è¡Œã€‚</p><h2 id="1-2-æ•°ç»„æ¦‚è¿°"><a href="#1-2-æ•°ç»„æ¦‚è¿°" class="headerlink" title="1.2 æ•°ç»„æ¦‚è¿°"></a>1.2 æ•°ç»„æ¦‚è¿°</h2><p><strong>æ•°ç»„æ˜¯ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Œå®ƒç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹çš„æ•°æ®</strong>ã€‚</p><p>æ•°ç»„çš„ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯æ•°ç»„æ”¯æŒ<strong>éšæœºè®¿é—®</strong>ï¼Œæ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1).è€Œä¸åŸºäºä¸‹æ ‡è®¿é—®æ•°ç»„å…ƒç´ æœ€ä¼˜çš„æ–¹å¼æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(logn).</p><h2 id="1-3-ä½æ•ˆçš„æ’å…¥ä¸åˆ é™¤"><a href="#1-3-ä½æ•ˆçš„æ’å…¥ä¸åˆ é™¤" class="headerlink" title="1.3 ä½æ•ˆçš„æ’å…¥ä¸åˆ é™¤"></a>1.3 ä½æ•ˆçš„æ’å…¥ä¸åˆ é™¤</h2><p>ç”±äºæ•°ç»„ä½¿ç”¨çš„æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å…¶åœ¨æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶å®é™…ä¸Šéœ€è¦ä¸¤æ­¥ï¼š</p><ol><li>è¿›è¡Œ<strong>æ•°æ®çš„æ¬ç§»</strong></li><li>å®é™…çš„<strong>æ•°æ®æ“ä½œ</strong></li></ol><p>å› ä¸ºæ¶‰åŠåˆ°å…ƒç´ çš„æ¬ç§»ï¼Œå› æ­¤ä»–ä»¬çš„<strong>å¹³å‡æ—¶é—´å¤æ‚åº¦</strong>æ˜¯O(N),ç›¸å¯¹é“¾è¡¨åªæ“ä½œæŒ‡é’ˆå°±å¯ä»¥å®Œæˆæ’å…¥å’Œåˆ é™¤æ¥è¯´ï¼Œä½æ•ˆå¾—å¤šã€‚</p><h2 id="1-4-ä»¤äººå¤´ç–¼çš„æ•°ç»„è¶Šç•Œé—®é¢˜"><a href="#1-4-ä»¤äººå¤´ç–¼çš„æ•°ç»„è¶Šç•Œé—®é¢˜" class="headerlink" title="1.4 ä»¤äººå¤´ç–¼çš„æ•°ç»„è¶Šç•Œé—®é¢˜"></a>1.4 ä»¤äººå¤´ç–¼çš„æ•°ç»„è¶Šç•Œé—®é¢˜</h2><p>æ•°ç»„åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»è¦æŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ï¼Œå¹¶<strong>æ²¡æœ‰æœºåˆ¶çº¦æŸæ“ä½œæ•°ç»„é•¿åº¦ä»¥å¤–çš„å…ƒç´ </strong>ï¼Œè¿™å°±å¯¼è‡´äº†è¶Šç•Œé—®é¢˜ï¼Œåœ¨javaä¸­ï¼Œå½“å¤„ç†çš„æ•°ç»„è¶Šç•Œæ—¶ï¼Œä¼šæŠ›å‡º<strong>java.lang.ArrayIndexOutOfBoundsException</strong>å¼‚å¸¸ï¼Œè€Œåœ¨Cè¯­è¨€ä¸­ï¼Œå°±æ¯”è¾ƒå¤´ç–¼äº†ï¼Œéœ€è¦è‡ªå·±æ—¶åˆ»è°¨æ…ä»¥é˜²æ­¢æ•°ç»„è¶Šç•Œã€‚</p><h2 id="1-5-å®¹å™¨å¯ä»¥ä»£æ›¿æ•°ç»„å—ï¼Ÿ"><a href="#1-5-å®¹å™¨å¯ä»¥ä»£æ›¿æ•°ç»„å—ï¼Ÿ" class="headerlink" title="1.5 å®¹å™¨å¯ä»¥ä»£æ›¿æ•°ç»„å—ï¼Ÿ"></a>1.5 å®¹å™¨å¯ä»¥ä»£æ›¿æ•°ç»„å—ï¼Ÿ</h2><p>å®¹å™¨ArrayListåœ¨æ•°ç»„çš„åŸºç¡€ä¸Šå°è£…äº†<strong>å¢åˆ æ”¹æŸ¥åŠåŠ¨æ€æ‰©å®¹</strong>çš„æ“ä½œï¼Œç®€åŒ–äº†å¼€å‘æµç¨‹ã€‚ä½†åŒæ—¶ä¹Ÿå¤šäº†é™åˆ¶ï¼Œå³å®¹å™¨ä¸­<strong>åªèƒ½å­˜å‚¨å¯¹è±¡</strong>ï¼Œè¿™å°±éœ€è¦åŸºæœ¬æ•°æ®ç±»å‹çš„è£…ç®±ä¸æ‹†ç®±ï¼Œ<strong>é™ä½äº†æ€§èƒ½</strong>ã€‚é‚£ä»€ä¹ˆæƒ…å†µä¸‹å»ºè®®ä½¿ç”¨æ•°ç»„å‘¢â€”â€”</p><blockquote><ol><li>å¦‚æœè€ƒè™‘æ€§èƒ½ï¼Œåˆ™ä½¿ç”¨æ•°ç»„</li><li>è‹¥æ•°ç»„å¤§å°äº‹å…ˆå·²çŸ¥ä¸”æ¶‰åŠåˆ°çš„æ•°ç»„æ“ä½œéå¸¸ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„</li><li>å¯¹äºåº•å±‚çš„å¼€å‘ï¼Œå¦‚ç½‘ç»œæ¡†æ¶ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œé€‰æ‹©æ•°ç»„</li></ol></blockquote><h2 id="1-7-å°ç»ƒä¹ "><a href="#1-7-å°ç»ƒä¹ " class="headerlink" title="1.7 å°ç»ƒä¹ "></a>1.7 å°ç»ƒä¹ </h2><p>å¦‚ä½•ç†è§£JVMä¸­æ ‡è®°æ¸…é™¤åƒåœ¾å›æ”¶ç®—æ³•çš„æ€æƒ³ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“åˆ é™¤æ•°ç»„å…ƒç´ æ˜¯éå¸¸è€—è´¹æ€§èƒ½çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°å¤šæ¬¡åˆ é™¤ï¼Œå°±éœ€è¦å¤šæ¬¡æ¬ç§»å…ƒç´ ã€‚è¿™æ—¶å¯ä»¥å…ˆè®°å½•ä¸‹å·²ç»åˆ é™¤çš„å…ƒç´ ï¼Œä½†å¹¶ä¸æ¬ç§»æ•°æ®ï¼Œå½“æ•°ç»„æ²¡æœ‰æ›´å¤šçš„å­˜å‚¨ç©ºé—´æ—¶ï¼Œå†è§¦å‘çœŸæ­£çš„æ•°æ®æ¬ç§»ã€‚</p><p>è€Œå…³äºjvmæ ‡è®°æ¸…é™¤ç®—æ³•çš„è¯¦æƒ…ï¼Œå°±è¯·ç§»æ­¥<a href="https://segmentfault.com/a/1190000037685570" target="_blank" rel="noopener">https://segmentfault.com/a/1190000037685570</a></p><h1 id="äºŒ-é“¾è¡¨çŸ¥è¯†å¤§æ´¾é€"><a href="#äºŒ-é“¾è¡¨çŸ¥è¯†å¤§æ´¾é€" class="headerlink" title="äºŒ.é“¾è¡¨çŸ¥è¯†å¤§æ´¾é€"></a>äºŒ.é“¾è¡¨çŸ¥è¯†å¤§æ´¾é€</h1><hr><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>ç¡®è®¤è¿‡çœ¼ç¥ï¼Œæ˜¯ç†Ÿæ‚‰çš„é“¾è¡¨ç¯èŠ‚ã€‚ä»å†…å­˜æ¨¡å‹çš„è§’åº¦æ¥çœ‹ï¼Œä¼—å¤šçš„æ•°æ®ç»“æ„éƒ½æ˜¯åœ¨æ•°ç»„å’Œé“¾è¡¨çš„åŸºç¡€ä¸Šè¡ç”Ÿçš„ã€‚</p><p>åœ¨é“¾è¡¨çš„å­¦ä¹ å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä»ä¸€ä¸ªé€šç”¨çš„è§£å†³æ–¹æ¡ˆå‡ºå‘ï¼Œæ¥ç€è°ˆåŠå‡ ç§é“¾è¡¨çš„åŸºæœ¬ç»“æ„ï¼Œå¸¸ç”¨æ“ä½œï¼Œä»¥åŠä¸åŒç»“æ„çš„é“¾è¡¨æ˜¯æ€æ ·è‡ªç„¶é€’è¿›çš„ã€‚æœ€åè¿˜å°†å¯¹æ•°ç»„ä¸é“¾è¡¨åšä¸€å¯¹æ¯”ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¯ç¨‹å§â€”â€”</p><h2 id="2-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#2-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="2.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>2.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸ºäº†è§£å†³ä»ç¡¬ç›˜è¯»å–å’Œä»å†…å­˜è¯»å†™çš„é€Ÿåº¦ä¸åŒ¹é…é—®é¢˜ï¼Œå¸¸å¸¸å¼•å…¥ç¼“å­˜è¿™ä¸€æ¦‚å¿µã€‚ç¼“å­˜å®¶æ—å¯è°“äººä¸å…´æ—ºï¼Œå¯„å­˜å™¨ï¼Œæµè§ˆå™¨ç¼“å­˜ï¼Œæ•°æ®åº“ç¼“å­˜å¤§è¡Œå…¶é“ã€‚é‚£ç¼“å­˜å®ç°çš„æœºåˆ¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>é‚£å°±æ˜¯LRUç¼“å­˜æ·˜æ±°ç®—æ³•ï¼Œåœ¨åæœŸæ¨å‡ºçš„æ“ä½œç³»ç»Ÿç³»åˆ—åšæ–‡ä¸­ï¼Œä½ å°†å¯¹å…¶æœ‰æ·±å…¥çš„äº†è§£ã€‚è¿™é‡Œæˆ‘ä»¬åªè®¨è®ºï¼Œå¦‚ä½•<strong>ä½¿ç”¨é“¾è¡¨å®ç°LRUç¼“å­˜æ·˜æ±°ç®—æ³•</strong>ï¼Œå¯¹æ­¤ï¼Œç‹äº‰è€å¸ˆçš„æ€è·¯è¿™æ ·çš„â€”â€”</p><blockquote><p>æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªæœ‰åºçš„å•é“¾è¡¨ï¼Œè¶Šé è¿‘é“¾è¡¨å°¾éƒ¨çš„èŠ‚ç‚¹æ˜¯è¶Šæ—©ä¹‹å‰è¢«æ’å…¥çš„ã€‚å½“æœ‰ä¸€ä¸ªæ–°çš„æ•°æ®è¢«è®¿é—®æ—¶ï¼Œæˆ‘ä»¬ä»é“¾è¡¨å¤´éƒ¨å¼€å§‹é¡ºåºéå†å•é“¾è¡¨ã€‚</p><p>å‡å¦‚è¿™ä¸ªå…ƒç´ ä¹‹å‰è¢«ç¼“å­˜åœ¨é“¾è¡¨ä¸­ï¼Œåˆ™å°†è¯¥å…ƒç´ ä»åŸæ¥çš„ä½ç½®åˆ é™¤ï¼Œç„¶åæ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨</p><p>å¦‚æœè¯¥æ•°æ®æ²¡æœ‰åœ¨ç¼“å­˜é“¾è¡¨ä¸­ï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ol><li>å¦‚æœç¼“å­˜æœªæ»¡ï¼Œåˆ™å°†æ­¤èŠ‚ç‚¹ç›´æ¥æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨</li><li>å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™å°†é“¾è¡¨å°¾éƒ¨çš„å…ƒç´ åˆ é™¤ï¼Œå†å°†è¯¥æ•°æ®æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚</li></ol><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡<strong>æ•£åˆ—è¡¨é™ä½è®¿é—®å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦</strong>ä¼˜åŒ–è¿™ä¸ªæ–¹æ¡ˆã€‚</p></blockquote><h2 id="2-2-äº”èŠ±å…«é—¨çš„é“¾è¡¨ç»“æ„"><a href="#2-2-äº”èŠ±å…«é—¨çš„é“¾è¡¨ç»“æ„" class="headerlink" title="2.2 äº”èŠ±å…«é—¨çš„é“¾è¡¨ç»“æ„"></a>2.2 äº”èŠ±å…«é—¨çš„é“¾è¡¨ç»“æ„</h2><p>é¦–å…ˆå¯¹é“¾è¡¨ä¸‹ä¸€ä¸ªå®šä¹‰ï¼š</p><blockquote><p>åŒºåˆ«äºæ•°ç»„ä½¿ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œ<strong>é“¾è¡¨é€šè¿‡æŒ‡é’ˆå°†ç¦»æ•£çš„å†…å­˜å—ä¸²è”åœ¨ä¸€èµ·ã€‚</strong></p></blockquote><p>å®šä¹‰ä¸­çš„å†…å­˜å—å³æ˜¯é“¾è¡¨çš„èŠ‚ç‚¹ï¼Œä¸ºäº†å°†æ‰€æœ‰èŠ‚ç‚¹ä¸²èµ·æ¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹<strong>å­˜å‚¨æ•°æ®</strong>ä»¥å¤–ï¼Œè¿˜éœ€è¦<strong>è®°å½•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯åç»§æŒ‡é’ˆnextã€‚</strong></p><p>å¸¸ç”¨çš„é“¾è¡¨æœ‰ä¸‰ç§ï¼Œå…¶ä¸­æœ€ç®€å•å¸¸ç”¨çš„æ˜¯å•é“¾è¡¨â€”â€”</p><h3 id="2-2-1-å•é“¾è¡¨"><a href="#2-2-1-å•é“¾è¡¨" class="headerlink" title="2.2.1 å•é“¾è¡¨"></a>2.2.1 å•é“¾è¡¨</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262025304.png" alt="image-20210707230130075"></p><p>æˆ‘ä»¬ä¹ æƒ¯å°†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç§°ä¸ºå¤´ç»“ç‚¹ï¼Œå°†æœ€åä¸€ä¸ªèŠ‚ç‚¹ç§°ä¸ºå°¾ç»“ç‚¹ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°¾ç»“ç‚¹ä¸å†æŒ‡å‘ä¸€ä¸ªåœ°å€ï¼Œè€ŒæŒ‡å‘nullã€‚</p><p>ä¸æ•°ç»„ä¸€æ ·ï¼Œé“¾è¡¨ä¹Ÿæ”¯æŒæ•°æ®çš„æŸ¥æ‰¾ï¼Œæ’å…¥å’Œåˆ é™¤ã€‚</p><p>åœ¨æ’å…¥ï¼Œåˆ é™¤æ–°å…ƒç´ æ—¶ï¼Œåªéœ€è¦è€ƒè™‘ç›¸é‚»èŠ‚ç‚¹çš„æŒ‡é’ˆæ”¹å˜â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262025648.png" alt="image-20210707230140227">åœ¨é“¾è¡¨ä¸­æŸ¥æ‰¾å…ƒç´ æ˜¯ä¸æ–¹ä¾¿çš„ï¼Œå¿…é¡»é¡ºåºéå†é“¾è¡¨ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n).</p><h3 id="2-2-2-å¾ªç¯é“¾è¡¨"><a href="#2-2-2-å¾ªç¯é“¾è¡¨" class="headerlink" title="2.2.2 å¾ªç¯é“¾è¡¨"></a>2.2.2 å¾ªç¯é“¾è¡¨</h3><p>å¾ªç¯é“¾è¡¨æ˜¯ç‰¹æ®Šçš„å•é“¾è¡¨ï¼Œå®ƒä¸å•é“¾è¡¨çš„åŒºåˆ«å°±åœ¨äºå°¾ç»“ç‚¹ã€‚å¾ªç¯é“¾è¡¨çš„å°¾ç»“ç‚¹æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å¤´ç»“ç‚¹ã€‚é‚£ä¹ˆè¿™ä¹ˆç»“æ„é€‚ç”¨äºä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿ</p><p>å®ƒå¯ä»¥ç”¨æ¥é«˜æ•ˆçš„è§£å†³<strong>ç¯ç»“æ„çš„é“¾è¡¨</strong>ï¼Œæ¯”å¦‚è‘—åçš„<strong>çº¦ç‘Ÿå¤«ç¯</strong>é—®é¢˜ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¢«æ›´å¤šä½¿ç”¨çš„è¦å±åŒå‘é“¾è¡¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒç‰¹å®šçš„ç»“æ„å¾—ä»¥åº”ç”¨äºä»€ä¹ˆåœºæ™¯å‘¢ã€‚ã€‚ã€‚</p><h3 id="2-2-3-åŒå‘é“¾è¡¨"><a href="#2-2-3-åŒå‘é“¾è¡¨" class="headerlink" title="2.2.3 åŒå‘é“¾è¡¨"></a>2.2.3 åŒå‘é“¾è¡¨</h3><p>åŒå‘é“¾è¡¨åœ¨å•é“¾è¡¨çš„åŸºç¡€ä¸Šå¢åŠ äº†å‰é©±èŠ‚ç‚¹prevï¼Œè¿™æ ·åŒå‘é“¾è¡¨å°±å¯ä»¥å®ç°åå‘éå†ï¼Œå¯¹äºæ‰¾ç‰¹å®šèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹çš„æ—¶é—´å¤æ‚ä¸ºO(1)ã€‚åŒå‘é“¾è¡¨é™ä½äº†éå†é“¾è¡¨æ—¶çš„å¤æ‚åº¦ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†å†…å­˜çš„æŸè€—ã€‚æ˜¯ä¸€ç§ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥</p><h3 id="2-2-4-åŒå‘é“¾è¡¨é«˜æ•ˆåœ¨å“ªå‘¢"><a href="#2-2-4-åŒå‘é“¾è¡¨é«˜æ•ˆåœ¨å“ªå‘¢" class="headerlink" title="2.2.4 åŒå‘é“¾è¡¨é«˜æ•ˆåœ¨å“ªå‘¢"></a>2.2.4 åŒå‘é“¾è¡¨é«˜æ•ˆåœ¨å“ªå‘¢</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œåˆ é™¤é“¾è¡¨å…ƒç´ çš„åœºæ™¯åˆ†ä¸ºä¸¤ç±»ï¼š</p><ol><li>åˆ é™¤å€¼ç­‰äºç»™å®šå€¼çš„èŠ‚ç‚¹</li><li>åˆ é™¤ç»™å®šæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹</li></ol><p>å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œæ²¡æœ‰æ·å¾„å¯èµ°ï¼Œåªèƒ½å»é€ä¸ªéå†èŠ‚ç‚¹å…ƒç´ ã€‚è€Œå¯¹äºç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼ŒåŒå‘é“¾è¡¨å¢åŠ äº†é€šè¿‡å‰é©±æŒ‡é’ˆæ‰¾ç»™å®šèŠ‚ç‚¹çš„éå†ï¼Œå› æ­¤é«˜æ•ˆçš„å¤šã€‚åŒæ ·çš„ï¼Œæ’å…¥ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨åŒå‘é“¾è¡¨ä¹Ÿæä¾›äº†æ›´å¤šçš„å¯èƒ½ã€‚</p><p>æ—¢ç„¶åŒå‘é“¾è¡¨è¿™ä¹ˆç‰›ï¼Œé‚£å®é™…åº”ç”¨åœºæ™¯ä¸­æœ‰æ²¡æœ‰åŒå‘é“¾è¡¨çš„å¤§å±•èº«æ‰‹å‘¢ï¼Œé‚£å°±æ˜¯LinkedHashMap,è¿™ç§é«˜æ•ˆçš„é›†åˆåº•å±‚å³æ˜¯ä½¿ç”¨äº†è¿™ç§æ•°æ®ç»“æ„ã€‚</p><p>çœ‹åˆ°è¿™ï¼Œå¾ˆå¤šæœ‹å‹ä¼šé—®ï¼Œæ—¢ç„¶åŒå‘é“¾è¡¨çš„æ•ˆç‡è¿™ä¹ˆé«˜ï¼Œé‚£å†ç»™ä»–åŠ ä¸Šå¾ªç¯é“¾è¡¨çš„ç‰¹ç‚¹å²‚ä¸æ˜¯å¦‚è™æ·»ç¿¼ï¼Œçš„ç¡®å¦‚æ­¤ï¼Œæˆ‘ä»¬æ¥çœ‹ç©¶æç‰ˆâ€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262025338.png" alt="image-20210707230151299"></p><h2 id="2-3-é“¾è¡¨VSæ•°ç»„æ€§èƒ½å¤§æ¯”æ‹¼"><a href="#2-3-é“¾è¡¨VSæ•°ç»„æ€§èƒ½å¤§æ¯”æ‹¼" class="headerlink" title="2.3 é“¾è¡¨VSæ•°ç»„æ€§èƒ½å¤§æ¯”æ‹¼"></a>2.3 é“¾è¡¨VSæ•°ç»„æ€§èƒ½å¤§æ¯”æ‹¼</h2><p>è¿™é‡Œä¸å†ä¿—å¥—çš„ç»™å‡ºå¾ˆå¤šç†è®ºï¼Œè€Œæ˜¯é€šè¿‡å…·ä½“çš„åº”ç”¨åœºæ™¯æ¥è€ƒè™‘æ•°ç»„ä¸é“¾è¡¨æ€§èƒ½â€”â€”</p><p>CPUç¼“å­˜åº”è¯¥å“ªç§æ•°æ®ç»“æ„å‘¢ï¼ŸCPUç®¡ç†çš„æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œä½¿ç”¨é“¾è¡¨ç®€ç›´å¤©ç„¶åœ°ä¸å‹å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„ã€‚è€Œå¯¹äºä¸€ä¸ªæ’å…¥åˆ é™¤æ›´é¢‘ç¹çš„ç³»ç»Ÿæ¥è¯´ï¼Œä½¿ç”¨æ•°ç»„åˆ™æ›´ä¼—æœ›æ‰€å½’ã€‚å…¶å®æŠ›å¼€åœºæ™¯è¯´æ•°æ®ç»“æ„å°±æ˜¯è€æµæ°“ï¼Œåœ¨ä¹‹å‰çš„å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬å°±æåŠï¼Œæ•°æ®ç»“æ„æ˜¯ç”¨äºç‰¹å®šåœºæ™¯çš„ã€‚</p><h2 id="2-4-å¦‚ä½•è½»æ¾çš„å†™å‡ºæ­£ç¡®çš„é“¾è¡¨ä»£ç "><a href="#2-4-å¦‚ä½•è½»æ¾çš„å†™å‡ºæ­£ç¡®çš„é“¾è¡¨ä»£ç " class="headerlink" title="2.4 å¦‚ä½•è½»æ¾çš„å†™å‡ºæ­£ç¡®çš„é“¾è¡¨ä»£ç "></a>2.4 å¦‚ä½•è½»æ¾çš„å†™å‡ºæ­£ç¡®çš„é“¾è¡¨ä»£ç </h2><p>é“¾è¡¨çš„ä»£ç å› ä¸ºæ¶‰åŠåˆ°æŒ‡é’ˆçš„æ“ä½œï¼Œå¾€å¾€ç©ºæƒ³èµ·æ¥æ¯”è¾ƒç»•ï¼Œè¦æƒ³é«˜æ•ˆåœ°å†™å‡ºé“¾è¡¨ä»£ç ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›æŠ€å·§â€”â€”</p><ol><li><p><strong>ç†è§£æŒ‡é’ˆæˆ–è€…å¼•ç”¨çš„å«ä¹‰</strong></p><p>å°†æŸä¸ªå˜é‡èµ‹ç»™æŒ‡é’ˆï¼Œå®é™…ä¸Šå°±æ˜¯å°†è¿™ä¸ªå˜é‡çš„åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆï¼Œå¼•ç”¨åŒæ ·å¦‚æ˜¯ã€‚</p></li><li><p><strong>è­¦æƒ•æŒ‡é’ˆä¸¢å¤±å’Œå†…å­˜æ³„æ¼</strong></p><p>é“¾è¡¨çš„æ“ä½œå¾€å¾€æ˜¯æœ‰åºçš„ï¼Œæ­¤å¤–ï¼Œåœ¨åˆ é™¤å…ƒç´ æ—¶ï¼Œä¸€å®šè¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ç©ºé—´(Cè¯­è¨€).</p></li><li><p><strong>åˆ©ç”¨å“¨å…µç®€åŒ–å®ç°éš¾åº¦</strong></p><p>å¯¹åŸç”Ÿçš„å•é“¾è¡¨åˆ é™¤å°¾ç»“ç‚¹å’Œæ’å…¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦åšç‰¹æ®Šå¤„ç†ã€‚è¿™ç§è¾¹ç•Œæ¡ä»¶èƒ½ä¸èƒ½ç®€åŒ–æˆé€šç”¨çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>å½“ç„¶å¯ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨å“¨å…µæœºåˆ¶æ¥å®ç°ï¼Œå³åœ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰åŠ å…¥headèŠ‚ç‚¹ï¼ŒheadèŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œå®ƒæŒ‡å‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™é‡Œéœ€è¦æ³¨æ„åŒºåˆ†headèŠ‚ç‚¹å’Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»–ä»¬çš„å®šä¹‰æ˜¯ä¸åŒçš„ï¼</p></li><li><p><strong>é‡ç‚¹ç•™æ„è¾¹ç•Œæ¡ä»¶</strong></p><p>å¸¸è§çš„è¾¹ç•Œå¤„ç†æ¡ä»¶æœ‰é‚£ä¹ˆå‡ ä¸ª</p><ol><li><strong>å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ</strong></li><li><strong>å¦‚æœé“¾è¡¨åªåŒ…å«ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ</strong></li><li><strong>å¦‚æœé“¾è¡¨åªåŒ…å«ä¸¤ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ</strong></li><li><strong>ä»£ç é€»è¾‘åœ¨å¤„ç†å¤´ç»“ç‚¹å’Œå°¾ç»“ç‚¹æ—¶ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œã€‚</strong></li></ol></li><li><p><strong>ä¸¾ä¾‹ç”»å›¾ï¼Œè¾…åŠ©æ€è€ƒ</strong></p><p>éå¸¸æœ‰å¿…è¦ï¼Œè„‘å­ä¸æ˜¯é‚£ä¹ˆé è°±çš„æ—¶å€™ï¼Œå°±éœ€è¦åŠ¨æ‰‹å•¦ã€‚</p></li><li><p><strong>å¤šå†™å¤šç»ƒï¼Œæ²¡æœ‰æ·å¾„</strong></p></li></ol><hr><h1 id="ä¸‰-æ›´è¿›ä¸€æ­¥â€”â€”å…³äºæ ˆ"><a href="#ä¸‰-æ›´è¿›ä¸€æ­¥â€”â€”å…³äºæ ˆ" class="headerlink" title="ä¸‰.æ›´è¿›ä¸€æ­¥â€”â€”å…³äºæ ˆ"></a>ä¸‰.æ›´è¿›ä¸€æ­¥â€”â€”å…³äºæ ˆ</h1><h2 id="3-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#3-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="3.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>3.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p>æˆ‘ä»¬åœ¨æµè§ˆç½‘ç«™æ—¶éƒ½ä¼šç”¨åˆ°å‰è¿›å’Œåé€€çš„åŠŸèƒ½ï¼Œé‚£è¿™ç§åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„ä½ çŸ¥é“å—ï¼Ÿ</p><p>æ²¡é”™ï¼Œå°±æ˜¯ä½¿ç”¨è¿™èŠ‚æˆ‘ä»¬ä¼šè®²åˆ°çš„æ ˆï¼Œé’ˆå¯¹è¿™ä¸ªéœ€æ±‚ï¼Œå‡è®¾å°†æˆ‘ä»¬æµè§ˆçš„ç½‘é¡µæŒ‰ç…§å…ˆåé¡ºåºå­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®ä¸‹æ ‡ï¼Œå³å¯å®ç°å‰è¿›å’Œåé€€ï¼Œä½†è¿™é‡Œæœ‰ä¸€ä¸ªè‡´å‘½çš„BUGï¼Œé‚£å°±æ˜¯å®ƒæ— æ³•æŒ‰æˆ‘ä»¬çš„éœ€æ±‚å»åˆ å‡ä¸€äº›å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„ç½‘é¡µï¼Œä¹Ÿæ­£å› æ­¤æˆ‘ä»¬éœ€è¦å¼•å…¥æ ˆã€‚</p><p>å‡è®¾æˆ‘ä»¬ä¾æ¬¡è®¿é—®äº†ä¸‰ä¸ªç½‘é¡µA,B,Cï¼Œé‚£æ ˆçš„æƒ…å†µæ˜¯è¿™æ ·çš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262025407.png" alt="image-20210707230201483"></p><p>è¿™æ—¶ï¼Œæˆ‘ä»¬æƒ³å›é€€åˆ°aé¡µé¢äº†ï¼Œå°±éœ€è¦å‡ºæ ˆc,båˆ°æ ˆYä¸­â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262025129.png" alt="image-20210707230229659"></p><p>ç„¶åï¼Œæˆ‘ä»¬å†å»è®¿é—®é¡µé¢d:å°±ä¼šå…¥æ ˆXï¼Œå¦‚æœæˆ‘ä»¬å†æƒ³è®¿é—®é¡µé¢b,cå°±ä¸è¡Œäº†ï¼Œæ ˆYä¼šæ¸…ç©ºæ ˆä¸­çš„å†…å®¹</p><h2 id="3-2-ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ ˆ"><a href="#3-2-ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ ˆ" class="headerlink" title="3.2 ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ ˆ"></a>3.2 ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ ˆ</h2><p>æ ˆæ˜¯ä¸€ç§æ“ä½œå—é™çš„çº¿æ€§è¡¨ï¼Œä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œæ•°ç»„å¼‚æˆ–é“¾è¡¨éƒ½å¯ä»¥å®ç°æ ˆã€‚ä½†æ˜¯æ•°ç»„æˆ–æ˜¯é“¾è¡¨éƒ½æš´éœ²äº†å¤ªå¤šçš„æ¥å£ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬éå¸¸æ³¨æ„é‚»ç•Œæ¡ä»¶ã€‚</p><p>è€Œç‰¹å®šçš„æ•°æ®ç»“æ„æ˜¯å¯¹ç‰¹å®šæƒ…å¢ƒçš„æŠ½è±¡ï¼Œå¯¹äºæŸäº›åœºæ™¯æ¥è¯´ï¼Œç”¨æ ˆå°±å¾ˆåˆé€‚äº†ã€‚</p><p>å½“æŸä¸ªæ•°æ®é›†åˆåªæ¶‰åŠåœ¨ä¸€ç«¯æ’å…¥å’Œåˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”æ»¡è¶³åè¿›å…ˆå‡ºï¼Œå…ˆè¿›åå‡ºçš„ç‰¹ç‚¹æ—¶ï¼Œæˆ‘ä»¬å°±åº”è¯¥é¦–é€‰ä½¿ç”¨æ ˆã€‚</p><h2 id="3-3-æ€æ ·å­¦ä¹ æ ˆï¼Ÿ"><a href="#3-3-æ€æ ·å­¦ä¹ æ ˆï¼Ÿ" class="headerlink" title="3.3 æ€æ ·å­¦ä¹ æ ˆï¼Ÿ"></a>3.3 æ€æ ·å­¦ä¹ æ ˆï¼Ÿ</h2><h3 id="å®ç°ä¸€ä¸ªæ ˆ"><a href="#å®ç°ä¸€ä¸ªæ ˆ" class="headerlink" title="å®ç°ä¸€ä¸ªæ ˆ"></a>å®ç°ä¸€ä¸ªæ ˆ</h3><p>å¯ä»¥æŸ¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡å…³äº<strong>é˜Ÿåˆ—å’Œæ ˆåŸºç¡€åº”ç”¨çš„åšæ–‡</strong>ï¼š</p><h3 id="æ”¯æŒåŠ¨æ€æ‰©å®¹çš„é¡ºåºæ ˆ"><a href="#æ”¯æŒåŠ¨æ€æ‰©å®¹çš„é¡ºåºæ ˆ" class="headerlink" title="æ”¯æŒåŠ¨æ€æ‰©å®¹çš„é¡ºåºæ ˆ"></a>æ”¯æŒåŠ¨æ€æ‰©å®¹çš„é¡ºåºæ ˆ</h3><p>æˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹å…¥æ ˆå’Œå‡ºæ ˆçš„æ—¶é—´å¤æ‚åº¦ï¼Œå‡ºæ ˆæ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)æ²¡æœ‰æ‚¬å¿µï¼Œè€Œå…¥æ ˆæ—¶å‡å¦‚è¿˜æœ‰ç©ºé—´ï¼Œé‚£æ—¶é—´å¤æ‚åº¦è‡ªç„¶ä¹Ÿæ˜¯O(1)ï¼Œä½†å½“æ ˆæ»¡çš„æ—¶å€™å…¥æ ˆï¼Œå°±éœ€è¦æ‰©å®¹ï¼Œè¿™é‡Œçš„æ—¶é—´å¤æ‚åº¦ç”¨å‡æ‘Šæ—¶é—´å¤æ‚åº¦ç†è§£ä»ä¸ºO(1).</p><p>æ—¢ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰©å®¹è¿™ç§æœºåˆ¶ï¼Œè€Œæ ˆæœ¬èº«åˆå¯ä»¥ä½¿ç”¨æ•°ç»„å®ç°ã€‚ä¸å¦¨ç”¨æ ˆæ¥ç»§æ‰¿ä¸€ä¸ªå¯ä»¥å®ç°åŠ¨æ€æ‰©å®¹çš„é›†åˆã€‚</p><p>å®é™…ä¸Šï¼Œjavaå°±æ˜¯è¿™æ ·åšçš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262025774.png" alt="image-20210707230239639"></p><p>å½“éœ€è¦æ‰©å®¹æ—¶ï¼Œä¼šå°†æ•°ç»„å¤§å°æ‰©å±•ä¸ºåŸæ¥çš„2å€ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262026179.png" alt="image-20210707230251442"></p><h3 id="æ ˆçš„åº”ç”¨"><a href="#æ ˆçš„åº”ç”¨" class="headerlink" title="æ ˆçš„åº”ç”¨"></a>æ ˆçš„åº”ç”¨</h3><p>æ ˆåœ¨å‡½æ•°è°ƒç”¨ï¼Œæ‹¬å·åŒ¹é…ï¼Œè¡¨è¾¾å¼è¿ç®—æ–¹é¢æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹â€”â€”</p><p><code>å‡½æ•°è°ƒç”¨</code> ï¼š</p><blockquote><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿç»™ç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…äº†ä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿™å—å†…å­˜è¢«ç»„ç»‡ä¸ºæ ˆè¿™ç§ç»“æ„ã€‚ç”¨æ¥å­˜å‚¨å‡½æ•°è°ƒç”¨æ—¶çš„ä¸´æ—¶å˜é‡ã€‚æ¯è¿›å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šå°†ä¸´æ—¶å˜é‡ä½œä¸ºä½œä¸ºä¸€ä¸ªæ ˆå¸§å…¥æ ˆï¼Œå½“è¢«è°ƒç”¨å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œè¿”å›ä¹‹åï¼Œå°†è¿™ä¸ªå‡½æ•°å¯¹åº”çš„æ ˆå¸§å‡ºæ ˆ</p></blockquote><p><code>è¡¨è¾¾å¼è¿ç®—</code></p><blockquote><p>ç¼–è¯‘å™¨å®åˆ™å°±æ˜¯ä½¿ç”¨ä¸¤ä¸ªæ ˆæ¥å®ç°çš„ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯ä¿å­˜æ“ä½œæ•°çš„æ ˆï¼Œå¦ä¸€ä¸ªæ˜¯ä¿å­˜è¿ç®—ç¬¦çš„æ ˆã€‚å½“æˆ‘ä»¬ä»å·¦åˆ°å³éå†è¡¨è¾¾å¼ï¼Œå½“é‡åˆ°æ•°æ®ï¼Œæˆ‘ä»¬ç›´æ¥å‹å…¥æ“ä½œæ•°æ ˆã€‚</p><p>å½“é‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œé¦–å…ˆä¸è¿ç®—ç¬¦æ ˆçš„æ ˆé¡¶è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ¯”æ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä½æˆ–è€…ç›¸ç­‰ï¼Œåˆ™ä»è¿ç®—ç¬¦æ ˆå–å‡ºæ ˆé¡¶å…ƒç´ ï¼Œç„¶åä»æ“ä½œæ•°æ ˆå–ä¸¤ä¸ªå…ƒç´ è¿›è¡Œè¿ç®—ï¼Œå¹¶å°†è¿ç®—ç»“æœå‹å…¥æ“ä½œæ•°æ ˆï¼Œç»§ç»­æ¯”è¾ƒã€‚æ¥çœ‹ä¸‹ç‹äº‰è€å¸ˆçš„ä¸¾ä¾‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262026989.png" alt="image-20210707230302756"></p></blockquote><p><code>æ‹¬å·åŒ¹é…</code></p><blockquote><p>è¿™é‡Œä¹Ÿå¯ä»¥ç”¨æ ˆæ¥è§£å†³ã€‚æˆ‘ä»¬ç”¨æ ˆæ¥ä¿å­˜æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼Œä»å·¦åˆ°å³ä¾æ¬¡æ‰«æå­—ç¬¦ä¸²ã€‚å½“æ‰«æåˆ°å·¦æ‹¬å·æ—¶ï¼Œåˆ™å°†å…¶å‹å…¥æ ˆä¸­ï¼›å½“æ‰«æåˆ°å³æ‹¬å·æ—¶ï¼Œä»æ ˆé¡¶å–å‡ºä¸€ä¸ªå·¦æ‹¬å·ã€‚å¦‚æœèƒ½å¤ŸåŒ¹é…ï¼Œæ¯”å¦‚â€œ(â€è·Ÿâ€œ)â€åŒ¹é…ï¼Œâ€œ[â€è·Ÿâ€œ]â€åŒ¹é…ï¼Œâ€œ{â€è·Ÿâ€œ}â€åŒ¹é…ï¼Œåˆ™ç»§ç»­æ‰«æå‰©ä¸‹çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ‰«æçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸èƒ½é…å¯¹çš„å³æ‹¬å·ï¼Œæˆ–è€…æ ˆä¸­æ²¡æœ‰æ•°æ®ï¼Œåˆ™è¯´æ˜ä¸ºéæ³•æ ¼å¼ã€‚<br>å½“æ‰€æœ‰çš„æ‹¬å·éƒ½æ‰«æå®Œæˆä¹‹åï¼Œå¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜å­—ç¬¦ä¸²ä¸ºåˆæ³•æ ¼å¼ï¼›å¦åˆ™ï¼Œè¯´æ˜æœ‰æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼Œä¸ºéæ³•æ ¼å¼ã€‚</p></blockquote><h3 id="é¢è¯•å¸¸è€ƒçš„ç»ƒä¹ é¢˜é›†é”¦"><a href="#é¢è¯•å¸¸è€ƒçš„ç»ƒä¹ é¢˜é›†é”¦" class="headerlink" title="é¢è¯•å¸¸è€ƒçš„ç»ƒä¹ é¢˜é›†é”¦"></a>é¢è¯•å¸¸è€ƒçš„ç»ƒä¹ é¢˜é›†é”¦</h3><ol><li><p>æœ‰æ•ˆçš„æ‹¬å·</p><p>å¾…æ›´æ–°</p></li><li><p>æœ€å°æ ˆ</p><p>å¾…æ›´æ–°</p></li><li><p>ç”¨æ ˆå®ç°é˜Ÿåˆ—</p><p>å¾…æ›´æ–°</p></li><li><p>æ¯”è¾ƒå«é€€æ ¼çš„æ ˆ</p><p>å¾…æ›´æ–°</p></li><li><p>åŸºæœ¬è®¡ç®—å™¨</p><p>å¾…æ›´æ–°</p></li></ol><hr><h1 id="å››-é˜Ÿåˆ—"><a href="#å››-é˜Ÿåˆ—" class="headerlink" title="å››. é˜Ÿåˆ—"></a>å››. é˜Ÿåˆ—</h1><h2 id="4-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#4-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="4.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>4.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p>å½“æˆ‘ä»¬å‘å›ºå®šå¤§å°çš„çº¿ç¨‹æ± ä¸­è¯·æ±‚ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¦‚æœçº¿ç¨‹æ± ä¸­æ²¡æœ‰ç©ºé—²èµ„æºäº†ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹æ± ä¼šå¦‚ä½•å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œæ˜¯æ‹’ç»è¯·æ±‚è¿˜æ˜¯æ’é˜Ÿè¯·æ±‚ï¼Ÿå„ç§å¤„ç†ç­–ç•¥åˆæ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿ</p><blockquote><p>ä¸€èˆ¬æœ‰ä¸¤ç§è§£å†³ç­–ç•¥ï¼Œä¸€ç§æ˜¯éé˜»å¡çš„å¤„ç†æ–¹å¼ï¼Œç›´æ¥æ‹’ç»ä»»åŠ¡è¯·æ±‚ï¼›å¦ä¸€ç§æ˜¯é˜»å¡çš„å¤„ç†æ–¹å¼ï¼Œå°†è¯·æ±‚æ’é˜Ÿã€‚é‚£æ’é˜Ÿçš„é˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„å‘¢â€”â€”</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œé˜Ÿåˆ—æœ‰åŸºäºæ•°ç»„å’Œé“¾è¡¨çš„å®ç°æ–¹å¼ã€‚åŸºäºé“¾è¡¨çš„å®ç°æ–¹å¼ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªæ”¯æŒæ— é™æ’é˜Ÿçš„æ— ç•Œé˜Ÿåˆ—ï¼Œä½†å¯¹ç”¨æˆ·ä½“éªŒæ¥è¯´ï¼Œç€å®ä¸æ€ä¹ˆå‹å¥½ã€‚</p><p>åŸºäºæ•°ç»„å®ç°çš„æœ‰ç•Œé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—çš„å¤§å°æœ‰é™ï¼Œå½“è¶…è¿‡é˜Ÿåˆ—å¤§å°æ—¶ï¼Œè¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œè¿™ç§æ–¹å¼å¯¹å“åº”æ—¶é—´æ•æ„Ÿçš„ç³»ç»Ÿæ¥è¯´ï¼Œç›¸å¯¹æ¯”è¾ƒåˆç†ã€‚ä½†è®¾ç½®ä¸€ä¸ªåˆç†çš„é˜Ÿåˆ—å¤§å°ä¹Ÿéå¸¸æœ‰è®²ç©¶ï¼Œéœ€è¦æŒ‰ç…§å…·ä½“åº”ç”¨åœºæ™¯è®¾è®¡ã€‚</p></blockquote><h2 id="4-2-æ¦‚è¿°"><a href="#4-2-æ¦‚è¿°" class="headerlink" title="4.2 æ¦‚è¿°"></a>4.2 æ¦‚è¿°</h2><p>é˜Ÿåˆ—æ˜¯ä¸€ç§æ“ä½œå—é™çš„çº¿æ€§è¡¨ï¼Œå¯¹æ¯”æ ˆï¼Œå®ƒåŒæ ·æ”¯æŒå…¥é˜Ÿå’Œå‡ºé˜Ÿã€‚æ“ä½œæ—¶ï¼Œ<strong>é˜Ÿå¤´æŒ‡é’ˆæŒ‡å‘é˜Ÿå¤´å…ƒç´ ï¼Œé˜Ÿå°¾æŒ‡é’ˆæŒ‡å‘é˜Ÿå°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªå†…å­˜ç©ºé—´ã€‚</strong></p><h2 id="4-3-äº”èŠ±å…«é—¨çš„é˜Ÿåˆ—"><a href="#4-3-äº”èŠ±å…«é—¨çš„é˜Ÿåˆ—" class="headerlink" title="4.3 äº”èŠ±å…«é—¨çš„é˜Ÿåˆ—"></a>4.3 äº”èŠ±å…«é—¨çš„é˜Ÿåˆ—</h2><h3 id="é¡ºåºé˜Ÿåˆ—çš„å®ç°"><a href="#é¡ºåºé˜Ÿåˆ—çš„å®ç°" class="headerlink" title="é¡ºåºé˜Ÿåˆ—çš„å®ç°"></a>é¡ºåºé˜Ÿåˆ—çš„å®ç°</h3><p>å‚è€ƒåšæ–‡ï¼š<a href="https://blog.csdn.net/qq_48573752/article/details/113776915" target="_blank" rel="noopener">https://blog.csdn.net/qq_48573752/article/details/113776915</a></p><p>é€šè¿‡å°ä¾‹å­æ¥ç†è§£é¡ºåºé˜Ÿåˆ—çš„åŸºç¡€æ“ä½œâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262026398.png" alt="image-20210707230319078"></p><p>ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå½“tail==nçš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­è¿˜æœ‰ç©ºé—²çš„ç©ºé—´ï¼Œä½†å´ä¸èƒ½æ‰§è¡Œå…¥é˜Ÿæ“ä½œï¼Œè¿™æ—¶è¦æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æ•°æ®æ¬ç§»ï¼Œä¹Ÿå°±æ˜¯å½“tail==næ—¶è§¦å‘ä¸€æ¬¡æ•´ä½“çš„æ•°æ®æ¬ç§»ï¼Œè¿™æ ·çš„è¯ï¼Œå…¥é˜Ÿçš„æ—¶é—´å¤æ‚åº¦å°±ä¸å†æ˜¯O(1)ï¼Œå› ä¸ºä¼šæ¶‰åŠåˆ°æ•°æ®çš„æ¬ç§»ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ–°çš„å…¥é˜Ÿæ“ä½œï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token keyword">int</span> item<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//æ— æ³•æ‰§è¡Œå…¥é˜Ÿæ“ä½œ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>tail <span class="token operator">==</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ç©ºé—´å·²æ»¡</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>tail<span class="token operator">-</span>head<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           items<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> items<span class="token punctuation">[</span>head<span class="token operator">+</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        tail <span class="token operator">-=</span> head<span class="token punctuation">;</span>        head <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    item<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™æ ·çš„å…¥é˜Ÿæ“ä½œæ— ç–‘æ›´ä¸¥è°¨äº†ä¸€äº›ã€‚ä½†è¿™æ ·è¿˜æ˜¯å¤ªéº»çƒ¦äº†äº›ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ä¸è¿›è¡Œæ•°æ®æ¬ç§»å°±å¯ä»¥å…¥é˜Ÿå‘¢ï¼Œé‚£å°±è¦çœ‹å¾ªç¯é˜Ÿåˆ—äº†ã€‚</p><h3 id="å¾ªç¯é˜Ÿåˆ—"><a href="#å¾ªç¯é˜Ÿåˆ—" class="headerlink" title="å¾ªç¯é˜Ÿåˆ—"></a>å¾ªç¯é˜Ÿåˆ—</h3><p>åœ¨å¾ªç¯é˜Ÿåˆ—ä¸­ï¼Œåº”è¯¥æ³¨æ„çš„æ ¸å¿ƒé—®é¢˜å°±æ˜¯é˜Ÿåˆ—æ»¡çš„åˆ¤åˆ«æ¡ä»¶ï¼Œæˆ‘ä»¬ç”»å¼ å›¾ç†è§£ä¸‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262026081.png" alt="image-20210707230332406"></p><p>å†ç»“åˆä»£ç çœ‹ä¸‹:</p><p>å‚è§åšæ–‡ï¼š<a href="https://blog.csdn.net/qq_48573752/article/details/113776915" target="_blank" rel="noopener">https://blog.csdn.net/qq_48573752/article/details/113776915</a></p><h3 id="å¹¶å‘é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—"><a href="#å¹¶å‘é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—" class="headerlink" title="å¹¶å‘é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—"></a>å¹¶å‘é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—</h3><p>ä¸Šé¢çš„é˜Ÿåˆ—éƒ½æ˜¯æˆ‘ä»¬è€³é—»èƒ½è¯¦çš„çŸ¥è¯†ï¼Œè€Œå®é™…å·¥ç¨‹ä¸­åº”ç”¨æ›´å¤šçš„å®åˆ™æ˜¯å¹¶å‘é˜Ÿåˆ—ä¸é˜»å¡é˜Ÿåˆ—ã€‚</p><blockquote><p>é˜»å¡é˜Ÿåˆ—å…¶å®å°±æ˜¯åœ¨é˜Ÿåˆ—åŸºç¡€ä¸Šå¢åŠ äº†é˜»å¡æ“ä½œã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯<strong>åœ¨é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œä»é˜Ÿå¤´å–æ•°æ®ä¼šè¢«é˜»å¡</strong>ã€‚å› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰æ•°æ®å¯å–ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰äº†æ•°æ®æ‰èƒ½è¿”å›ï¼›<strong>å¦‚æœé˜Ÿåˆ—å·²ç»æ»¡äº†ï¼Œé‚£ä¹ˆæ’å…¥æ•°æ®çš„æ“ä½œå°±ä¼šè¢«é˜»å¡</strong>ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰ç©ºé—²ä½ç½®åå†æ’å…¥æ•°æ®ï¼Œç„¶åå†è¿”å›ã€‚</p><p><strong>çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—æˆ‘ä»¬å«ä½œå¹¶å‘é˜Ÿåˆ—</strong>ã€‚æœ€ç®€å•ç›´æ¥çš„å®ç°æ–¹å¼æ˜¯ç›´æ¥åœ¨ enqueue()ã€dequeue() æ–¹æ³•ä¸Š<strong>åŠ é”</strong>ï¼Œä½†æ˜¯<strong>é”ç²’åº¦å¤§å¹¶å‘åº¦ä¼šæ¯”è¾ƒä½</strong>ï¼ŒåŒä¸€æ—¶åˆ»ä»…å…è®¸ä¸€ä¸ªå­˜æˆ–è€…å–æ“ä½œã€‚å®é™…ä¸Šï¼Œ<strong>åŸºäºæ•°ç»„çš„å¾ªç¯é˜Ÿåˆ—ï¼Œåˆ©ç”¨ CAS åŸå­æ“ä½œ</strong>ï¼Œå¯ä»¥å®ç°éå¸¸é«˜æ•ˆçš„å¹¶å‘é˜Ÿåˆ—ã€‚è¿™ä¹Ÿæ˜¯å¾ªç¯é˜Ÿåˆ—æ¯”é“¾å¼é˜Ÿåˆ—åº”ç”¨æ›´åŠ å¹¿æ³›çš„åŸå› ã€‚</p></blockquote><h2 id="4-4-ä¸€ç‚¹æ€è€ƒ"><a href="#4-4-ä¸€ç‚¹æ€è€ƒ" class="headerlink" title="4.4  ä¸€ç‚¹æ€è€ƒ"></a>4.4  ä¸€ç‚¹æ€è€ƒ</h2><p><code>Q</code>ï¼šå¦‚ä½•å®ç°æ— é”çš„å¹¶å‘é˜Ÿåˆ—ï¼Ÿ</p><p><code>A</code>ï¼šå¯ä»¥ä½¿ç”¨<strong>æ•°ç»„+CASæœºåˆ¶</strong>ã€‚åœ¨å…¥é˜Ÿä¹‹å‰ï¼Œè·å–tailä½ç½®ï¼Œå…¥é˜Ÿæ—¶æ¯”è¾ƒtailæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœå¦ï¼Œå…è®¸å…¥é˜Ÿã€‚åä¹‹ï¼Œå…¥é˜Ÿå¤±è´¥ã€‚ç›¸åº”çš„ï¼Œå‡ºé˜Ÿåˆ™æ˜¯å‚ç…§headçš„ä½ç½®ã€‚</p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æå®¢æ—¶é—´ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“¾è¡¨ç®—æ³•é›†é”¦(å›¾æ–‡è¯¦è§£å“¦)</title>
      <link href="/2021/07/12/lian-biao-suan-fa-ji-jin-tu-wen-xiang-jie-e/"/>
      <url>/2021/07/12/lian-biao-suan-fa-ji-jin-tu-wen-xiang-jie-e/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å•é“¾è¡¨çš„åè½¬-é€’å½’-amp-è¿­ä»£"><a href="#ä¸€ã€å•é“¾è¡¨çš„åè½¬-é€’å½’-amp-è¿­ä»£" class="headerlink" title="ä¸€ã€å•é“¾è¡¨çš„åè½¬_é€’å½’&amp;è¿­ä»£"></a>ä¸€ã€å•é“¾è¡¨çš„åè½¬_é€’å½’&amp;è¿­ä»£</h1><h2 id="1-1-é—®é¢˜æè¿°"><a href="#1-1-é—®é¢˜æè¿°" class="headerlink" title="1.1 é—®é¢˜æè¿°"></a>1.1 é—®é¢˜æè¿°</h2><blockquote><p>åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚</p><p>ç¤ºä¾‹:</p><p>è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL<br>è¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL<br>è¿›é˜¶:<br>ä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ</p></blockquote><h2 id="1-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#1-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="1.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>1.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h2><p>åè½¬å•é“¾è¡¨ï¼Œç›´è§‚çš„ç†è§£ï¼Œå°±æ˜¯<strong>å°†æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å®ƒçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹</strong>ã€‚æ˜¾ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ªç¯æ“ä½œã€‚è€Œå¾ªç¯æ“ä½œä¸­é™¤äº†åŸç”Ÿçš„å¾ªç¯ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬<strong>è¿­ä»£</strong>å’Œ<strong>é€’å½’</strong>ä¸¤ç§ç‰¹æ®Šåœºæ™¯ä¸‹çš„å¾ªç¯ã€‚</p><p>å¾ˆå¤šäººæä¸æ¸…æ¥šè¿­ä»£ä¸é€’å½’æœ‰æ€æ ·çš„çˆ±æ¨æƒ…ä»‡ï¼Œå…¶å®ç­”ä¸»åŒæ ·æ˜¯å¦‚æ­¤ã€‚æˆ‘ä»¬æ¥è¿ˆè¿‡è¿™ä¸ªç â€”â€”</p><blockquote><p>è¿­ä»£ä¸é€’å½’éƒ½æ˜¯å¾ªç¯çš„ä¸€ç§ã€‚ä»ä»£ç ç»“æ„ä¸Šçœ‹ï¼Œ<strong>é€’å½’é‡å¤è°ƒç”¨å‡½æ•°è‡ªèº«ã€‚è€Œè¿­ä»£åªæ˜¯å¾ªç¯ä»£ç çš„ä¸€éƒ¨åˆ†</strong>ã€‚</p><p>å¦å¤–ï¼Œè¿­ä»£ä¸­å˜é‡çš„ç»“æœä¼šä¿å­˜ä½œä¸ºä¸‹ä¸€æ¬¡å¾ªç¯çš„åˆå§‹å€¼ã€‚è€ƒè™‘é€’å½’æ—¶ä¸è¦ä¸ºéš¾è‡ªå·±çš„å¤§è„‘ï¼Œæƒ³æ¸…æ¥šä¸€å±‚å°±okäº†ï¼Œ</p><p>é€’å½’æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé—®é¢˜çš„æ¼”åŒ–ã€‚</p></blockquote><p>å¥½äº†ï¼Œå›å½’æ­£é¢˜ã€‚æˆ‘ä»¬é¦–å…ˆé€‰æ‹©å¥½ç†è§£çš„è¿­ä»£å®ç°æ–¹å¼ã€‚æ—¢ç„¶éœ€è¦å˜åç»§èŠ‚ç‚¹ä¸ºå‰é©±èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸å¦¨ç”³è¯·ä¸¤ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆcurræŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œ<strong>æŒ‡é’ˆprevæŒ‡å‘å‰é©±èŠ‚ç‚¹ã€‚è®©curræŒ‡å‘headèŠ‚ç‚¹</strong>ï¼Œè€Œprevè‡ªç„¶å£°æ˜ä¸ºnullã€‚åœ¨è¿­ä»£éƒ¨åˆ†åˆ†ä¸ºä¸¤æ­¥ï¼Œ<strong>ç¬¬ä¸€æ­¥å³å°†å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘ä¸Šä¸€ä¸ªèŠ‚ç‚¹</strong>ï¼Œ<strong>ç¬¬äºŒæ­¥éœ€è¦ä¸ºä¸‹ä¸€æ¬¡çš„è¿­ä»£å˜é‡ç¡®å®šåˆå§‹å€¼</strong>ï¼Œå…·ä½“æ“ä½œæ˜¯curr,prevæŒ‡é’ˆå‡åç§»å³å¯ã€‚è¿­ä»£éƒ¨åˆ†ç¡®å®šäº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹<strong>è¾¹ç•Œæ¡ä»¶</strong>ï¼šè¿™é‡Œå¾ªç¯ç»“æŸçš„æ¡ä»¶æ¯”è¾ƒéš¾ç¡®è®¤ï¼Œéœ€è¦æ‰‹ç»˜è¯•ä¸€ä¸‹ã€‚æœ€ç»ˆèƒ½åŒæ—¶æ»¡è¶³é“¾è¡¨é•¿åº¦ä¸ºç©ºï¼Œåªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ä»£ç ä»å¯ä»¥æ­£å¸¸è¿è¡Œçš„è¾¹ç•Œæ¡ä»¶æ˜¯<strong>curr!=null</strong>.</p><p>å†æ¥çœ‹é€’å½’å®ç°ï¼Œé€’å½’çš„é—®é¢˜è§„æ¨¡å¯èƒ½å¾ˆå¤šï¼Œä½†æ¯ä¸€å±‚å®é™…åšçš„ä¸è¿‡æ˜¯è°ƒç”¨å‡½æ•°è‡ªèº«ã€‚é€’å½’çš„é—®é¢˜æˆ‘ä»¬åªéœ€è¦æŠ“ä½ä¸¤ä¸ªæ ¸å¿ƒç‚¹ï¼š<strong>é€’å½’å…¬å¼+é€’å½’ç»ˆæ­¢æ¡ä»¶</strong>ã€‚è¿™é‡Œçš„é€’å½’ç»ˆæ­¢æ¡ä»¶å¾ˆæœ´ç´ ï¼Œä¹Ÿå°±æ˜¯head!=null &amp;&amp; head.next!=null.æ‰€ä»¥æˆ‘ä»¬éœ€è¦è€ƒè™‘çš„åªæœ‰é€’å½’å…¬å¼ã€‚å‡è®¾Fè¡¨ç¤ºçš„æ˜¯åè½¬å…³ç³»ï¼Œåˆ™F(n)è¡¨ç¤ºç¬¬nå±‚çš„é“¾è¡¨åè½¬ï¼Œé‚£F(n)å¯ä»¥è¡¨ç¤ºä¸ºç¬¬nå±‚çš„å¤´ç»“ç‚¹ä¸ç¬¬n-1å±‚åè½¬åçš„ç»“æœæ•´ä½“åšåè½¬ã€‚æœ‰ç‚¹æ‹—å£ï¼Œæˆ‘ä»¬ç”¨æ•°å­¦å…¬å¼æè¿°ä¸€ä¸‹â€”â€”<br>$$<br>F(n)=F(head,F(n-1))<br>$$<br>é‚£ä¹ˆè¿™ä¸ªæ•°å­¦å…¬å¼ç”¨ä»£ç æ€ä¹ˆè½¬åŒ–å‘¢ï¼Ÿå…¶å®å°±å¾ˆç®€æ´äº†.</p><pre class=" language-java"><code class="language-java">ListNode newHead <span class="token operator">=</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>head<span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span></code></pre><h2 id="1-3-è¶£å‘³å›¾è§£"><a href="#1-3-è¶£å‘³å›¾è§£" class="headerlink" title="1.3 è¶£å‘³å›¾è§£"></a>1.3 è¶£å‘³å›¾è§£</h2><blockquote><p>åŒæŒ‡é’ˆå®ç°ï¼Œå›¾æ¥è‡ª<a href="https://leetcode-cn.com/problems/reverse-linked-list/solution/fan-zhuan-lian-biao-shuang-zhi-zhen-di-gui-yao-mo-/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/reverse-linked-list/solution/fan-zhuan-lian-biao-shuang-zhi-zhen-di-gui-yao-mo-/</a></p></blockquote><p><img src="https://pic.leetcode-cn.com/9ce26a709147ad9ce6152d604efc1cc19a33dc5d467ed2aae5bc68463fdd2888.gif" alt="img"></p><blockquote><p>é€’å½’å®ç°ï¼Œå›¾æ¥è‡ª<a href="https://leetcode-cn.com/problems/reverse-linked-list/solution/fan-zhuan-lian-biao-shuang-zhi-zhen-di-gui-yao-mo-/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/reverse-linked-list/solution/fan-zhuan-lian-biao-shuang-zhi-zhen-di-gui-yao-mo-/</a></p></blockquote><p><img src="https://pic.leetcode-cn.com/8951bc3b8b7eb4da2a46063c1bb96932e7a69910c0a93d973bd8aa5517e59fc8.gif" alt="img"></p><h2 id="1-4-ä»£ç æ¼”ç¤º"><a href="#1-4-ä»£ç æ¼”ç¤º" class="headerlink" title="1.4 ä»£ç æ¼”ç¤º"></a>1.4 ä»£ç æ¼”ç¤º</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**  Definition for singly-linked list.  public class ListNode {    int val;    ListNode next;    ListNode() {}    ListNode(int val) { this.val = val; }    ListNode(int val, ListNode next) { this.val = val; this.next = next; }  } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//è¿­ä»£è§£æ³•</span>  <span class="token keyword">public</span> ListNode <span class="token function">reverseList</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å£°æ˜ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘å½“å‰å…ƒç´ å’Œä¸Šä¸€ä¸ªå…ƒç´ </span>   ListNode curr <span class="token operator">=</span> head<span class="token punctuation">;</span>    ListNode pre <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>curr <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å¾—åˆ°ä¸‹ä¸€æ¬¡æ“ä½œçš„èŠ‚ç‚¹</span>      ListNode node <span class="token operator">=</span> curr<span class="token punctuation">.</span>next<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//åè½¬ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span>      curr<span class="token punctuation">.</span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//ä¸‹ä¸€æ¬¡åè½¬çš„åˆå§‹çŠ¶æ€</span>      pre <span class="token operator">=</span> curr<span class="token punctuation">;</span>      curr <span class="token operator">=</span> node<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> pre<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//é€’å½’è§£æ³•</span>  <span class="token keyword">public</span> ListNode <span class="token function">reverseList</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> head<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ListNode newHead <span class="token operator">=</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>    head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>    head<span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">return</span> newHead<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><hr><h1 id="äºŒã€å›æ–‡é“¾è¡¨çš„å¸¸è§„ä¸é€’å½’è§£æ³•"><a href="#äºŒã€å›æ–‡é“¾è¡¨çš„å¸¸è§„ä¸é€’å½’è§£æ³•" class="headerlink" title="äºŒã€å›æ–‡é“¾è¡¨çš„å¸¸è§„ä¸é€’å½’è§£æ³•"></a>äºŒã€å›æ–‡é“¾è¡¨çš„å¸¸è§„ä¸é€’å½’è§£æ³•</h1><h2 id="2-1-é—®é¢˜æè¿°"><a href="#2-1-é—®é¢˜æè¿°" class="headerlink" title="2.1 é—®é¢˜æè¿°"></a>2.1 é—®é¢˜æè¿°</h2><blockquote><p>è¯·åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: 1-&gt;2<br>è¾“å‡º: false<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: 1-&gt;2-&gt;2-&gt;1<br>è¾“å‡º: true<br>è¿›é˜¶ï¼š<br>ä½ èƒ½å¦ç”¨ O(n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦è§£å†³æ­¤é¢˜ï¼Ÿ</p></blockquote><hr><h2 id="2-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#2-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="2.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>2.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h2><p>è€è§„çŸ©å…ˆå®¡é¢˜ï¼Œå°†é“¾è¡¨æ˜¯å¦æ˜¯å›æ–‡çš„é—®é¢˜è½¬åŒ–ä¸€ä¸‹ï¼Œå³<strong>ä»¥ä¸­é—´èŠ‚ç‚¹ä½œä¸ºåˆ†ç•Œç‚¹ï¼Œå‰åŠéƒ¨åˆ†ä¸ååŠéƒ¨åˆ†çš„åè½¬å¯¹åº”èŠ‚ç‚¹ä½ç½®ä¸Šçš„æ•°å€¼ç›¸åŒ</strong>ï¼Œæ˜¾ç„¶æ­¥éª¤å·²ç»å‘¼ä¹‹æ¬²å‡ºäº†ã€‚ä½†åœ¨ä¸Šæ‰‹ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå…¥ä¸ºä¸»åœ°åˆ¤æ–­ä¸‹ä»£ç çš„<strong>æ‰§è¡Œæ•ˆç‡ä¸å†…å­˜æ¶ˆè€—ã€‚</strong></p><p>æˆ‘ä»¬çŸ¥é“åˆ¤æ–­æ—¶é—´å¤æ‚åº¦åªéœ€è¦æ‰¾åˆ°<strong>é‡çº§æœ€å¤§çš„ä»£ç </strong>å°±è¡Œäº†ã€‚æ‰¾ä¸­é—´èŠ‚ç‚¹ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆçš„æ–¹å¼ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n).åè½¬ä»£ç åˆšå†™è¿‡ï¼ŒO(n)æ²¡æ„å¤–ï¼Œæ¯”è¾ƒå¯¹åº”ä½ç½®ä¸Šå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œä¸ä¸¥è°¨çš„è¯´è¿˜æ˜¯O(n).é‚£ç©ºé—´å¤æ‚åº¦å‘¢ï¼Ÿ</p><p>å‡å¦‚ä½¿ç”¨é€’å½’æ–¹å¼çš„åè½¬é“¾è¡¨ï¼Œå› ä¸ºè¦ä¿å­˜å±€éƒ¨å˜é‡å°±è¿˜ä¼šç”¨åˆ°æ ˆï¼Œä¸æ¨èï¼Œç›¸å¯¹è€Œè¨€ï¼Œ<strong>ä½¿ç”¨è¿­ä»£çš„æ–¹å¼</strong>åœ¨è¿è¡Œæ—¶ä¸éœ€è¦é¢å¤–çš„ç©ºé—´ï¼Œæ‰€ä»¥<strong>ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</strong>ï¼Œå°±å®ƒäº†ï¼</p><p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯<strong>æ€è·¯å‰–æ</strong>ç¯èŠ‚â€”â€”</p><ol><li>é¦–å…ˆæ‰¾ä¸­é—´èŠ‚ç‚¹ï¼Œæ— ç–‘ä½¿ç”¨<strong>å¿«æ…¢æŒ‡é’ˆ</strong>çš„æ–¹å¼ã€‚ä½†è¿™é‡Œæœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼Œå‡å¦‚åœ¨å¶æ•°åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å°†ä¸­é—´ä¹‹å‰çš„èŠ‚ç‚¹ä½œä¸ºä¸­é—´èŠ‚ç‚¹ï¼Œåœ¨åé¢åˆ¤æ–­æ—¶å°±ä¼šå‡ºç°<strong>head.next.next</strong>ã€‚è™½ç„¶é€»è¾‘æ»¡åˆ†ï¼Œä½†å®é™…è¿è¡Œæ—¶éå¸¸å®¹æ˜“å‡ºç°ç©ºæŒ‡é’ˆé”™è¯¯ã€‚æ‰€ä»¥å°†ä¸­é—´ååçš„èŠ‚ç‚¹ä½œä¸ºä¸­é—´èŠ‚ç‚¹æ˜¯é¦–é€‰ã€‚</li><li>åè½¬æ²¡å¾—è¯´ï¼Œå»ºè®®ä½¿ç”¨<strong>è¿­ä»£æ–¹å¼</strong>é™ä½å†…å­˜æ¶ˆè€—ã€‚</li><li>æœ€ç»ˆåˆ¤æ–­ç¯èŠ‚ï¼Œæ˜¾ç„¶ååŠéƒ¨åˆ†æ˜¯æ›´çŸ­çš„ï¼Œé‚£å¾ªç¯ç»“æŸæ¡ä»¶è‡ªç„¶æ˜¯æ»¡è¶³é™åˆ¶å¤§çš„ï¼Œå³<strong>æ»¡è¶³ååŠéƒ¨åˆ†è¾¹ç•Œæ¡ä»¶</strong>å³å¯ã€‚</li></ol><h3 id="é€’å½’è§£æ³•ï¼Ÿ"><a href="#é€’å½’è§£æ³•ï¼Ÿ" class="headerlink" title="é€’å½’è§£æ³•ï¼Ÿ"></a>é€’å½’è§£æ³•ï¼Ÿ</h3><p>é€›äº†ä¸‹leetcodeè¯„è®ºåŒºï¼Œæœ‹å‹ä»¬æ¸…ä¸€è‰²çš„ç•™ä¸‹&lt;é€’å½’ï¼Œæ°¸è¿œçš„çš„ç¥&gt;è¿™æ ·çš„è¯„è®ºã€‚</p><p>æˆ‘ä¸ç”±å¾—è€è„¸ä¸€çº¢ï¼Œä¸ç”¨é€’å½’å®ç°ä¸‹å²‚ä¸æ˜¯æ²¡æœ‰ç‰Œé¢ï¼Œé‚£ä½¿ç”¨é€’å½’æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><p>åœ¨åˆšçœ‹åˆ°è¿™é“é¢˜çš„æ—¶å€™ï¼Œç›¸ä¿¡å¾ˆå¤šæœ‹å‹ç¢ç¢å¿µï¼Œè¦æ˜¯ç”¨æ•°ç»„å®ç°å°±èˆ’æœäº†ï¼Œå› ä¸ºæ•°ç»„èƒ½å¤Ÿå®ç°ååºéå†ï¼Œä½†é“¾è¡¨ä¸è¡Œï¼Œè‡³å°‘ä¸¥è°¨çš„è¯´æ˜¯è¿™æ ·çš„ã€‚</p><p>è¯šç„¶ï¼Œå•é“¾è¡¨æ²¡æœ‰å‰é©±æŒ‡é’ˆã€‚ä½†å¹¶ä¸æ˜¯è¯´æ²¡æœ‰å‰é©±æŒ‡é’ˆé“¾è¡¨çš„åå‘éå†å°±ä¸èƒ½å®ç°ï¼ï¼ï¼</p><p>å‰é¢è°ˆåŠè§£å†³é€’å½’é—®é¢˜æœ‰ä¸¤ä¸ªæ ¸å¿ƒï¼š<strong>é€’å½’ç»ˆæ­¢æ¡ä»¶å’Œé€’å½’å…¬å¼</strong>ã€‚è¿™é‡Œï¼Œç»ˆæ­¢æ¡ä»¶æ— ç–‘æ˜¯<strong>head==null</strong>,ã€‚å†å‡è®¾Fè¡¨ç¤ºé€†åºéå†çš„å…³ç³»ï¼Œåˆ™ç¬¬nå±‚çš„é€†åºéå†å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>F(n)=F(head,F(n-1))<br>$$<br>åˆ°è¿™é‡Œï¼Œéå¸¸æœ‰å¿…è¦åœ¨çº¸ä¸Šç”»ç±»ä¼¼è¿™æ ·çš„ä¸€å¼ å›¾â€”â€”</p><p><img src="https://img-blog.csdnimg.cn/20200323134306815.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1dGhlcks=,size_16,color_FFFFFF,t_70" alt="img"></p><blockquote><p>å›¾æ¥è‡ª <a href="https://blog.csdn.net/LutherK/article/details/105046744" target="_blank" rel="noopener">https://blog.csdn.net/LutherK/article/details/105046744</a></p></blockquote><p>æ‰€ä»¥å¯¹é“¾è¡¨çš„é€†åºéå†æ˜¯è¿™æ ·å­çš„â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reverseTraversalListNode</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> null<span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token function">reverseTraversalListNode</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>é‚£æˆ‘ä»¬åªéœ€è¦åœ¨å®ç°é€†åºéå†çš„åŒæ—¶åˆ¤æ–­é¡ºåºéå†å’Œé€†åºéå†å¯¹åº”çš„å€¼æ˜¯å¦ç›¸ç­‰å³å¯ï¼Œä»£ç éå¸¸ç®€æ´ï¼Œä½†æˆ‘å†™ä¸å‡ºæ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262125172.png" alt="image-20210707231628900"></p><h3 id="ç¦åˆ©ç¯èŠ‚"><a href="#ç¦åˆ©ç¯èŠ‚" class="headerlink" title="ç¦åˆ©ç¯èŠ‚"></a>ç¦åˆ©ç¯èŠ‚</h3><p><img src="https://pic2.zhimg.com/80/v2-6b854efd30ba33dbd1d758605fbf7c44_1440w.jpg?source=1940ef5c" alt="img"></p><pre class=" language-java"><code class="language-java"></code></pre><h2 id="3-è¶£å‘³å›¾è§£"><a href="#3-è¶£å‘³å›¾è§£" class="headerlink" title=".3 è¶£å‘³å›¾è§£"></a>.3 è¶£å‘³å›¾è§£</h2><blockquote><p>å›¾ç‰‡æ¥è‡ª ï¼š<a href="https://leetcode-cn.com/problems/palindrome-linked-list/solution/hui-wen-lian-biao-by-leetcode-solution/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/palindrome-linked-list/solution/hui-wen-lian-biao-by-leetcode-solution/</a></p></blockquote><p><img src="https://assets.leetcode-cn.com/solution-static/234/31.PNG" alt="img"></p><h2 id="2-4-ä»£ç æ¼”ç¤º"><a href="#2-4-ä»£ç æ¼”ç¤º" class="headerlink" title="2.4 ä»£ç æ¼”ç¤º"></a>2.4 ä»£ç æ¼”ç¤º</h2><h3 id="å¸¸è§„è§£æ³•"><a href="#å¸¸è§„è§£æ³•" class="headerlink" title="å¸¸è§„è§£æ³•"></a>å¸¸è§„è§£æ³•</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * Definition for singly-linked list. * public class ListNode { *     int val; *     ListNode next; *     ListNode() {} *     ListNode(int val) { this.val = val; } *     ListNode(int val, ListNode next) { this.val = val; this.next = next; } * } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¶æ•°å’ŒæŠ€æœ¯ç¡®å®šé‡ç‚¹çš„æ–¹å¼ä¸åŒï¼Œä½†éƒ½ä½¿ç”¨åŒæŒ‡é’ˆæœºåˆ¶</span>        ListNode slow <span class="token operator">=</span> head<span class="token punctuation">,</span>fast <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> fast<span class="token punctuation">.</span>next<span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fast <span class="token operator">!=</span> null<span class="token punctuation">)</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ä»¥ä¸­ç‚¹ä¸ºç•Œå°†é“¾è¡¨åˆ†æˆä¸¤éƒ¨åˆ†</span>        fast <span class="token operator">=</span> slow<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åè½¬ååŠéƒ¨åˆ†</span>        fast <span class="token operator">=</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>fast<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//éå†æ¯”è¾ƒ</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val <span class="token operator">!=</span> fast<span class="token punctuation">.</span>val<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token keyword">else</span><span class="token punctuation">{</span>                head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>                fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>  <span class="token keyword">public</span> ListNode <span class="token function">reverseList</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å£°æ˜ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘å½“å‰å…ƒç´ å’Œä¸Šä¸€ä¸ªå…ƒç´ </span>   ListNode curr <span class="token operator">=</span> head<span class="token punctuation">;</span>    ListNode pre <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>curr <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å¾—åˆ°ä¸‹ä¸€æ¬¡æ“ä½œçš„èŠ‚ç‚¹</span>      ListNode node <span class="token operator">=</span> curr<span class="token punctuation">.</span>next<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//åè½¬ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span>      curr<span class="token punctuation">.</span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//ä¸‹ä¸€æ¬¡åè½¬çš„åˆå§‹çŠ¶æ€</span>      pre <span class="token operator">=</span> curr<span class="token punctuation">;</span>      curr <span class="token operator">=</span> node<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> pre<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="è¿­ä»£è§£æ³•"><a href="#è¿­ä»£è§£æ³•" class="headerlink" title="è¿­ä»£è§£æ³•"></a>è¿­ä»£è§£æ³•</h3><pre class=" language-java"><code class="language-java">ListNode temp<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>    temp <span class="token operator">=</span> head<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">check</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">check</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> null<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> res <span class="token operator">=</span> <span class="token function">check</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>val <span class="token operator">==</span> head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//é¡ºåºéå†çš„æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>    temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><hr><h1 id="ä¸‰-ã€é“¾è¡¨æ˜¯å¦æœ‰ç¯"><a href="#ä¸‰-ã€é“¾è¡¨æ˜¯å¦æœ‰ç¯" class="headerlink" title="ä¸‰ ã€é“¾è¡¨æ˜¯å¦æœ‰ç¯"></a>ä¸‰ ã€é“¾è¡¨æ˜¯å¦æœ‰ç¯</h1><h2 id="3-1-é—®é¢˜æè¿°"><a href="#3-1-é—®é¢˜æè¿°" class="headerlink" title="3.1 é—®é¢˜æè¿°"></a>3.1 é—®é¢˜æè¿°</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>è¿›é˜¶ï¼š</p><p>ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ</p><p>ç¤ºä¾‹ 1ï¼š</p><p><img src="https://gitee.com//future727/imgs/raw/master/zyz_img4/image-20210206224828269.png" alt="image-20210206224828269"></p><p>è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1<br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</p></blockquote><h2 id="3-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#3-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="3.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>3.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h2><p>åœ¨æˆ‘çœ‹æ¥ï¼Œè§£å†³ç®—æ³•é—®é¢˜<strong>æœ€é‡è¦çš„æ˜¯å¯¹é—®é¢˜çš„æŠ½è±¡å’Œè½¬åŒ–</strong>ï¼Œé‚£ä¹ˆé“¾è¡¨æ˜¯å¦æœ‰ç¯è¿™ä¸ªé—®é¢˜è¦ä»ä½•ä¸‹æ‰‹åˆ†æå‘¢ï¼Ÿ</p><p>é“¾è¡¨æœ‰ç¯çš„å…·ä½“è¡¨ç°ä¸ºåœ¨éå†é“¾è¡¨æ—¶ï¼Œå¯¹ç›¸åŒçš„èŠ‚ç‚¹ä¼šéå†ä¸æ­¢ä¸€æ¬¡ã€‚æ‰€ä»¥ç›´è§‚åœ°çœ‹ï¼Œ<strong>æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­åœ¨éå†é“¾è¡¨æ—¶æ˜¯å¦æœ‰èŠ‚ç‚¹è¢«äºŒæ¬¡éå†å³å¯</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>ä¸€ç§å¯ä»¥ä¿è¯å…ƒç´ å”¯ä¸€æ€§çš„æ•°æ®ç»“æ„</strong>æ¥å­˜é¡ºåºæ·»åŠ é“¾è¡¨å…ƒç´ ï¼Œæ˜¾ç„¶ï¼Œé‚£å°±æ˜¯<strong>æ•£åˆ—è¡¨</strong>å’¯ã€‚</p><p>åªæ˜¯å‘¢ï¼Œå¼•å…¥æ•£åˆ—è¡¨ä¼šå¯¼è‡´ç©ºé—´å¤æ‚åº¦ä¸ºO(n),è¿™å¯ä¸èƒ½å…¥å„ä½çœ‹å®˜çš„æ³•çœ¼ã€‚ç»§ç»­å‡ºå‘å’¯â€”â€”</p><h3 id="å¿«æ…¢æŒ‡é’ˆ"><a href="#å¿«æ…¢æŒ‡é’ˆ" class="headerlink" title="å¿«æ…¢æŒ‡é’ˆ"></a>å¿«æ…¢æŒ‡é’ˆ</h3><p>åœ¨åˆä¸­æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°ç›¸é‡é—®é¢˜ï¼Œè¿™ç±»é—®é¢˜è¯´æ˜äº†<strong>åœ¨ä¸€ä¸ªç¯å½¢ç©ºé—´ä¸­ï¼Œé€Ÿåº¦ä¸ä¸€è‡´çš„ä¸¤ä¸ªç‰©ä½“æ€»ä¼šåœ¨æŸä¸€æ—¶åˆ»ç›¸é‡ã€‚</strong></p><p>å¯¹åº”åˆ°ç¯å½¢é“¾è¡¨ï¼ŒåŒæ ·å¦‚æ˜¯ã€‚</p><p>æˆ‘ä»¬åªéœ€å£°æ˜ä¸€ä¸ªå¿«æŒ‡é’ˆï¼Œä¸€ä¸ªæ…¢æŒ‡é’ˆã€‚å¿«æŒ‡é’ˆæ¯æ¬¡æŒ‡å‘å®ƒçš„åç»§èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ã€‚è€Œæ…¢æŒ‡é’ˆåªéœ€å¾ªè§„è¹ˆçŸ©åœ°æŒ‡å‘å®ƒçš„åç»§èŠ‚ç‚¹å³å¯ã€‚åœ¨æ¯æ¬¡éå†çš„æ—¶å€™éƒ½å»åˆ¤æ–­æ˜¯å¦å‡ºç°å¿«æ…¢æŒ‡é’ˆæŒ‡å‘ä¸€è‡´çš„æƒ…å†µå°±okäº†ã€‚</p><p>åœ¨é€›leetcodeè¯„è®ºåŒºçš„æ—¶å€™ï¼Œå‘ç°æœ‰å¤§ä½¬å»æµ‹è¯•<strong>ä¸åŒè·³æŒ‡é’ˆçš„ä¼˜åŠ£</strong>ã€‚å¯¹æ­¤æˆ‘ä¸ªäººè§‰å¾—æ²¡æœ‰å¿…è¦ï¼Œæ˜ å°„åˆ°å®é™…é—®é¢˜ï¼Œè¦æƒ³è®©ä¸¤ä¸ªäººå°½å¿«ç›¸é‡ï¼Œè¿™å–å†³äºä¸¤ä¸ªäººé€Ÿåº¦çš„å…³ç³»å’Œè·‘é“çš„é•¿åº¦ã€‚æŠ›å¼€è·‘é“é•¿åªè°ˆé€Ÿåº¦çš„å…³ç³»æ„ä¹‰ä¸å¤§ã€‚</p><p>ä»æ€è·¯ä¸Šæ¥è¯´ï¼Œç¼–å†™å¿«æ…¢æŒ‡é’ˆçš„ä»£ç å¾ˆèˆ’æœï¼Œé‚£å®ƒçš„æ—¶é—´ç©ºé—´å¤æ‚åº¦æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯å¦‚æ­¤å‘¢ï¼Ÿ</p><p>å¿«æ…¢æŒ‡é’ˆçš„ç›¸é‡å–å†³äºé—®é¢˜çš„è§„æ¨¡Nï¼Œæ‰€ä»¥å®ƒçš„<strong>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</strong>,åœ¨ä»£ç è¿è¡Œæ—¶å¹¶ä¸éœ€è¦ç”³è¯·é¢å¤–ç©ºé—´ï¼Œ<strong>ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</strong>ã€‚nice~ çœ‹èµ·æ¥æ˜¯è¦çš†å¤§åœ†æ»¡çš„èŠ‚å¥ï¼Œ<strong>ä½†æ˜¯ä»æ€ç»´æŒ‘æˆ˜æ¥è¯´ï¼Œæ•…äº‹æ‰åˆšåˆšå¼€å§‹</strong>â€”â€”</p><h3 id="é“¾è¡¨åè½¬ååˆ¤æ–­å¤´ç»“ç‚¹"><a href="#é“¾è¡¨åè½¬ååˆ¤æ–­å¤´ç»“ç‚¹" class="headerlink" title="é“¾è¡¨åè½¬ååˆ¤æ–­å¤´ç»“ç‚¹"></a>é“¾è¡¨åè½¬ååˆ¤æ–­å¤´ç»“ç‚¹</h3><p>å…ˆç»™å‡ºç»“è®ºï¼š<strong>æœ‰ç¯é“¾è¡¨åè½¬åå¤´èŠ‚ç‚¹ä¸åè½¬å‰å¤´ç»“ç‚¹ç›¸åŒ</strong>ã€‚ä¸ºäº†å¾—åˆ°è¿™ä¸ªç»“è®ºï¼ŒåŠ¨æ‰‹æ˜¯å¿…ç„¶çš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262123928.png" alt="image-20210707231558495"></p><p>åœ¨åè½¬çš„åŸºç¡€ä¸ŠåŠ ä¸€ä¸ªåˆ¤æ–­å°±è¡Œäº†ã€‚è€Œå®ƒçš„æ—¶é—´ç©ºé—´å¤æ‚åº¦è‡ªç„¶åŒåè½¬é“¾è¡¨ä¸€è‡´ï¼Œåˆ†åˆ«ä¸ºO(n),O(1).</p><p>åˆ°è¿™é‡Œï¼Œæ‰ç®—æ˜¯çš†å¤§åœ†æ»¡äº†ï¼Œç¢è§‰è§‰ã€‚å¯æ˜¯å‘¢ï¼Œå¤§æ™šä¸Šçš„ï¼Œæœ¬æ¥æŒºå›°ï¼Œç”»å®Œè´¼ç²¾ç¥ã€‚ç®—æ³•æœç„¶æ¯”å’–å•¡ç®¡ç”¨~</p><p><img src="https://image.dbbqb.com/202102062347/23aca80ed56c35ae3c68f96539ccba42/gZ7Xk" alt="img"></p><h2 id="3-3-è¶£å‘³å›¾è§£"><a href="#3-3-è¶£å‘³å›¾è§£" class="headerlink" title="3.3 è¶£å‘³å›¾è§£"></a>3.3 è¶£å‘³å›¾è§£</h2><blockquote><p>å›¾ç‰‡æ¥è‡ªäºï¼š<a href="https://leetcode-cn.com/problems/linked-list-cycle/solution/lian-biao-you-huan-zui-jia-jie-da-by-tinet-shenjg/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/linked-list-cycle/solution/lian-biao-you-huan-zui-jia-jie-da-by-tinet-shenjg/</a></p></blockquote><p><img src="https://pic.leetcode-cn.com/689f74000ab31dfbd492c4ec1a35cf087d0c8797c95472f1f2674743a5b4f444.png" alt="img"></p><blockquote><p>å›¾ç‰‡æ¥è‡ªäºï¼š<a href="https://leetcode-cn.com/problems/linked-list-cycle/solution/dong-hua-yan-shi-141huan-xing-lian-biao-b99vd/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/linked-list-cycle/solution/dong-hua-yan-shi-141huan-xing-lian-biao-b99vd/</a></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262123611.png" alt="image-20210707231530342"></p><h2 id="3-4-ä»£ç æ¼”ç¤º"><a href="#3-4-ä»£ç æ¼”ç¤º" class="headerlink" title="3.4 ä»£ç æ¼”ç¤º"></a>3.4 ä»£ç æ¼”ç¤º</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * Definition for singly-linked list. * class ListNode { *     int val; *     ListNode next; *     ListNode(int x) { *         val = x; *         next = null; *     } * } */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasCycle</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å“ˆå¸Œè¡¨</span>        Set<span class="token operator">&lt;</span>ListNode<span class="token operator">></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasCycle</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œåˆ™ä¸æˆç¯</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> null<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªå¿«æŒ‡é’ˆ</span>        ListNode fast <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¿«æŒ‡é’ˆèµ°ä¸¤ä¸ªæ ¼ï¼Œæ…¢æŒ‡é’ˆèµ°ä¸€æ ¼ï¼Œåˆ¤æ–­èƒ½å¦ç›¸é‡</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> fast<span class="token punctuation">.</span>next <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> fast<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasCycle</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        ListNode curr <span class="token operator">=</span> head<span class="token punctuation">;</span>        ListNode prev <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>curr <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//å¾—åˆ°è¦åè½¬çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>            ListNode tmp <span class="token operator">=</span> curr<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//åè½¬</span>            curr<span class="token punctuation">.</span>next <span class="token operator">=</span> prev<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//å¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€çš„åˆå§‹å€¼</span>            prev <span class="token operator">=</span> curr<span class="token punctuation">;</span>            curr <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//æœ‰ç¯çš„é“¾è¡¨åè½¬åå¤´ç»“ç‚¹ä¸åè½¬å‰å¤´ç»“ç‚¹ç›¸åŒ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>prev <span class="token operator">==</span> head<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><hr><h1 id="å››ã€åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"><a href="#å››ã€åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="å››ã€åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"></a>å››ã€åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h1><hr><h2 id="4-1-é—®é¢˜æè¿°"><a href="#4-1-é—®é¢˜æè¿°" class="headerlink" title="4.1 é—®é¢˜æè¿°"></a>4.1 é—®é¢˜æè¿°</h2><blockquote><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262124577.png" alt="image-20210707231509844"></p></blockquote><h2 id="4-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#4-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="4.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>4.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h2><p>è€è§„çŸ©ï¼Œå…ˆå®¡é¢˜ã€‚å°†ä¸¤ä¸ªæœ‰åºçš„é“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºçš„é“¾è¡¨æœ€ç›´è§‚ç®€æ´çš„æ–¹å¼å°±æ˜¯åˆå¹¶é“¾è¡¨å†æ’åºå’¯ï¼Œè¿™æ ·é—®é¢˜å°±è¢«è½¬åŒ–ä¸ºäº†æ’åºé—®é¢˜ã€‚æ’åºæ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸåœ°æ’åºçš„æ¡¶æ’åºç®—æ³•ï¼Œæ—¶é—´ç©ºé—´å¤æ‚åº¦éƒ½ä¸ºO(n)ï¼Œæ•ˆç‡è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p><p>ä½†æ’åºä¸æ˜¯æˆ‘ä»¬çš„æ ¸å¿ƒå†…å®¹ï¼Œè‡³å°‘ç›®å‰ä¸æ˜¯ã€‚è¦åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºçš„å•é“¾è¡¨ï¼Œå°±å¿…ç„¶ä¼šæ¶‰åŠ<strong>åŸºäºéå†çš„æ¯”è¾ƒ</strong>ã€‚è€Œéå†é“¾è¡¨ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯çš„å®ç°é€šå¸¸æœ‰ä¸¤ç§ï¼Œå³è¿­ä»£å’Œé€’å½’ã€‚è¿™é‡Œä¸¤ç§æ–¹æ³•éƒ½èƒ½å®ç°ç›®æ ‡ã€‚è®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿå’¯â€”â€”</p><h3 id="è¿­ä»£"><a href="#è¿­ä»£" class="headerlink" title="è¿­ä»£"></a>è¿­ä»£</h3><p>è¿­ä»£æ˜¯æˆ‘ä»¬æœ€é•¿ä½¿ç”¨çš„å¾ªç¯æ–¹å¼ï¼Œå†å•°å—¦ä¸‹ï¼Œè¿­ä»£çš„å…¸å‹ç‰¹ç‚¹æ˜¯æ¯æ¬¡è¿­ä»£çš„ç»“æœä¼šä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„åˆå§‹å€¼ã€‚</p><p>è¿­ä»£çš„å†…å®¹å³æ˜¯<strong>æ‰¾å‡ºä¸¤ä¸ªé“¾è¡¨æ‰€æ¯”è¾ƒå…ƒç´ çš„è¾ƒå°å€¼</strong>ï¼Œç„¶åéœ€è¦æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªè¾ƒå°å€¼ä½œä¸ºåˆå¹¶åé“¾è¡¨çš„å…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæŒ‡é’ˆå§‹ç»ˆæŒ‡å‘ä¸‹ä¸€ä¸ªæ¯”è¾ƒå¾—åˆ°çš„è¾ƒå°å€¼ã€‚æ˜ å°„åˆ°ç¬¬ä¸€æ¬¡çš„æ¯”è¾ƒï¼Œå°±ä¼šå¾ˆæ˜äº†çš„æƒ³åˆ°ï¼Œéœ€è¦ä¸€ä¸ª<strong>å“¨å…µèŠ‚ç‚¹</strong>ã€‚</p><p>é‚£å“¨å…µèŠ‚ç‚¹éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶å‘¢ï¼Ÿ<strong>ä¸å­˜å‚¨å…ƒç´ ä¸”æŒ‡å‘ä¸ºç©º</strong>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ª<strong>å°æŠ€å·§</strong>ï¼Œä¸ºäº†ä¸å‘ç”Ÿç©ºæŒ‡é’ˆé”™è¯¯ï¼Œæˆ‘ä»¬å¿…é¡»è®©å¼•ç”¨æŒ‡å‘ä¸€å—å†…å­˜ç©ºé—´ã€‚è€Œä½¿ç”¨å¸¦å‚æ•°çš„æ„é€ æ–¹å¼æ—¶å¯ä»¥<strong>å°†æ•°æ®åŸŸå£°æ˜ä¸º-1</strong>,ä¹Ÿå°±æ˜¯ä¸åˆæ³•çš„æ•°æ®ï¼Œè¿™æ ·å°±ä¸ä¼šå¹²æ‰°æ•°æ®çš„æ­£å¸¸æ’åºäº†ï¼Œå½“ç„¶ï¼Œå³ä¾¿æˆ‘ä»¬ä¸æ˜¾ç¤ºåœ°å£°æ˜ï¼Œè™šæ‹Ÿæœºä¹Ÿä¼šå°†å…¶<strong>é»˜è®¤å£°æ˜ä¸º0</strong>.</p><p>è¿™é‡Œè¿˜æœ‰å¦ä¸€ä¸ªå®¹æ˜“å‡ºé”™çš„å†…å®¹ï¼Œè‡³å°‘åœ¨æˆ‘åšçš„æ—¶å€™æ’æŸ¥äº†å¾ˆä¹…æ‰å‘ç°ï¼Œé‚£å°±æ˜¯è¿­ä»£éƒ¨åˆ†çš„å¾ªç¯ç»“æŸæ¡ä»¶ã€‚æˆ‘ä»¬åœ¨ä¸æ‰‹ç»˜çš„æƒ…å†µä¸‹ï¼Œå®¹æ˜“å…ˆå…¥ä¸ºä¸»åœ°è®¤ä¸ºæ˜¯<strong>l1!=null || l2!=null</strong>,è¿™æ ·æƒ³çš„åŸå› æ˜¯æˆ‘ä»¬è®¤ä¸ºå½“å‡ºç°ä¸€ä¸ªé“¾è¡¨ä¸ºç©ºåï¼Œ<strong>å“¨å…µèŠ‚ç‚¹</strong>ä¼šè‡ªç„¶å¾—æŒ‡å‘å¦ä¸€ä¸ªéç©ºçš„é“¾è¡¨ï¼Œä½†å´å¿½ç•¥äº†è¿›å…¥å¾ªç¯åä»éœ€è¦æ¯”è¾ƒï¼Œè€Œåœ¨l1ä¸ºç©ºçš„æƒ…å†µç›¸çˆ±ï¼Œl1.valä¼šå‘ç”Ÿä»€ä¹ˆå°±æ˜¾è€Œæ˜“è§äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¾ªç¯ç»“æŸåï¼Œè¿˜éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å°†å“¨å…µèŠ‚ç‚¹æŒ‡å‘éç©ºçš„é“¾è¡¨ï¼Œè¿™å°±å¾ˆå®¹æ˜“äº†ï¼š<strong>prev.next = l1==null?l2:l1;</strong></p><p>æ€è·¯å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ—¶ç©ºå¤æ‚åº¦ã€‚æ—¶é—´å¤æ‚åº¦å–å†³äºè¿­ä»£çš„æ¬¡æ•°ï¼Œæ˜¾ç„¶ï¼Œè¿­ä»£çš„è§„æ¨¡ä¹Ÿå°±æ˜¯éœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°ï¼Œå³<strong>O(n+m)</strong>,è€Œç©ºé—´çš„è¯ï¼Œåªéœ€è¦<strong>å¸¸æ•°çš„ç©ºé—´</strong>å­˜æ”¾å…ƒç´ å°±okäº†ï¼Œä¹Ÿå°±æ˜¯<strong>O(1)</strong>.</p><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>é¢˜è§£åŒºå¯¹äºé€’å½’è§£æ³•çš„è°ƒä¾ƒæ— è¿‡äºä¸€çœ‹å…¨ä¼šï¼Œä¸€å†™å…¨åºŸã€‚è¿™è¯´çš„ä¸å°±æ˜¯æˆ‘å˜›ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262124922.png" alt="image-20210707231456371"></p><p>ä¸å¯å¦è®¤ï¼Œè¿™è¯„ä»·çš„ç¡®å¾ˆä¸­è‚¯~</p><p>é€’å½’çš„å­¦ä¹ æ˜¯<strong>åŸºäºç†è§£å’Œç†Ÿç»ƒåº¦</strong>çš„ï¼Œå¤§å¤šæ•°çš„é¢˜ç›®ï¼Œéƒ½æ˜¯æœ‰è¿¹å¯å¾ªï¼Œä½¿ç”¨é€‚å½“çš„æ–¹æ³•è®ºå°±å¯ä»¥è§£å†³çš„ï¼Œæ²¡æœ‰æ™ºå•†å·®ä¸€è¯´ã€‚å¤§å¯ä¸å¿…å¦„è‡ªè²è–„ã€‚</p><p>è€è§„çŸ©ï¼Œæ‰¾<strong>é€’å½’å…¬å¼</strong>å’Œ<strong>é€’å½’ç»ˆæ­¢æ¡ä»¶</strong>ã€‚é€’å½’ç»ˆæ­¢æ¡ä»¶å¾ˆå‹å¥½ï¼Œå³<strong>l1==null || l2==null.</strong>è€Œé€’å½’å…¬å¼å°±éœ€è¦åˆ†æäº†ã€‚åˆå¹¶çš„é—®é¢˜èƒ½å¦åˆ†ä¸ºå­é—®é¢˜ ï¼Œå­é—®é¢˜çš„è§£å†³æ–¹æ³•ç›¸åŒï¼Œè€Œä¸”åˆéœ€è¦æœ‰é€’å’Œå½’çš„æ¼”åŒ–ï¼Œå°±æ˜¯å®ƒå’¯â€”â€”<br>$$<br>list1[0]+merge(list1[1:],list2)   list1[0]&lt;list2[0]\\</p><p>list2[0]+merge(list1,list2[1:])otherwise<br>$$<br>æå®šäº†æ ¸å¿ƒçš„ä¸¤æ­¥ï¼Œå‰©ä¸‹çš„å°±åªæœ‰å°†<strong>l1/l2.nextæŒ‡å‘æ¯”è¾ƒç»“æœ</strong>è¿™æ ·çš„è¾¹è§’æ–™äº†ã€‚</p><h2 id="4-3-è¶£å‘³å›¾è§£"><a href="#4-3-è¶£å‘³å›¾è§£" class="headerlink" title="4.3 è¶£å‘³å›¾è§£"></a>4.3 è¶£å‘³å›¾è§£</h2><blockquote><p>è¯·å¤§å®¶ç§»æ­¥åŠ›æ‰£å®˜æ–¹é¢˜è§£ï¼š<a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/solution/he-bing-liang-ge-you-xu-lian-biao-by-leetcode-solu/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/merge-two-sorted-lists/solution/he-bing-liang-ge-you-xu-lian-biao-by-leetcode-solu/</a></p></blockquote><p>åœ¨é“¾è¡¨çš„ç« èŠ‚ï¼Œä¸€å®šè¦ä¿æŒæ‰‹ç»˜çš„ä¹ æƒ¯ï¼ï¼ï¼å›¾çš„è§£é‡Šèƒ½åŠ›æ¯”å¹²å·´å·´çš„è¯­è¨€è¦å¥½å¾ˆå¤šã€‚</p><h2 id="4-4-ä»£ç æ¼”ç¤º"><a href="#4-4-ä»£ç æ¼”ç¤º" class="headerlink" title="4.4 ä»£ç æ¼”ç¤º"></a>4.4 ä»£ç æ¼”ç¤º</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * Definition for singly-linked list. * public class ListNode { *     int val; *     ListNode next; *     ListNode() {} *     ListNode(int val) { this.val = val; } *     ListNode(int val, ListNode next) { this.val = val; this.next = next; } * } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> ListNode <span class="token function">mergeTwoLists</span><span class="token punctuation">(</span>ListNode l1<span class="token punctuation">,</span> ListNode l2<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">//ç‰¹åˆ¤ï¼Œå¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œåˆ™</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l1 <span class="token operator">==</span> null <span class="token operator">||</span> l2<span class="token operator">==</span>null<span class="token punctuation">)</span>            <span class="token keyword">return</span> l1<span class="token operator">==</span>null<span class="token operator">?</span>l2<span class="token operator">:</span>l1<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l1<span class="token punctuation">.</span>val <span class="token operator">></span> l2<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>            l2<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">mergeTwoLists</span><span class="token punctuation">(</span>l1<span class="token punctuation">,</span>l2<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> l2<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span><span class="token punctuation">{</span>            l1<span class="token punctuation">.</span>next <span class="token operator">=</span>  <span class="token function">mergeTwoLists</span><span class="token punctuation">(</span>l1<span class="token punctuation">.</span>next<span class="token punctuation">,</span>l2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> l1<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> ListNode <span class="token function">mergeTwoLists</span><span class="token punctuation">(</span>ListNode l1<span class="token punctuation">,</span> ListNode l2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å£°æ˜å“¨å…µèŠ‚ç‚¹</span>        ListNode phread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªæœ€ç»ˆè¿”å›çš„èŠ‚ç‚¹</span>        ListNode prev <span class="token operator">=</span> phread<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¾ªç¯ç»ˆæ­¢æ¡ä»¶,æ‰‹ç»˜ä¸€ä¸‹ä¼šå‘ç°å¦‚æœæ˜¯||ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆ</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l1<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> l2<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>l1<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> l2<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>                prev<span class="token punctuation">.</span>next <span class="token operator">=</span> l1<span class="token punctuation">;</span>                l1 <span class="token operator">=</span> l1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                prev<span class="token punctuation">.</span>next <span class="token operator">=</span> l2<span class="token punctuation">;</span>                l2 <span class="token operator">=</span> l2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            prev <span class="token operator">=</span> prev<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//åˆå¹¶è¿˜æœ‰å‰©ä½™èŠ‚ç‚¹çš„é“¾è¡¨</span>        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> l1<span class="token operator">==</span>null<span class="token operator">?</span>l2<span class="token operator">:</span>l1<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è¿”å›</span>        <span class="token keyword">return</span> phread<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><hr><h1 id="äº”ã€-åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Nä¸ªå…ƒç´ "><a href="#äº”ã€-åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Nä¸ªå…ƒç´ " class="headerlink" title="äº”ã€ åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Nä¸ªå…ƒç´ "></a>äº”ã€ åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Nä¸ªå…ƒç´ </h1><h2 id="5-1-é—®é¢˜æè¿°"><a href="#5-1-é—®é¢˜æè¿°" class="headerlink" title="5.1 é—®é¢˜æè¿°"></a>5.1 é—®é¢˜æè¿°</h2><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262124505.png" alt="image-20210707231440028"></p><h2 id="5-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#5-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="5.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>5.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h2><p>è€è§„çŸ©ï¼Œå…ˆå®¡é¢˜ã€‚è¦åˆ é™¤é“¾è¡¨çš„æŸä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬<strong>å¿…é¡»çŸ¥é“å®ƒçš„å‰é©±èŠ‚ç‚¹</strong>ï¼Œæ‰€ä»¥ä¸ç®¡å“ªç§è§£æ³•ï¼Œ<strong>å“¨å…µèŠ‚ç‚¹</strong>çš„æ·»åŠ éƒ½å¯ä»¥ç®€åŒ–è§£é¢˜æµç¨‹ã€‚</p><p>æœ€ç›´è§‚çš„è§£æ³•è§£æ³•æ— è¿‡äºå°†é—®é¢˜è½¬åŒ–ä¸º<strong>åˆ é™¤é“¾è¡¨ç¬¬length-n+1ä¸ªå…ƒç´ </strong>ã€‚æˆ‘ä»¬ä¸å¦¨ç§°ä¹‹ä¸ºæœ´ç´ çš„è§£æ³•ã€‚</p><h3 id="æœ´ç´ è§£æ³•"><a href="#æœ´ç´ è§£æ³•" class="headerlink" title="æœ´ç´ è§£æ³•"></a>æœ´ç´ è§£æ³•</h3><p>é—®é¢˜è½¬åŒ–ä»¥åï¼Œæ€è·¯å°±å˜å¾—å¾ˆæ˜æ™°äº†ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦éå†å¾—åˆ°é“¾è¡¨çš„é•¿åº¦ã€‚ç„¶åï¼Œæ—¢ç„¶è¦åˆ é™¤é“¾è¡¨çš„ç¬¬length-n+1ä¸ªå…ƒç´ ï¼Œæ˜¾ç„¶<strong>é¦–å…ˆéœ€è¦å¾—åˆ°ç¬¬length-nä¸ªå…ƒç´ </strong>ã€‚è€Œé“¾è¡¨æ˜¯æ²¡æœ‰ä¸‹æ ‡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ã€‚ç„¶åéå†é“¾è¡¨ï¼Œè®¡æ•°å™¨é€’å¢ï¼Œå½“è®¡æ•°å™¨çš„å€¼ç­‰äºlength-næ—¶ï¼Œæˆ‘ä»¬è®°å½•ä¸‹å½“å‰æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å¾…åˆ é™¤èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚æœ€ååˆ é™¤è¿”å›é“¾è¡¨å°±okäº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262124309.png" alt="image-20210707231423480"></p><h3 id="å¿«æ…¢æŒ‡é’ˆ-1"><a href="#å¿«æ…¢æŒ‡é’ˆ-1" class="headerlink" title="å¿«æ…¢æŒ‡é’ˆ"></a>å¿«æ…¢æŒ‡é’ˆ</h3><p>åœ¨èŠå¿«æ…¢æŒ‡é’ˆä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯<strong>æ¨¡å¼è¯†åˆ«</strong>ã€‚</p><blockquote><p>æ‰€è°“æ¨¡å¼è¯†åˆ«çš„é—®é¢˜å°±æ˜¯ç”¨è®¡ç®—çš„æ–¹æ³•æ ¹æ®æ ·æœ¬çš„<strong>ç‰¹å¾</strong>å°†æ ·æœ¬åˆ’åˆ†åˆ°ä¸€å®šçš„<strong>ç±»åˆ«</strong>ä¸­å»ã€‚</p></blockquote><p>è¿™ä¸å°±æ˜¯æ•°æ®æŒ–æ˜ä¸­çš„<strong>åˆ†ç±»é—®é¢˜</strong>å—ï¼Ÿçš„ç¡®ï¼Œç®—æ³•çš„è§£å†³å¾ˆå¤šéƒ½è¦åŸºäº<strong>æ–¹æ³•è®º</strong>ã€‚</p><p>é‚£å¯¹äºåˆ é™¤å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºä»€ä¹ˆæ¨¡å¼å‘¢â€”â€”</p><ul><li><code>éœ€è¦å¾—åˆ°å‰é©±èŠ‚ç‚¹</code>ï¼šå“¨å…µèŠ‚ç‚¹</li><li><code>éœ€è¦å®šä½ç¡®åˆ‡ä½ç½®çš„èŠ‚ç‚¹</code>ï¼šå¿«æ…¢æŒ‡é’ˆ</li></ul><p>è®²çœŸï¼Œä¹å¹´ä¹‰åŠ¡æ•™è‚²æˆ‘ä»¬æœ€å¤§çš„æˆæœå°±æ˜¯é€šè¿‡æ€è€ƒå¾—åˆ°æ¨¡å¼ï¼Œå†æŒ‰ç…§æ¨¡å¼åšé¢˜ï¼Œä½†å¯ç¬‘çš„æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨ä¹‹åæ‰€è°“çš„æ·±é€ ä¸­ï¼Œå´å°†æœ€å¤§çš„è´¢å¯ŒæŠ›åœ¨è„‘åï¼ŒçœŸæ˜¯å¯æ€œè‡³æã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262125147.png" alt="image-20210707231423480"></p><p>å¥½å•¦ï¼Œè¨€å½’æ­£ä¼ ã€‚å“¨å…µèŠ‚ç‚¹å°±ä¸å†èµ˜è¿°äº†ã€‚å¦‚ä½•é€šè¿‡å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿ</p><p>å¼€å±€ä¸€å¼ å›¾~</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262125220.png" alt="image-20210707231338256"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¿«æŒ‡é’ˆçš„åˆå§‹ä½ç½®ä¸º<strong>æ…¢æŒ‡é’ˆå‘å‰ç§»åŠ¨n+1ä¸ªä½ç½®</strong>ã€‚ç„¶åéå†é“¾è¡¨ï¼Œç§»åŠ¨å¿«æ…¢æŒ‡é’ˆï¼Œç¡®å®šæ…¢æŒ‡é’ˆçš„ä½ç½®ã€‚æœ€åï¼Œå°±æ˜¯åˆ é™¤å’¯â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262125191.png" alt="image-20210707231254243"></p><h2 id="5-3-è¶£å‘³å›¾è§£"><a href="#5-3-è¶£å‘³å›¾è§£" class="headerlink" title="5.3 è¶£å‘³å›¾è§£"></a>5.3 è¶£å‘³å›¾è§£</h2><p>è¯·æœ‹å‹ä»¬ç§»æ­¥åŠ›æ‰£å®˜æ–¹è§†é¢‘ï¼Œä¸€å¦‚æ—¢å¾€çš„ç»™åŠ›â€”â€”</p><p><a href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/solution/shan-chu-lian-biao-de-dao-shu-di-nge-jie-dian-b-61/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/solution/shan-chu-lian-biao-de-dao-shu-di-nge-jie-dian-b-61/</a></p><h2 id="5-4-ä»£ç æ¼”ç¤º"><a href="#5-4-ä»£ç æ¼”ç¤º" class="headerlink" title="5.4 ä»£ç æ¼”ç¤º"></a>5.4 ä»£ç æ¼”ç¤º</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * Definition for singly-linked list. * public class ListNode { *     int val; *     ListNode next; *     ListNode() {} *     ListNode(int val) { this.val = val; } *     ListNode(int val, ListNode next) { this.val = val; this.next = next; } * } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    *å¸¸è§„è§£æ³•    */</span>    <span class="token keyword">public</span> ListNode <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å£°æ˜å“¨å…µèŠ‚ç‚¹</span>        ListNode dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¾—åˆ°é“¾è¡¨é•¿åº¦</span>        <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token function">getlength</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        ListNode prev <span class="token operator">=</span> dummy<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>length<span class="token operator">-</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            prev <span class="token operator">=</span> prev<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> prev<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getlength</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            length<span class="token operator">++</span><span class="token punctuation">;</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> length<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    *å¿«æ…¢æŒ‡é’ˆ    */</span>    <span class="token keyword">public</span> ListNode <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//æˆ‘ä»¬æ€»éœ€è¦å¾—åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¹äºå¤´ç»“ç‚¹æ¥è¯´ï¼Œå°±éœ€è¦ä¸€ä¸ªå“¨å…µèŠ‚ç‚¹</span>        ListNode pummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¿«æ…¢æŒ‡é’ˆæ³•</span>        ListNode slow <span class="token operator">=</span> pummy<span class="token punctuation">;</span>        ListNode fast <span class="token operator">=</span> pummy<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¾—åˆ°è¶…å‰æ…¢æŒ‡é’ˆn+1ä¸ªä½ç½®çš„fastæŒ‡é’ˆ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//slowæŒ‡é’ˆæŒ‡å‘è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//åˆ é™¤èŠ‚ç‚¹</span>        ListNode tmp <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        slow<span class="token punctuation">.</span>next <span class="token operator">=</span> tmp<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        tmp<span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">return</span> pummy<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p><p>æ³¨ï¼šè¡¥ä¸Šæ˜¨å¤©çš„ï¼Œç”Ÿæ´»å’Œå­¦ä¹ çš„å¤±è¡¡æ˜¯æ— å¯é¿å…çš„äº‹æƒ…ï¼Œä½†ç»´ç³»æ¯ä»¶é‡è¦äº‹æƒ…çš„å¹³è¡¡ä¹ŸåŒæ ·åŠ¿åœ¨å¿…è¡Œï¼ŒåŠ æ²¹å§ï¼Œæ—¶å…‰ä¸é—®èµ¶è·¯äººã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xæ•°ä¹‹å’Œå›¾æ–‡è¯¦è§£</title>
      <link href="/2021/07/12/x-shu-zhi-he-tu-wen-xiang-jie/"/>
      <url>/2021/07/12/x-shu-zhi-he-tu-wen-xiang-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1.ä¸¤æ•°ä¹‹å’Œ"></a>1.ä¸¤æ•°ä¹‹å’Œ</h2><h3 id="1-1-é¢˜ç›®æè¿°"><a href="#1-1-é¢˜ç›®æè¿°" class="headerlink" title="1.1 é¢˜ç›®æè¿°"></a>1.1 é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p></blockquote><h3 id="1-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#1-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="1.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>1.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h3><p>é¦–å…ˆå¤§å®¶ç›´è§‚çš„æƒ³æ³•ï¼Œä¼šè€ƒè™‘ä½¿ç”¨ä¸¤å±‚å¾ªç¯åˆ†åˆ«éå†æ•°ç»„ï¼Œå¹¶å°†å…¶ç›¸åŠ çš„å’Œä¸ç›®æ ‡å€¼ç›¸æ¯”è¾ƒã€‚è¿™æ ·çš„è§£æ³•å…¶å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(N2)ï¼Œç€å®ä¸æ€ä¹ˆä¼˜é›…ã€‚</p><p>é‚£ä¼˜åŒ–çš„ç©ºé—´åœ¨å“ªå‘¢ï¼Ÿæ—¢ç„¶é€šè¿‡ç¬¬ä¸€å±‚å·²ç»ç¡®å®šäº†ä¸€ä¸ªå€¼ï¼Œé‚£æ»¡è¶³è¦æ±‚çš„å€¼å°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼Œä¹Ÿå°±æ˜¯è¯´é—®é¢˜è½¬åŒ–ä¸º<strong>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å¿«é€Ÿåœ°æ‰¾ç›®æ ‡å€¼</strong>ã€‚é¦–å…ˆç»™å‡ºç­”æ¡ˆï¼Œé€šè¿‡<strong>åŸºäºæ•£åˆ—è¡¨çš„å“ˆå¸ŒæŸ¥æ‰¾çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</strong>ï¼Œæˆ‘ä»¬ç®€è¦çš„èŠä¸‹å“ˆå¸ŒæŸ¥æ‰¾ï¼›</p><blockquote><p><strong>æ•£åˆ—è¡¨</strong>ï¼ˆ<strong>Hash table</strong>ï¼Œä¹Ÿå«<strong>å“ˆå¸Œè¡¨</strong>ï¼‰ï¼Œæ˜¯æ ¹æ®<a href="https://zh.wikipedia.org/wiki/éµ" target="_blank" rel="noopener">é”®</a>ï¼ˆKeyï¼‰è€Œç›´æ¥è®¿é—®å†…å­˜å‚¨å­˜ä½ç½®çš„<a href="https://zh.wikipedia.org/wiki/æ•°æ®ç»“æ„" target="_blank" rel="noopener">æ•°æ®ç»“æ„</a>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡è®¡ç®—ä¸€ä¸ªå…³äºé”®å€¼çš„å‡½æ•°ï¼Œå°†æ‰€éœ€æŸ¥è¯¢çš„æ•°æ®<a href="https://zh.wikipedia.org/wiki/æ˜ å°„" target="_blank" rel="noopener">æ˜ å°„</a>åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œè¿™åŠ å¿«äº†æŸ¥æ‰¾é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°ç§°åš<a href="https://zh.wikipedia.org/wiki/æ•£åˆ—å‡½æ•°" target="_blank" rel="noopener">æ•£åˆ—å‡½æ•°</a>ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„ç§°åš<strong>æ•£åˆ—è¡¨</strong>ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œé”®å€¼å’Œå…ƒç´ å­˜åœ¨å”¯ä¸€çš„æ˜ å°„å…³ç³»ï¼Œé‚£è¿™ä¸ªé”®å€¼å¦‚ä½•è·å–å‘¢ï¼Ÿéœ€è¦é€šè¿‡<strong>å“ˆå¸Œå‡½æ•°</strong>ï¼Œè¿™é‡Œåªç®€è¦è®¨è®º<strong>é™¤ç•™ä½™æ•°æ³•</strong>â€”â€”</p><p>è‹¥å·²çŸ¥æ•´ä¸ªå“ˆå¸Œè¡¨çš„æœ€å¤§é•¿åº¦mï¼Œå¯ä»¥å–ä¸€ä¸ªä¸å¤§äºmçš„æ•°pï¼Œç„¶åå¯¹è¯¥å…³é”®å­—keyåšå–ä½™è¿ç®—ã€‚å¦‚ï¼š key = key % pã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°å¾—åˆ°çš„å€¼æ˜¯æœ‰å¯èƒ½å†²çªçš„ï¼Œå½“å‘ç”Ÿ<strong>å“ˆå¸Œå†²çª</strong>æ—¶ï¼Œå°±éœ€è¦ä¸ºå¼•èµ·å†²çªçš„å…ƒç´ é‡æ–°ç¡®å®šå“ˆå¸Œå€¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•ä¹‹ä¸€â€”â€”<strong>çº¿æ€§æ¢æµ‹æ³•</strong></p><p>åœ¨çº¿æ€§æ¢æµ‹æ³•ä¸­ï¼Œå½“é‡åˆ°å†²çªæ—¶ï¼Œä»å‘ç”Ÿå†²çªä½ç½®èµ·ï¼Œæ¯æ¬¡ +1ï¼Œå‘å³æ¢æµ‹ï¼Œç›´åˆ°ä¸å‘ç”Ÿå“ˆå¸Œå†²çªä¸ºæ­¢ã€‚</p><h3 id="1-3-å›¾è§£æ¼”ç¤º"><a href="#1-3-å›¾è§£æ¼”ç¤º" class="headerlink" title="1.3 å›¾è§£æ¼”ç¤º"></a>1.3 å›¾è§£æ¼”ç¤º</h3><p>å›¾ç‰‡æ¥è‡ªäº<a href="https://leetcode-cn.com/problems/two-sum/solution/yi-miao-jiu-neng-gao-dong-de-dong-tu-jie-cp6x/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/two-sum/solution/yi-miao-jiu-neng-gao-dong-de-dong-tu-jie-cp6x/</a></p><p><img src="https://pic.leetcode-cn.com/1610336380-bKlBYP-file_1610336383206" alt="ä¸¤æ•°ä¹‹å’Œ"></p><h3 id="1-4-ä»£ç æ¼”ç¤º"><a href="#1-4-ä»£ç æ¼”ç¤º" class="headerlink" title="1.4 ä»£ç æ¼”ç¤º"></a>1.4 ä»£ç æ¼”ç¤º</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªhashmap</span>    Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å¦‚æœå“ˆå¸Œè¡¨ä¸­å­˜åœ¨ç›®æ ‡å…ƒç´ ï¼Œå°±å°†å…¶å°è£…è¿”å›</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">}</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token comment" spellcheck="true">//ä¸å­˜åœ¨çš„è¯ï¼Œå°±å°†å…¶åŠ å…¥å“ˆå¸Œè¡¨ï¼Œè¿™é‡Œå¥½ç†è§£çš„å†™æ³•æ˜¯åœ¨å“ˆå¸Œè¡¨åˆå§‹åŒ–ä»¥åå°±å°†æ•°ç»„å…ƒç´ å…¨éƒ¨æ·»åŠ è¿›å»ï¼Œä½†æ”¾åœ¨è¿™ä¸ªä½ç½®ï¼ŒåŠ¨æ€æ·»åŠ ï¼Œæ—¶é—´å¤æ‚åº¦æ›´ä½</span>      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"No two sum solution"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><h2 id="2-ä¸‰æ•°ä¹‹å’Œ"><a href="#2-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="2.ä¸‰æ•°ä¹‹å’Œ"></a>2.ä¸‰æ•°ä¹‹å’Œ</h2><h3 id="2-1-é¢˜ç›®æè¿°"><a href="#2-1-é¢˜ç›®æè¿°" class="headerlink" title="2.1 é¢˜ç›®æè¿°"></a>2.1 é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><p>æ³¨æ„ï¼šç­”æ¡ˆä¸­<strong>ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„</strong>ã€‚</p></blockquote><h3 id="2-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ"><a href="#2-2-æ€è·¯åŠå¤æ‚åº¦åˆ†æ" class="headerlink" title="2.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ"></a>2.2 æ€è·¯åŠå¤æ‚åº¦åˆ†æ</h3><p>ä¸‰æ•°ä¹‹å’Œæ— ç–‘æ˜¯ä¸¤æ•°ä¹‹å’Œçš„è¿›é˜¶äº†ï¼Œè¿·æƒ‘çš„æ˜¯ï¼Œå±…ç„¶è¿˜æœ‰å››æ•°ä¹‹å’Œï¼Œå…¶å®å‘¢ï¼ŒæŒæ¡äº†ä¸‰æ•°ä¹‹å’Œï¼Œå››æ•°ä¹‹å’Œæ˜¯å¾ˆeasyçš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¨€å½’æ­£ä¼ â€”â€”</p><p>ç›´æ¥æƒ³åˆ°<strong>æ’åº+åŒæŒ‡é’ˆ</strong>çš„æœ‹å‹è¿˜æ˜¯æœ‰çš„ï¼Œä½†æˆ‘ä¸ªäººå¹¶ä¸æ¨èç›´æ¥ä¸Šæ‰‹å°±ä½¿ç”¨ä¼˜åŒ–çš„æ€è·¯ã€‚å¤§å¤šæ•°æœ‹å‹çš„æ€ç»´æ˜¯æ²¡æœ‰é‚£ä¹ˆè·³è·ƒçš„ï¼Œæ¯”å¦‚æˆ‘ã€‚æˆ‘ä»¬ä¸å¦¨<strong>ä»æœ€ç›´è§‚çš„æ–¹æ³•å†™èµ·</strong>ï¼Œä¸€æ­¥æ­¥ä¼˜åŒ–ï¼Œæ–¹å¯æœ‰çš„æ”¾çŸ¢ã€‚</p><p>æœ€ç›´è§‚çš„æ— éæ˜¯ä½¿ç”¨<strong>ä¸‰é‡å¾ªç¯</strong>ï¼Œé¦–å…ˆæ’åºï¼Œæ¯å±‚å¾ªç¯çš„å€¼ä¸é‡å¤ï¼Œå†å¯¹ä¸‰ä¸ªæ•°çš„åŠ å’Œä¸ç›®æ ‡å€¼åšåˆ¤æ–­ï¼Œå°±OKäº†ï¼Œä½†è®²çœŸç¡®å®ä¸ä¼˜é›…ã€‚</p><p>ä¸‰å±‚å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦O(N3)å¤ªæ„Ÿäººäº†ï¼Œèƒ½ä¸èƒ½é™ä½å¾ªç¯çš„å±‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>åœ¨æ•°ç»„ä¸­æ‰¾ç¬¬ä¸‰ä¸ªå€¼çš„æ—¶é—´å¤æ‚åº¦è¦ä¸ºO(1),</strong>åœ¨ä¸¤æ•°ä¹‹å’Œä¸­ä½¿ç”¨çš„<strong>å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªå¯å–çš„æ€è·¯</strong>ï¼Œä½†ä¸ºäº†æ‹“å®½è§†é‡ï¼Œæˆ‘ä»¬è€ƒè™‘åˆ«çš„æ–¹å¼ï¼Œå¾ˆæ˜¾ç„¶ï¼Œç¡®å®šäº†ç¬¬ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„<strong>ä¸¤ä¸ªæ•°å°±æ»¡è¶³åŠ å’Œç­‰äºtarget-nums[i]</strong>,æ‰€ä»¥ä¸€å±‚å¾ªç¯è§£å†³ä¸¤ä¸ªæ•°å°±å˜çš„å¯è¡Œäº†ï¼Œ<strong>ç¬¬ä¸‰ä¸ªæ•°ä»æ•°ç»„æœ«å°¾å¼€å§‹å€’åºè®¿é—®</strong>å³å¯ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæ ¸å¿ƒçš„æ€è·¯å·²ç»è§£å†³äº†ã€‚ä½†æ˜¯ä»æ—§éœ€è¦é¢å¤–åšä¸€äº›ä¿®ä¿®è¡¥è¡¥ï¼Œä¹Ÿå°±æ˜¯<strong>ç‰¹åˆ¤</strong>ã€‚é¦–å…ˆå¦‚æœæ•°ç»„çš„é•¿åº¦å°äº3æˆ–è€…ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼å°±å¤§äºtarget,é‚£å°±æ²¡æœ‰ç»§ç»­çš„å¿…è¦äº†ã€‚å…¶æ¬¡ï¼ŒåŒä¸€å±‚å¾ªç¯å¦‚æœç¢°åˆ°ç›¸åŒçš„å€¼ï¼Œåº”è¯¥è·³è¿‡ã€‚æœ€åï¼Œä¸ºäº†é¿å…ç¬¬äºŒä¸ªæ•°å’Œç¬¬ä¸‰ä¸ªæ•°é‡å¤ï¼Œå¯ä»¥è®¾ç½®å·¦æŒ‡é’ˆçš„ä½ç½®å°äºå³æŒ‡é’ˆçš„ä½ç½®ã€‚</p><h3 id="2-3-åŠ¨å›¾è§£æ"><a href="#2-3-åŠ¨å›¾è§£æ" class="headerlink" title="2.3 åŠ¨å›¾è§£æ"></a>2.3 åŠ¨å›¾è§£æ</h3><p>å¤§å®¶å¯ä»¥ç§»æ­¥leetcodeé¢˜è§£åŒº(å¤§ä½¬ç‰›é€¼)ï¼š<a href="https://leetcode-cn.com/problems/3sum/solution/yi-miao-jiu-neng-kan-dong-de-dong-tu-jie-unfp/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/3sum/solution/yi-miao-jiu-neng-kan-dong-de-dong-tu-jie-unfp/</a></p><h3 id="2-4-ä»£ç æ¼”ç¤º"><a href="#2-4-ä»£ç æ¼”ç¤º" class="headerlink" title="2.4 ä»£ç æ¼”ç¤º"></a>2.4 ä»£ç æ¼”ç¤º</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">threeSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºäºŒç»´æ•°ç»„</span>    List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> lists <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å°†æ•°æ®å…ˆæ’åº</span>    Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸€å±‚å¾ªç¯ï¼Œç¡®ä¿å½“å‰å¾ªç¯çš„æ•°å’Œä¸Šä¸€æ¬¡å¾ªç¯çš„æ•°ä¸åŒ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token operator">||</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> lists<span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">continue</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> target <span class="token operator">=</span> <span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//å£°æ˜åŒæŒ‡é’ˆçš„ä½ç½®</span>      <span class="token keyword">int</span> left <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>          lists<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//è¿™é‡Œæ˜¯è®¸å¤šæœ‹å‹å®¹æ˜“å›°æƒ‘çš„åœ°æ–¹ï¼Œåˆç†çš„é¡ºåºæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼Œå¯ä»¥ç†è§£ä¸ºä¸‹é¢è¿™éƒ¨åˆ†éƒ½æ˜¯ä¸ºä¸‹ä¸€æ¬¡çš„æ“ä½œæ•°åšå‡†å¤‡ã€‚</span>          left<span class="token operator">++</span><span class="token punctuation">;</span>          right<span class="token operator">--</span><span class="token punctuation">;</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token operator">&amp;&amp;</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            left<span class="token operator">++</span><span class="token punctuation">;</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token operator">&amp;&amp;</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            right<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>          right<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>          left<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> lists<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="3-å››æ•°ä¹‹å’Œ"><a href="#3-å››æ•°ä¹‹å’Œ" class="headerlink" title="3.å››æ•°ä¹‹å’Œ"></a>3.å››æ•°ä¹‹å’Œ</h2><p>å¯èƒ½å¾ˆå¤šäººçœ‹åˆ°è¿™é‡Œæ¯”è¾ƒç«å¤§ï¼Œè¿™è¿˜æœ‰å®Œæ²¡å®Œäº†~ è¦ä¸ä½ ç»™æˆ‘æ•´ä¸ªNæ•°ä¹‹å’Œã€‚ã€‚ã€‚</p><p>å…¶å®å‘¢ï¼Œæˆ‘ä¹Ÿè§‰å¾—åˆ°å››æ•°ä¹‹å’Œè¿™é‡Œå·²ç»æ²¡æœ‰æ–°çš„è§£æ³•ï¼ŒæŠ€å·§èåˆè¿›å»äº†ï¼Œå°±å§‘ä¸”å½“åšæ˜¯ä¸‰æ•°ä¹‹å’Œçš„ç»ƒä¹ é¢˜å’¯ï¼Œæ°´ä¸ªé¢˜æ•°(å˜¿å˜¿)ã€‚å¥½äº†ï¼Œè¿›å…¥æ­£é¢˜â€”â€”</p><h3 id="3-1-é¢˜ç›®æè¿°"><a href="#3-1-é¢˜ç›®æè¿°" class="headerlink" title="3.1 é¢˜ç›®æè¿°"></a>3.1 é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨å››ä¸ªå…ƒç´  aï¼Œbï¼Œc å’Œ d ï¼Œä½¿å¾— a + b + c + d çš„å€¼ä¸ target ç›¸ç­‰ï¼Ÿæ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„å››å…ƒç»„ã€‚</p><p>æ³¨æ„ï¼š</p><p>ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„å››å…ƒç»„ã€‚</p></blockquote><h3 id="3-2-ç®—æ³•æ€è·¯å’Œå¤æ‚åº¦åˆ†æ"><a href="#3-2-ç®—æ³•æ€è·¯å’Œå¤æ‚åº¦åˆ†æ" class="headerlink" title="3.2 ç®—æ³•æ€è·¯å’Œå¤æ‚åº¦åˆ†æ"></a>3.2 ç®—æ³•æ€è·¯å’Œå¤æ‚åº¦åˆ†æ</h3><p>å¥½å§ï¼Œä»æ€è·¯ä¸Šæ¥è¯´çš„ç¡®æ¯«æ— æ–°æ„ï¼Œä½†è§£æ³•ä¸­éœ€è¦æ³¨æ„çš„ç»†èŠ‚è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œè¿™é‡Œæˆ‘ä»¬åªæè¿°å®¹æ˜“å‡ºé”™çš„ç»†èŠ‚â€”â€”</p><ol><li>å½“ç”¨åŒæŒ‡é’ˆå®ç°æ—¶ï¼Œæ‰€ç”¨æ—¶é—´ä¼šä¸‹é™å¾ˆå¤šï¼Œç©¶å…¶æ ¹æœ¬ï¼Œæ˜¯å› ä¸ºåŒæŒ‡é’ˆç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN),è€Œå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾æ—¶çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1).</li><li>é¢„ä¼°çš„æœ€å°å€¼å¤§äºç›®æ ‡å€¼ï¼Œåˆ™break,è€Œæœ€å¤§å€¼å°äºç›®æ ‡å€¼ï¼Œéœ€è¦ä½¿ç”¨continue.è¿™ä¸ªå‘åœ¨åˆæ¬¡å†™çš„æ—¶å€™ä¹‰æ— åé¡¾çš„è·³äº†ã€‚ã€‚</li><li>åœ¨æ¯”è¾ƒé‡å¤å…ƒç´ æ—¶ï¼Œåˆ¤æ–­æ¡ä»¶ä¹‹ä¸€æ˜¯å½“å‰å±‚å¾ªç¯å˜é‡çš„å€¼å¤§äºä¸Šä¸€å±‚å¾ªç¯å˜é‡çš„å€¼åŠ ä¸€ã€‚é€šä¿—çš„è¯´ï¼Œè¿™ä¸ªå€¼éœ€è¦å–å®ƒæœ‰å¯èƒ½å–çš„å€¼ï¼Œè¿™ä¹ˆè¯´æ˜¯æœ‰ç‚¹ç»•äº†ï¼Œä½†è‡ªå·±æ‰“ä¸€éä»£ç å°±è§‰å¾—éå¸¸æœ‰å¿…è¦äº†ã€‚</li></ol><h3 id="3-3-åŠ¨å›¾æ¼”ç¤º"><a href="#3-3-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="3.3 åŠ¨å›¾æ¼”ç¤º"></a>3.3 åŠ¨å›¾æ¼”ç¤º</h3><p>è¯·ç§»æ­¥leetcodeå¤§ä½¬åšçš„åŠ¨å›¾ï¼š<a href="https://leetcode-cn.com/problems/4sum/solution/yi-miao-jiu-neng-gao-dong-de-duo-ge-qiu-ya50w/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/4sum/solution/yi-miao-jiu-neng-gao-dong-de-duo-ge-qiu-ya50w/</a></p><h3 id="3-4-ä»£ç å±•ç¤º"><a href="#3-4-ä»£ç å±•ç¤º" class="headerlink" title="3.4 ä»£ç å±•ç¤º"></a>3.4 ä»£ç å±•ç¤º</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">fourSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>    List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> lists <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ’å¥½åº</span>    Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ç‰¹åˆ¤ï¼Œæ•°ç»„é•¿åº¦å°äº4è¿”å›ç©º</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> lists<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å°†æ•°ç»„å…ƒç´ æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­</span>    HashMap<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//éå†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ </span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//å½“å‡ºç°é‡å¤å…ƒç´ ï¼Œåˆ™è·³è¿‡å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">continue</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//ç‰¹åˆ¤ï¼Œå³è¯¥å±‚å¾ªç¯ä¸­æœ€å¤§çš„å’Œå°äºtargetæˆ–è€…æœ€å°çš„å’Œå¤§äºtarget</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">></span>target<span class="token punctuation">)</span>             <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">)</span>          <span class="token keyword">continue</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹éå†æ•°ç»„</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">//å½“å‡ºç°é‡å¤å…ƒç´ ï¼Œåˆ™å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">></span>i<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ç‰¹åˆ¤ï¼Œå³å½“å‰å¾ªç¯ä¸­æœ€å¤§çš„å’Œå°äºtargetæˆ–è€…æœ€å°çš„å’Œå¤§äºtarget</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">></span>target<span class="token punctuation">)</span>          <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">)</span>          <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> k <span class="token operator">=</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">//å½“å‡ºç°é‡å¤å…ƒç´ ï¼Œåˆ™å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">></span>j<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>          <span class="token keyword">int</span> num <span class="token operator">=</span> target<span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token operator">></span>k<span class="token punctuation">)</span><span class="token punctuation">{</span>            lists<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>target<span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> lists<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> æå®¢æ—¶é—´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…«å¤§æ’åºç®—æ³•è¯¦è§£</title>
      <link href="/2021/07/12/shu-ju-jie-gou-chang-jian-de-ba-da-pai-xu-tu-wen-xiang-jie/"/>
      <url>/2021/07/12/shu-ju-jie-gou-chang-jian-de-ba-da-pai-xu-tu-wen-xiang-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>ç®—æ³•å¦‚æœæŒ‰ç…§æ¨¡å—åˆ†ï¼Œ<code>æ’åºç®—æ³•ç»å¯¹ç®—å¾—ä¸Šå‰²æ®ä¸€æ–¹çš„å­˜åœ¨</code>ã€‚æˆ‘ä»¬æ— å¯é¿å…åœ°ä¼šæƒ³ï¼Œå¯¹ä¸€ç»„æ•°æ®è¿›è¡Œæ’åºè®©ä½ ç©å¾—è¿™ä¹ˆèŠ±ï¼Œæœ‰è¿™ä¸ªå¿…è¦å—ï¼Ÿæˆ‘æƒ³è¢«è¦æ±‚æ‰‹å†™å¿«æ’çš„äººè‡³å°‘æ˜¯è®¤ä¸ºæœ‰çš„~</p><p>å°±å¦‚åŒä»¥å‰å†å²è€å¸ˆæ‰€è¯´çš„é‚£èˆ¬ï¼šå­¦ä¹ å†å²å­¦çš„ä¸æ˜¯å†å²æœ¬èº«ï¼Œè€Œæ˜¯<code>å†å²èƒŒåçš„æ•…äº‹</code>ã€‚</p><p>è€Œæ’åºç®—æ³•èƒŒåï¼Œ<code>åˆ†æ²»æ€æƒ³ï¼ŒäºŒåˆ†æ€æƒ³ï¼Œä¼˜åŒ–ï¼Œæ—¶ç©ºå¤æ‚åº¦</code>éƒ½æ˜¯éœ€è¦æˆ‘ä»¬å»æ¢å¯»çš„æ•…äº‹ï¼Œè€Œä¸åŒçš„æ’åºç®—æ³•åœ¨ç›¸åŒåœºæ™¯ä¸‹çš„æ€§èƒ½å¤§ç›¸å¾„åº­ï¼Œåˆ°åº•é€‰è°å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆè¡¡é‡ä¾æ®å‘¢ï¼Ÿäººä»¬æ›´å¸¸ç”¨çš„æ˜¯å“ªç§å‘¢ï¼Ÿæ•…äº‹çš„å¤§å¹•å°±æ­¤æ‹‰å¼€â€”â€”</p><blockquote><p>æ³¨ï¼šæ–‡ç« ä¸­çš„å›¾å‡æ¥è‡ªäºæå®¢æ—¶é—´æ•°æ®ç»“æ„ä¸ç®—æ³•ä¸“æ ã€‚æ–‡ç« åˆè¡·æ˜¯ä½œä¸ºç¬”è®°ä½¿ç”¨ï¼Œæ‰€ä»¥ç¼ºä¹è¯¦ç»†æ¨å¯¼ï¼Œä»…ç”¨äºå›é¡¾çŸ¥è¯†ç‚¹ã€‚</p></blockquote><hr><h1 id="ä¸€ã€æ’åºä¸Šâ€”â€”å†’æ³¡-æ’å…¥-é€‰æ‹©æ’åº"><a href="#ä¸€ã€æ’åºä¸Šâ€”â€”å†’æ³¡-æ’å…¥-é€‰æ‹©æ’åº" class="headerlink" title="ä¸€ã€æ’åºä¸Šâ€”â€”å†’æ³¡,æ’å…¥,é€‰æ‹©æ’åº"></a>ä¸€ã€æ’åºä¸Šâ€”â€”å†’æ³¡,æ’å…¥,é€‰æ‹©æ’åº</h1><h2 id="1-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#1-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="1.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>1.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p><code>Q</code>ï¼šæ’å…¥æ’åºå’Œå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(n2),ä½†ä¸ºä»€ä¹ˆäººä»¬æ›´å€¾å‘äºé€‰æ‹©æ’å…¥æ’åºå‘¢ï¼Ÿ</p><p><code>A</code>ï¼š<strong>æ’å…¥æ’åºå’Œå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(n2),ä¸”ä»–ä»¬éƒ½æ˜¯ç¨³å®šçš„åŸåœ°æ’åºç®—æ³•ï¼Œä½†ä»–ä»¬çš„æ€§èƒ½åŒºåˆ«åœ¨äºæ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°ã€‚</strong></p><p>å†’æ³¡æ’åºä¸ç®¡æ€ä¹ˆä¼˜åŒ–ï¼Œå®ƒçš„äº¤æ¢æ¬¡æ•°ï¼Œä¹Ÿå°±æ˜¯<code>ç§»åŠ¨å…ƒç´ æ¬¡æ•°</code>éƒ½æ˜¯å›ºå®šå€¼ï¼Œå³åŸå§‹æ•°æ®çš„<code>é€†åºåº¦</code>ã€‚æ’å…¥æ’åºåŒæ ·å¦‚æ˜¯ã€‚</p><p>ä½†ä»ä»£ç å®ç°ä¸Šæ¥è¯´ï¼Œå†’æ³¡æ’åºéœ€è¦<code>ä¸‰æ¬¡èµ‹å€¼</code>ï¼Œè€Œæ’å…¥æ’åºåªéœ€è¦<code>ä¸€æ¬¡èµ‹å€¼</code>ã€‚ä¹Ÿå°±æ˜¯è¯´å†’æ³¡æ’åºçš„æ•°æ®äº¤æ¢æ¯”æ’å…¥æ’åºçš„æ•°æ®äº¤æ¢æ›´å¤æ‚ï¼Œæˆ‘ä»¬æ¥å…·è±¡çš„çœ‹ä¸€ä¸‹â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//å†’æ³¡æ’åºä¸­çš„äº¤æ¢æ“ä½œ</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">></span>a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//æ’å…¥æ’åºä¸­çš„äº¤æ¢æ“ä½œ</span><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>    a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>    <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="1-2-å¦‚ä½•åˆ†æä¸€ä¸ªæ’åºç®—æ³•"><a href="#1-2-å¦‚ä½•åˆ†æä¸€ä¸ªæ’åºç®—æ³•" class="headerlink" title="1.2 å¦‚ä½•åˆ†æä¸€ä¸ªæ’åºç®—æ³•"></a>1.2 å¦‚ä½•åˆ†æä¸€ä¸ªæ’åºç®—æ³•</h2><h3 id="1-2-1-æ’åºç®—æ³•çš„æ‰§è¡Œæ•ˆç‡"><a href="#1-2-1-æ’åºç®—æ³•çš„æ‰§è¡Œæ•ˆç‡" class="headerlink" title="1.2.1 æ’åºç®—æ³•çš„æ‰§è¡Œæ•ˆç‡"></a>1.2.1 æ’åºç®—æ³•çš„æ‰§è¡Œæ•ˆç‡</h3><h4 id="æœ€å¥½æƒ…å†µï¼Œæœ€åæƒ…å†µï¼Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦"><a href="#æœ€å¥½æƒ…å†µï¼Œæœ€åæƒ…å†µï¼Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦" class="headerlink" title="æœ€å¥½æƒ…å†µï¼Œæœ€åæƒ…å†µï¼Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦"></a>æœ€å¥½æƒ…å†µï¼Œæœ€åæƒ…å†µï¼Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦</h4><p>åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ç²—ç•¥çš„æ¯”è¾ƒæ—¶é—´å¤æ‚åº¦ï¼Œé‚£ä¸ºä»€ä¹ˆåœ¨æ’åºæ—¶ï¼Œåˆéœ€è¦å¼•å…¥è¿™äº›å…·ä½“çš„å‚æ•°å‘¢?</p><ol><li>æœ‰äº›æ’åºç®—æ³•æœ‰åŒºåˆ†çš„å¿…è¦ï¼›</li><li>å¯¹äºè¦æ’åºçš„æ•°æ®ï¼Œ<strong>æœ‰åºåº¦</strong>æ˜¯æˆªç„¶ä¸åŒçš„ã€‚</li></ol><h4 id="æ—¶é—´å¤æ‚åº¦çš„ç³»æ•°ï¼Œå¸¸æ•°å’Œä½é˜¶"><a href="#æ—¶é—´å¤æ‚åº¦çš„ç³»æ•°ï¼Œå¸¸æ•°å’Œä½é˜¶" class="headerlink" title="æ—¶é—´å¤æ‚åº¦çš„ç³»æ•°ï¼Œå¸¸æ•°å’Œä½é˜¶"></a>æ—¶é—´å¤æ‚åº¦çš„ç³»æ•°ï¼Œå¸¸æ•°å’Œä½é˜¶</h4><p>åŒæ ·çš„å›°æƒ‘ï¼Œä½†è¿™ä¸ªè¦å¥½è§£ç­”çš„å¤šï¼Œæ— éæ˜¯<strong>æ•°æ®è§„æ¨¡å°çš„æƒ…å†µ</strong>ä¸‹ï¼Œè¿™äº›å‚æ•°æœ¬èº«å°±å¯ä»¥è¡¨è¾¾ä¸€ç§<strong>è¶‹åŠ¿</strong>ã€‚</p><h4 id="æ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°"><a href="#æ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°" class="headerlink" title="æ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°"></a>æ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°</h4><p>æ’åºç®—æ³•æœ‰ä¸¤ç±»ï¼Œä¸€ç±»åŸºäºæ’åºï¼Œä¸€ç±»ä¸åŸºäºæ’åºã€‚åœ¨åˆ†æåŸºäºæ’åºçš„ç®—æ³•ä¸­ï¼Œ<strong>æ•°æ®äº¤æ¢å°±æ„å‘³ç€æ•°æ®æ¬ç§»ï¼Œæ˜¯è¦è€—è´¹æ€§èƒ½çš„</strong>ï¼Œæ‰€ä»¥æœ‰å¿…è¦åŒºåˆ†ã€‚</p><h3 id="1-2-2-æ’åºç®—æ³•çš„å†…å­˜æ¶ˆè€—"><a href="#1-2-2-æ’åºç®—æ³•çš„å†…å­˜æ¶ˆè€—" class="headerlink" title="1.2.2 æ’åºç®—æ³•çš„å†…å­˜æ¶ˆè€—"></a>1.2.2 æ’åºç®—æ³•çš„å†…å­˜æ¶ˆè€—</h3><p>ä¸ºäº†æè¿°å†…å­˜æ¶ˆè€—ï¼Œæˆ‘ä»¬å¼•å…¥<strong>åŸåœ°æ’åº</strong>çš„æ¦‚å¿µï¼Œæ‰€è°“åŸåœ°æ’åºï¼Œå°±æ˜¯æŒ‡<strong>ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</strong>ã€‚</p><h3 id="1-2-3-æ’åºç®—æ³•çš„ç¨³å®šæ€§"><a href="#1-2-3-æ’åºç®—æ³•çš„ç¨³å®šæ€§" class="headerlink" title="1.2.3 æ’åºç®—æ³•çš„ç¨³å®šæ€§"></a>1.2.3 æ’åºç®—æ³•çš„ç¨³å®šæ€§</h3><p>ç¨³å®šæ€§çš„å¤§è‡´æ„æ€æ˜¯åœ¨æ–°çš„éœ€æ±‚è¢«å¼•å…¥åï¼ŒåŸæœ¬ç³»ç»Ÿèƒ½å¤Ÿç»´æŒç›¸å¯¹ç¨³å®šã€‚è€Œåœ¨è¿™é‡Œï¼Œæ’åºç®—æ³•çš„ç¨³å®šæ€§æŒ‡çš„æ˜¯ï¼Œ<strong>å¦‚æœå¾…æ’åºçš„åºåˆ—ä¸­å­˜åœ¨å€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œç»è¿‡æ’åºä»¥åï¼Œç›¸ç­‰å…ƒç´ ä¹‹é—´çš„åŸæœ‰çš„å…ˆåé¡ºåºä¸å˜ã€‚</strong></p><p>ä½†æ˜¯ä¸šåŠ¡ä¸­çš„æ’åºï¼Œå¾€å¾€ä¸æ˜¯å¯¹å•çº¯çš„æ•´æ•°è¿›è¡Œæ’åºï¼Œè€Œæ˜¯ä¸€ç»„<code>å¯¹è±¡</code>ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å¯¹è±¡çš„<code>æŸä¸ªKEY</code>è¿›è¡Œæ’åºã€‚æ¥çœ‹ä¸€ä¸ªå°ä¾‹å­â€”â€”</p><blockquote><p>å‡å¦‚è¯´ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç”µå•†äº¤æ˜“ç³»ç»Ÿä¸­çš„è®¢å•æ’åºã€‚è®¢å•æœ‰ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯ä¸‹å•æ—¶é—´ï¼Œä¸€ä¸ªæ˜¯è®¢å•é‡‘é¢ã€‚å¦‚æœæˆ‘ä»¬ç°åœ¨æœ‰10ä¸‡æ¡è®¢å•æ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›æŒ‰ç…§é‡‘é¢ä»å°åˆ°å¤§å¯¹è®¢å•æ•°æ®æ’åºã€‚å¯¹äºé‡‘é¢ç›¸åŒçš„è®¢å•ï¼Œæˆ‘ä»¬å¸Œæœ›æŒ‰ç…§è®¢å•æ—¶é—´æ’åºï¼Œå¯¹äºè¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåšï¼Ÿ</p><p>å¾ˆæ˜æ˜¾ï¼Œå…ˆå…¥ä¸ºä¸»çš„ä¸€ç§æ–¹å¼æ˜¯ï¼Œé¦–å…ˆæ ¹æ®è®¢å•é‡‘é¢è¿›è¡Œæ’åºï¼Œåœ¨å¯¹è®¢å•é‡‘é¢ç›¸åŒçš„åŒºé—´æŒ‰ç…§æ—¶é—´æ’åºã€‚</p><p>å¾ˆè‡ªç„¶æ²¡é”™ï¼Œä½†åœ¨æ¯ä¸ªå°åŒºé—´è¦äº¤æ¢å…ƒç´ çš„æ¬¡æ•°å¤ªå¤šäº†ï¼Œæœ‰æ²¡æœ‰æ€§èƒ½æ›´é«˜çš„æ–¹æ³•å‘¢ï¼Ÿ</p><p><strong>æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ï¼Œä¹Ÿå°±æ˜¯å…ˆå¯¹è®¢å•æŒ‰ç…§æ—¶é—´è¿›è¡Œæ’åºï¼Œå†ä½¿ç”¨ç¨³å®šæ’åºç®—æ³•æŒ‰ç…§é‡‘é¢è¿›è¡Œæ’åºï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±èƒ½ç¡®ä¿é‡‘é¢ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œåœ¨æ’åºåçš„å‰åé¡ºåºä¸å˜ã€‚</strong></p></blockquote><h2 id="1-3-å†’æ³¡æ’åº"><a href="#1-3-å†’æ³¡æ’åº" class="headerlink" title="1.3 å†’æ³¡æ’åº"></a>1.3 å†’æ³¡æ’åº</h2><h3 id="1-3-1-å†’æ³¡æ’åºæ¦‚è¿°"><a href="#1-3-1-å†’æ³¡æ’åºæ¦‚è¿°" class="headerlink" title="1.3.1 å†’æ³¡æ’åºæ¦‚è¿°"></a>1.3.1 å†’æ³¡æ’åºæ¦‚è¿°</h3><p>å†’æ³¡æ’åºæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä¸æ»¡è¶³å¤§å°å…³ç³»ï¼Œåˆ™äº’æ¢ä½ç½®ï¼Œä¸€æ¬¡å†’æ³¡ä¼šè®©è‡³å°‘ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°å®ƒåº”è¯¥åœ¨çš„ä½ç½®ã€‚é‡å¤næ¬¡å³å¯å®Œæˆæ’åºã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹å…·ä½“çš„ä¾‹å­ï¼šå¯¹ä¸€ç»„æ•°æ®4,5,6,3,2,1ä»å°åˆ°å¤§è¿›è¡Œæ’åºã€‚</p><p>é‚£ä¹ˆç¬¬ä¸€æ¬¡å†’æ³¡çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262146406.png" alt="image-20231026214631316"></p><p>è¿™æ ·é‡å¤næ¬¡å³å¯å®Œæˆå†’æ³¡æ’åºã€‚ä½†è¿™æ ·çš„æ’åºæ–¹å¼æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå› ä¸ºåœ¨æŸæ¬¡å†’æ³¡åï¼Œæ•´ä¸ªæ•°æ®å·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œå°±ä¸éœ€è¦å†æ’åºã€‚æ‰€ä»¥æˆ‘ä»¬<code>éœ€è¦ä¸€ä¸ªæ ‡å¿—é‡æ¥æ ‡è¯†æœ‰åºçš„çŠ¶æ€</code>ï¼Œä¸‹é¢æ˜¯ä¼˜åŒ–åçš„ä»£ç â€”â€”</p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/**     * å†’æ³¡æ’åº     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ¯”è¾ƒn-1è¶Ÿ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//è¡¨æ˜æœ‰æ•°æ®äº¤æ¢</span>                    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//å¦‚æœæ²¡æœ‰æ•°æ®äº¤æ¢ï¼Œåˆ™é€€å‡º</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span>                <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="1-3-2-å†’æ³¡æ’åºçš„åˆ†æ"><a href="#1-3-2-å†’æ³¡æ’åºçš„åˆ†æ" class="headerlink" title="1.3.2 å†’æ³¡æ’åºçš„åˆ†æ"></a>1.3.2 å†’æ³¡æ’åºçš„åˆ†æ</h3><ol><li><p><code>åŸåœ°æ’åºç®—æ³•:</code>å†’æ³¡çš„è¿‡ç¨‹åªæ¶‰åŠç›¸é‚»ä¸¤ä¸ªå…ƒç´ çš„äº¤æ¢æ“ä½œï¼Œåªéœ€è¦å¸¸é‡çº§çš„ä¸´æ—¶ç©ºé—´ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸ºO(1),å³åŸåœ°æ’åºç®—æ³•ã€‚</p></li><li><p><code>ç¨³å®šçš„æ’åºç®—æ³•:</code>åœ¨æ¯”è¾ƒæ—¶ï¼Œç›¸ç­‰çš„å…ƒç´ ä¸éœ€è¦äº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥æ˜¯ç¨³å®šçš„æ’åºç®—æ³•</p></li><li><p><code>æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(n2):</code>æœ€å¥½æƒ…å†µå³æ˜¯æ•´ä¸ªæ•°æ®éƒ½æ˜¯æœ‰åºçš„ï¼Œåªéœ€è¦è¿›è¡Œä¸€æ¬¡å†’æ³¡å°±okäº†ï¼Œå³æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚åŒç†ï¼Œæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N2)ã€‚</p><p>é‚£å¹³å‡æ—¶é—´å¤æ‚åº¦å¦‚ä½•è®¡ç®—å‘¢?æŒ‰éƒ¨å°±ç­çš„è¯´ï¼Œåº”è¯¥è®¡ç®—<strong>æœŸæœ›</strong>ï¼Œä½†è§„æ¨¡å¤§çš„æ•°æ®ï¼Œè®¡ç®—æœŸæœ›æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œä¸ºäº†æ›´å¥½åœ°æè¿°å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬è¿™é‡Œå¼•å…¥<strong>æœ‰åºåº¦</strong>çš„æ¦‚å¿µã€‚</p><blockquote><p><strong>æœ‰åºåº¦æ˜¯æ•°ç»„ä¸­å…·æœ‰æœ‰åºå…³ç³»çš„å…ƒç´ å¯¹çš„ä¸ªæ•°</strong>ã€‚ç”¨æ•°å­¦è¡¨è¾¾å¼è¡¨ç¤ºå°±æ˜¯â€”â€”<br>$$<br>a[i]&gt;a[j],i&gt;j<br>$$</p></blockquote><p>åŒç†ï¼Œå‡å¦‚æœ‰6ä¸ªå…ƒç´ ï¼Œé‚£è¿™ç»„æ•°æ®çš„æ»¡åºåº¦å°±æ˜¯6<em>(6-1)/2,åº”ç”¨åˆ°æ›´å®½æ³›çš„èŒƒå›´ï¼Œæ»¡åºåº¦å¯ä»¥è¡¨ç¤ºä¸ºâ€”â€”<br>$$<br>n</em>(n-1)/2<br>$$<br>è‡ªç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°é€†åºåº¦çš„æ¦‚å¿µï¼š<code>é€†åºåº¦=æ»¡åºåº¦-æœ‰åºåº¦</code>ã€‚</p><p>æˆ‘ä»¬ç°åœ¨å†æ¥æè¿°å¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚æœ€åæƒ…å†µä¸‹ï¼Œæœ‰åºåº¦ä¸º0ï¼Œéœ€è¦è¿›è¡Œn<em>(n-1)/2æ¬¡äº¤æ¢ã€‚æœ€å¥½æƒ…å†µä¸‹ï¼Œæœ‰åºåº¦ä¸ºnï¼Œä¸éœ€è¦è¿›è¡Œäº¤æ¢ï¼Œåˆ™å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º<br>$$<br>n</em>   (n-1)/4<br>$$</p></li></ol><h2 id="1-4-æ’å…¥æ’åº"><a href="#1-4-æ’å…¥æ’åº" class="headerlink" title="1.4 æ’å…¥æ’åº"></a>1.4 æ’å…¥æ’åº</h2><h3 id="1-4-1-æ’å…¥æ’åºæ¦‚è¿°"><a href="#1-4-1-æ’å…¥æ’åºæ¦‚è¿°" class="headerlink" title="1.4.1 æ’å…¥æ’åºæ¦‚è¿°"></a>1.4.1 æ’å…¥æ’åºæ¦‚è¿°</h3><p>æ’å…¥æ’åºæ˜¯å€ŸåŠ©åŒºåˆ†<strong>å·²æ’åºåŒºé—´å’Œæœªæ’åºåŒºé—´</strong>çš„æ€è·¯æ¥å±•å¼€æè¿°çš„ã€‚</p><ul><li><input checked disabled type="checkbox"> æ’å…¥ç®—æ³•çš„<strong>æ ¸å¿ƒ</strong>æ˜¯<strong>å–æœªæ’åºåŒºé—´ä¸­çš„å…ƒç´ ï¼Œå°†å…¶æ’å…¥åˆ°å·²æ’åºåŒºé—´çš„åˆé€‚ä½ç½®ï¼Œå¹¶ä¿è¯å·²æ’åºåŒºé—´æ•°æ®ä¸€è‡´æœ‰åºã€‚</strong></li></ul><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¦æ’åºçš„æ•°æ®ä¸º<strong>4,5,6,1,3,2</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262146207.png" alt="image-20231026214648097"></p><p>æ’å…¥æ’åºåŒå†’æ³¡æ’åºï¼ŒåŒ…å«å…ƒç´ çš„æ¯”è¾ƒè¿›è€Œå…ƒç´ çš„ç§»åŠ¨ä¸¤ç§æ“ä½œï¼Œé‚£æˆ‘ä»¬å¦‚ä½•æè¿°éœ€è¦ç§»åŠ¨å…ƒç´ å¤šå°‘æ¬¡å‘¢ï¼Ÿ</p><p>è¿™é‡Œç›´æ¥ç»™å‡ºæ¦‚å¿µï¼Œ<code>ç§»åŠ¨æ¬¡æ•°å°±ç­‰äºé€†åºåº¦</code>ã€‚å½“ç„¶ï¼Œä¹Ÿå®¹æ˜“ç†è§£ï¼Œç§»åŠ¨å®Œæˆåé€†åºåº¦ä¸º0ï¼Œé‚£ä¹ˆç§»åŠ¨æ¬¡æ•°è‡ªç„¶ç­‰äºé€†åºåº¦ã€‚</p><p>æ¥çœ‹ä¸‹æ’å…¥æ’åºçš„ä»£ç â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * æ’å…¥æ’åº     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//éœ€è¦å°†æœªæ’åºåŒºé—´çš„n-1ä¸ªå…ƒç´ æ”¾ç½®åˆ°å·²æ’åºåŒºé—´åˆé€‚çš„ä½ç½®</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//è®°å½•è¦æ’åºçš„å€¼</span>            <span class="token keyword">int</span> value <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//å·²æ’åºåŒºé—´</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>j<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>                    a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//æ’å…¥æ•°æ®</span>            a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="1-4-2-æ’å…¥æ’åºåˆ†æ"><a href="#1-4-2-æ’å…¥æ’åºåˆ†æ" class="headerlink" title="1.4.2 æ’å…¥æ’åºåˆ†æ"></a>1.4.2 æ’å…¥æ’åºåˆ†æ</h3><ul><li><code>åŸåœ°æ’åºç®—æ³•ï¼š</code>æ¯”è¾ƒæ•°æ®äº¤æ¢å…ƒç´ æ—¶åªéœ€è¦å¸¸æ•°çº§çš„ç©ºé—´ï¼Œå³ç©ºé—´å¤æ‚åº¦ä¸ºO(1);</li><li><code>ç¨³å®šçš„æ’åºç®—æ³•</code>ï¼š  å½“é‡åˆ°ç›¸åŒå…ƒç´ æ—¶ï¼Œ<strong>åªéœ€è¦å°†æœªæ’åºæ•°æ®ä¸­çš„å…ƒç´ æ’å…¥åˆ°å·²æ’åºç›¸åŒå…ƒç´ çš„åé¢å³å¯</strong>ï¼Œå› æ­¤ä¹Ÿæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚</li><li><code>æ—¶é—´å¤æ‚åº¦ï¼š</code>æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸º<strong>O(N)</strong>,æœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º<strong>O(N2)</strong>.åœ¨åˆ†æå¹³å‡æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œå¯ä»¥çœ‹åšæ˜¯å°†n-1ä¸ªæ•°æ®åˆ†åˆ«æ’å…¥åˆ°æœ‰åºçš„æ•°ç»„ä¸­å»ï¼Œä¸€æ¬¡è¿™æ ·çš„è¿‡ç¨‹æ—¶é—´å¤æ‚åº¦ä¸ºO(N),é‚£ä¹ˆæ•´ä¸ªè¿‡ç¨‹çš„å¹³å‡æ—¶é—´å¤æ‚åº¦å°±ä¸º<strong>O(N2)</strong></li></ul><h2 id="1-5-é€‰æ‹©æ’åº"><a href="#1-5-é€‰æ‹©æ’åº" class="headerlink" title="1.5 é€‰æ‹©æ’åº"></a>1.5 é€‰æ‹©æ’åº</h2><h3 id="1-5-1-é€‰æ‹©æ’åºæ¦‚è¿°"><a href="#1-5-1-é€‰æ‹©æ’åºæ¦‚è¿°" class="headerlink" title="1.5.1 é€‰æ‹©æ’åºæ¦‚è¿°"></a>1.5.1 é€‰æ‹©æ’åºæ¦‚è¿°</h3><p>é€‰æ‹©æ’åºçš„<strong>æ€è·¯ç±»ä¼¼äºæ’å…¥æ’åº</strong>ï¼ŒåŒæ ·åŸºäº<strong>å·²æ’åºåŒºé—´å’Œæœªæ’åºåŒºé—´</strong>çš„æ€è·¯ã€‚ä¸åŒçš„æ˜¯ï¼Œé€‰æ‹©æ’åºä¾æ¬¡æ‰¾å‡º<strong>æœªæ’åºåŒºé—´ä¸­çš„æœ€å°å…ƒç´ </strong>ï¼Œ<strong>å°†å…¶ä¸æœªæ’åºåŒºé—´çš„ç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢ä½ç½®,æ’å¥½åºçš„éƒ¨åˆ†ä½œä¸ºå·²æ’åºåŒºé—´ã€‚</strong></p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„å°ä¾‹å­â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262147378.png" alt="image-20231026214707288"><br>å†æ¥çœ‹ä¸‹å…·ä½“çš„ä»£ç å®ç°â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*** é€‰æ‹©æ’åº*/</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ¯ä¸€è¶Ÿæœ€å°å€¼çš„åˆå§‹å€¼</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">int</span> min <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//æ ‡å¿—ä½</span>            <span class="token keyword">boolean</span> isSwap <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//è®°å½•æœ€å°å€¼çš„ä¸‹æ ‡</span>            <span class="token keyword">int</span> index <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//å­˜åœ¨æ¯”æœ€å°å€¼æ›´å°çš„å€¼</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>min <span class="token operator">></span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    min <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//è®°å½•æ–°çš„æœ€å°å€¼çš„ä¸‹æ ‡</span>                    index <span class="token operator">=</span> j<span class="token punctuation">;</span>                    isSwap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//è¯¥è¶Ÿä¸­å­˜åœ¨éœ€è¦äº’æ¢ä½ç½®çš„å…ƒç´ </span>            <span class="token keyword">if</span><span class="token punctuation">(</span>isSwap<span class="token punctuation">)</span><span class="token punctuation">{</span>                a<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> min<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="1-5-2-é€‰æ‹©æ’åºåˆ†æ"><a href="#1-5-2-é€‰æ‹©æ’åºåˆ†æ" class="headerlink" title="1.5.2 é€‰æ‹©æ’åºåˆ†æ"></a>1.5.2 é€‰æ‹©æ’åºåˆ†æ</h3><ul><li><code>åŸåœ°æ’åºç®—æ³•ï¼š</code>ä»£ç æ‰§è¡Œæ—¶åªéœ€è¦å¸¸æ•°çº§çš„ç©ºé—´ï¼Œå³ç©ºé—´å¤æ‚åº¦ä¸ºO(1).</li><li><code>ä¸ç¨³å®šçš„ç®—æ³•ï¼š</code>äº¤æ¢ä½ç½®å¯¼è‡´æœ‰å¯èƒ½é¢ å€’ç›¸åŒå€¼çš„ç›¸å¯¹ä½ç½®ï¼Œæ‰€ä»¥æ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚</li><li><code>æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</code>æœ€å¥½ï¼Œæœ€åï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(N2).</li></ul><hr><h1 id="äºŒã€æ’åºä¸‹"><a href="#äºŒã€æ’åºä¸‹" class="headerlink" title="äºŒã€æ’åºä¸‹"></a>äºŒã€æ’åºä¸‹</h1><h2 id="æ‘˜è¦-1"><a href="#æ‘˜è¦-1" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>åœ¨æ’åºä¸Šä¸­æåŠåˆ°äº†å†’æ³¡æ’åºï¼Œé€‰æ‹©æ’åºï¼Œæ’å…¥æ’åºã€‚è¿™ä¸‰ç§æ’åºæ˜¯å› ä¸ºæ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œæ‰€ä»¥<strong>é€‚ç”¨äºè§„æ¨¡å°</strong>çš„æ•°æ®æ’åºï¼Œå› ä¸ºy = x 2æ›²çº¿çš„æ•°æ®è§„æ¨¡è¾ƒå°æ—¶å¢é•¿è¶‹åŠ¿å¹¶ä¸å¿«ã€‚ä½†åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼ŒåŠ¨è¾„ä¸Šä¸‡çš„æ•°æ®æ’åºï¼Œæˆ‘ä»¬åº”è¯¥æ€æ ·å¤„ç†å‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ°<strong>æ—¶é—´å¤æ‚åº¦ç›¸å¯¹è¾ƒå°çš„å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åº</strong>ï¼Œè¿™ä¸¤ç§æ’åºéƒ½æ˜¯ä½¿ç”¨<strong>åˆ†æ²»çš„ç¼–ç¨‹æ€æƒ³</strong>ï¼Œç†è§£èµ·æ¥ç›¸å¯¹å›°éš¾ä¸€ç‚¹ï¼Œä½†åœ¨é¢è¯•æ—¶ï¼Œå‡ºäºä»–ä»¬æ€§èƒ½æŠ˜ä¸­åˆé€‚ç”¨èŒƒå›´å¹¿çš„ç‰¹ç‚¹ï¼Œå› æ­¤æˆä¸º<strong>é¢è¯•çš„å® å„¿</strong>ã€‚å¥½å•¦ï¼Œæ¥ä¸‹æ¥è¿›å…¥æ­£é¢˜â€”â€”</p><h2 id="2-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"><a href="#2-1-ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹" class="headerlink" title="2.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹"></a>2.1 ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹</h2><p><code>å¦‚ä½•åœ¨O(n)çš„æ—¶é—´å¤æ‚åº¦å†…æŸ¥æ‰¾ä¸€ä¸ªæ— åºæ•°ç»„ä¸­çš„ç¬¬Kå¤§å…ƒç´ ï¼Ÿ</code></p><p>ä¹çœ‹ä¸Šå»ï¼Œä¸ç®¡æ˜¯å¿«æ’è¿˜æ˜¯å½’å¹¶æ’åºï¼Œä»–ä»¬çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(NlogN),ä½†ä½¿ç”¨åˆ†åŒºæŠ€å·§çš„å¿«é€Ÿæ’åº<strong>åœ¨åˆå¹¶ä¹‹å‰å°±å·²ç»æ˜¯ä¸€ä¸ªæœ‰åºçš„æ•°æ®é›†äº†ã€‚</strong></p><p>å‡è®¾åŸå§‹çš„æ•°æ®é›†æ˜¯è¿™æ ·çš„ï¼š<code>4,2,5,12,3</code>,è¦æ‰¾åˆ°ç¬¬3å¤§çš„å…ƒç´ 4.</p><p>æˆ‘ä»¬å°†æ•°æ®å·²åˆ†åŒºç‚¹ä¸ºç•Œåˆ†ä¸ºä¸‰ä¸ªåŒºé—´ï¼Œå¦‚æœKç­‰äºåˆ†åŒºç‚¹ï¼Œåˆ™ç›´æ¥è¿”å›å³å¯ï¼Œå‡è®¾ä¸ç­‰äºï¼Œæˆ‘ä»¬å°±å»<strong>é€’å½’çš„åˆ†æ²»çš„å¦å¤–ä¸¤ä¸ªåŒºé—´ï¼Œç›´åˆ°åŒºé—´ç¼©å°ä¸º1.</strong></p><p>æ¥è®¡ç®—ä¸‹æ—¶é—´å¤æ‚åº¦ï¼šé¦–å…ˆéå†æ•°æ®é›†æ‰¾åˆ°åˆ†åŒºç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n),ç¬¬äºŒæ¬¡åªéœ€è¦åˆ†æ²»ä¸€åŠçš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ—¶é—´å¤æ‚åº¦ä¸ºO(n/2).é€’æ¨å¾—åˆ°ç¬¬næ¬¡åˆ†æ²»éœ€è¦çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n/2çš„n-1æ¬¡æ–¹)ï¼Œæœ€åä¸€æ¬¡ä¸éœ€è¦åˆ†æ²»ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼ŒæŠŠè¿™äº›æ—¶é—´å¤æ‚åº¦åŠ èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªç­‰æ¯”æ•°åˆ—çš„æ±‚å’Œï¼Œ<strong>æ±‚å’Œç»“æœä¸º2n-1</strong>,ä¹Ÿå°±æ˜¯æ—¶é—´å¤æ‚åº¦ä¸ºO(n).</p><h2 id="2-2-å½’å¹¶æ’åº"><a href="#2-2-å½’å¹¶æ’åº" class="headerlink" title="2.2 å½’å¹¶æ’åº"></a>2.2 å½’å¹¶æ’åº</h2><h3 id="2-2-1-æ¦‚è¿°"><a href="#2-2-1-æ¦‚è¿°" class="headerlink" title="2.2.1 æ¦‚è¿°"></a>2.2.1 æ¦‚è¿°</h3><p>å½’å¹¶æ’åºæ˜¯ç”¨<strong>åˆ†æ²»</strong>çš„æ€æƒ³ï¼Œå°†å¤§é—®é¢˜åˆ†æˆå°é—®é¢˜ï¼Œå°é—®é¢˜è§£å†³äº†ï¼Œå¤§é—®é¢˜è‡ªç„¶ä¹Ÿå°±è§£å†³äº†ã€‚</p><p>å½’å¹¶æ’åºæ—¶ï¼Œé¦–å…ˆæ‰§è¡Œ<strong>é€’</strong>ï¼Œå°†æ•°ç»„ä»ä¸­é—´åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¯¹è¿™ä¸¤éƒ¨åˆ†<strong>åˆ†åˆ«è¿›è¡Œåˆ†æ²»ï¼Œç›´åˆ°åŒºé—´ä¸º1ä¸ºæ­¢</strong>ã€‚ç„¶åæ˜¯<strong>å½’</strong>çš„è¿‡ç¨‹ï¼Œ<strong>ä¾æ¬¡æ’åºåˆå¹¶æ¯ä¸ªå°åŒºé—´æˆå¤§åŒºé—´ï¼Œç›´åˆ°å¾—åˆ°æ’å¥½åºçš„æ•°æ®é›†</strong>ã€‚</p><p>è¿™æ ·è¯´æ€»å½’æ˜¯ä¸å½¢è±¡çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å›¾è§£â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262147188.png" alt="image-20231026214730104"></p><h3 id="2-2-2-ä»£ç å®ç°"><a href="#2-2-2-ä»£ç å®ç°" class="headerlink" title="2.2.2 ä»£ç å®ç°"></a>2.2.2 ä»£ç å®ç°</h3><p>æœ‰äº†å¤§è‡´çš„æ€è·¯ï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨é€’å½’å®ç°å½’å¹¶æ’åºï¼Œæ—¢ç„¶æ˜¯é€’å½’é—®é¢˜ï¼Œé‚£å°±å…ˆæ‰¾é€’å½’ç»ˆæ­¢æ¡ä»¶å’Œé€’å½’å…¬å¼å’¯â€”â€”</p><ul><li><p><code>é€’å½’ç»ˆæ­¢æ¡ä»¶</code>ï¼š<br>$$<br>merge_sort(pâ€¦r) = merge(merge_sort(p,q),merge_sort(q+1,r))<br>$$</p></li><li><p><code>é€’å½’å…¬å¼</code>ï¼š<br>$$<br>p&gt;=r<br>$$</p></li></ul><p>æˆ‘ä»¬å†å°†å…¶è½¬åŒ–ä¸ºä»£ç â€”â€”</p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/**     * å½’å¹¶æ’åº     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">mergeSort_s</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> a<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mergeSort_s</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> to<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//é€’å½’ç»ˆæ­¢æ¡ä»¶</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>from <span class="token operator">>=</span> to<span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¾—åˆ°è¯¥åŒºé—´çš„ä¸­é—´ä½ç½®</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>from<span class="token operator">+</span>to<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åˆ†æ²»é€’å½’</span>        <span class="token function">mergeSort_s</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> from<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">mergeSort_s</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>from<span class="token punctuation">,</span>mid<span class="token punctuation">,</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„å¹¶è¿”å›     * @param a     * @param from     * @param mid     * @param to     * @return     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> mid<span class="token punctuation">,</span> <span class="token keyword">int</span> to<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ç”³è¯·ä¸€ä¸ªä¸´æ—¶æ•°ç»„æ¥å­˜å‚¨åˆå¹¶ç»“æœ</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>to<span class="token operator">-</span>from<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åˆå¹¶</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> from<span class="token punctuation">,</span>j <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>mid <span class="token operator">&amp;&amp;</span> j<span class="token operator">&lt;=</span>to<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                tmp<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span><span class="token punctuation">{</span>                tmp<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//ä¸‹é¢è¿™å¥çš„æ€è·¯å¥½å‰å®³ï¼</span>        <span class="token keyword">int</span> start <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">int</span> end <span class="token operator">=</span> mid <span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å³è¾¹è¿˜æœ‰å‰©ä½™å…ƒç´ </span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> to<span class="token punctuation">)</span><span class="token punctuation">{</span>            start <span class="token operator">=</span> j<span class="token punctuation">;</span>            end <span class="token operator">=</span> to<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//æ‹·è´å‰©ä½™å…ƒç´ åˆ°tmpä¸­</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>start <span class="token operator">&lt;=</span> end<span class="token punctuation">)</span><span class="token punctuation">{</span>            tmp<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>start<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//æ‹·è´ä¸´æ—¶æ•°ç»„åˆ°aä¸­</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>to<span class="token operator">-</span>from<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            a<span class="token punctuation">[</span>from<span class="token operator">+</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿™é‡ŒåŠ ç‚¹ç§è´§ï¼Œåœ¨å†™å½’å¹¶æ’åºä»£ç çš„æ—¶å€™ï¼ŒçŠ¯äº†ä¸€ä¸ªä»æ¥æ²¡æœ‰å»ä¸»åŠ¨æ„è¯†çš„è‡´å‘½é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œelseè¦ä¸è¦å†™ï¼Ÿæˆ‘ä»¬å…ˆåˆ†æä¸€æ®µä»£ç â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        res <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™æ˜¯ä¸€æ®µå¾ˆç®€æ´çš„ä»£ç ï¼Œå°ä¼™ä¼´ä»¬è®¤ä¸ºä¼šè¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ä»¥å‰æœ‰äº›å®Œæ•´çš„ifä¸elseçš„ä¹ æƒ¯ï¼Œä»Šå¤©çŠ¯æ‡’äº†ï¼Œç´¢æ€§æ²¡æœ‰å†™elseï¼Œå› ä¸ºæˆ‘è®¤ä¸ºifä¹‹åéƒ¨åˆ†çš„ç¬¬ä¸€è¡Œå°±æ˜¯elseçš„ä»£ç ï¼Œä½†æ˜¯çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ</p><p><code>è¿™é‡Œæˆ‘æ²¡æœ‰å†™elseï¼Œç³»ç»Ÿä¼šè®¤ä¸ºelseä¸æ‰§è¡Œä»»ä½•äº‹æƒ…ï¼Œè€Œä¸æ˜¯é»˜è®¤æ‰§è¡Œifè¯­å¥å—åçš„ç¬¬ä¸€è¡Œä»£ç ã€‚</code></p><p>é‚£ä¹ˆæ€æ ·çš„ç¼–ç¨‹ä¹ æƒ¯æ›´å€¼å¾—æå€¡å‘¢ï¼Ÿ</p><p>å…ˆç»™å‡ºç»“è®ºï¼Œ<strong>ifå’Œelseè¦å†™å°±å†™æˆå¯¹ï¼</strong>ï¼Œå› ä¸ºè¿™æ ·å¯¹æµ‹è¯•äººå‘˜å‹å¥½ä¸€äº›ï¼Œå¦å¤–æ£€æµ‹bugä¹Ÿå®¹æ˜“æ£€æµ‹å‡ºæ¥ï¼Œæˆ‘ä»¬å†å»¶ä¼¸ä¸€ä¸‹ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨ifï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨if else.</p><blockquote><ul><li>ifç”¨äºé€»è¾‘è¿½åŠ </li><li>if elseç”¨äºé€»è¾‘åˆ†æ”¯</li></ul></blockquote><p>å¦å¤–ï¼Œé’ˆå¯¹ç¡¬ä»¶çš„è®¾è®¡ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡ºä¸€ä¸ªå°æŠ€å·§ï¼šä¸ºçœŸçš„æ¡ä»¶å†™åœ¨å‰é¢ã€‚</p><p>è¿™æ˜¯å› ä¸ºç°ä»£CPUå¹¶ä¸ä¼šåšé€»è¾‘åˆ¤æ–­ï¼Œè€Œæ˜¯é¡ºåºæ‰§è¡Œï¼Œå‡å¦‚å‘ç°ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ä¼šå›æ»šå¹¶æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ã€‚æ‰€ä»¥åœ¨å†™if,elseçš„å‰æä¸‹å°½å¯èƒ½å°†ä¸ºçœŸçš„æ¡ä»¶å†™åœ¨å‰é¢ã€‚</p><h3 id="2-2-3-æ€§èƒ½åˆ†æ"><a href="#2-2-3-æ€§èƒ½åˆ†æ" class="headerlink" title="2.2.3 æ€§èƒ½åˆ†æ"></a>2.2.3 æ€§èƒ½åˆ†æ</h3><ul><li><p><code>ç¨³å®šçš„æ’åºç®—æ³•ï¼š</code>å½’å¹¶æ’åºçš„ç¨³å®šä¸å¦å–å†³äºåˆå¹¶çš„æ–¹å¼ï¼Œåœ¨åˆå¹¶æ—¶é’ˆå¯¹ç›¸åŒå…ƒç´ ï¼Œä¸æ”¹å˜ä»–ä»¬çš„ç›¸å¯¹ä½ç½®å³å¯ã€‚æ‰€ä»¥å½’å¹¶æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚</p></li><li><p><code>æ—¶é—´å¤æ‚åº¦åˆ†æ</code>ï¼šè¿™é‡Œå…ˆç»™å‡ºä¸€ä¸ªç»“è®ºï¼š<strong>ä¸ä»…é€’å½’æ±‚è§£çš„é—®é¢˜å¯ä»¥å†™æˆé€’æ¨å…¬å¼ï¼Œé€’å½’ä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿå¯ä»¥å†™æˆé€’æ¨å…¬å¼ã€‚</strong>å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦åŒ…æ‹¬å­é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦ä¸åˆå¹¶ä»£ç çš„æ—¶é—´å¤æ‚åº¦<strong>åŠ å’Œ</strong>ã€‚å‡è®¾åŒ…æ‹¬bå’Œcä¸¤ä¸ªå­é—®é¢˜ï¼Œåˆ™ï¼š<br>$$<br>T(a)=T(b)+T(c)+K<br>$$<br>è¿™é‡Œçš„KæŒ‡çš„æ˜¯åˆå¹¶çš„æ—¶é—´å¤æ‚åº¦ï¼Œå³ä¸ºO(N).åˆå› ä¸ºä¸¤ä¸ªå­é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(N/2),åˆ™å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š<br>$$<br>T(1) = C\\</p><p>T(n) = 2<em>T(N/2)+N n&gt;1<br>$$<br>æˆ‘ä»¬æ±‚è§£åå¯ä»¥å¾—åˆ°â€”â€”<br>$$<br>T(n) = 2</em>T(n/2) + n\<br>   = 2<em>(2</em>T(n/4) + n/2) + n = 4<em>T(n/4) + 2</em>n\<br>   = 4<em>(2</em>T(n/8) + n/4) + 2<em>n = 8</em>T(n/8) + 3<em>n\<br>   = 8</em>(2<em>T(n/16) + n/8) + 3</em>n = 16<em>T(n/16) + 4</em>n\<br>   â€¦â€¦\<br>   = 2^k <em> T(n/2^k) + k </em> n\<br>   â€¦â€¦<br>$$<br><strong>å½“T(n/2^k) = T(1)æ—¶ï¼Œå³k = log2Nï¼Œå°†å…¶å¸¦å…¥ä¸Šå¼ï¼Œå¯ä»¥å¾—åˆ°ï¼ŒT(n)=Cn+nlogn,å³å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn).</strong></p></li><li><p><code>ä¸æ˜¯åŸåœ°æ’åºç®—æ³•</code>:å½’å¹¶æ’åºç”¨åˆ°é€’å½’çš„æ€æƒ³ï¼Œæ‰€ä»¥è‡ªç„¶ä¸ä¼šæ˜¯åŸåœ°æ’åºç®—æ³•ã€‚é‚£å®ƒçš„ç©ºé—´å¤æ‚åº¦æ˜¯ä»€ä¹ˆå‘¢?</p><blockquote><p>åœ¨ä»»æ„æ—¶åˆ»ï¼ŒCPU åªä¼šæœ‰ä¸€ä¸ªå‡½æ•°åœ¨æ‰§è¡Œï¼Œä¹Ÿå°±åªä¼šæœ‰ä¸€ä¸ªä¸´æ—¶çš„å†…å­˜ç©ºé—´åœ¨ä½¿ç”¨ã€‚ä¸´æ—¶å†…å­˜ç©ºé—´æœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡ n ä¸ªæ•°æ®çš„å¤§å°ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p></blockquote></li></ul><h2 id="2-3-å¿«é€Ÿæ’åº"><a href="#2-3-å¿«é€Ÿæ’åº" class="headerlink" title="2.3 å¿«é€Ÿæ’åº"></a>2.3 å¿«é€Ÿæ’åº</h2><h3 id="2-3-1-æ¦‚è¿°"><a href="#2-3-1-æ¦‚è¿°" class="headerlink" title="2.3.1 æ¦‚è¿°"></a>2.3.1 æ¦‚è¿°</h3><p>Java1.8æºç ä¸­Arrays.sort()æ’åºå‡½æ•°ä½¿ç”¨å¿«é€Ÿæ’åºç®—æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262144915.png" alt="image-20210707230458288"></p><p>å¿«é€Ÿæ’åºæ˜¯ç”¨<strong>é€’å½’ä¸åˆ†æ²»</strong>ï¼Œå°†æ•°æ®é›†æŒ‰ç…§<strong>æŸä¸ªåˆ†åŒºç‚¹</strong>åˆ†ä¸º<strong>æ¯”åˆ†åŒºç‚¹å°çš„åŒºé—´</strong>å’Œ<strong>æ¯”åˆ†åŒºé—´å¤§çš„åŒºé—´</strong>ï¼Œç„¶ååœ¨åŒºé—´å†…å†<strong>é€’å½’</strong>è¿™é¡¹æ“ä½œ<strong>ç›´åˆ°åŒºé—´å†…åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæ­¢</strong>ã€‚</p><p>æ—¢ç„¶æ˜¯é€’å½’ï¼Œæˆ‘ä»¬åŒæ ·å†™å‡º<strong>é€’å½’ç»ˆæ­¢æ¡ä»¶</strong>å’Œ<strong>é€’æ¨å…¬å¼</strong>â€”â€”<br>$$<br>é€’æ¨å…¬å¼ï¼š<br>quick_sort(pâ€¦r) = quick_sort(pâ€¦q-1) + quick_sort(q+1â€¦ r)<br>\<br>ç»ˆæ­¢æ¡ä»¶ï¼š<br>p &gt;= r<br>$$<br>åˆ°è¿™ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰å‡ºé€‚åˆçš„åˆ†åŒºç‚¹å³å¯ï¼Œé€šå¸¸å°†<strong>åŒºé—´å†…çš„æœ€åä¸€ä¸ªå…ƒç´ </strong>ä½œä¸ºåˆ†åŒºç‚¹ï¼Œç„¶åå°†æ¯”åˆ†åŒºç‚¹å°çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼ŒæŠŠæ¯”åˆ†åŒºç‚¹å¤§çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚</p><p>æ€è·¯å®Œå…¨åˆç†ï¼Œä½†å¹¶ä¸ä¼˜é›…ï¼Œå› ä¸ºè¿™æ„å‘³ç€éœ€è¦é¢å¤–çš„ç©ºé—´ã€‚é‚£æ€æ ·æ‰èƒ½ä¸ç”³è¯·é¢å¤–ç©ºé—´å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å€ŸåŠ©é€‰æ‹©æ’åºçš„æ€è·¯ï¼Œå³æ ¸å¿ƒæ˜¯<strong>äº¤æ¢å…ƒç´ </strong>ã€‚</p><p>é‚£å½’å¹¶ä¸å¿«æ’æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå½’å¹¶æ’åºçš„å¤„ç†è¿‡ç¨‹æ˜¯è‡ªä¸‹å¾€ä¸Šçš„ï¼Œè€Œå¿«æ’åˆ™æ˜¯è‡ªä¸Šå¾€ä¸‹çš„ã€‚</p><p>æˆ‘ä»¬é€šè¿‡å›¾è§£æ¥è®¤è¯†æ’åºçš„è¿‡ç¨‹â€”â€”</p><p><img src="https://img-blog.csdnimg.cn/img_convert/158c9e4dc48b12dfdbfb1ea6fe8e785c.png" alt="image-20210215195133829"></p><h3 id="2-3-2-ä»£ç å®ç°"><a href="#2-3-2-ä»£ç å®ç°" class="headerlink" title="2.3.2 ä»£ç å®ç°"></a>2.3.2 ä»£ç å®ç°</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * å¿«é€Ÿæ’åº     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">quickSort_c</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">quickSort_c</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> to<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>from <span class="token operator">>=</span> to<span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>from<span class="token punctuation">,</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">quickSort_c</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>from<span class="token punctuation">,</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">quickSort_c</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åˆ†åŒºå‡½æ•°     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> to<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å°†æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåˆ†åŒºç‚¹</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> a<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> from<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>from<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>to<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//å°äºåˆ†ç•Œç‚¹ï¼Œåˆ™ä½¿ç”¨äº¤æ¢çš„æ–¹å¼å°†å…ƒç´ æ”¾åˆ°å·²æ’åºåŒºé—´</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> pivot<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//</span>                <span class="token operator">++</span>i<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token keyword">return</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h3 id="2-3-3-æ€§èƒ½åˆ†æ"><a href="#2-3-3-æ€§èƒ½åˆ†æ" class="headerlink" title="2.3.3 æ€§èƒ½åˆ†æ"></a>2.3.3 æ€§èƒ½åˆ†æ</h3><p>è¿™é‡Œä¸å†æ¨åˆ°å…·ä½“è¿‡ç¨‹ï¼Œç›´æ¥ç»™å‡ºç»“è®ºâ€”â€”</p><ul><li><input checked disabled type="checkbox"> <code>å½’å¹¶æ’åºæ˜¯ä¸€ç§ä¸ç¨³å®šçš„åŸåœ°æ’åºç®—æ³•ï¼Œå®ƒå¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn),åªæœ‰ä¸ªåˆ«æƒ…å†µä¸‹æ‰ä¼šé€€åŒ–ä¸ºO(n2)</code></li></ul><hr><h1 id="ä¸‰-ã€çº¿æ€§æ’åºåˆ†ææ€»ç»“"><a href="#ä¸‰-ã€çº¿æ€§æ’åºåˆ†ææ€»ç»“" class="headerlink" title="ä¸‰.ã€çº¿æ€§æ’åºåˆ†ææ€»ç»“"></a>ä¸‰.ã€çº¿æ€§æ’åºåˆ†ææ€»ç»“</h1><h2 id="3-1-å‰è¨€"><a href="#3-1-å‰è¨€" class="headerlink" title="3.1 å‰è¨€"></a>3.1 å‰è¨€</h2><p>åœ¨å·²ç»å­¦ä¹ äº†äº”ç§åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä»è¦ç»§ç»­å­¦ä¹ <strong>ä¸‰ç§ç‰¹å®šåœºæ™¯ä¸‹æ›´ä¼˜çš„ä¸åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•</strong>ï¼Œé‚£æˆ‘ä»¬è‚¯å®šä¼šå›°æƒ‘ï¼Œä¸ºä»€ä¹ˆä¸åŸºäºæ¯”è¾ƒçš„ç®—æ³•åœ¨æŸäº›åœºæ™¯ä¸‹æ€§èƒ½æ›´ä¼˜å‘¢ï¼Œæ¢å¥è¯è¯´ï¼ŒåŸºäºæ¯”è¾ƒçš„ç®—æ³•æœ‰ä»€ä¹ˆä¸èƒ½é€¾è¶Šçš„å¤©èŠ±æ¿å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦å¼•å…¥CBAç†è®ºï¼š<code>ä»»ä½•åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•çš„æ€§èƒ½å¤©èŠ±æ¿å°±æ˜¯O(nlogn)</code>.æˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹è¿™ä¸ªç»“è®ºæ˜¯å¦‚ä½•å¾—å‡ºçš„â€”â€”</p><blockquote><ul><li><input checked disabled type="checkbox"> æ¥è‡ªï¼š<a href="https://yfsyfs.github.io/2019/05/25/CBA%E7%90%86%E8%AE%BA-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9F%BA%E4%BA%8E%E6%AF%94%E8%BE%83%E7%9A%84%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%A7%E8%83%BD%E6%9E%81%E9%99%90%E6%98%AFO-nlogn/" target="_blank" rel="noopener">https://yfsyfs.github.io/2019/05/25/CBA%E7%90%86%E8%AE%BA-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9F%BA%E4%BA%8E%E6%AF%94%E8%BE%83%E7%9A%84%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%A7%E8%83%BD%E6%9E%81%E9%99%90%E6%98%AFO-nlogn/</a></li></ul><p>åŸå› å¾ˆç®€å•, nä¸ªå…ƒç´ çš„å…¨æ’åˆ—æ˜¯<code>n!.</code> è€Œæœ€ç»ˆæ’åºçš„ç»“æœåªæ˜¯å…¶ä¸­ä¸€ç§ï¼ˆä¸€æ£µå«æœ‰n!ä¸ªå¶å­èŠ‚ç‚¹çš„<code>äºŒå‰æ ‘</code>ï¼‰. æ¯æ¬¡æ¯”è¾ƒ, æˆ‘ä»¬å¯ä»¥ç æ‰ä¸€åŠçš„å…ƒç´ . æ‰€ä»¥æ¯”è¾ƒçš„æ¬¡æ•°å°±æ˜¯æ ‘çš„é«˜åº¦.è€Œæ­¤æ ‘çš„é«˜åº¦æ˜¯<br>$$<br>\log_2n!<br>$$<br>ç”±åˆ†ææ•°å­¦ä¸­çš„<code>Stirlingå…¬å¼</code>ä¾¿çŸ¥.é€Ÿåº¦ä¸å¯èƒ½çªç ´NlogN.</p></blockquote><p>æ—¢ç„¶æ˜¯åŸºå› é™åˆ¶ï¼Œé‚£æˆ‘ä»¬å°±æœ‰å¿…è¦å¦è¾Ÿè¹Šå¾„ï¼Œå­¦ä¹ ä¸€ä¸‹<strong>æ—¶é—´å¤æ‚åº¦ä¸ºO(N)</strong>çš„çº¿æ€§æ’åºå’¯ã€‚</p><h2 id="3-2-æ¡¶æ’åº"><a href="#3-2-æ¡¶æ’åº" class="headerlink" title="3.2 æ¡¶æ’åº"></a>3.2 æ¡¶æ’åº</h2><h3 id="3-2-1-æ¦‚è¿°"><a href="#3-2-1-æ¦‚è¿°" class="headerlink" title="3.2.1 æ¦‚è¿°"></a>3.2.1 æ¦‚è¿°</h3><p>è¿™ä¸‰ç§æ’åºæ–¹å¼éƒ½ä¼šç”¨åˆ°æ¡¶ï¼Œè€Œæ¡¶æ’åºçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†<code>è¦æ’åºçš„æ•°æ®å‘åˆ°å‡ ä¸ªæœ‰åºçš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶é‡Œçš„æ•°æ®å†å•ç‹¬è¿›è¡Œæ’åºï¼Œæ’å®Œåºåå†å°†æ¯ä¸ªæ¡¶ä¸­çš„æ•°æ®æŒ‰ç…§é¡ºåºä¾æ¬¡å–å‡ºï¼Œç»„æˆçš„åºåˆ—å°±æ˜¯æœ‰åºçš„äº†ã€‚</code></p><p>æŒ‰ç…§å®ƒçš„æ ¸å¿ƒæ€æƒ³ï¼Œæˆ‘ä»¬æ¥æ‹†è§£ä¸€ä¸‹æ¡¶æ’åºçš„å®ç°è¿‡ç¨‹ï¼š</p><ol><li><p>æ˜¾ç„¶ï¼Œæ¡¶çš„ä¸ªæ•°æ˜¯é¦–å…ˆåº”è¯¥è¢«ç¡®å®šçš„ï¼Œå¦‚æœä½ å†å®Œåçœ‹çš„è¯ï¼Œå°±ä¼šå‘ç°ä¸‰ç§çº¿æ€§æ’åºæ ¸å¿ƒçš„åŒºåˆ«å°±æ˜¯<code>æ¡¶çš„å¤§å°ç²’åº¦ä¸åŒ</code>ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæ¡¶ä¸­æ”¾çš„æ•°æ®ä¸ªæ•°ä¸åŒï¼Œå°±æ‹¿æ¡¶æ’åºæ¥è¯´ï¼Œå®ƒé€‚ç”¨<strong>å¤–éƒ¨æ’åº</strong>ï¼Œä¹Ÿå°±æ˜¯ç£ç›˜ç©ºé—´å¾ˆå……è¶³ï¼Œä½†å†…å­˜ä¸è¶³,è¿™å°±éœ€è¦å°†ç£ç›˜ä¸­çš„æ–‡ä»¶åˆ†æ‰¹åœ°æ”¾å…¥å†…å­˜.</p><p>æ¡¶æ’åºçš„æ¡¶çš„å¤§å°ä¸€èˆ¬ä¼šé¢„è®¾å¥½ã€‚æ‰€ä»¥æ¡¶çš„ä¸ªæ•°å°±ç­‰äºæ•°æ®çš„èŒƒå›´é™¤ä»¥æ¡¶çš„å¤§å°ã€‚</p></li><li><p>æ¥ç€å°±éœ€è¦å°†æ•°æ®æŒ‰ç…§<code>æ˜ å°„å‡½æ•°çš„è§„åˆ™</code>æ”¾ç½®åˆ°å¯¹åº”çš„æ¡¶ä¸­ã€‚å…·ä½“å®ç°æ— éå°±æ˜¯æŒ‰å¤§å°åˆ†ç±»åˆ°ç›¸åº”çš„æ¡¶ä¸‹æ ‡ã€‚</p></li><li><p>ç„¶åè‡ªç„¶å°±æ˜¯æ’åºå•¦ï¼Œæ’åºé€‰ç”¨<strong>javaå°è£…çš„å¿«æ’æ–¹æ³•</strong>è¿˜æ˜¯å¾ˆèˆ’é€‚çš„ï¼Œæœ€åå°†æ’åºåçš„æ¡¶å…ƒç´ æ”¾ç½®åˆ°åŸæ•°ç»„å³å¯ã€‚</p></li></ol><h4 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h4><ul><li><p><code>æ—¶é—´å¤æ‚åº¦</code>ï¼šå‡è®¾æœ‰nä¸ªæ•°æ®ï¼Œåˆ†æˆmä¸ªæ¡¶ï¼Œé‚£æ¯ä¸ªæ¡¶ä¸­å°±æœ‰æ•°æ®k=n/mä¸ªï¼Œæ¯ä¸ªæ¡¶ä¸­ä½¿ç”¨å¿«æ’ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(klogk),ä»£å…¥åå¯ä»¥å¾—åˆ°O(n/mlog(n/m)),é‚£æ€»ä½“çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯<br>$$<br>O(nlog(n/m))<br>$$<br>å½“<strong>æ¡¶çš„ä¸ªæ•°è¶‹è¿‘ä¸æ•°æ®é‡</strong>æ—¶ï¼Œæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦å°±å¯çœ‹åšO(N).</p></li><li><p><code>ç©ºé—´å¤æ‚åº¦</code>ï¼šåœ¨å°†æºæ•°æ®åˆ†é…åˆ°å¯¹åº”çš„æ¡¶æ—¶éœ€è¦ç”³è¯·é¢å¤–çš„ç©ºé—´ï¼Œæ‰€ä»¥Nä¸ªæ•°æ®å°±éœ€è¦é¢å¤–ç”³è¯·Nä¸ªç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ç©ºé—´å¤æ‚åº¦ä¸ºO(N).</p></li></ul><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><blockquote><p>æ¡¶æ’åºå †æ’åºæ•°æ®çš„è¦æ±‚å¾ˆè‹›åˆ»ï¼Œé¦–å…ˆï¼Œè¦æ’åºçš„æ•°æ®éœ€è¦<code>å¾ˆå®¹æ˜“å°±èƒ½åˆ’åˆ†æˆmä¸ªæ¡¶</code>ï¼Œå¹¶ä¸”ï¼Œæ¡¶å’Œæ¡¶ä¹‹é—´ä¹‹é—´æœ‰ç€<code>å¤©ç„¶çš„å¤§å°å…³ç³»</code>ã€‚å…¶æ¬¡ï¼Œæ•°æ®åœ¨æ¯ä¸ªæ¡¶ä¸­çš„<code>åˆ†å¸ƒæ˜¯æ¯”è¾ƒå‡åŒ€</code>çš„ï¼Œå¦‚æœå°†æ•°æ®éƒ½åˆ’åˆ†åˆ°åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œå°±ä¼šé€€åŒ–ä¸ºO(nlogn)çš„æ’åºç®—æ³•å•¦ã€‚</p></blockquote><h3 id="3-2-2-è¶£å‘³å›¾è§£"><a href="#3-2-2-è¶£å‘³å›¾è§£" class="headerlink" title="3.2.2 è¶£å‘³å›¾è§£"></a>3.2.2 è¶£å‘³å›¾è§£</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262144813.png" alt="image-20210707230520254"></p><h3 id="3-2-3-ä»£ç æ¼”ç¤º"><a href="#3-2-3-ä»£ç æ¼”ç¤º" class="headerlink" title="3.2.3 ä»£ç æ¼”ç¤º"></a>3.2.3 ä»£ç æ¼”ç¤º</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>practice<span class="token punctuation">.</span>sort<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** *æ¡¶æ’åº */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BucketSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arry <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>rry<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token operator">:</span>arry<span class="token punctuation">}</span><span class="token punctuation">;</span>        arry <span class="token operator">=</span> <span class="token function">sort</span><span class="token punctuation">(</span>arry<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>value<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sourceArr<span class="token punctuation">,</span><span class="token keyword">int</span> bucketSize<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//é¦–å…ˆæ‹·è´æ•°æ®,é˜²æ­¢æºæ•°æ®å› ä¸ºæ²¡æœ‰å¤‡ä»½è€Œä¹±åº</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>sourceArr<span class="token punctuation">,</span> sourceArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">BucketSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">BucketSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span><span class="token keyword">int</span> bucketSize<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//æ ¹æ®æœ€å°å€¼ï¼Œæœ€å¤§å€¼ç¡®å®šåˆ†å¤šå°‘ä¸ªæ¡¶</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> min <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token operator">:</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>data <span class="token operator">></span> max<span class="token punctuation">)</span><span class="token punctuation">{</span>                max <span class="token operator">=</span> data<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>data <span class="token operator">&lt;</span> min<span class="token punctuation">)</span><span class="token punctuation">{</span>                min <span class="token operator">=</span> data<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//ç¡®å®šæ¡¶æ•°çš„åŸåˆ™</span>        <span class="token keyword">int</span> bucketCount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>max<span class="token operator">-</span>min<span class="token punctuation">)</span><span class="token operator">/</span>bucketSize<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å£°æ˜æ¡¶çš„æ ‡å·</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buckets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>bucketCount<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//é€šè¿‡æ˜ å°„å‡½æ•°å°†æ•°æ®æ”¾åˆ°æ¡¶ä¸­</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//ç¡®å®šæ•°æ®å¯¹åº”çš„æ¡¶ä¸‹æ ‡</span>            <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>min<span class="token punctuation">)</span><span class="token operator">/</span>bucketSize<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//æ‰©å……äºŒç»´æ•°ç»„å¯¹åº”è¡Œçš„åˆ—</span>            buckets<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">arrAppand</span><span class="token punctuation">(</span>buckets<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> arryIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ä¸ºæ¯ä¸ªæ¡¶æ’åº</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bucket<span class="token operator">:</span>buckets<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//ç‰¹åˆ¤</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>bucket<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token operator">:</span>bucket<span class="token punctuation">)</span> <span class="token punctuation">{</span>                arr<span class="token punctuation">[</span>arryIndex<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> arr<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * åŠ¨æ€æ‰©å®¹,å¹¶ä¿å­˜æ•°æ®     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">arrAppand</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span><span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>        arr <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="3-3-è®¡æ•°æ’åº"><a href="#3-3-è®¡æ•°æ’åº" class="headerlink" title="3.3 è®¡æ•°æ’åº"></a>3.3 è®¡æ•°æ’åº</h2><h3 id="3-3-1-æ¦‚è¿°"><a href="#3-3-1-æ¦‚è¿°" class="headerlink" title="3.3.1 æ¦‚è¿°"></a>3.3.1 æ¦‚è¿°</h3><p>è®¡æ•°æ’åºå¯ä»¥çœ‹åšæ˜¯æ¡¶æ’åºçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå½“è¦æ’åºçš„æ•°æ®æ‰€å¤„çš„èŒƒå›´å¹¶ä¸å¤§æ—¶ï¼Œæˆ‘ä»¬å°†æŒ‰æ•°æ®æœ€å¤§å€¼ä½œä¸ºç—›çš„ä¸ªæ•°ï¼Œè¿™æ ·å°±çœå´äº†æ¡¶å†…æ’åºçš„æ—¶é—´ã€‚</p><p>æˆ‘ä»¬åŒæ ·èŠèŠæ¥è®¡æ•°æ’åºçš„å®ç°ï¼š</p><ol><li><p>ç±»ä¼¼äºæ¡¶æ’åºï¼Œè®¡æ•°æ’åºåŒæ ·é¦–å…ˆç¡®å®šæ¡¶çš„ä¸ªæ•°ï¼Œè¿™ä¸ªå°±ä¸å†èµ˜è¿°ã€‚</p></li><li><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å°†æºæ•°æ®åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼Œæ˜¾ç„¶ï¼Œå¦‚æœåˆ†é…åˆ°äº†å¯¹åº”çš„æ¡¶ä¸­ï¼Œæ’åºå°±å·²ç»å®Œæˆäº†ã€‚é‚£å¦‚ä½•åˆ†é…å‘¢ï¼Ÿ</p><p>è¿™ä¸ªç¯èŠ‚å°±æ˜¯è®¡æ•°æ’åºçš„æ ¸å¿ƒå•¦â€”â€”</p><p>å‡è®¾æœ‰ä¸€ç»„æ•°æ®A[8]:2,5,3,0,2,3,0,3,æˆ‘ä»¬é¦–å…ˆéå†ä¸€éæ•°æ®ï¼Œå¾—åˆ°å¯¹åº”æ•°æ®çš„ä¸ªæ•°C[6]â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262145737.png" alt="image-20210707230533740"></p><p>å†å¯¹æ•°æ®åšé¡ºåºæ±‚å’Œï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262145009.png" alt="image-20210707230544186"></p><p>ä¹Ÿå°±æ˜¯è¯´C[i]é‡Œé¢å­˜å‚¨çš„æ˜¯å°äºç­‰äºIçš„æ•°æ®ä¸ªæ•°ã€‚</p><p>æœ€åçš„æœ€åï¼Œæœ€å®¹æ˜“è’™åœˆçš„ä¸€æ­¥â€”â€”</p><p><code>é€†åºéå†æ•°ç»„ï¼Œç„¶ååœ¨æ•°ç»„Cä¸­æ‰¾åˆ°ä¸å…¶ç›¸åŒçš„ä¸‹æ ‡ï¼Œç„¶åé€šè¿‡ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ ç¡®å®šæ’åºåæ•°æ®çš„ä¸‹æ ‡ï¼Œå†å°†ä¸ªæ•°å‡1ã€‚</code></p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262145416.png" alt="image-20210707230600134"></p><p>ç‹äº‰è€å¸ˆçš„å›¾ç»äº†ï¼Œéå¸¸æœ‰ç”¨ï¼ï¼ï¼</p></li></ol><h4 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h4><ul><li><code>æ—¶é—´å¤æ‚åº¦ï¼š</code>è®¡æ•°çš„é‡çº§æœ€å¤§ï¼Œä½†ä¹Ÿä¸è¿‡äºO(N).</li><li><code>ç©ºé—´å¤æ‚åº¦ï¼š</code>åªéœ€è¦é¢å¤–ç”³è¯·ä¸€ä¸ªè®¡æ•°æ•°ç»„ï¼Œå³è®¡æ•°çš„æ¡¶ï¼Œåˆ™ç©ºé—´å¤æ‚åº¦ä¸ºO(N).</li></ul><h4 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><blockquote><p>è®¡æ•°æ’åºåªèƒ½ç”¨åœ¨<code>æ•°æ®èŒƒå›´ä¸å¤§çš„åœºæ™¯</code>ä¸­ï¼Œå¦‚æœæ•°æ®èŒƒå›´ k æ¯”è¦æ’åºçš„æ•°æ® n å¤§å¾ˆå¤šï¼Œå°±ä¸é€‚åˆç”¨è®¡æ•°æ’åºäº†ã€‚è€Œä¸”ï¼Œè®¡æ•°æ’åºåªèƒ½ç»™<code>éè´Ÿæ•´æ•°</code>æ’åºï¼Œå¦‚æœè¦æ’åºçš„æ•°æ®æ˜¯å…¶ä»–ç±»å‹çš„ï¼Œè¦å°†å…¶åœ¨ä¸æ”¹å˜ç›¸å¯¹å¤§å°çš„æƒ…å†µä¸‹ï¼Œè½¬åŒ–ä¸ºéè´Ÿæ•´æ•°ã€‚</p></blockquote><h3 id="3-3-2-è¶£å‘³å›¾è§£"><a href="#3-3-2-è¶£å‘³å›¾è§£" class="headerlink" title="3.3.2 è¶£å‘³å›¾è§£"></a>3.3.2 è¶£å‘³å›¾è§£</h3><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/countingSort.gif" alt="img"></p><h3 id="3-3-3-ä»£ç æ¼”ç¤º"><a href="#3-3-3-ä»£ç æ¼”ç¤º" class="headerlink" title="3.3.3 ä»£ç æ¼”ç¤º"></a>3.3.3 ä»£ç æ¼”ç¤º</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>practice<span class="token punctuation">.</span>sort<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * è®¡æ•°æ’åº */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountingSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arry <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">countSort</span><span class="token punctuation">(</span>arry<span class="token punctuation">,</span>arry<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token operator">:</span>arry<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>value<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">countSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arry<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ç‰¹åˆ¤</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è®¡æ•°æ’åºçš„ç‰¹å¾ï¼šå€¼çš„èŒƒå›´å°ï¼Œå°†æœ€å¤§å€¼ä½œä¸ºæ¡¶çš„ä¸ªæ•°</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> arry<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>arry<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> max<span class="token punctuation">)</span><span class="token punctuation">{</span>                max <span class="token operator">=</span> arry<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> bucketCount <span class="token operator">=</span> max<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å£°æ˜å¹¶åˆå§‹åŒ–æ¡¶</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buckets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>bucketCount<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>buckets<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//è®¡æ•°</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token operator">:</span>arry<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token operator">++</span>buckets<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//ç´¯åŠ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>buckets<span class="token punctuation">.</span>length<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            buckets<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+=</span> buckets<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//å£°æ˜ç”¨äºå­˜å‚¨ç»“æœçš„tmp</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>arry<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//çŒæ€æ—¶åˆ»~</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token operator">=</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>m<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span>m<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">int</span> index <span class="token operator">=</span> buckets<span class="token punctuation">[</span>arry<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            tmp<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> arry<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span>            buckets<span class="token punctuation">[</span>arry<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            arry<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="3-4-åŸºæ•°æ’åº"><a href="#3-4-åŸºæ•°æ’åº" class="headerlink" title="3.4 åŸºæ•°æ’åº"></a>3.4 åŸºæ•°æ’åº</h2><h3 id="3-4-1-æ¦‚è¿°"><a href="#3-4-1-æ¦‚è¿°" class="headerlink" title="3.4.1 æ¦‚è¿°"></a>3.4.1 æ¦‚è¿°</h3><blockquote><p>åŸºæ•°æ’åºè¦æ±‚æ•°æ®å¯ä»¥åˆ’åˆ†æˆé«˜ä½ä½ï¼Œä½ä¹‹é—´æœ‰é€’è¿›å…³ç³»ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°ï¼Œæˆ‘ä»¬åªéœ€è¦æ¯”è¾ƒé«˜ä½ï¼Œé«˜ä½ç›¸åŒå†å»æ¯”è¾ƒä½ä½ï¼Œè€Œä¸”æ¯ä¸€ä½çš„æ•°æ®èŒƒå›´ä¸èƒ½å¤ªå¤§ï¼Œå› ä¸ºåŸºæ•°æ’åºéœ€è¦å€ŸåŠ©æ¡¶æ’åºæˆ–è€…è®¡æ•°æ’åºæ¥å®Œæˆæ¯ä¸€ä½çš„æ’åºã€‚</p></blockquote><p>è¿˜æ˜¯ç†Ÿæ‚‰çš„é…æ–¹ï¼Œæˆ‘ä»¬æ¥å¤ç°ä¸€ä¸‹å®ç°çš„è¿‡ç¨‹â€”â€”</p><ol><li><p>é¦–å…ˆæ ¹æ®æ•°æ®ä¸­çš„<strong>æœ€å¤§å€¼ä½æ•°</strong>ç¡®å®š<strong>æ¡¶çš„ä¸ªæ•°</strong>ã€‚</p></li><li><p>æ¥ç€<strong>æŒ‰ä½é€†åºæ’åº</strong>ï¼Œæˆ‘ä»¬è¿™é‡Œåªè€ƒè™‘é€šè¿‡æœ€åä¸€ä½å¯¹æ•°æ®çš„åˆ’åˆ†ï¼š</p><p>é€šè¿‡å–ä½™è¿ç®—å¾—åˆ°çš„ä½™æ•°å³ä¸º<code>æ¡¶å¯¹åº”çš„ä¸‹æ ‡</code>ï¼Œè¿™é‡Œå°†æ•°æ®åˆ†é…åˆ°æ¡¶å¯ä»¥ä½¿ç”¨<code>äºŒç»´æ•°ç»„</code>å®ç°ï¼Œæœ€åå°†æ¡¶ä¸­çš„å…ƒç´ æŒ‰åºæ”¾å›æ•°ç»„ï¼Œå‡†å¤‡ä¸‹ä¸€ä½çš„æ¯”è¾ƒã€‚</p></li></ol><h3 id="3-4-2-è¶£å‘³å›¾è§£"><a href="#3-4-2-è¶£å‘³å›¾è§£" class="headerlink" title="3.4.2 è¶£å‘³å›¾è§£"></a>3.4.2 è¶£å‘³å›¾è§£</h3><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/radixSort.gif" alt="img"></p><h3 id="3-4-3-ä»£ç æ¼”ç¤º"><a href="#3-4-3-ä»£ç æ¼”ç¤º" class="headerlink" title="3.4.3 ä»£ç æ¼”ç¤º"></a>3.4.3 ä»£ç æ¼”ç¤º</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>practice<span class="token punctuation">.</span>sort<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * åŸºæ•°æ’åº */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RadixSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arry <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">radixSort</span><span class="token punctuation">(</span>arry<span class="token punctuation">,</span>arry<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token operator">:</span>arry<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>value<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">radixSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arry<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ç¡®å®šæ¡¶çš„ä¸ªæ•°</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> arry<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arry<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>max <span class="token operator">&lt;</span> arry<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                max <span class="token operator">=</span> arry<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//å¾—åˆ°å®ƒçš„ä½æ•°</span>        <span class="token keyword">int</span> bitCount <span class="token operator">=</span> <span class="token function">getBitCount</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æŒ‰ä½é€†åºæ’åº,é¦–å…ˆå£°æ˜é™¤æ•°å’Œä½™æ•°</span>        <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> dev <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//bitcountè¶Ÿæ¯”è¾ƒ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>bitCount<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">,</span>mod<span class="token operator">*=</span><span class="token number">10</span><span class="token punctuation">,</span>dev<span class="token operator">*=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//å£°æ˜ä¸´æ—¶æ•°ç»„</span>            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>mod <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//å°†æ•°æ®æŒ‰ç…§å½“å‰ä½æ”¾ç½®åˆ°å¯¹åº”çš„æ¡¶ä¸­</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>arry<span class="token punctuation">.</span>length<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//æœ€å¥½æ‰‹ç»˜éªŒè¯ä¸€ä¸‹</span>                <span class="token keyword">int</span> bucket <span class="token operator">=</span> <span class="token punctuation">(</span>arry<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%</span>mod<span class="token punctuation">)</span><span class="token operator">/</span>dev<span class="token operator">+</span>mod<span class="token punctuation">;</span>                tmp<span class="token punctuation">[</span>bucket<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">arryAppand</span><span class="token punctuation">(</span>tmp<span class="token punctuation">[</span>bucket<span class="token punctuation">]</span><span class="token punctuation">,</span>arry<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//åˆ†åˆ«éå†æ¯ä¸ªæ¡¶ä¸­çš„å…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬æŒ‰åºå†æ”¾å›æ•°ç»„ä¸­</span>            <span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bucket<span class="token operator">:</span>tmp<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token operator">:</span>bucket<span class="token punctuation">)</span><span class="token punctuation">{</span>                    arry<span class="token punctuation">[</span>pos<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * æ•°ç»„æ‰©å®¹å¹¶ä¿å­˜     * @param arry     * @param value     * @return     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">arryAppand</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arry<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        arry <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>arry<span class="token punctuation">,</span> arry<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        arry<span class="token punctuation">[</span>arry<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token keyword">return</span> arry<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * è·å–æ•´æ•°ä½æ•°     * @param value     * @return     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getBitCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>value <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            value <span class="token operator">/=</span><span class="token number">10</span><span class="token punctuation">;</span>            count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> count<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><hr><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> æ’åºç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå¤šçº¿ç¨‹çš„å‰ä¸–ä»Šç”Ÿ</title>
      <link href="/2021/07/12/java-duo-xian-cheng-de-qian-shi-jin-sheng/"/>
      <url>/2021/07/12/java-duo-xian-cheng-de-qian-shi-jin-sheng/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€ä¸ªå¤šæœˆæ²¡å†™è¿‡åšæ–‡äº†ï¼Œä¸æ˜¯æ²¡æœ‰<strong>å€¼å¾—è®°å½•çš„æ•…äº‹</strong>ï¼Œç¡®æ˜¯é™ä¸ä¸‹å¿ƒã€‚ç½‘ç”³åœ¨å³ï¼Œé ç›®å‰çš„ç§¯æ·€ï¼ŒçŸ¥è¯†åœ°å›¾ä¸­ç¼ºäº†ä¸€å¤§å—ï¼Œç´¢æ€§æ‰“æ¶ˆäº†ç½‘ç”³çš„å¿µå¤´ã€‚ä½†ä¸å…æœ‰äº›è½å¯ï¼Œåƒæäº†<strong>è½è·‘çš„å°æ©˜å­</strong>ã€‚</p><p>è¿™ä¸ª<code>æ—¶ä»£è¶Šæ¥è¶Šå·äº†</code>ï¼Œä½†ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œæˆ‘æ‰æ›´ä¿¡å¥‰ç§¯æ·€çš„é­…åŠ›ï¼Œè¿™ä¹Ÿæ­£æ˜¯æˆ‘æ•´ç†å¿ƒæ€ï¼Œç»§ç»­å‡ºå‘çš„ç¼˜ç”±ã€‚</p><p>è¿™ä¸æ˜¯ç¬¬ä¸€æ¬¡å­¦ä¹ å¤šçº¿ç¨‹äº†ï¼Œåœ¨è‡ªå­¦æ—¶ï¼ŒåŸ¹è®­ç­ä¸Šéƒ½æ¥è§¦è¿‡å¤šçº¿ç¨‹ï¼Œä½†éƒ½åªæ˜¯æµ…å°è¾„æ­¢ï¼Œè¿™æ¬¡å’¬å®šé’å±±ä¸æ”¾æ¾ï¼Œç»ˆäº<strong>é¡¿æ‚Ÿäº†ä¸€äº›å…³é”®çš„çŸ¥è¯†</strong>ï¼Œæç„¶é—´æŸ³æš—èŠ±æ˜ï¼Œä¾¿æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p><hr><h2 id="å¤šçº¿ç¨‹â€”â€”å…¥é—¨"><a href="#å¤šçº¿ç¨‹â€”â€”å…¥é—¨" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”å…¥é—¨"></a>å¤šçº¿ç¨‹â€”â€”å…¥é—¨</h2><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œ<strong>å¤šè¿›ç¨‹å›¾åƒ</strong>æ˜¯æ“ä½œç³»ç»Ÿæœ€æ ¸å¿ƒï¼Œæœ€åŸºç¡€çš„å›¾åƒã€‚è€Œç”¨æˆ·é€šè¿‡ç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼é—´æ¥ä¸æ“ä½œç³»ç»Ÿäº¤äº’ã€‚æƒ³è±¡è¿™æ ·ä¸€ç§åœºæ™¯ï¼Œæˆ‘ä»¬ä¸€è¾¹æ”¾ç€éŸ³ä¹ï¼Œä¸€è¾¹æµè§ˆç½‘é¡µâ€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327092252968.png" alt="image-20210327092252968"></p><p>è¿™å°±æ˜¯è§¦ç›®å¯åŠçš„å¤šè¿›ç¨‹å›¾åƒï¼Œæ˜¾ç„¶ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´ä½¿ç”¨çš„æ˜¯ä¸åŒçš„èµ„æºï¼Œä¸å¦¨å‡è®¾æˆ‘çš„å¤„ç†å™¨æ˜¯å•æ ¸çš„ï¼Œæ¯ä¸€æ—¶åˆ»åªèƒ½å¤„ç†ä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£<code>CPUå°±è¦ä¸ºä¸¤ä¸ªè¿›ç¨‹åˆ†é…æ—¶é—´ç‰‡</code>ï¼Œç„¶åæ ¹æ®è°ƒåº¦ç®—æ³•åˆ‡æ¢è¿›ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œã€‚</p><p>å¦‚ä½•åˆ‡æ¢è¿›ç¨‹å‘¢ï¼Ÿé¦–å…ˆè¦ç†è§£è¿›ç¨‹æ˜¯ä»€ä¹ˆâ€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619000547145.png" alt="image-20210619000547145"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›ç¨‹å°±æ˜¯ï¼š<strong>æŒ‡ä»¤æ‰§è¡Œåºåˆ—+èµ„æº</strong>ï¼Œå› æ­¤ç›´è§‚çš„åˆ‡æ¢è¿›ç¨‹å°±æ˜¯åˆ‡æ¢è¿›ç¨‹çš„è¿™ä¸¤éƒ¨åˆ†ï¼Œä½†èµ„æºçš„åˆ‡æ¢æ˜¯éå¸¸æµªè´¹æ—¶é—´çš„ï¼Œèƒ½ä¸èƒ½<code>åªåˆ‡æ¢æŒ‡ä»¤æ‰§è¡Œåºåˆ—</code>å‘¢ï¼ŸèŠåˆ°è¿™ï¼Œå°ä¼™ä¼´å°±æœ‰äº†è¿™æ ·çš„çŒœæƒ³ï¼šæŒ‡ä»¤æ‰§è¡Œåºåˆ—ä¸çº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p><p>æ²¡é”™ï¼Œ<strong>æŒ‡ä»¤æ‰§è¡Œåºåˆ—å°±æ˜¯çº¿ç¨‹é›†</strong>ã€‚æˆ‘ä»¬æ·±å…¥åˆ°è¿›ç¨‹ä¸­æ‰¾æ‰¾ï¼Œå°±ä¼šå‘ç°çº¿ç¨‹é›†æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡ä¸­çš„é‚£ä¹ˆé¥ä¸å¯åŠâ€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327094410019.png" alt="image-20210327094410019"></p><p>ä¸‹è½½å¬æ­Œä¸¤ä¸è¯¯ï¼Œå¦‚æ­¤ä¸æ»‘çš„åˆ‡æ¢ï¼Œéƒ½å¾—ç›Šäº<strong>çº¿ç¨‹çš„å¹¶å‘åº”ç”¨</strong>ã€‚ä¹Ÿå°±æ˜¯å¤šçº¿ç¨‹å’¯ã€‚åˆ°è¿™é‡Œï¼Œæ•…äº‹æ‰çœŸæ­£çš„æ‹‰å¼€åºå¹•â€”â€”</p><hr><h3 id="1-è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#1-è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="1.è¿›ç¨‹ä¸çº¿ç¨‹"></a>1.è¿›ç¨‹ä¸çº¿ç¨‹</h3><p>å‰é¢æåˆ°çš„éƒ½æ˜¯ç›´è§‚çš„å°è±¡ï¼Œè¿™é‡Œç”±è¡¨åŠå†…åœ°èŠèŠè¿›ç¨‹ä¸çº¿ç¨‹â€”â€”</p><ul><li><code>è¿›ç¨‹ï¼š</code>è¿›ç¨‹æ˜¯<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢ä¹‹é—´çš„ç¨‹åºæ‰§è¡Œçš„éƒ¨åˆ†</strong>ï¼Œè€Œæ‰€è°“ä¸Šä¸‹æ–‡ï¼Œå³æ˜¯<code>CPUä¸å¯„å­˜å™¨</code>ã€‚é€šä¿—åœ°è¯´ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›ç¨‹æ‰§è¡Œçš„ç¯å¢ƒã€‚åœ¨è¿™ä¸ªç¯å¢ƒä¸‹è¿è¡Œç€çš„ç¨‹åºå³æ˜¯è¿›ç¨‹ã€‚</li><li><code>çº¿ç¨‹ï¼š</code>çº¿ç¨‹æ˜¯<strong>è½»é‡çº§çš„è¿›ç¨‹</strong>ï¼Œè¿™é‡Œçš„è½»é‡çº§å¦‚ä½•ç†è§£å‘¢ï¼Ÿ<code>çº¿ç¨‹é›†</code>å…±äº«äº†è¿›ç¨‹çš„<code>ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œåœ°å€ç©ºé—´ï¼Œæ›´ä¸ºç»†å°çš„CPUæ—¶é—´ç‰‡</code>ã€‚</li></ul><p>å¯¹äºå¦‚ä½•æ›´å¥½åœ°ç†è§£è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»ï¼Œæœ‰å¤§ä½¬å·²ç»è®²çš„éå¸¸å½¢è±¡äº†ï¼Œæˆ‘ä»¬ä¸å¦¨ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šâ€”â€”</p><ul><li><input checked disabled type="checkbox"> <a href="https://www.zhihu.com/question/25532384" target="_blank" rel="noopener">å°†è¿›ç¨‹æ¯”ä½œç«è½¦ï¼Œçº¿ç¨‹æ¯”ä½œè½¦å¢</a></li></ul><hr><h3 id="2-æ‰€è°“å¤šçº¿ç¨‹"><a href="#2-æ‰€è°“å¤šçº¿ç¨‹" class="headerlink" title="2.æ‰€è°“å¤šçº¿ç¨‹"></a>2.æ‰€è°“å¤šçº¿ç¨‹</h3><p>åœ¨è®²è¿°å¤šçº¿ç¨‹ä¹‹å‰ï¼Œéå¸¸æœ‰å¿…è¦ææ‡‚è¿™å‡ ä¸ªæ¦‚å¿µâ€”â€”</p><ul><li><p><code>å¹¶å‘</code>ï¼šä¸€äº›ä»»åŠ¡éƒ½å¤„äºå¯è¿è¡Œçš„çŠ¶æ€ï¼Œä½†åªæœ‰ä¸€ä¸ªä»»åŠ¡å¯ä»¥è¢«è°ƒåº¦å¹¶æ‰§è¡Œï¼Œè€Œå…·ä½“æ˜¯å“ªä¸€ä¸ªä»»åŠ¡è¢«å¤„ç†ä»æ˜¯ä¸ç¡®å®šçš„ã€‚</p></li><li><p><code>ä¸²è¡Œä¸å¹¶è¡Œ</code></p><ol><li>å¤šä»»åŠ¡ä¸­<strong>æŸæ—¶åˆ»</strong>åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡è¢«è¿è¡Œï¼Œå•æ ¸ä¸‹çš†ä¸ºä¸²è¡Œï¼›</li><li>æŸæ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªä»»åŠ¡åŒæ—¶è¢«æ‰§è¡Œï¼Œåœ¨å¤šæ ¸è®¡ç®—æœºä¸Šå¯ä»¥å®ç°å¹¶è¡Œï¼›</li></ol></li><li><p><code>é˜»å¡ä¸éé˜»å¡</code>ï¼š</p><ol><li>ä»¥æ–‡ä»¶è¯»å–ä¸ºä¾‹ï¼Œåº”ç”¨å±‚ä¼šè°ƒç”¨ç³»ç»Ÿå†…æ ¸ä¸­çš„IOæ¥å£ï¼Œå¦‚openï¼Œcloseç­‰ï¼Œåœ¨è¯·æ±‚å‘å‡ºä»¥åï¼Œå¦‚æœè°ƒç”¨çš„æ˜¯<strong>é˜»å¡å‹IO</strong>ï¼Œåº”ç”¨å±‚è¢«æŒ‚èµ·ï¼Œä¸€ç›´å¤„äºç­‰å¾…æ•°æ®è¿”å›çš„çŠ¶æ€ã€‚ç›´åˆ°ä»ç£ç›˜ä¸Šè¯»å–æ•°æ®å¹¶è¿”å›ç»™åº”ç”¨å±‚åï¼Œåº”ç”¨å±‚é‡‡ç”¨è·å–åˆ°çš„æ•°æ®è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼›</li><li>å¦‚æœåº”ç”¨å±‚è°ƒç”¨çš„æ˜¯<strong>éé˜»å¡I/O</strong>ï¼Œé‚£ä¹ˆè°ƒç”¨åï¼Œç³»ç»Ÿå†…æ ¸ä¼šç«‹å³è¿”å›ï¼ˆè™½ç„¶è¿˜æ²¡æœ‰æ–‡ä»¶å†…å®¹çš„æ•°æ®ï¼‰ï¼Œåº”ç”¨å±‚å¹¶ä¸ä¼šè¢«æŒ‚èµ·ï¼Œå®ƒå¯ä»¥åšå…¶ä»–ä»»æ„å®ƒæƒ³åšçš„æ“ä½œã€‚</li></ol><p>ä¹Ÿå°±æ˜¯è¯´é˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«åœ¨äº<strong>å‘å‡ºè¯·æ±‚åç­‰å¾…æ•°æ®è¿”å›æ—¶çš„çŠ¶æ€</strong>ã€‚</p></li><li><p><code>åŒæ­¥ä¸å¼‚æ­¥</code>ï¼š</p><ul><li>é˜»å¡ä¸éé˜»å¡å†³å®šäº†åº”ç”¨å±‚ç­‰å¾…æ•°æ®è¿”å›çš„çŠ¶æ€ï¼Œè€Œ<strong>æ•°æ®å¦‚ä½•ä»ç³»ç»Ÿå†…æ ¸è¿”å›</strong>å‘¢ï¼Ÿè¿”å›çš„æ–¹å¼å–å†³äºåŒæ­¥ä¸å¼‚æ­¥â€”â€”</li><li>å¯¹äºåŒæ­¥å‹çš„è°ƒç”¨ï¼Œåº”ç”¨å±‚ä¼šä¸<strong>æ–­é—®è¯¢ç³»ç»Ÿå†…æ ¸</strong>ï¼Œä½†å®ƒçš„åŠ¨ä½œå–å†³äºæ˜¯å¦é˜»å¡ï¼Œæ•°æ®è¿”å›ç»™åº”ç”¨å±‚åï¼Œåº”ç”¨å±‚ç»§ç»­åšå…¶ä»–çš„äº‹æƒ…ï¼›</li><li>å¯¹äºå¼‚æ­¥å‹çš„è°ƒç”¨ï¼Œåº”ç”¨å±‚<strong>ä¸å…³å¿ƒæ•°æ®ä½•æ—¶è¿”å›</strong>ï¼Œæ­¤æ—¶å®ƒçš„åŠ¨ä½œåŒæ ·å´ç»è‚²æ˜¯å¦é˜»å¡ï¼Œç³»ç»Ÿå†…æ ¸ä¼šä¸»åŠ¨é€šçŸ¥åº”ç”¨å±‚æ•°æ®å·²ç»è¯»å–å®Œæ¯•å¹¶è¿”å›ã€‚</li></ul></li></ul><hr><p>å¥½å•¦ï¼Œå•°å—¦äº†è¿™ä¹ˆå¤šï¼Œä¹Ÿè¯¥ç¥­å‡ºè¿™å¼ å›¾äº†â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327104345505.png" alt="image-20210327104345505"></p><p>ç”¨è¯­è¨€æè¿°å°±æ˜¯ï¼š<strong>å¤šçº¿ç¨‹æ— éæ˜¯å¤šä¸ªçº¿ç¨‹å¤„äºå¹¶å‘çš„çŠ¶æ€</strong>ã€‚</p><p>ç‰‡å¤´å°±è¿™ä¹ˆå¤šäº†ï¼Œæš‚ä¸”å‘Šä¸€æ®µè½ã€‚å¦‚æœå“ªå¤©çµå…‰ä¸€ç°ï¼Œä¹Ÿä¼šå†ä¿®ä¿®è¡¥è¡¥ã€‚</p><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="å…³äºä¸‹æ–‡"><a href="#å…³äºä¸‹æ–‡" class="headerlink" title="å…³äºä¸‹æ–‡"></a>å…³äºä¸‹æ–‡</h2><p>å€Ÿé‰´ç‹ä¸€æ³¢å‰è¾ˆçš„ä¹¦åï¼Œä¸‹é¢çš„ç¯‡å¹…æŒ‰ç…§å¤šçº¿ç¨‹çš„é‡è¦ç¨‹åº¦æ¸è¿›åœ°åˆ’åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µâ€”â€”</p><ul><li><code>é’é“œæ—¶ä»£</code>ï¼šä¸»è¦æè¿°çº¿ç¨‹çš„åŸºæœ¬çŸ¥è¯†ï¼Œä¹Ÿæ˜¯æœ€ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œæ­¤å¤–ï¼Œç”±æ­¤è¡ç”Ÿçš„é™æ€ä»£ç†ï¼Œlambdaè¡¨è¾¾å¼ä¹Ÿå¯å…ˆå…¥é—¨ä¸€æ‰‹ï¼›</li><li><code>ç™½é“¶æ—¶ä»£</code>ï¼šè¿™ä¸€é˜¶æ®µæ˜¯å¤šçº¿ç¨‹å¹¶å‘çš„é—®é¢˜ä¸åŸºæœ¬è§£å†³æ–¹æ¡ˆï¼ŒåŒæ ·ä¹Ÿæ˜¯åº”ç”¨ä¸é¢è¯•çš„ä¸€å¤§çƒ­é—¨ã€‚</li><li><code>é»„é‡‘æ—¶ä»£</code>ï¼šç®€è¨€ä¹‹ï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯é«˜ç«¯æ“ä½œï¼Œä¹Ÿæ˜¯é¢è¯•é€ ç«ç®­çš„å® å„¿ï¼Œä½†å…¶ä¸­çš„æœºåˆ¶å´å¹¶ä¸æ–°é²œï¼Œåè€Œæœ‰ç‚¹æ‹¾æ“ä½œç³»ç»Ÿæ€æƒ³ç‰™é«“çš„æ„æ€ã€‚å¯è§ï¼Œæœ€åŸºæœ¬ï¼Œæœ€é€šç”¨çš„åè€Œå…·æœ‰æœ€é•¿ä¹…çš„ç”Ÿå‘½åŠ›ï¼Œ</li></ul><hr><h2 id="å¤šçº¿ç¨‹â€”â€”é’é“œæ—¶ä»£"><a href="#å¤šçº¿ç¨‹â€”â€”é’é“œæ—¶ä»£" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”é’é“œæ—¶ä»£"></a>å¤šçº¿ç¨‹â€”â€”é’é“œæ—¶ä»£</h2><h3 id="1-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"><a href="#1-åˆ›å»ºçš„ä¸‰ç§æ–¹å¼" class="headerlink" title="1.åˆ›å»ºçš„ä¸‰ç§æ–¹å¼"></a>1.åˆ›å»ºçš„ä¸‰ç§æ–¹å¼</h3><p>åœ¨javaä¸­ï¼Œåˆ›å»ºçº¿ç¨‹æœ‰3ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ç»§æ‰¿Threadç±»ï¼Œå®ç°Runnableæ¥å£ï¼Œå®ç°Callableæ¥å£ã€‚è€Œå®ç°Runnableæ¥å£åªèƒ½å¾—åˆ°ä»»åŠ¡ï¼Œ<strong>ä»»åŠ¡è¿˜éœ€è¦çº¿ç¨‹é©±åŠ¨æ‰èƒ½æ‰§è¡Œ</strong>ã€</p><h4 id="å®ç°Runnableæ¥å£"><a href="#å®ç°Runnableæ¥å£" class="headerlink" title="å®ç°Runnableæ¥å£"></a>å®ç°Runnableæ¥å£</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327130931773.png" alt="image-20210327130931773"></p><p>é¦–å…ˆå®ç°Runnableæ¥å£å¾—åˆ°Runnableå®ä¾‹ã€‚</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateThread2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//do something</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä½¿ç”¨Runnableå®ä¾‹å†åˆ›å»ºä¸€ä¸ªThreadå®ä¾‹ï¼Œè°ƒç”¨Threadå®ä¾‹çš„start()å¼€å¯ä¸€ä¸ªçº¿ç¨‹â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºå®ç°ç±»</span>    CreateThread2 t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateThread2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//åŒæ ·è°ƒç”¨Threadæ¥å¼€å¯çº¿ç¨‹ï¼Œæœ€ç»ˆæ˜¯ä½¿ç”¨runnableæ¥å£çš„ä»£ç†æ¥è°ƒç”¨</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="å®ç°Callableæ¥å£"><a href="#å®ç°Callableæ¥å£" class="headerlink" title="å®ç°Callableæ¥å£"></a>å®ç°Callableæ¥å£</h4><p>ä¸Runnableç›¸æ¯”ï¼ŒCallableæ¥å£å…·æœ‰è¿”å›å€¼ã€‚è¿”å›å€¼ç”¨<strong>Future<v></v></strong>å°è£…â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä½¿ç”¨Callableæ¥å£å®ç°å›¾ç‰‡çš„ä¸‹è½½ * * callableçš„å¥½å¤„â€”â€” * 1. æœ‰è¿”å›å€¼ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateThread3</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token operator">&lt;</span>Boolean<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String url<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">CreateThread3</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>url <span class="token operator">=</span> url<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Boolean <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            WebDownload webDownload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebDownload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            webDownload<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">"ä¸‹è½½æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MalformedURLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å›¾ç‰‡ä¸‹è½½å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> ExecutionException<span class="token punctuation">,</span> InterruptedException <span class="token punctuation">{</span>        CreateThread3 t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateThread3</span><span class="token punctuation">(</span><span class="token string">"https://img95.699pic.com/photo/40011/0709.jpg_wh860.jpg"</span><span class="token punctuation">,</span><span class="token string">"E:/1.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        CreateThread3 t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateThread3</span><span class="token punctuation">(</span><span class="token string">"https://static.runoob.com/images/demo/demo4.jpg"</span><span class="token punctuation">,</span><span class="token string">"E:/2.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        CreateThread3 t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateThread3</span><span class="token punctuation">(</span><span class="token string">"https://seopic.699pic.com/photo/50034/6414.jpg_wh1200.jpg"</span><span class="token punctuation">,</span><span class="token string">"E:/3.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åˆ›å»ºå›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± </span>        ExecutorService service <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æäº¤æ‰§è¡Œ</span>        Future<span class="token operator">&lt;</span>Boolean<span class="token operator">></span> r1 <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>        Future<span class="token operator">&lt;</span>Boolean<span class="token operator">></span> r2 <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">;</span>        Future<span class="token operator">&lt;</span>Boolean<span class="token operator">></span> r3 <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>t3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è·å–ç»“æœ</span>        Boolean res1 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Boolean res2 <span class="token operator">=</span> r2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Boolean res3 <span class="token operator">=</span> r3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å…³é—­æœåŠ¡</span>        service<span class="token punctuation">.</span><span class="token function">shutdownNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">WebDownload</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">download</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span>String name<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        FileUtils<span class="token punctuation">.</span><span class="token function">copyURLToFile</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ç»§æ‰¿Threadç±»"><a href="#ç»§æ‰¿Threadç±»" class="headerlink" title="ç»§æ‰¿Threadç±»"></a>ç»§æ‰¿Threadç±»</h4><p>ç»§æ‰¿Threadç±»åŒæ ·éœ€è¦é‡å†™runæ–¹æ³•ï¼Œä½†runæ–¹æ³•å´ä»…ä»…åªæ˜¯Threadç±»çš„å†°å±±ä¸€è§’ï¼ŒThreadç±»éå¸¸åºå¤§ï¼Œå®ƒåŒ…å«äº†<code>çº¿ç¨‹çš„çŠ¶æ€ï¼Œåˆ†ç±»ï¼Œå¹¶å‘å®‰å…¨</code>ï¼Œä¸ä¸€è€Œè¶³ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327132338149.png" alt="image-20210327132338149"></p><p>æ¥çœ‹ä»£ç å®ç°â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> createThread<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateThread1</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * runæ–¹æ³•çº¿ç¨‹ä½“     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº”å‘³æ‚é™ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ä¸»çº¿ç¨‹æ–¹æ³•ä½“     * @param args     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        CreateThread1 t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateThread1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¯ä»¥çœ‹åˆ°è°ƒç”¨startæ–¹æ³•ä»¥åï¼Œä¸»çº¿ç¨‹ä¸runæ–¹æ³•çº¿ç¨‹äº¤æ›¿æ‰§è¡Œï¼Œæ€»ä½“å…ˆæ‰§è¡Œmainä¸»çº¿ç¨‹ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºä¼˜å…ˆçº§è¾ƒé«˜ï¼</span>        <span class="token comment" spellcheck="true">//å‡å¦‚ä¸æ˜¯å¤šçº¿ç¨‹ï¼Œä¼šæ€æ ·æ‰§è¡Œï¼Ÿ</span>        <span class="token comment" spellcheck="true">//é‚£å°±åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨runçš„çº¿ç¨‹ï¼Œåœ¨runçº¿ç¨‹æ‰§è¡Œå®Œåå†å›åˆ°ä¸»çº¿ç¨‹ï¼Œç»ä¸ä¼šå‘ç”Ÿäº¤æ›¿ï¼</span>        <span class="token comment" spellcheck="true">//çº¿ç¨‹çš„è°ƒåº¦å®Œå…¨ç”±CPUå†³å®š</span>        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¯èƒ½ä¼šè¢«æå‰ç»ˆæ­¢</span>        t<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">200</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é™ˆæ‚å‘³äº”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å½“è°ƒç”¨startä»¥åï¼Œè™šæ‹Ÿæœºå°†çº¿ç¨‹æ”¾å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¢«è°ƒåº¦ï¼Œçº¿ç¨‹è¢«è°ƒåº¦ååˆ™æ‰§è¡Œrunæ–¹æ³•ã€‚</p><h4 id="Runnable-VS-Thread"><a href="#Runnable-VS-Thread" class="headerlink" title="Runnable VS Thread"></a>Runnable VS Thread</h4><p>å®ç°æ¥å£ä¼šæ›´å¥½ä¸€äº›ï¼Œå› ä¸ºï¼š</p><ol><li>javaæ˜¯<code>å•ç»§æ‰¿ï¼Œå¯æ‰©å±•æ€§ä¸å¥½</code>ï¼Œç»§æ‰¿äº†Threadç±»å°±æ— æ³•å†ç»§æ‰¿å…¶ä»–ç±»ï¼Œè€Œæ¥å£å¯ä»¥å¤šå®ç°ï¼›</li><li><code>Threadç±»è¿™ä¹ˆè‡ƒè‚¿</code>ï¼Œå¦‚æœåªæ˜¯æ‰§è¡Œç®€å•çš„çº¿ç¨‹ä»»åŠ¡ï¼Œåˆ™ç»§æ‰¿Threadç±»æ˜¾å¾—å¤§è€Œæ— ç”¨ã€‚</li></ol><hr><h3 id="2-çº¿ç¨‹çš„çŠ¶æ€ä¸å±æ€§"><a href="#2-çº¿ç¨‹çš„çŠ¶æ€ä¸å±æ€§" class="headerlink" title="2.çº¿ç¨‹çš„çŠ¶æ€ä¸å±æ€§"></a>2.çº¿ç¨‹çš„çŠ¶æ€ä¸å±æ€§</h3><h4 id="å¼€å±€ä¸€å¼ å›¾"><a href="#å¼€å±€ä¸€å¼ å›¾" class="headerlink" title="å¼€å±€ä¸€å¼ å›¾"></a>å¼€å±€ä¸€å¼ å›¾</h4><p><img src="C:%5CUsers%5Czyz%5CDesktop%5C%E6%AF%8F%E6%97%A5%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%5C%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81.png" alt="çº¿ç¨‹çš„çŠ¶æ€"></p><p>å…³äºçŠ¶æ€çš„çç¢çŸ¥è¯†ï¼Œæˆ‘å°±ä¸å±•å¼€äº†ï¼Œ<strong>æ€ç»´å¯¼å›¾æè¿°çš„æ›´ç³»ç»Ÿä¹Ÿæ›´ç®€æ´è¿™æ ·è®°å¿†çš„æ•ˆæœæ›´å¥½</strong>ï¼Œé’ˆå¯¹çŠ¶æ€çš„åˆ‡æ¢ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€å¼ å¾ˆç»†è‡´çš„å›¾ç‰‡â€”â€”<br><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327134912906.png" alt="image-20210327134912906"></p><p>æ¥çœ‹åˆ‡æ¢å†…éƒ¨çš„æœºåˆ¶â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327141723664.png" alt="image-20210327141723664"></p><h4 id="ä¸€ç‚¹å°è´´å£«"><a href="#ä¸€ç‚¹å°è´´å£«" class="headerlink" title="ä¸€ç‚¹å°è´´å£«"></a>ä¸€ç‚¹å°è´´å£«</h4><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ¥è§£é‡Šä¸€äº›å…³äºçº¿ç¨‹åˆ‡æ¢ä¸åˆ†ç±»ä¸­ï¼Œå«ç³Šä¸æ¸…çš„çŸ¥è¯†ç‚¹ï¼š</p><ol><li><code>è¿›ç¨‹ä¸çº¿ç¨‹çš„çŠ¶æ€åŸºæœ¬ä¸€è‡´</code>ï¼Œä¸€å®¶ä¹‹è¨€ï¼›</li><li><code>é˜»å¡æ˜¯ä¸€ç§çŠ¶æ€ï¼ŒæŒ‚èµ·æ˜¯ä¸€ç§è¡Œä¸º</code>ï¼ŒæŒ‚èµ·çš„ç»“æœæ˜¯é˜»å¡ï¼›</li><li>å½“runæ–¹æ³•æ‰§è¡Œå®Œåï¼Œçº¿ç¨‹åˆ™é€€å‡ºï¼Œå˜ä¸ºæ­»äº¡çŠ¶æ€ã€‚è€Œä½¿ç”¨æ‰§è¡Œå™¨ï¼Œéœ€è¦æ‰‹åŠ¨çš„å…³é—­æœåŠ¡ï¼Œä»è€Œå…³é—­çº¿ç¨‹ï¼Œå…³é—­æœåŠ¡<code>shutDownNow</code>çš„åº•å±‚ä¼š<code>è°ƒç”¨interruptæ–¹æ³•</code>ï¼Œè¯¥æ–¹æ³•ä¸ä¸€å®šæ˜¯å³æ—¶çš„ï¼Œ<code>å®ƒä¼šä½¿çº¿ç¨‹åœ¨å®‰å…¨çš„æ—¶å€™é€€å‡º</code>,è¿™åŒæ—¶ä¹Ÿæ˜¯ä¸­æ–­çš„ç”¨é€”ã€‚</li><li><code>waitä¼šé‡Šæ”¾å¯¹è±¡çš„é”ï¼Œè€Œsleepå¹¶ä¸ä¼š</code>ã€‚ä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹è°ƒç”¨waitè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä½¿ç”¨notifyå”¤é†’çº¿ç¨‹ï¼Œè€Œåè¿›å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾…ã€‚è€Œsleepåˆ™å¯ä»¥ç›´æ¥æ‰§è¡Œã€‚</li></ol><h3 id="3-çº¿ç¨‹çš„åŸºæœ¬æœºåˆ¶"><a href="#3-çº¿ç¨‹çš„åŸºæœ¬æœºåˆ¶" class="headerlink" title="3.çº¿ç¨‹çš„åŸºæœ¬æœºåˆ¶"></a>3.çº¿ç¨‹çš„åŸºæœ¬æœºåˆ¶</h3><p>åœ¨ä¸Šé¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬çªå…€åœ°ä½¿ç”¨äº†<strong>å¾ˆå¤šçœ‹èµ·æ¥æ²¡æœ‰æ”¯æ’‘çš„çŸ¥è¯†ç‚¹</strong>ã€‚æˆ‘æƒ³å°ä¼™ä¼´ä»¬ä¹ŸåŒæ ·ä¼šå›°æƒ‘ï¼Œå¯¹è±¡é”æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿå®ƒçš„æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿçº¿ç¨‹è¿™ä¹ˆå¤šçš„çŠ¶æ€ï¼Œæˆ‘ä»¬éƒ½è¦è€³æé¢å‘½çš„æµ‹è¯•å—ï¼Ÿ</p><p>å¯¹äºè¿™äº›é—®é¢˜ï¼Œjavaä¸­çš„å¤šçº¿ç¨‹ç»™å‡ºäº†ä¸€ä¸ªåŸºæœ¬çš„æœºåˆ¶æ¥è§£å†³â€”â€”</p><h4 id="å¯¹è±¡é”"><a href="#å¯¹è±¡é”" class="headerlink" title="å¯¹è±¡é”"></a>å¯¹è±¡é”</h4><p>åœ¨JVMä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­è¢«åˆ†æˆäº†ä¸‰ä¸ªåŒºåŸŸâ€”â€”</p><ol><li><strong>å¯¹è±¡å¤´</strong><ol><li><code>Mark_word(æ ‡è®°å­—æ®µ)</code>ï¼Œé»˜è®¤å­˜å‚¨<code>å¯¹è±¡çš„é”æ ‡å¿—ä½</code>ï¼Œhashcode,åˆ†ä»£å¹´é¾„ã€‚å®ƒä¼šæ ¹æ®é”çš„çŠ¶æ€å¤ç”¨å®ƒçš„å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿è¡ŒæœŸé—´Mark_wordä¸­çš„ä¿¡æ¯ä¼šéšç€é”å¯¹è±¡çš„å˜åŒ–è€Œå˜åŒ–ï¼›</li><li><code>Klass_point(ç±»å‹æŒ‡é’ˆ)</code>ï¼šå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šå¯¹è±¡å±äºå“ªä¸ªç±»ã€‚</li></ol></li><li><strong>å®ä¾‹ä¿¡æ¯</strong>ï¼šä¸»è¦å­˜æ”¾ç±»çš„æ•°æ®ä¿¡æ¯ï¼Œçˆ¶ç±»çš„æ•°æ®ä¿¡æ¯ï¼›</li><li><strong>å¯¹é½å¡«å……</strong>ï¼šå³ä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½ä¼šè¢«æŒ‰ä½å¡«å……ï¼Œå³ä¾¿æ˜¯ç©ºå¯¹è±¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li></ol><p>çº¿ç¨‹æ‹¥æœ‰å¯¹è±¡çš„é”æ ‡å¿—ä½ï¼Œå³è¡¨ç¤ºçº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å¯¹è±¡ã€‚ä»è€Œå¯ä»¥é€šè¿‡å¯¹å¯¹è±¡é”çš„æ“ä½œæ¥å®ç°å¹¶å‘å®‰å…¨ã€‚</p><h4 id="æ‰§è¡Œå™¨"><a href="#æ‰§è¡Œå™¨" class="headerlink" title="æ‰§è¡Œå™¨"></a>æ‰§è¡Œå™¨</h4><p>å¦‚æœç¨‹åºå‘˜ç›´æ¥ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œæœªå…èˆæœ¬é€æœ«ï¼Œå¤ªè¿‡ç¹çã€‚javaä¸ºæˆ‘ä»¬æä¾›äº†å¤§ç®¡å®¶â€”â€”<strong><em>Executor</em></strong>ã€‚</p><p><strong>Exectorä¼šå°†çº¿ç¨‹çš„å¼€å¯ä¸è¿è¡Œæœºåˆ¶åˆ†ç¦»å¼€</strong>ï¼Œç®€åŒ–ç¨‹åºå‘˜çš„æ“ä½œã€‚å®ƒæ˜¯æ˜¯JUCåŒ…ä¸‹çš„ä¸€ä¸ªç±»ï¼Œæä¾›äº†ä¸‰ç§å¯é€‰çš„Executor:</p><ul><li><code>CachedThreadPool</code>ï¼šä¸€ä¸ªä»»åŠ¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼›</li><li><code>FixedThreadPool</code>ï¼šæ‰€æœ‰ä»»åŠ¡åªèƒ½ä½¿â½¤ç”¨å›ºå®šâ¼¤å°çš„çº¿ç¨‹ï¼›</li><li><code>SingleThreadExecutor</code>ï¼šç›¸å½“äºå¤§å°ä¸º 1 çš„ FixedThreadPoolã€‚</li></ul><p>ç®€è¦çœ‹ä¸‹å®ƒçš„ä½¿ç”¨â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ›å»ºçº¿ç¨‹æ± </span>    ExecutorService executorService<span class="token operator">=</span>Executors<span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//æ‰§è¡Œ</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>inti<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//å…³é—­æœåŠ¡</span>    executorService<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><hr><h2 id="å¤šçº¿ç¨‹â€”â€”ç•ªå¤–ç¯‡"><a href="#å¤šçº¿ç¨‹â€”â€”ç•ªå¤–ç¯‡" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”ç•ªå¤–ç¯‡"></a>å¤šçº¿ç¨‹â€”â€”ç•ªå¤–ç¯‡</h2><h3 id="1-é™æ€ä»£ç†"><a href="#1-é™æ€ä»£ç†" class="headerlink" title="1.é™æ€ä»£ç†"></a>1.é™æ€ä»£ç†</h3><blockquote><p>é¦–å…ˆï¼Œè€ƒè™‘æœ‰è¿™æ ·ä¸€ç§éœ€æ±‚ï¼Œé¡¹ç›®ç»ç†è¦æ±‚åœ¨æ‰€æœ‰ç±»çš„æ¯ä¸€ä¸ªæ–¹æ³•è¿è¡Œå‰ååŠ ä¸Šæ—¥å¿—ï¼Œä½†åˆè¦æ±‚ä¸èƒ½å¯¹å·²æœ‰ä»£ç åšæ”¹åŠ¨ï¼Œæ€æ ·è§£å†³å‘¢ï¼Ÿ</p></blockquote><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œè®©å®ƒå’Œç›®æ ‡å¯¹è±¡å®ç°åŒæ ·çš„æ¥å£ï¼Œè¿™æ ·å°±å¯ä»¥å€Ÿä»£ç†å¯¹è±¡ä¹‹æ‰‹è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•äº†ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºè¿™ä¸ªä»£ç†å¯¹è±¡åŠ ä¸Šæ—¥å¿—æ–¹æ³•ï¼Œé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p><p>ä»è¿™æ®µæè¿°ä¸­ï¼Œæˆ‘ä»¬è¯•ç€æå–é™æ€ä»£ç†çš„å…³é”®ï¼š</p><ul><li><strong>ä»£ç†å¯¹è±¡=ç›®æ ‡å¯¹è±¡+åŠ å¼ºä»£ç </strong>ï¼›</li><li>ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡éœ€è¦<code>å®ç°åŒä¸€ä¸ªæ¥å£</code>ï¼›</li></ul><p>é‚£å°ä¼™ä¼´ä¹Ÿè®¸ä¼šå›°æƒ‘ï¼Œå’‹ä»¬ä¸æ˜¯åœ¨å­¦ä¹ å¤šçº¿ç¨‹å—ï¼Œéš¾é“å¤šçº¿ç¨‹ä¸­ä½¿ç”¨åˆ°äº†é™æ€ä»£ç†ï¼Ÿæ²¡é”™ï¼ŒThreadç±»å°±å¯ä»¥çœ‹åšæ˜¯Runnableæ¥å£å®ç°ç±»çš„é™æ€ä»£ç†ï¼Œé€šè¿‡ä¸‹é¢çš„å°ä¾‹å­æˆ‘ä»¬æ¥å·©å›ºä¸€ä¸‹â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StaticProxy</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ä½¿ç”¨lambdaæ¥å¼€å¯çº¿ç¨‹</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘çˆ±ä½ "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ç±»æ¯”ç€çœ‹ï¼Œè¯´æ˜çº¿ç¨‹åº•å±‚ä½¿ç”¨çš„å³æ˜¯é™æ€ä»£ç†</span>        <span class="token keyword">new</span> <span class="token class-name">WeddingCompany</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">You</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">happyMarry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å°†çœŸå®å¯¹è±¡ä½œä¸ºä»£ç†å¯¹è±¡çš„å‚æ•°ä¼ å…¥</span>        WeddingCompany weddingCompany <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeddingCompany</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">You</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        weddingCompany<span class="token punctuation">.</span><span class="token function">happyMarry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** *éƒ½éœ€è¦å®ç°çš„é¡¶å±‚æ¥å£ */</span><span class="token keyword">interface</span> <span class="token class-name">Marry</span><span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">happyMarry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * çœŸå®è§’è‰² */</span><span class="token keyword">class</span> <span class="token class-name">You</span> <span class="token keyword">implements</span> <span class="token class-name">Marry</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">happyMarry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ´æˆ¿èŠ±çƒ›å¤œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * ä»£ç†è§’è‰²ï¼Œä»£ç†è§’è‰²èƒ½åšçš„äº‹æƒ…æ›´å¤š */</span><span class="token keyword">class</span> <span class="token class-name">WeddingCompany</span> <span class="token keyword">implements</span> <span class="token class-name">Marry</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//è¿™é‡Œæ˜¯å…³é”®</span>    <span class="token keyword">private</span> Marry target<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">WeddingCompany</span><span class="token punctuation">(</span>Marry target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">happyMarry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">happyMarry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¿™é‡Œæ˜¯çœŸå®å¯¹è±¡åšçš„äº‹æƒ…</span>        <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»“å©šä¹‹åï¼Œæ”¶å°¾æ¬¾"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»“å©šä¹‹å‰ï¼Œå¸ƒç½®ç°åœº"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-Lambdaè¡¨è¾¾å¼"><a href="#2-Lambdaè¡¨è¾¾å¼" class="headerlink" title="2.Lambdaè¡¨è¾¾å¼"></a>2.Lambdaè¡¨è¾¾å¼</h3><p>é¦–å…ˆé€šè¿‡ä¸‹é¢çš„å°ä¾‹å­äº†è§£ä¸‹lambdaçš„å†™æ³•â€”â€”</p><pre class=" language-java"><code class="language-java">ExecutorService service <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">ExecutorService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è‚šå­æœ‰ç‚¹é¥¿"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>è€Œè¿™é‡Œçš„æ–¹æ³•å‚æ•°å®é™…ä¸Šåº”è¯¥æ˜¯å®ç°Runnableæ¥å£çš„ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>lambdaè¡¨è¾¾å¼æœ¬èº«å°±æ˜¯æ¥å£çš„å®ç°</strong>ã€‚å®ƒ<code>æ‰©å±•äº†åŒ¿åå†…éƒ¨ç±»</code>ï¼Œä½¿å¾—å†™æ³•æ›´åŠ ç®€æ´é«˜æ•ˆã€‚</p><p>é€šè¿‡ä¸‹é¢çš„å®ä¾‹æ¥çœ‹ä¸‹lambdaçš„æˆé•¿å†ç¨‹ï¼š</p><pre class=" language-java"><code class="language-java"></code></pre><hr><h3 id="3-javaå†…å­˜æ¨¡å‹"><a href="#3-javaå†…å­˜æ¨¡å‹" class="headerlink" title="3.javaå†…å­˜æ¨¡å‹"></a>3.javaå†…å­˜æ¨¡å‹</h3><p>javaè¯•å›¾å±è”½ä¸åŒç¡¬ä»¶ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œæ¥å®ç°javaç¨‹åºåœ¨å„ç§å¹³å°éƒ½èƒ½è¿è¡Œçš„ä¸€è‡´æ€§æ•°æ®è®¿é—®ã€‚</p><h4 id="å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜"><a href="#å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜" class="headerlink" title="å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜"></a>å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜</h4><p>æˆ‘ä»¬çŸ¥é“ï¼ŒCPUåªè´Ÿè´£è¿ç®—ï¼Œå®ƒå°†å†…å­˜ä¸­çš„æ•°æ®è¯»å–åˆ°å¯„å­˜å™¨ä¸­ï¼ŒCPUå†å–å¾—å¯„å­˜å™¨çš„åœ°å€ï¼Œæœ€åæ‰§è¡ŒæŒ‡ä»¤ã€‚ä½†å¯„å­˜å™¨(<code>CPUçš„é›¶çº§ç¼“å­˜</code>)çš„è¯»å†™é€Ÿåº¦æ¯”å†…å­˜çš„è¯»å†™é€Ÿåº¦å¿«å¾ˆå¤šä¸ªæ•°é‡çº§ï¼Œä¸ºäº†ç¼“å†²è¿™ç§é€Ÿåº¦å·®ï¼Œå¼•å…¥äº†<code>é«˜çº§ç¼“å­˜</code>ã€‚</p><p>ä½†åŠ å…¥é«˜çº§ç¼“å­˜ä»¥åï¼Œåˆå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼š<strong>ç¼“å­˜ä¸€è‡´æ€§</strong>ã€‚å¦‚æœå¤šä¸ªç¼“å­˜å…±äº«ä¸€ä¸ªä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆå¤šä¸ªç¼“å­˜ä¸­çš„æ•°æ®å¯èƒ½ä¸ä¸€æ ·ã€‚éœ€è¦å¼•å…¥åè®®æ¥è§„èŒƒä¸€è‡´æ€§é—®é¢˜ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327221223729.png" alt="image-20210327221223729"></p><p>å·¥ä½œå†…å­˜é€šå¸¸å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜å’Œå¯„å­˜å™¨ä¸­ï¼Œåœ¨å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†<code>ä¸»å†…å­˜å˜é‡çš„æ‹·è´</code>ã€‚</p><h4 id="å†…å­˜é—´çš„äº¤äº’æ“ä½œ"><a href="#å†…å­˜é—´çš„äº¤äº’æ“ä½œ" class="headerlink" title="å†…å­˜é—´çš„äº¤äº’æ“ä½œ"></a>å†…å­˜é—´çš„äº¤äº’æ“ä½œ</h4><p>javaå†…å­˜æ¨¡å‹å®šä¹‰äº†8ä¸ªæ“ä½œæ¥å®Œæˆä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327221528229.png" alt="image-20210327221528229"></p><ul><li><code>read</code>ï¼šæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°å·¥ä½œå†…å­˜ä¸­</li><li><code>load</code>ï¼šåœ¨ read ä¹‹åæ‰§ï¨ˆï¼ŒæŠŠ read å¾—åˆ°çš„å€¼æ”¾â¼Šå·¥ä½œå†…å­˜çš„å˜ï¥¾å‰¯æœ¬ä¸­</li><li><code>use</code>ï¼šæŠŠå·¥ä½œå†…å­˜ä¸­â¼€ä¸ªå˜ï¥¾çš„å€¼ä¼ é€’ç»™æ‰§ï¨ˆå¼•æ“</li><li><code>assign</code>ï¼šæŠŠä¸€ä¸ªä»æ‰§ï¨ˆå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜çš„å˜é‡</li><li><code>store</code>ï¼šæŠŠå·¥ä½œå†…å­˜çš„ä¸€ä¸ªå˜ï¥¾çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­</li><li><code>write</code>ï¼šåœ¨ store ä¹‹åæ‰§ï¨ˆï¼ŒæŠŠ store å¾—åˆ°çš„å€¼æ”¾å…¥ä¸»å†…å­˜çš„å˜é‡ä¸­</li><li><code>lock</code>ï¼šä½œâ½¤ç”¨äºä¸»å†…å­˜çš„å˜é‡</li></ul><h4 id="å†…å­˜æ¨¡å‹çš„ä¸‰å¤§ç‰¹æ€§"><a href="#å†…å­˜æ¨¡å‹çš„ä¸‰å¤§ç‰¹æ€§" class="headerlink" title="å†…å­˜æ¨¡å‹çš„ä¸‰å¤§ç‰¹æ€§"></a>å†…å­˜æ¨¡å‹çš„ä¸‰å¤§ç‰¹æ€§</h4><ol><li><p><strong>åŸå­æ€§ï¼š</strong></p><p>ä¸Šé¢æˆ‘ä»¬æåˆ°äº†8ç§å¯¹å†…å­˜çš„æ“ä½œï¼Œè¿™äº›æ“ä½œä½œç”¨çš„å˜é‡åœ¨è¢«volatileä¿®é¥°æ—¶éƒ½æ˜¯åŸå­æ€§çš„ã€‚ä½†<code>å†…å­˜æ¨¡å‹å…è®¸javaè™šæ‹Ÿæœºå°†æ²¡æœ‰è¢«volatileä¿®é¥°çš„64ä½æ•°æ®ï¼Œå³long,doubleï¼Œåˆ’åˆ†ä¸ºä¸¤ä¸ª32ä½çš„æ•°æ®æ‰§è¡Œ</code>ï¼Œå³åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ“ä½œä¸æ˜¯åŸå­æ€§çš„ã€‚</p><p>ä½†intå‹çš„æ•°æ®å°±æ˜¯åŸå­æ€§çš„å—ï¼Ÿä¹Ÿä¸å°½ç„¶ï¼Œå¯¹æ•°æ®çš„æ“ä½œé€šå¸¸ä¸æ˜¯å•ä¸€çš„æ“ä½œå¯ä»¥å®Œæˆçš„ï¼Œç®€è¦çš„è¯´ï¼Œcount++å°±åˆ†ä¸ºread,assign,writeä¸‰æ­¥ã€‚è¿™ä¸‰æ­¥æ•´åˆèµ·æ¥å¹¶ä¸æ˜¯åŸå­æ€§çš„ã€‚</p><p>é‚£å¦‚ä½•ä¿è¯åŸå­æ€§å‘¢ï¼Ÿ<code>ç›´è§‚çš„æ–¹å¼å°±æ˜¯åŠ é”</code>å’¯ï¼Œå°†count++çš„ä»£ç å—ç”¨synchronizedä¿®é¥°ã€‚è¿˜æœ‰å…¶ä»–åŸºäºåŒæ­¥æ¡†æ¶çš„æ–¹å¼å—ï¼Ÿ</p><p><code>AtomicInteger</code>å°±æ˜¯JUCæ¡†æ¶ä¸‹çš„è¿™æ ·ä¸€ç§æ–¹å¼ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210327223155578.png" alt="image-20210327223155578"></p><p>æ˜¾ç„¶ï¼Œå®ƒåº”ç”¨äº†<code>CASçš„è‡ªæ—‹æ€æƒ³</code>ã€‚</p></li><li><p><strong>å¯è§æ€§ï¼š</strong></p><p>å¯è§æ€§æŒ‡çš„æ˜¯<code>å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†ä¸»å†…å­˜ä¸­çš„å€¼ä»¥åï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹åˆ»è·çŸ¥è¿™ä¸ªä¿®æ”¹</code>ï¼Œjavaå†…å­˜æ¨¡å‹æ˜¯é€šè¿‡å°†å˜é‡ä¿®æ”¹åçš„å€¼åŒæ­¥å›ä¸»å†…å­˜ï¼Œåœ¨å˜é‡è¯»å–ä¹‹å‰åˆ·æ–°ä¸»å†…å­˜ä¸­çš„å€¼æ¥å®ç°çš„ã€‚</p><p>ä¸»è¦æœ‰ä¸‰ç§å®ç°å¯è§æ€§çš„æ–¹å¼ï¼š</p><ul><li><code>volatile</code></li><li><code>synchronized</code>,å¯¹ä¸€ä¸ªå˜é‡ä½¿ç”¨unlockä¹‹å‰ï¼Œå¿…é¡»å°†å˜é‡çš„å€¼åŒæ­¥å›ä¸»å†…å­˜ï¼›</li><li><code>final</code>,è¢«finalä¿®é¥°çš„å­—æ®µï¼Œåœ¨åˆå§‹åŒ–ä¹‹åï¼Œå¦‚æœæ²¡æœ‰å‘ç”Ÿthisé€ƒé€¸ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹å°±èƒ½çœ‹è§finalå­—æ®µçš„å€¼ã€‚</li></ul></li><li><p><strong>æœ‰åºæ€§ï¼š</strong></p><p>æœ‰åºæ€§æŒ‡çš„æ˜¯ï¼š<code>åœ¨æœ¬çº¿ç¨‹ä¸­è§‚å¯Ÿï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰åºçš„ã€‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æ— åºçš„</code>ã€‚</p><p>æœ¬çº¿ç¨‹æœ‰åºè¿˜å¥½ç†è§£ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ— åºå°±æœ‰ç‚¹æ‘¸ä¸ç€å¤´è„‘äº†ã€‚</p></li></ol><blockquote><p>æ— åºæ˜¯å› ä¸ºå‘ç”Ÿäº†<code>æŒ‡ä»¤é‡æ’åº</code>ï¼Œåœ¨javaå†…å­˜æ¨¡å‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œé‡æ’åºçš„è¿‡ç¨‹ä¸ä¼šå½±å“å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚</p><p>volatileå…³é”®å­—é€šè¿‡æ·»åŠ <code>å†…å­˜å±éšœ</code>çš„æ–¹å¼æ¥ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œå³é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤æ”¾åœ¨å†…å­˜å±éšœä¹‹å‰ã€‚</p><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>sychronized</code>æ¥ä¿è¯æœ‰åºæ€§ã€‚</p></blockquote><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><hr><h2 id="å¤šçº¿ç¨‹â€”â€”ç™½é“¶æ—¶ä»£"><a href="#å¤šçº¿ç¨‹â€”â€”ç™½é“¶æ—¶ä»£" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”ç™½é“¶æ—¶ä»£"></a>å¤šçº¿ç¨‹â€”â€”ç™½é“¶æ—¶ä»£</h2><h3 id="1-å¤šçº¿ç¨‹ä¸å®‰å…¨çš„æ¡ˆä¾‹"><a href="#1-å¤šçº¿ç¨‹ä¸å®‰å…¨çš„æ¡ˆä¾‹" class="headerlink" title="1.å¤šçº¿ç¨‹ä¸å®‰å…¨çš„æ¡ˆä¾‹"></a>1.å¤šçº¿ç¨‹ä¸å®‰å…¨çš„æ¡ˆä¾‹</h3><p>å¤šä¸ªçº¿ç¨‹åœ¨è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶æœ‰å¯èƒ½å‡ºç°å¹¶å‘é”™è¯¯ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥æ¼”ç¤ºå¹¶å‘é”™è¯¯ï¼Œå¹¶å€Ÿæ­¤åˆ†æå¹¶å‘é”™è¯¯å‡ºç°çš„åŸå› åŠè§£å†³æ–¹å¼â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> synchonized<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMakeup</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Thread thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Makeup</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"ç°è‡å‡‰"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Makeup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"ç™½é›ªå…¬ä¸»"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">LipStick</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Mirror</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * ä¸¤ä¸ªå¥³å­©åˆ†åˆ«æŒæœ‰é•œå­ä¸å£çº¢çš„é”ï¼Œç„¶åéƒ½å»ç­‰å¾…å¯¹æ–¹çš„èµ„æº */</span><span class="token keyword">class</span> <span class="token class-name">Makeup</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> choice<span class="token punctuation">;</span>    String person<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//staticè¡¨ç¤ºåªæœ‰ä¸€ä»½</span>    <span class="token keyword">static</span> LipStick lipStick <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LipStick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> Mirror mirror <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mirror</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Makeup</span><span class="token punctuation">(</span><span class="token keyword">int</span> choice<span class="token punctuation">,</span> String person<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>choice <span class="token operator">=</span> choice<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>person <span class="token operator">=</span> person<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token function">makeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//äº’ç›¸è¯·æ±‚å¯¹æ–¹æ‰€æŒæœ‰çš„çš„é”å°±ä¼šå¯¼è‡´æ­»é”ï¼Œæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼šäº’æ–¥ï¼Œè¯·æ±‚ä¸ä¿æŒï¼Œä¸å¯å‰¥å¤ºï¼Œå¾ªç¯ç­‰å¾…ï¼Œ</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lipStick<span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ­£åœ¨ä½¿ç”¨å£çº¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸€ç§’åè¦å»è·å¾—é•œå­</span>            <span class="token punctuation">}</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>mirror<span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ­£åœ¨ä½¿ç”¨é•œå­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">/**æ­»é”â€”â€”             * synchronized (lipStick){                  System.out.println(Thread.currentThread().getName()+"æ­£åœ¨ä½¿ç”¨å£çº¢");                     synchronized (mirror){                       Thread.sleep(1000);//ä¸€ç§’åè¦å»è·å¾—é•œå­                       System.out.println(Thread.currentThread().getName()+"æ­£åœ¨ä½¿ç”¨é•œå­");                     }             }             *             */</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>mirror<span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ­£åœ¨ä½¿ç”¨é•œå­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//2ç§’åè¦å»è·å¾—å£çº¢</span>            <span class="token punctuation">}</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lipStick<span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ­£åœ¨ä½¿ç”¨å£çº¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å‡å¦‚<code>åŒæ–¹éƒ½åœ¨æŒæœ‰è‡ªå·±é”çš„å‰æä¸‹ï¼Œè¯·æ±‚å¯¹æ–¹çš„é”</code>æ—¶ã€‚å¯èƒ½å¯¼è‡´å¹¶å‘é”™è¯¯çš„è¡¨ç°ä¹‹ä¸€â€”â€”æ­»é”ï¼Œè¿™é‡Œå†æ¥å›é¡¾ä¸€ä¸‹å½¢æˆæ­»é”çš„å¿…è¦æ¡ä»¶â€”â€”</p><ul><li><code>äº’æ–¥ï¼š</code>ä¸€ä¸ªèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼›</li><li><code>å¾ªç¯ç­‰å¾…ï¼š</code>æ­»é”çš„çŠ¶å†µä¸ä¼šå› ä¸ºæ—¶é—´æ”¹å˜è€Œæ”¹å–„ï¼›</li><li><code>è¯·æ±‚ä¸æŒæœ‰ï¼š</code>åœ¨æ²¡æœ‰è·å¾—è¯·æ±‚é”çš„å‰æä¸‹ï¼Œä¸ä¼šé‡Šæ”¾è‡ªå·±æŒæœ‰çš„é”ã€‚</li><li><code>ä¸å¯å‰¥å¤ºï¼š</code>çº¿ç¨‹åªèƒ½ä¸»åŠ¨è®©å‡ºèµ„æºï¼Œä¸èƒ½å¼ºå–ï¼›</li></ul><hr><p>é‚£è¿˜æœ‰ä»€ä¹ˆåŸå› ä¼šå¯¼è‡´å¹¶å‘é”™è¯¯å‘¢ï¼Ÿå¹¶å‘é”™è¯¯çš„è¡¨ç°æœ‰è¿™æ ·å‡ ç§æƒ…å†µâ€”â€”</p><ol><li>è®¿é—®<strong>å…±äº«å˜é‡</strong>å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼›</li><li>CPUè¿˜æ²¡æœ‰å®Œæˆæ‰€æœ‰çº¿ç¨‹çš„è°ƒåº¦ï¼Œçº¿ç¨‹å°±å·²ç»æå‰ç»“æŸäº†ï¼›</li></ol><p>é‚£ä¹ˆï¼Œé’ˆå¯¹å¹¶å‘é”™è¯¯çš„åŸå› ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è§£å†³å¹¶å‘é”™è¯¯çš„ç­–ç•¥â€”â€”</p><ol><li><strong>äº’æ–¥åŒæ­¥</strong>ï¼šå¯¹å‘ç”Ÿæ›´æ–°çš„æ•°æ®åŠ é”ï¼Œå³javaäº’æ–¥åŒæ­¥çš„ä¸¤ç§é”æœºåˆ¶ï¼šsynchronizedä¸Lock;</li><li><strong>final</strong>: ç›´æ¥å°†å˜é‡å£°æ˜ä¸º ä¸å¯å˜çš„ï¼Œå°±ä¸å­˜åœ¨å˜é‡äº†ï¼Œè¿™æ³¢æ›²çº¿è§£å†³é—®é¢˜ï¼›</li><li><strong>éé˜»å¡åŒæ­¥</strong>ï¼šCASæœºåˆ¶</li><li><strong>ä¸åŒæ­¥æœºåˆ¶</strong>ï¼šéœ€è¦åŒæ­¥æ˜¯å› ä¸ºå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªå˜é‡ï¼Œé‚£è¦å®ç°ä¸åŒæ­¥ï¼Œå°±è®©æ¯ä¸ªçº¿ç¨‹ç‹¬äº«ä¸€ä»½å˜é‡å°±å¥½å’¯ï¼Œé€šå¸¸è§£å†³æ–¹å¼æœ‰è¿™ä¹ˆå‡ ç§ï¼š<ol><li><code>æ ˆå°é—­</code></li><li><code>çº¿ç¨‹æœ¬åœ°å­˜å‚¨</code></li><li><code>å¯é‡å…¥ä»£ç </code></li></ol></li></ol><p>è¿™é‡Œæˆ‘ä»¬æš‚ä¸”åªä»‹ç»äº’æ–¥åŒæ­¥çš„è§£å†³æ–¹å¼ï¼Œå…¶ä»–ç­–ç•¥åœ¨é»„é‡‘æ—¶ä»£ä¸­ä¼šé‡ç‚¹æè¿°ï¼Œç°åœ¨æ··ä¸ªçœ¼ç†Ÿ~</p><hr><h3 id="2-synchronized"><a href="#2-synchronized" class="headerlink" title="2.synchronized"></a>2.synchronized</h3><h4 id="1-synchronizedçš„ä½¿ç”¨åœºæ™¯"><a href="#1-synchronizedçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.synchronizedçš„ä½¿ç”¨åœºæ™¯"></a>1.synchronizedçš„ä½¿ç”¨åœºæ™¯</h4><ul><li><p>ä¿®é¥°<code>ä»£ç å—</code></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328100335007.png" alt="image-20210328100335007"></p></li><li><p>ä¿®é¥°<code>å®ä¾‹æ–¹æ³•</code>ï¼Œä¹Ÿå°±æ˜¯å¯¹thiså¯¹è±¡åŠ é”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328100502317.png" alt="image-20210328100502317"></p></li><li><p>ä¿®é¥°<code>é™æ€æ–¹æ³•</code>ï¼Œå³å¯¹classå¯¹è±¡åŠ é”</p><p>â€‹    <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328100915411.png" alt="image-20210328100915411"></p></li></ul><h4 id="2-synchronizedçš„åŸºæœ¬æœºåˆ¶"><a href="#2-synchronizedçš„åŸºæœ¬æœºåˆ¶" class="headerlink" title="2.synchronizedçš„åŸºæœ¬æœºåˆ¶"></a>2.synchronizedçš„åŸºæœ¬æœºåˆ¶</h4><p>æˆ‘ä»¬ä¹‹å‰è°ˆåˆ°javaå†…å­˜æ¨¡å‹æœ‰ä¸‰å¤§ç‰¹æ€§ï¼š<code>æœ‰åºæ€§ï¼Œå¯è§æ€§ï¼ŒåŸå­æ€§</code>ã€‚è€Œsynchronizedä½œç”¨äºå­˜å‚¨åœ¨å†…å­˜ä¸­çš„å˜é‡æˆ–ä»£ç å—ä¸Šï¼Œå®ƒé™¤äº†æ‹¥æœ‰å†…å­˜æ¨¡å‹çš„ä¸‰å¤§ç‰¹æ€§å¤–ï¼Œè¿˜æœ‰<code>å¯é‡å…¥æ€§</code>ï¼Œè°ˆåˆ°å¯é‡å…¥æ€§é¦–å…ˆè¦çŸ¥é“synchronizedæ˜¯å¦‚ä½•å®ç°åŠ é”å’Œè§£é”çš„ã€‚</p><h5 id="åŠ é”ä¸è§£é”"><a href="#åŠ é”ä¸è§£é”" class="headerlink" title="åŠ é”ä¸è§£é”"></a>åŠ é”ä¸è§£é”</h5><p>æˆ‘ä»¬å°†<strong>classæ–‡ä»¶åç¼–è¯‘</strong>å¯ä»¥å¾—åˆ°ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328101501442.png" alt="image-20210328101501442"></p><p>å¯¹åº”æ¥çœ‹ï¼ŒåŠ é”å’Œè§£é”æ˜¾ç„¶æ˜¯é€šè¿‡<strong>monitorenterå’Œmonitorexit</strong>å®ç°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´è·å–å¯¹è±¡çš„é”ï¼Œå®è´¨ä¸Šå°±æ˜¯è·å–å¯¹è±¡çš„monitorï¼Œå³<strong>ç›‘è§†å™¨</strong>ï¼Œé‚£å¦‚ä½•æ¥æ ‡è¯†çº¿ç¨‹æ‹¥æœ‰è¯¥ç›‘è§†å™¨å‘¢ï¼Ÿsynchronizedåœ¨é”å¯¹è±¡æ—¶ä¼šè·å¾—ä¸€ä¸ª<strong>è®¡æ•°å™¨</strong>ï¼Œç”¨æ¥<strong>æ ‡è¯†çº¿ç¨‹è·å¾—é”çš„æ¬¡æ•°</strong>ï¼Œçº¿ç¨‹æ¯é‡å…¥ä¸€æ¬¡é”ï¼Œè®¡æ•°å™¨å°±ä¼šåŠ 1ï¼Œå¯¹åº”çš„çº¿ç¨‹æ¯è°ƒç”¨monitorexité€€å‡ºä¸€æ¬¡é”ï¼Œè®¡æ•°å™¨å°±ä¼šå‡1.å¦‚æœè®¡æ•°å™¨å‡ä¸º0ï¼Œåˆ™è¯´æ˜é”å·²è¢«é‡Šæ”¾ã€‚</p><p>è¿™æ˜¯çº¿ç¨‹è·å¾—é”çš„æƒ…å†µï¼Œä½†å‡å¦‚çº¿ç¨‹é˜»å¡äº†å‘¢â€”â€”</p><p><img src="https://pdai.tech/_images/thread/java-thread-x-key-schronized-2.png" alt="img"></p><p>æ˜¾ç„¶ï¼Œå¦‚æœè·å–å¤±è´¥ï¼Œçº¿ç¨‹å°±ä¼šè¿›å…¥<strong>åŒæ­¥é˜Ÿåˆ—</strong>ï¼ŒçŠ¶æ€å˜æ›´ä¸º<strong>é˜»å¡æ€</strong>ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ä»¥åï¼ŒåŒæ­¥é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ‰æœ‰æœºä¼šè·å¾—é”ã€‚</p><h5 id="å¯é‡å…¥æ€§åŸç†"><a href="#å¯é‡å…¥æ€§åŸç†" class="headerlink" title="å¯é‡å…¥æ€§åŸç†"></a>å¯é‡å…¥æ€§åŸç†</h5><p>ç°åœ¨æ¥åˆ†æå¯é‡å…¥æ€§ï¼Œå°±å˜å¾—éå¸¸å‹å¥½äº†ã€‚çº¿ç¨‹åœ¨é‡å…¥æ—¶ï¼Œ<code>ä¼šé¦–å…ˆåˆ¤æ–­è®¡æ•°å™¨çš„å€¼</code>ï¼Œå¦‚æœè®¡æ•°å™¨ä¸ä¸º0ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹æ‹¥æœ‰é”ï¼Œåˆ™ç›´æ¥è¿›å…¥ï¼Œä¸éœ€è¦åå¤è·å–é”ã€‚</p><p>å‘ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶ä¹‹ä¸€å³ä¸º<code>å¾ªç¯ç­‰å¾…</code>ï¼Œè€Œå¯é‡å…¥æ€§æ‰“ç ´äº†è¿™ä¸€åŸå› ï¼Œå¯è§<code>å¯é‡å…¥æ€§èƒ½å¤Ÿæœ‰æ•ˆé˜²æ­¢æ­»é”çš„å‡ºç°</code>ã€‚</p><h5 id="åŒæ­¥æ–¹æ³•çš„åº•å±‚å®ç°"><a href="#åŒæ­¥æ–¹æ³•çš„åº•å±‚å®ç°" class="headerlink" title="åŒæ­¥æ–¹æ³•çš„åº•å±‚å®ç°"></a>åŒæ­¥æ–¹æ³•çš„åº•å±‚å®ç°</h5><p>åŒæ­¥æ–¹æ³•åŒºåˆ«äºä»£ç å—ï¼Œå®ƒä¼šé¦–å…ˆåˆ¤æ–­æ ‡å¿—ä½<strong>ACC_SYNCHRONIZED</strong>,å¦‚æœå­˜åœ¨è¯¥æ ‡å¿—ä½ï¼Œæ‰ä¼šå»éšå¼çš„è°ƒç”¨monitorenterä¸monitorexitæŒ‡ä»¤ã€‚å³æœ€ç»ˆéƒ½å½’äºmonitorå¯¹è±¡ã€‚</p><p>æˆ‘ä»¬æ‰€ç†Ÿè¯†çš„é”å‡çº§ï¼Œæ— éæ˜¯è°ƒç”¨äº†<strong>ObjectMonitorå¯¹è±¡ä¸åŒçš„å®ç°</strong>ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå†è°ƒç”¨æ›´é«˜çº§çš„å®ç°å³å¯ã€‚</p><h5 id="é‡é‡é”"><a href="#é‡é‡é”" class="headerlink" title="é‡é‡é”"></a>é‡é‡é”</h5><p>åœ¨çœ‹ObjectMonitorçš„æºç æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å†…æ ¸å‡½æ•°çš„å­˜åœ¨ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”<strong>park()å’Œunpark()</strong>,è€Œsynchronizedæ˜¯JVMç®¡ç†çš„ï¼ŒJVMæ˜¯åº”ç”¨ç¨‹åºï¼Œå¤„äºç”¨æˆ·æ€ï¼Œè€Œå†…æ ¸å‡½æ•°åœ¨å†…æ ¸æ€ï¼Œ<code>åˆ‡æ¢çš„è¿‡ç¨‹è€—è´¹èµ„æºè¾ƒä½ï¼Œå› æ­¤å¾—åé‡é‡é”</code>ã€‚</p><p>å†æ¥ç®€å•å›é¡¾ä¸‹å†…æ ¸æ€ä¸ç”¨æˆ·æ€çš„åˆ‡æ¢â€”â€”</p><ol><li>ç”¨æˆ·æ€å°†æ•°æ®å­˜å‚¨åœ¨<code>å¯„å­˜å™¨</code>ä¸­ï¼Œå¹¶ä¿å­˜å †æ ˆä¿¡æ¯ï¼›</li><li>é€šè¿‡<code>ç³»ç»Ÿè°ƒç”¨</code>çš„æ–¹å¼ï¼Œå³é€šè¿‡<code>å¤–ä¸­æ–­</code>è¿›å…¥å†…æ ¸æ€ï¼›</li><li><code>CPUå–æŒ‡æ‰§è¡Œ</code>ï¼Œå³è·³è½¬åˆ°æŒ‡å®šçš„å†…å­˜ä½ç½®å¤„æ‰§è¡ŒæŒ‡ä»¤ï¼›</li><li><code>è¯»å–å¯„å­˜å™¨ä¸­çš„å‚æ•°</code>ï¼Œç»´æŠ¤å†…æ ¸æ ˆçš„å †æ ˆä¿¡æ¯ï¼›</li><li>CPU<code>é‡ç½®æ“ä½œç³»ç»Ÿä¸ºå†…æ ¸æ€</code>ã€‚</li></ol><h4 id="JVMä¸­é”çš„ä¼˜åŒ–"><a href="#JVMä¸­é”çš„ä¼˜åŒ–" class="headerlink" title="JVMä¸­é”çš„ä¼˜åŒ–"></a>JVMä¸­é”çš„ä¼˜åŒ–</h4><p>æ—¢ç„¶ç”¨æˆ·æ€ï¼Œå†…æ ¸æ€çš„åˆ‡æ¢æ˜¯ä½æ•ˆçš„ï¼Œé‚£æˆ‘ä»¬ä¸å¦‚<strong>åªåœ¨ç”¨æˆ·æ€åšæ–‡ç« </strong>ï¼Œå®˜æ–¹å¯¹é”çš„å‡çº§å³æ˜¯é€šè¿‡åŠ å‡½æ•°è°ƒç”¨ï¼Œè€Œéç³»ç»Ÿè°ƒç”¨æ¥å®ç°çš„ã€‚é¦–å…ˆæ¦‚æ‹¬æ€§çš„çœ‹ä¸‹å›¾â€”â€”</p><img src="https://pic2.zhimg.com/v2-79edfb4b2316d76ac653732fbdb72809_r.jpg" alt="preview" style="zoom:200%;"><p>è¿™å¼ å›¾ç€å®æœ‰ç‚¹çƒ§è„‘ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸ªç®€å•çš„ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328105848069.png" alt="image-20210328105848069"></p><p>è¿™å°±æ˜¯é”å‡çº§çš„æ–¹å‘å’¯ã€‚æ˜¾ç„¶è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ï¼Œæˆ‘ä»¬æ¥æ‹†è§£å®ƒçš„æ¯ä¸€æ­¥å®ç°â€”â€”</p><ul><li><p><strong>åå‘é”</strong></p><p>ä¹‹å‰æˆ‘ä»¬æåˆ°äº†ï¼Œå¯¹è±¡å¤´æ˜¯ç”±Mark_Wordå’ŒKlass_pointç»„æˆï¼Œé”äº‰å¤ºä¹Ÿå°±æ˜¯å¯¹monitorå¯¹è±¡çš„äº‰å¤ºï¼Œ<code>ä¸€æ—¦çº¿ç¨‹æŒæœ‰è¯¥å¯¹è±¡ï¼Œæ ‡å¿—ä½ä¿®æ”¹ä¸º1ï¼Œè¿›å…¥åå‘æ¨¡å¼</code>ã€‚å¹¶å°†è¿™ä¸ªçº¿ç¨‹çš„IDè®°å½•åœ¨å¯¹è±¡çš„Mark_Wordä¸­ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹æ˜¯ä½¿ç”¨<code>CASä¹è§‚é”</code>æ¥å®ç°çš„ï¼Œå¦‚æœCASå¤±è´¥ï¼Œå³é”å¯¹è±¡è·å–å¤±è´¥ã€‚</p><p>åå‘é”åœ¨<code>jdk1.6ä¹‹åæ˜¯é»˜è®¤å¼€å¯</code>çš„ï¼Œ1.5ä¸­å…³é—­ã€‚</p><p><img src="https://pic1.zhimg.com/v2-1c56b94b3f92c3aa3884f739a5e4b42c_r.jpg" alt="preview"></p><p>å¦‚æœå¤šä¸ªçº¿ç¨‹ç«äº‰åå‘é”ï¼Œé‚£CASä¹è§‚é”æ˜¾ç„¶ä¸é‚£ä¹ˆå®ç”¨äº†ï¼Œå°±éœ€è¦ç”¨åˆ°è½»é‡çº§é”â€”â€”</p></li><li><p><strong>è½»é‡çº§é”</strong></p><p>è½»é‡çº§é”çš„å®ç°ä»è·ŸMark_Wordç›¸å…³ã€‚å¦‚æœå¯¹è±¡æ˜¯æ— é”çš„ï¼ŒJVMå°±ä¼šåœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­åˆ›å»ºä¸€ä¸ªå«åš<code>é”è®°å½•(Lock Record)çš„ç©ºé—´</code>ï¼Œç”¨æ¥å­˜å‚¨é”å¯¹è±¡<code>Mark_Wordçš„æ‹·è´</code>ã€‚æœ€åå°†æ‰€è®°å½•çš„<code>ownerå­—æ®µæŒ‡å‘å½“å‰å¯¹è±¡</code>ã€‚</p><p>JVMæ¥ä¸‹æ¥ä¼šåˆ©ç”¨CASå°è¯•å°†å¯¹è±¡åŸæœ¬çš„<code>Mark_Wordæ›´æ–°ä¸ºLock_Recordçš„æŒ‡é’ˆ</code>ã€‚å¦‚æœæ›´æ–°æˆåŠŸï¼Œæ”¹å˜é”çš„æ ‡å¿—ä½ï¼Œè¡¨æ˜å¯¹è±¡çš„é”å·²è¢«è·å–ï¼Œç„¶åæ‰§è¡Œç›¸å…³åŒæ­¥æ“ä½œã€‚</p><p>å¦‚æœå¤±è´¥äº†ï¼Œè¯´æ˜<code>é”å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰</code>ï¼Œæ­¤æ—¶å°±éœ€è¦ç»§ç»­å‡çº§é”ï¼Œä¿®æ”¹é”çš„çŠ¶æ€ï¼Œçº¿ç¨‹è¿›å…¥é˜»å¡æ€ã€‚è€Œè¿˜æœ‰ä¸€ç§å¯èƒ½ï¼Œå³å½“å‰<code>çº¿ç¨‹æœ¬èº«æŒæœ‰é”</code>ï¼Œå°±éœ€è¦åˆ¤æ–­å½“å‰å¯¹è±¡çš„Mark_Worsæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹çš„æ ˆå¸§ã€‚</p><p><img src="https://pic3.zhimg.com/v2-a932f172d1e9ac967c213429054d8522_r.jpg" alt="preview"></p></li><li><p><strong>è‡ªæ—‹é”</strong></p><p>ä¸Šé¢æåˆ°å¦‚æœä¿®æ”¹ä¸æˆåŠŸï¼Œå°±éœ€è¦å‡çº§ä¸ºè‡ªæ—‹é”ï¼Œè‡ªæ—‹é”åŒºåˆ«äºé‡é‡é”ï¼Œå®ƒå¦‚æœæ²¡æœ‰ç«äº‰åˆ°é”å¯¹è±¡ï¼Œ<code>å°±ä¼šä¸æ–­å¾ªç¯ï¼Œè¡¨ç°ä¸ºCPUç©ºè½¬ï¼Œè€Œä¸æ˜¯é˜»å¡</code>ã€‚</p><p>ç©ºè½¬çš„æ¬¡æ•°æœ€å¤šä¸º10æ¬¡ï¼Œå¦‚æœè¶…è¿‡10æ¬¡ï¼Œå°±ä¼šå‡çº§ä¸ºé‡é‡é”ã€‚</p></li></ul><hr><h4 id="é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="headerlink" title="é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"></a>é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328112941479.png" alt="image-20210328112941479"></p><hr><h3 id="3-lock"><a href="#3-lock" class="headerlink" title="3.lock"></a>3.lock</h3><p>å‰§æƒ…æ¥åˆ°äº†äº’æ–¥å¹¶å‘çš„åŠå£æ±Ÿå±±â€”â€”lockã€‚</p><p>lockæœ¬èº«æ˜¯ä¸€ä¸ª<code>æ¥å£</code>ï¼Œå®ƒæä¾›äº†<code>æ›´çµæ´»çš„é”å®šæ“ä½œ</code>ï¼Œå³<code>æ‰‹åŠ¨çš„åŠ é”ä¸é‡Šæ”¾é”</code>ã€‚å®Œå…¨<code>ä¸åŒçš„å±æ€§</code>ï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªå…³è”çš„å¯¹è±¡<code>Condition</code>ã€‚</p><p>ç‰¹åˆ«åœ°ï¼Œå®ƒçš„å®ç°ç±»<code>ReadWriteLock</code>æ”¯æŒå¯¹å…±äº«èµ„æºçš„è¯»é”ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<code>tryLockæ–¹æ³•éé˜»å¡</code>åœ°è·å¾—é”ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡å…·ä½“çš„å®ç°ç±»æ¥çœ‹lockçš„å®ç°æœºåˆ¶â€”â€”</p><h4 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328124145535.png" alt="image-20210328124145535"></p><p>ReentrantLocké¡¾åæ€ä¹‰ï¼Œå³<code>å¯é‡å…¥çš„é”</code>ã€‚å®ƒçš„å±æ€§åŒ…å«åŒæ­¥ç±»çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç»§æ‰¿è‡ªAQSï¼Œå³ä½¿ç”¨<code>åŒç«¯é˜Ÿåˆ—å®ç°çš„åŒæ­¥é˜Ÿåˆ—</code>ã€‚</p><p>åœ¨æ¥çœ‹ä¸‹å®ƒçš„å±æ€§ä¸æ–¹æ³•â€”â€”<br><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328124815007.png" alt="image-20210328124815007"></p><p>å—¯ï¼Œæä¾›äº†å¾ˆå¤šä¾¿æ·ï¼Œçµæ´»çš„æ“ä½œé”çš„æ–¹å¼ï¼Œè¿™é‡Œä¸å†ä¸€ä¸€èµ˜è¿°ï¼Œå› ä¸ºç›¸æ¯”Lockçš„APIï¼Œæ˜¾ç„¶<code>JUCåŒ…ä¸‹çš„APIæ›´é¦™</code>~</p><h3 id="4-synchronized-VS-ReentrantLock"><a href="#4-synchronized-VS-ReentrantLock" class="headerlink" title="4.synchronized VS ReentrantLock"></a>4.synchronized VS ReentrantLock</h3><ul><li><p><strong>é‡å…¥</strong></p><p><code>synchronizedå¯é‡å…¥</code>ï¼Œå› ä¸ºåŠ é”å’Œè§£é”å¯ä»¥è‡ªåŠ¨è¿›ç¨‹ï¼Œä¸å¿…æ‹…å¿ƒæœ€åé‡Šæ”¾é”ã€‚<code>ReentrantLockåŒæ ·å¯ä»¥é‡å…¥</code>ï¼Œå®ƒçš„åŠ é”å’Œé‡Šæ”¾é”éœ€è¦æ‰‹åŠ¨å®Œæˆã€‚</p></li><li><p><strong>å®ç°</strong></p><p><code>synchroniedæ˜¯JVMå®ç°çš„</code>ï¼Œè€Œ<code>ReentrantLockæ˜¯JDKå®ç°çš„</code>ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆå½’äºæ“ä½œç³»ç»Ÿå®ç°ã€‚</p></li><li><p><strong>æ€§èƒ½</strong></p><p>jdk1.6ä»¥åå¯¹synchroniedåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œã€‚å¦‚ä»Šå®ƒä»¬çš„æ€§èƒ½å¹³åˆ†ç§‹è‰²ã€‚</p></li><li><p><strong>åŠŸèƒ½</strong></p><p>ReentrantLocké”çš„ç²’åº¦å’Œçµæ´»åº¦ï¼Œéƒ½æ˜æ˜¾ä¼˜äºsynchronized.</p><p>ReentrantLockä»å®ƒå†…éƒ¨ç±»å¯ä»¥çœ‹å‡ºï¼Œå®ƒæœ‰å…¬å¹³ä¸éå…¬å¹³çš„åŒæ­¥æ–¹å¼ä¹‹åˆ†ã€‚è€Œ<code>synchronizedæ˜¯éå…¬å¹³(ä¸æŒ‰æ—¶é—´é¡ºåºè·å–é”)çš„é”ã€‚</code></p><p>ReentrantLockå¯ä»¥éé˜»å¡çš„è·å–é”ã€‚ä¸”æä¾›ä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹æœºåˆ¶ã€‚</p></li><li><p><strong>å¯è§æ€§</strong></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>synchronizedçš„å¯è§æ€§æ˜¯åŸºäºjavaå†…å­˜æ¨¡å‹çš„happens-beforeåŸåˆ™</code>ï¼Œå³åœ¨å…¶ä»–çº¿ç¨‹è¯»å–ä¸»å†…å­˜çš„å€¼å‰ï¼Œä¸»å†…å­˜ä¸€å®šå…ˆè¢«åˆ·æ–°ã€‚</p><p>è€ŒReentrantLockçš„å¯è§æ€§æ˜¯å¦‚ä½•ä¿éšœçš„å‘¢ï¼Ÿå®ƒçš„åŒæ­¥æœºåˆ¶æ˜¯åŸºäºAQSæ¡†æ¶çš„ï¼Œè€Œ<code>AQSæ¡†æ¶çš„é”æœºåˆ¶æ ¸å¿ƒåœ¨äºè¯»å†™stateå˜é‡</code>çš„å€¼ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328152434820.png" alt="image-20210328152434820"></p></li></ul><p>è¿™é‡Œç®€è¦æ’æ’­ä¸€ä¸‹ï¼švolatileæ˜¯å¦‚ä½•ä¿è¯å¯è§æ€§çš„ï¼š</p><blockquote><p>volatileåŸºäºJMM(javaå†…å­˜æ¨¡å‹)çš„å†…å­˜è¯­ä¹‰ï¼š</p><ol><li>å½“<code>å†™ä¸€ä¸ªvolatileå˜é‡</code>æ—¶ï¼ŒJMMä¼šå°†çº¿ç¨‹æœ¬åœ°å†…å­˜ä¸­çš„å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼›</li><li>å½“<code>è¯»ä¸€ä¸ªvolatileå˜é‡</code>æ—¶ï¼ŒJMMä¼šå°†çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆï¼Œç„¶åä»ä¸»å†…å­˜ä¸­è¯»å–å˜é‡ã€‚</li></ol></blockquote><p>é‚£stateå˜é‡æ—¢ç„¶ç”±volatileä¿®é¥°ï¼Œé‚£è‡ªç„¶å°±å¯ä»¥ä¿è¯å¯è§æ€§å’¯ï¼Œå½“ç„¶ï¼Œä¿è¯åŸå­æ€§æ˜¯ä¸å¯èƒ½çš„~</p><h2 id="å¤šçº¿ç¨‹â€”â€”é»„é‡‘æ—¶ä»£"><a href="#å¤šçº¿ç¨‹â€”â€”é»„é‡‘æ—¶ä»£" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”é»„é‡‘æ—¶ä»£"></a>å¤šçº¿ç¨‹â€”â€”é»„é‡‘æ—¶ä»£</h2><h3 id="1-çº¿ç¨‹æ± "><a href="#1-çº¿ç¨‹æ± " class="headerlink" title="1.çº¿ç¨‹æ± "></a>1.çº¿ç¨‹æ± </h3><h4 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± "><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± " class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± "></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± </h4><p>çº¿ç¨‹æ± çš„åŸºæœ¬æ€æƒ³æ˜¯<code>å¯¹è±¡æ± </code>ï¼Œå½“ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨å†…å­˜ä¸­å¼€è¾Ÿå‡ºä¸€å—ç©ºé—´ï¼Œæ¥æ”¾ç½®åˆå§‹åŒ–å¥½çš„çº¿ç¨‹ã€‚å½“éœ€è¦ä½¿ç”¨çº¿ç¨‹æ—¶ï¼Œå°±ä½¿ç”¨<code>çº¿ç¨‹è°ƒåº¦å™¨</code>ä»çº¿ç¨‹æ± ä¸­å–å‡ºä¸€ä¸ªçº¿ç¨‹ï¼Œå½“çº¿ç¨‹ä½¿ç”¨å®Œåï¼Œå†å°†å®ƒå½’è¿˜åˆ°çº¿ç¨‹æ± ä¸­ã€‚</p><h4 id="ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„"><a href="#ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„"></a>ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„</h4><ul><li><code>æ–¹ä¾¿ç®¡ç†çº¿ç¨‹</code>ï¼šæ¯”å¦‚å»¶æ—¶æ‰§è¡Œï¼Œå®šæ—¶å¾ªç¯ï¼›</li><li><code>æ§åˆ¶çº¿ç¨‹å¹¶å‘æ•°é‡</code>ï¼šå¦‚æœçº¿ç¨‹æ•°é‡ä¸åŠ æ§åˆ¶ï¼Œä¼šå¤§è‡´çº¿ç¨‹å ç”¨å†…å­˜è¿‡å¤šï¼Œä»è€Œå››æ­»æœºï¼›</li><li><code>å‡å°‘åˆ›å»ºï¼Œé”€æ¯å¼€é”€</code>ï¼šæ¯ä¸ªçº¿ç¨‹å¯ä»¥è¢«é‡å¤åˆ©ç”¨ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡</li></ul><h4 id="çº¿ç¨‹æ± çš„ä¸»è¦ç»„ä»¶"><a href="#çº¿ç¨‹æ± çš„ä¸»è¦ç»„ä»¶" class="headerlink" title="çº¿ç¨‹æ± çš„ä¸»è¦ç»„ä»¶"></a>çº¿ç¨‹æ± çš„ä¸»è¦ç»„ä»¶</h4><p><img src="https://user-gold-cdn.xitu.io/2018/7/8/16477f7912b4552a?imageslim" alt="img"></p><ol><li><code>çº¿ç¨‹æ± ç®¡ç†å™¨ThreadPool</code>ï¼šç”¨äºåˆ›å»ºå’Œç®¡ç†çº¿ç¨‹æ± ï¼›</li><li><code>ä»»åŠ¡æ¥å£Task</code>ï¼šæ¯ä¸ªä»»åŠ¡å¿…é¡»å®ç°çš„æ¥å£ï¼Œä»¥ä¾›å·¥ä½œçº¿ç¨‹è°ƒåº¦ä»»åŠ¡çš„æ‰§è¡Œï¼Œå®ƒä¸»è¦è§„å®šäº†ä»»åŠ¡çš„å…¥å£ï¼Œæ‰§è¡Œå®Œçš„æ”¶å°¾å·¥ä½œï¼Œä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ï¼›</li><li><code>å·¥ä½œçº¿ç¨‹workThread</code>ï¼šçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œæ²¡æœ‰ä»»åŠ¡æ—¶å¤„äºç­‰å¾…çŠ¶æ€ï¼›</li><li><code>ä»»åŠ¡é˜Ÿåˆ—taskQueue</code>ï¼šç”¨äºå­˜æ”¾æ²¡æœ‰å¤„ç†çš„ä»»åŠ¡ï¼Œèµ·ä¸€ç§<code>ç¼“å†²çš„ä½œç”¨</code>ã€‚</li></ol><h4 id="ThreadPoolExecutorç±»è§£æ"><a href="#ThreadPoolExecutorç±»è§£æ" class="headerlink" title="ThreadPoolExecutorç±»è§£æ"></a>ThreadPoolExecutorç±»è§£æ</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ThreadPoolExecutoræ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328164241430.png" alt="image-20210328164241430"></p><p>å†æ¥æ·±å…¥åœ°çœ‹ä¸‹è¿™äº›å‚æ•°çš„æ„ä¹‰ï¼š</p><ol><li><code>corePoolSize</code>ï¼šå³çº¿ç¨‹æ± çš„åŸºæœ¬å¤§å°ï¼Œä»»åŠ¡é˜Ÿåˆ—æ¯æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œçº¿ç¨‹æ± å°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå½“æäº¤çš„ä»»åŠ¡æ•°å¤§å°çº¿ç¨‹æ± çš„åŸºæœ¬å¤§å°æ—¶ï¼Œå°±ä¸å†åˆ›å»ºçº¿ç¨‹ï¼›</li><li><code>maxinumPoolSize</code>ï¼šå³çº¿ç¨‹æ± å…è®¸åˆ›å»ºçš„æœ€å¤§çº¿ç¨‹æ•°ï¼›</li><li><code>KeepAliveTime</code>ï¼šå³çº¿ç¨‹æ± çš„å·¥ä½œçº¿ç¨‹ç©ºé—²äº†ä»¥åï¼Œä¿æŒå­˜æ´»çš„æ—¶é—´ï¼›</li><li><code>TImeUnit</code>ï¼šå³çº¿ç¨‹æ´»åŠ¨ä¿æŒæ—¶é—´çš„å•ä½ï¼›</li><li><code>workQueue</code>ï¼šç”¨æ¥ä¿å­˜ç­‰å¾…æ‰§è¡Œçš„é˜»å¡é˜Ÿåˆ—ï¼›</li><li><code>threadFactory</code>ï¼šçº¿ç¨‹å·¥å‚ï¼Œåœ¨debugå’Œå®šä½é—®é¢˜æ—¶éå¸¸æœ‰å¸®åŠ©ï¼›</li><li><code>RejectedExecutionHandler</code>ï¼šæ‹’ç»ç­–ç•¥ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†æè¿°ã€‚</li></ol><h5 id="å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡"><a href="#å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡" class="headerlink" title="å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡"></a>å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡</h5><ul><li><code>execute()</code>ï¼šæ— è¿”å›å€¼ï¼Œæ— æ³•åˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¢«æ‰§è¡ŒæˆåŠŸï¼›</li><li><code>submit()</code>ï¼šè¿”å›ä¸€ä¸ªfutureçš„æ³›å‹å¯¹è±¡ï¼Œé€šè¿‡getæ–¹æ³•å¯ä»¥è·å¾—è¿”å›å€¼ã€‚</li></ul><h5 id="çº¿ç¨‹æ± çš„å…³é—­"><a href="#çº¿ç¨‹æ± çš„å…³é—­" class="headerlink" title="çº¿ç¨‹æ± çš„å…³é—­"></a>çº¿ç¨‹æ± çš„å…³é—­</h5><ul><li><code>shutdown</code>ï¼šå°†çº¿ç¨‹æ± çš„çŠ¶æ€è®¾ç½®ä¸º<code>SHUTDOWNçŠ¶æ€</code>ï¼Œç„¶åä¸­æ–­æ‰€æœ‰æ²¡æœ‰æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ï¼›</li><li><code>shutdownNow</code>ï¼šéå†å·¥ä½œçº¿ç¨‹ï¼Œé€ä¸ªè°ƒç”¨çº¿ç¨‹çš„<code>interruptæ–¹æ³•</code>ã€‚</li></ul><h5 id="çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹"><a href="#çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹"></a>çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹</h5><p><img src="https://user-gold-cdn.xitu.io/2018/7/8/16477fc44a03d90f?imageslim" alt="img"></p><h5 id="å››ç§æ‹’ç»ç­–ç•¥"><a href="#å››ç§æ‹’ç»ç­–ç•¥" class="headerlink" title="å››ç§æ‹’ç»ç­–ç•¥"></a>å››ç§æ‹’ç»ç­–ç•¥</h5><ol><li><p><code>AbortPolicy</code>ï¼šä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328171249081.png" alt="    "></p></li><li><p><code>DiscardPolicy</code>ï¼šä¸¢å¼ƒä»»åŠ¡ä½†ä¸æŠ›å‡ºå¼‚å¸¸</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328171502262.png" alt="image-20210328171502262"></p></li><li><p><code>DisCardOldSetPolicy</code>ï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åæäº¤æ–°æ¥çš„ä»»åŠ¡</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328171523558.png" alt="image-20210328171523558"></p></li><li><p><code>CallerRunPolicy</code>ï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210328171435296.png" alt="image-20210328171435296"></p></li></ol><h4 id="å››ç§çº¿ç¨‹æ± "><a href="#å››ç§çº¿ç¨‹æ± " class="headerlink" title="å››ç§çº¿ç¨‹æ± "></a>å››ç§çº¿ç¨‹æ± </h4><ul><li><code>CachedThreadPool()</code>:å¯ç¼“å†²çº¿ç¨‹æ± </li><li><code>FIxedThreadPool()</code>:å®šé•¿çº¿ç¨‹æ± </li><li><code>ScheduledThreadPool()</code>:å®šæ—¶çº¿ç¨‹æ± </li><li><code>SingleThreadExecutor()</code>:å•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± </li></ul><h4 id="ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨JUCçš„çº¿ç¨‹æ± "><a href="#ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨JUCçš„çº¿ç¨‹æ± " class="headerlink" title="ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨JUCçš„çº¿ç¨‹æ± "></a>ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨JUCçš„çº¿ç¨‹æ± </h4><ol><li><p>newFixedThreadPoolå’ŒnewSingleThreadExecutor</p><p>åˆ›å»ºçš„<code>ä»»åŠ¡ç­‰å¾…é˜Ÿåˆ—å®¹é‡è¿‡å¤§ï¼Œè€—è´¹éå¸¸å¤šçš„å†…å­˜</code>~</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210329201950011.png" alt="image-20210329201950011"></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210329202057662.png" alt="image-20210329202057662"></p></li></ol><p>2.newScheduledThreadPoolå’ŒnewCachedThreadPool</p><p>â€‹    ä¼š<code>åˆ›å»ºéå¸¸å¤šçš„çº¿ç¨‹</code>ï¼ŒCPUå‹åŠ›å¤§~</p><p>â€‹    <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210329202312593.png" alt="image-20210329202312593"></p><h4 id="çº¿ç¨‹æ± çš„å‚æ•°è®¾ç½®"><a href="#çº¿ç¨‹æ± çš„å‚æ•°è®¾ç½®" class="headerlink" title="çº¿ç¨‹æ± çš„å‚æ•°è®¾ç½®"></a>çº¿ç¨‹æ± çš„å‚æ•°è®¾ç½®</h4><p>å‚æ•°çš„è®¾ç½®å’Œç³»ç»Ÿçš„è´Ÿè½½æœ‰ç€ç›´æ¥çš„å…³ç³»ï¼Œç³»ç»Ÿè´Ÿè½½æœ‰è¿™æ ·çš„ä¸€äº›å‚æ•°ï¼š</p><ul><li><code>tasks</code>ï¼šæ¯ç§’éœ€è¦å¤„ç†çš„ä»»åŠ¡æ•°</li><li><code>threadtasks</code>ï¼šæ¯ä¸ªçº¿ç¨‹æ¯ç§’å¯ä»¥å¤„ç†çš„ä»»åŠ¡æ•°</li><li><code>responsetime</code>ï¼šç³»ç»Ÿå…è®¸ä»»åŠ¡çš„æœ€å¤§å“åº”æ—¶é—´ã€‚</li></ul><p>ä¸‹é¢å°†ç”¨è¿™äº›ç³»ç»Ÿè´Ÿè½½çš„å‚æ•°æ¥è¡¡é‡çº¿ç¨‹æ± çš„å‚æ•°â€”â€”</p><h5 id="corePoolSize"><a href="#corePoolSize" class="headerlink" title="corePoolSize"></a>corePoolSize</h5><p>å‡è®¾ç³»ç»Ÿæ¯ç§’ä»»åŠ¡æ•°ä¸º100 ~ 1000ï¼Œæ¯ä¸ªçº¿ç¨‹æ¯é’å¯å¤„ç†10ä¸ªä»»åŠ¡ï¼Œåˆ™éœ€è¦100 / 10è‡³1000 / 10ï¼Œå³10 ~ 100ä¸ªçº¿ç¨‹ã€‚é‚£ä¹ˆcorePoolSizeåº”è¯¥è®¾ç½®ä¸ºå¤§äº10ï¼Œå…·ä½“æ•°å­—æœ€å¥½æ ¹æ®<code>8020åŸåˆ™</code>ï¼Œå› ä¸ºç³»ç»Ÿæ¯ç§’ä»»åŠ¡æ•°ä¸º100 ~ 1000ï¼Œ<code>å³80%æƒ…å†µä¸‹ç³»ç»Ÿæ¯ç§’ä»»åŠ¡æ•°å°äº1000 * 20% = 200</code>ï¼Œåˆ™corePoolSizeå¯è®¾ç½®ä¸º<code>200 / 10 = 20</code>ã€‚</p><h5 id="queueCapacity"><a href="#queueCapacity" class="headerlink" title="queueCapacity"></a>queueCapacity</h5><p>ä»»åŠ¡é˜Ÿåˆ—çš„é•¿åº¦å¯ä»¥è®¾ç½®ä¸ºï¼š<code>æ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹æ¯ç§’å¤„ç†ä»»åŠ¡æ•° * æ¯ä¸ªä»»åŠ¡å“åº”æ—¶é—´ = æ¯ç§’ä»»åŠ¡æ€»å“åº”æ—¶é—´</code></p><h5 id="maxPoolSize"><a href="#maxPoolSize" class="headerlink" title="maxPoolSize"></a>maxPoolSize</h5><p>å½“ç³»ç»Ÿè´Ÿè½½è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å·²æ— æ³•æŒ‰æ—¶å¤„ç†å®Œæ‰€æœ‰ä»»åŠ¡ï¼Œè¿™æ—¶å°±éœ€è¦å¢åŠ çº¿ç¨‹ï¼Œå¢åŠ çš„çº¿ç¨‹æ•°å–å†³äºä»»åŠ¡é˜Ÿåˆ—å®¹é‡å’Œéœ€æ±‚ã€‚</p><p>åƒä¸‡ä¸èƒ½ç›´æ¥åˆ›å»ºä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸ç„¶å®¹é‡è¿‡å¤§ï¼Œå ç”¨å†…å­˜è¿‡å¤šï¼Œå¯¹ç³»ç»Ÿå‹åŠ›å¤§ã€‚</p><p><img src="C:%5CUsers%5Czyz%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210329204208430.png" alt="image-20210329204208430"></p><h5 id="keepAliveTime"><a href="#keepAliveTime" class="headerlink" title="keepAliveTime"></a>keepAliveTime</h5><p>å½“<code>è´Ÿè½½é™ä½æ—¶ï¼Œå¯ä»¥å‡å°‘çº¿ç¨‹çš„æ•°é‡</code>ï¼Œå½“çº¿ç¨‹çš„ç©ºé—²æ—¶é—´è¶…è¿‡keepAliveTimeï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾çº¿ç¨‹ã€‚</p><h5 id="allowCoreThreadTimeout"><a href="#allowCoreThreadTimeout" class="headerlink" title="allowCoreThreadTimeout"></a>allowCoreThreadTimeout</h5><p>é»˜è®¤æƒ…å†µä¸‹æ ¸å¿ƒçº§çº¿ç¨‹ä¸ä¼šé€€å‡ºï¼Œå¯é€šè¿‡è¯¥å‚æ•°è®¾ç½®ä¸ºtrue,ä½¿å…¶é€€å‡ºã€‚</p><p>ä¸€èˆ¬ç»éªŒï¼šçº¿ç¨‹æ± çš„å¤§å°åº”è¯¥è¿™æ ·è®¾ç½®ï¼š</p><ol><li>å¦‚æœæ˜¯<code>CPUå¯†é›†å‹åº”ç”¨</code>ï¼Œçº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸º<code>N+1</code>,NæŒ‡CPUçš„ä¸ªæ•°ï¼›</li><li>å¦‚æœæ˜¯<code>IOå¯†é›†å‹åº”ç”¨</code>ï¼Œåˆ™çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸º<code>2N+1</code>;</li></ol><h4 id="çº¿ç¨‹çš„äº”ç§çŠ¶æ€"><a href="#çº¿ç¨‹çš„äº”ç§çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„äº”ç§çŠ¶æ€"></a>çº¿ç¨‹çš„äº”ç§çŠ¶æ€</h4><p><img src="https://user-gold-cdn.xitu.io/2020/3/20/170f73cc0dad76a5?imageslim" alt="img"></p><h4 id="ä»€ä¹ˆåœºæ™¯ä¸‹æ€ä¹ˆè®¾ç½®çº¿ç¨‹æ± "><a href="#ä»€ä¹ˆåœºæ™¯ä¸‹æ€ä¹ˆè®¾ç½®çº¿ç¨‹æ± " class="headerlink" title="ä»€ä¹ˆåœºæ™¯ä¸‹æ€ä¹ˆè®¾ç½®çº¿ç¨‹æ± "></a>ä»€ä¹ˆåœºæ™¯ä¸‹æ€ä¹ˆè®¾ç½®çº¿ç¨‹æ± </h4><ul><li><code>é«˜å¹¶å‘ã€ä»»åŠ¡æ‰§è¡Œæ—¶é—´çŸ­çš„ä¸šåŠ¡</code></li></ul><p>çº¿ç¨‹æ± çº¿ç¨‹æ•°å¯ä»¥è®¾ç½®ä¸ºCPUæ ¸æ•°+1ï¼Œ<strong>å‡å°‘çº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢</strong></p><ul><li><code>å¹¶å‘ä¸é«˜ã€ä»»åŠ¡æ‰§è¡Œæ—¶é—´é•¿çš„ä¸šåŠ¡</code></li></ul><p>è¿™ä¸ªéœ€è¦åˆ¤æ–­æ‰§è¡Œæ—¶é—´æ˜¯è€—åœ¨å“ªä¸ªåœ°æ–¹</p><ol><li>å‡å¦‚æ˜¯ä¸šåŠ¡æ—¶é—´é•¿é›†ä¸­åœ¨<code>IOæ“ä½œä¸Š</code>ï¼Œä¹Ÿå°±æ˜¯IOå¯†é›†å‹çš„ä»»åŠ¡ï¼Œå› ä¸ºIOæ“ä½œå¹¶ä¸å ç”¨CPUï¼Œæ‰€ä»¥ä¸è¦è®©æ‰€æœ‰çš„CPUé—²ä¸‹æ¥ï¼Œå¯ä»¥é€‚å½“åŠ å¤§çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®ï¼ˆ<strong>2 * CPUæ ¸æ•°</strong>ï¼‰ï¼Œè®©CPUå¤„ç†æ›´å¤šçš„ä¸šåŠ¡ã€‚</li><li>å‡å¦‚æ˜¯ä¸šåŠ¡æ—¶é—´é•¿é›†ä¸­åœ¨è®¡ç®—æ“ä½œä¸Šï¼Œä¹Ÿå°±æ˜¯<code>CPUå¯†é›†å‹ä»»åŠ¡</code>ï¼Œå’Œï¼ˆ1ï¼‰<strong>CPUæ ¸æ•°+1</strong> ä¸€æ ·å§ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°è®¾ç½®å¾—å°‘ä¸€äº›ï¼Œå‡å°‘çº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢</li></ol><ul><li><code>å¹¶å‘é«˜ã€ä¸šåŠ¡æ‰§è¡Œæ—¶é—´é•¿çš„ä¸šåŠ¡</code></li></ul><p>è§£å†³è¿™ç§ç±»å‹ä»»åŠ¡çš„å…³é”®ä¸åœ¨äºçº¿ç¨‹æ± è€Œåœ¨äºæ•´ä½“æ¶æ„çš„è®¾è®¡</p><h3 id="2-JUC"><a href="#2-JUC" class="headerlink" title="2.JUC"></a>2.JUC</h3><h4 id="AQSæ¡†æ¶"><a href="#AQSæ¡†æ¶" class="headerlink" title="AQSæ¡†æ¶"></a>AQSæ¡†æ¶</h4><p>æˆ‘ä»¬çŸ¥é“JUCæ˜¯ä¸€ä¸ª<strong>å®šä¹‰å¹¶å‘æ“ä½œå¹¶å®‰å…¨å¤„ç†å¹¶å‘</strong>çš„æ¡†æ¶ã€‚è€Œè¦äº†è§£JUCåŒ…çš„å…¨è²Œï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å®šä¹‰å¤„ç†<code>å¹¶å‘çš„ç»„ä»¶</code>ï¼Œä¹Ÿå°±æ˜¯é”å’ŒåŒæ­¥å™¨ã€‚è¿™ç§åŠŸèƒ½å°±æ˜¯ç”±AQSæ‰€æä¾›çš„ã€‚</p><p>AQSçš„å…¨ç§°æ˜¯<code>AbstractQueuedSynchronizer</code>ï¼Œå³æŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ã€‚å®ƒæ˜¯javaå¹¶å‘ç”¨æ¥æ„å»ºé”å’ŒåŒæ­¥å™¨çš„åŸºç¡€æ¡†æ¶ã€‚å®ƒåŒ…å«<code>å…ˆè¿›å…ˆå‡ºçš„åŒç«¯é˜Ÿåˆ—ï¼ŒçŠ¶æ€é‡ï¼Œçº¿ç¨‹æŒæœ‰è€…çš„å¼•ç”¨</code>ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/24459569-f4323d6ace89b32d.png" alt="img"></p><p>è¿™é‡Œçš„stateæ˜¯ç”±volatileä¿®é¥°çš„ï¼Œå³å®ƒæ»¡è¶³çº¿ç¨‹é—´çš„å¯è§æ€§ï¼Œå¦å¤–ï¼Œå®ƒè®°å½•äº†<code>é”çš„æŒæœ‰è€…</code>ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210329223019662.png" alt="image-20210329223019662"></p><p>å½“çº¿ç¨‹1æƒ³è¦è·å–monitorå¯¹è±¡æ—¶ï¼Œå®ƒçš„è¡Œä¸ºæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210329224019027.png" alt="image-20210329224019027"></p><hr><h4 id="å·¥å…·ç±»â€”â€”åŒæ­¥å™¨"><a href="#å·¥å…·ç±»â€”â€”åŒæ­¥å™¨" class="headerlink" title="å·¥å…·ç±»â€”â€”åŒæ­¥å™¨"></a>å·¥å…·ç±»â€”â€”åŒæ­¥å™¨</h4><p>ç´¯äº†ï¼Œä¸å†æ–‡å­—æè¿°äº†ï¼ŒæŠŠæ€ç»´å¯¼å›¾è´´ä¸Šæ¥ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/%E4%B8%89%E5%A4%A7%E5%B7%A5%E5%85%B7%E7%B1%BB-%E5%90%8C%E6%AD%A5%E5%99%A8.png" alt="ä¸‰å¤§å·¥å…·ç±»-åŒæ­¥å™¨"></p><h4 id="å…¶ä»–ç»„ä»¶"><a href="#å…¶ä»–ç»„ä»¶" class="headerlink" title="å…¶ä»–ç»„ä»¶"></a>å…¶ä»–ç»„ä»¶</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/%E5%85%B6%E4%BB%96%E7%BB%84%E4%BB%B6.png" alt="å…¶ä»–ç»„ä»¶"></p><h4 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h4><p><a href="https://zhuanlan.zhihu.com/p/60375306" target="_blank" rel="noopener">æµ…è°ˆThreadLocal</a></p><h2 id="å¤šçº¿ç¨‹â€”â€”åŠ é¤"><a href="#å¤šçº¿ç¨‹â€”â€”åŠ é¤" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”åŠ é¤"></a>å¤šçº¿ç¨‹â€”â€”åŠ é¤</h2><h3 id="1-å…³äºå¤šçº¿ç¨‹å¯è¡Œçš„å®è·µ"><a href="#1-å…³äºå¤šçº¿ç¨‹å¯è¡Œçš„å®è·µ" class="headerlink" title="1.å…³äºå¤šçº¿ç¨‹å¯è¡Œçš„å®è·µ"></a>1.å…³äºå¤šçº¿ç¨‹å¯è¡Œçš„å®è·µ</h3><ul><li>ç»™çº¿ç¨‹èµ·ä¸ª<code>æœ‰æ„ä¹‰çš„åå­—</code>ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿æ‰¾ Bugã€‚</li><li>ç¼©å°åŒæ­¥èŒƒå›´ï¼Œä»â½½è€Œå‡å°‘é”äº‰ç”¨ã€‚ï¦µå¦‚å¯¹äº synchronizedï¼Œåº”è¯¥<code>å°½ï¥¾ä½¿ç”¨åŒæ­¥å—â½½è€Œï¥§æ˜¯åŒæ­¥æ–¹æ³•</code>ã€‚</li><li>å¤šç”¨åŒæ­¥å·¥å…·å°‘ç”¨ wait() å’Œ notify()ã€‚é¦–å…ˆ<code>ï¼ŒCountDownLatch, CyclicBarrier, Semaphore å’ŒExchanger è¿™äº›åŒæ­¥ç±»ç®€åŒ–äº†ï¦ºç¼–ç æ“ä½œï¼Œâ½½ç”¨ wait() å’Œ notify() å¾ˆéš¾å®ç°å¤æ‚æ§åˆ¶æµ</code>ï¼›å…¶æ¬¡ï¼Œè¿™äº›åŒæ­¥ç±»æ˜¯ç”±æœ€å¥½çš„ä¼ä¸šç¼–å†™å’Œç»´æŠ¤ï¼Œåœ¨åç»­çš„ JDK ä¸­è¿˜ä¼šä¸ï¥§æ–­ä¼˜åŒ–å’Œå®Œå–„ã€‚</li><li>ä½¿ç”¨<code>BlockingQueue å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</code>ã€‚å¤šç”¨å¹¶å‘é›†åˆå°‘ç”¨åŒæ­¥é›†åˆï¼Œä¾‹å¦‚åº”è¯¥<code>ä½¿ç”¨ ConcurrentHashMap â½½è€Œä¸æ˜¯ Hashtable</code>ã€‚</li><li>ä½¿ç”¨<code>æœ¬åœ°å˜ï¥¾</code>å’Œ<code>ä¸å¯å˜ç±»</code>æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ä½¿ç”¨çº¿ç¨‹æ± â½½ï¥§æ˜¯ç›´æ¥åˆ›å»ºçº¿ç¨‹ï¼Œè¿™æ˜¯å› ä¸ºåˆ›å»ºçº¿ç¨‹ä»£ä»·å¾ˆé«˜ï¼Œçº¿ç¨‹æ± å¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨æœ‰é™çš„çº¿ç¨‹æ¥å¯åŠ¨ä»»åŠ¡ã€‚</li></ul><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> å¹¶å‘ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‚£å¹´æ·±ç§‹,åœ¨æ•™å®¤ä¸´çª—å†™ä¸‹çš„æ±‡ç¼–</title>
      <link href="/2021/07/12/na-nian-shen-qiu-zai-jiao-shi-lin-chuang-xie-xia-de-hui-bian/"/>
      <url>/2021/07/12/na-nian-shen-qiu-zai-jiao-shi-lin-chuang-xie-xia-de-hui-bian/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><h3 id="1-ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆè¦å­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼Ÿ</h3><p>ç¼–ç¨‹è¯­è¨€å‘å±•åˆ°å¦‚ä»Šï¼Œ<strong>é«˜çº§è¯­è¨€</strong>å¤§è¡Œå…¶é“ï¼Œä»–ä»¬é€šå¸¸è¢«æ ‡æ¦œä¸ºå­¦ä¹ æˆæœ¬ä½ã€‚ä½†ç”±äºé«˜çº§è¯­è¨€ä¸æ˜¯ç›´æ¥è°ƒç”¨<strong>æ“ä½œç³»ç»Ÿ</strong>ï¼Œå› è€Œ<strong>æ‰§è¡Œæ•ˆç‡</strong>ç›¸å¯¹ä½ä¸€äº›ã€‚</p><p>æ¯”å¦‚javaè¯­è¨€ï¼Œjavaæºæ–‡ä»¶é¦–å…ˆè¢«ç¼–è¯‘ï¼Œç„¶åç»è¿‡<strong>JVM</strong>çš„è¿æ¥ï¼Œæœ€ç»ˆæ‰§è¡Œå¾—åˆ°è¿è¡ŒäºæŸå¹³å°çš„<strong>æœºå™¨ç </strong>ã€‚ä¹Ÿå°±æ˜¯è¯´æœ€ç»ˆè¢«è®¡ç®—æœºæ‰§è¡Œçš„æ˜¯æœºå™¨ç ã€‚</p><p>ä½†æœºå™¨ç æ˜¯ä¸æ˜“äºäººç†è§£çš„ï¼Œè™½è¯´å¤§é“è‡³ç®€ï¼Œåœ¨è®¡ç®—æœºçš„ä¸–ç•Œé‡Œï¼Œ<strong>0,1</strong>æ‰æ˜¯ç‹é“ã€‚ä½†è®¡ç®—æœºçš„æ¨¡å‹é€šè¿‡0,1æ˜¯å¾ˆéš¾çª¥è§çš„ï¼Œå› è€Œæˆ‘ä»¬éœ€è¦ä¸€ç§å³æ˜“äºäººç†è§£ï¼Œä¸”èƒ½å¤Ÿäº†è§£è®¡ç®—æœºæ‰§è¡Œæœºåˆ¶çš„è¯­è¨€ï¼Œè¿™ä¾¿æ˜¯â€”â€”<strong>æ±‡ç¼–è¯­è¨€</strong>ã€‚</p><h4 id="Cè¯­è¨€ä¸æ±‡ç¼–"><a href="#Cè¯­è¨€ä¸æ±‡ç¼–" class="headerlink" title="Cè¯­è¨€ä¸æ±‡ç¼–"></a>Cè¯­è¨€ä¸æ±‡ç¼–</h4><p>ç›´è§‚çš„çœ‹ï¼Œæ“ä½œç³»ç»Ÿçš„ç™¾åˆ†ä¹‹ä¹åä»£ç æ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œæ•°æ®åº“ç­‰è½¯ä»¶åŒæ ·æ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCè¯­è¨€æ‰§è¡Œæ•ˆç‡é«˜ï¼Œé€‚åˆç”¨äºæè¿°åº•å±‚çš„ä¸œè¥¿ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠ<strong>å·¥ä½œæŠ€èƒ½</strong>æ¯”ä½œè£ç¼åšæˆçš„<strong>è¡£æœ</strong>ï¼Œjavaæ˜¯è¡¬è¡«ï¼ŒC++æ˜¯é•¿è£¤ï¼Œä½†åªä¼šåšè¡¬è¡«çš„è£ç¼å¯ä¸æ˜¯ä¸€ä¸ªå¥½è£ç¼ï¼Œè£ç¼é“ºéœ€è¦çš„æ˜¯ï¼Œæ ¹æ®é¡¾å®¢çš„è¦æ±‚ï¼Œ<code>ä¸ç®¡ä»€ä¹ˆæœè£…éƒ½å¯ä»¥åšçš„å¥½è£ç¼</code>ã€‚</p><p>ä½†è¿™å¯ä¸å®¹æ˜“ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸åŒç±»å‹è¡£æœçš„å…±åŒä¹‹å¤„ï¼Œè€Œè¡£æœéƒ½æ˜¯ç”±<strong>è£ç¼æœº</strong>åšæˆçš„ï¼Œé‚£ä¹ˆè£ç¼æœºæ˜¯ä»€ä¹ˆæ ·ï¼Œä¹Ÿä¼šä¸€å®šç¨‹åº¦å†³å®šåšæˆçš„è¡£æœæ˜¯ä»€ä¹ˆæ ·(<code>PS:è¿™é‡Œæˆ‘ä»¬ä¸è®¨è®ºå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜</code>)ã€‚</p><p>è¿™å°±å¦‚åŒè¯­è¨€ï¼Œè¯­è¨€æœ€ç»ˆæ˜¯å»é©±ä½¿ç¡¬ä»¶å·¥ä½œçš„ï¼Œç¡¬ä»¶ä¹Ÿä¼šåè¿‡æ¥å†³å®šè¯­è¨€çš„ç‰¹æ€§ï¼Œç¡¬ä»¶çš„å·¥ä½œçŠ¶æ€æ˜¯é«˜ï¼Œä½ç”µå¹³ï¼Œå¯¹åº”è®¡ç®—æœºè¯­è¨€çš„0å’Œ1ï¼Œæ‰€ä»¥å“ªç§è¯­è¨€èƒ½å¤Ÿæ›´å¥½çš„è§£é‡Š0å’Œ1ï¼Œè€Œåˆä¸ºäººæ‰€ç†è§£ï¼Œé‚£å°±ä¼šæœ€å…ˆè¢«è¡ç”Ÿå‡ºæ¥ã€‚</p><p>è¿™å°±æ˜¯å¤§å®¶å¿ƒå¿ƒå¿µå¿µçš„Cè¯­è¨€äº†ï¼ŒCè¯­è¨€å‘ä¸Šæ²Ÿé€šä¼—å¤šé«˜çº§è¯­è¨€ï¼Œæ— å¾€ä¸åˆ©ï¼Œå‘ä¸‹è¿é€šâ€å–æŒ‡æ‰§è¡Œâ€çš„åœ£ç»ã€‚</p><p>è€ŒCè¯­è¨€è¦æè¿°0å’Œ1ï¼Œå¯ä¸æ˜¯ç›´æ¥ç¼–è¯‘é‚£ä¹ˆç®€å•ï¼Œå®ƒè¦é¦–å…ˆç¼–è¾‘ä¸ºæ±‡ç¼–è¯­è¨€ï¼Œæœ€ç»ˆè¢«è¿æ¥æ‰§è¡Œä¸ºæœºå™¨è¯­è¨€ã€‚</p><h3 id="2-æ±‡ç¼–è¯­è¨€çš„å®šä¹‰"><a href="#2-æ±‡ç¼–è¯­è¨€çš„å®šä¹‰" class="headerlink" title="2 . æ±‡ç¼–è¯­è¨€çš„å®šä¹‰"></a>2 . æ±‡ç¼–è¯­è¨€çš„å®šä¹‰</h3><blockquote><p>æ±‡ç¼–è¯­è¨€æ˜¯äºŒè¿›åˆ¶æŒ‡ä»¤çš„æ–‡æœ¬å½¢å¼</p></blockquote><h3 id="3-å­¦ä¹ æ±‡ç¼–çš„è¦æ±‚"><a href="#3-å­¦ä¹ æ±‡ç¼–çš„è¦æ±‚" class="headerlink" title="3 . å­¦ä¹ æ±‡ç¼–çš„è¦æ±‚"></a>3 . å­¦ä¹ æ±‡ç¼–çš„è¦æ±‚</h3><p>é€šè¿‡ä½¿ç”¨<strong>æ±‡ç¼–æŒ‡ä»¤</strong>å¯¹<strong>å¯„å­˜å™¨</strong>å’Œ<strong>å†…å­˜</strong>çš„æ“ä½œæ¥æ·±åˆ»ç†è§£<strong>è®¡ç®—æœºæ‰§è¡ŒæŒ‡ä»¤</strong>çš„æœºåˆ¶ã€‚</p><p>[^undefined]: æ³¨ ï¼š æˆ‘ä»¬è¿™é‡Œçš„æ±‡ç¼–ä¸“æŒ‡8086CPUçš„æ±‡ç¼–è¯­è¨€</p><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯„å­˜å™¨"><a href="#1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯„å­˜å™¨" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯„å­˜å™¨"></a>1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯„å­˜å™¨</h3><p>CPUæœ¬èº«åªè´Ÿè´£<strong>è¿ç®—</strong>ï¼Œä¸è´Ÿè´£<strong>å­˜å‚¨æ•°æ®</strong>ï¼Œæ•°æ®ä¸€èˆ¬éƒ½å­˜å‚¨åœ¨<strong>å†…å­˜</strong>ä¹‹ä¸­ï¼ŒCPUè¦ç”¨çš„æ—¶å€™å°±å»å†…å­˜è¯»å†™æ•°æ®ï¼Œä½†æ˜¯CPUè¯»å†™çš„é€Ÿåº¦<strong>è¿œé«˜äº</strong>å†…å­˜çš„è¯»å†™é€Ÿåº¦ï¼Œä¸ºäº†é¿å…è¢«æ‹–æ…¢ï¼ŒCPUéƒ½è‡ªå¸¦ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Œ<strong>CPUç¼“å­˜</strong>å¯ä»¥çœ‹ä½œæ˜¯è¯»å†™é€Ÿåº¦è¾ƒå¿«çš„å†…å­˜ã€‚</p><p>ä½†æ˜¯ï¼ŒCPUç¼“å­˜è¿˜æ˜¯ä¸å¤Ÿå¿«ï¼Œå¦å¤–æ•°æ®åœ¨ç¼“å­˜é‡Œé¢çš„åœ°å€æ˜¯<strong>ä¸å›ºå®š</strong>çš„ï¼ŒCPUæ¯æ¬¡è¯»å†™éƒ½è¦<strong>å¯»å€</strong>ä¹Ÿä¼šæ‹–æ…¢é€Ÿåº¦ï¼Œå› æ­¤ï¼Œé™¤äº†ç¼“å­˜ä¹‹å¤–ï¼ŒCPUè¿˜è‡ªå¸¦äº†<strong>å¯„å­˜å™¨</strong>ï¼Œç”¨æ¥å­˜å‚¨æœ€å¸¸ç”¨çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé‚£äº›æœ€é¢‘ç¹è¯»å†™çš„æ•°æ®ï¼Œæ¯”å¦‚å¾ªç¯å˜é‡ï¼Œéƒ½ä¼šæ”¾åœ¨å¯„å­˜å™¨ä¸­ï¼ŒCPUä¼˜å…ˆè¯»å†™å¯„å­˜å™¨ï¼Œå†ç”±å¯„å­˜å™¨è·Ÿå†…å­˜äº¤æ¢æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262121976.png" alt="image-20201103224649594"></p><p>å¯„å­˜å™¨ä¸ä¾é åœ°å€åŒºåˆ†æ•°æ®ï¼Œè€Œä¾é åç§°ã€‚æ¯ä¸€ä¸ªå¯„å­˜å™¨éƒ½æœ‰è‡ªå·±çš„åç§°ï¼Œæˆ‘ä»¬å‘Šè¯‰CPUå»å…·ä½“å“ªä¸€ä¸ªå¯„å­˜å™¨ä¸­æ‹¿æ•°æ®ï¼Œè¿™æ ·çš„é€Ÿåº¦æ˜¯æœ€å¿«çš„ï¼Œå› è€Œä¹Ÿç§°å¯„å­˜å™¨æ˜¯CPUçš„<strong>é›¶çº§ç¼“å­˜</strong>ã€‚</p><hr><h3 id="2-å¯„å­˜å™¨çš„æ¦‚è¿°"><a href="#2-å¯„å­˜å™¨çš„æ¦‚è¿°" class="headerlink" title="2.å¯„å­˜å™¨çš„æ¦‚è¿°"></a>2.å¯„å­˜å™¨çš„æ¦‚è¿°</h3><p>8086çš„å¯„å­˜å™¨éƒ½æ˜¯16ä½çš„ï¼Œå¯ä»¥å­˜æ”¾ä¸¤ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„å¯»å€èƒ½åŠ›å°±åªæœ‰2çš„16æ¬¡æ–¹ä¸ªå­—èŠ‚ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯64KBã€‚</p><p>é€šä¿—çš„å°†ï¼Œ32ä½ï¼Œ64ä½ç³»ç»ŸæŒ‡çš„å°±æ˜¯å¯„å­˜å™¨çš„ä½æ•°ã€‚32ä½å¯„å­˜å™¨å¯ä»¥å­˜æ”¾çš„æ•°æ®æ˜¯2çš„32æ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯4GBï¼Œæ¢å¥è¯è¯´ï¼Œ32ä½çš„ç³»ç»Ÿæœ€å¤šèƒ½å¯»å€çš„æ•°æ®åªæœ‰4GBã€‚</p><p>å¯„å­˜å™¨è¦å­˜å‚¨æ•°æ®ï¼Œé¦–å…ˆéœ€è¦ä»å†…å­˜ä¸­å–å‡ºæ•°æ®ï¼Œè€Œä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå°±è¦çŸ¥é“æ•°æ®åœ¨å†…å­˜ä¸­å­˜å‚¨çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç‰©ç†åœ°å€ã€‚</p><h3 id="3-ç‰©ç†åœ°å€"><a href="#3-ç‰©ç†åœ°å€" class="headerlink" title="3.ç‰©ç†åœ°å€"></a>3.ç‰©ç†åœ°å€</h3><p>8086CPUæœ‰20ä½çš„åœ°å€æ€»çº¿ï¼Œå¯ä»¥ä¼ é€20ä½åœ°å€ï¼Œè¾¾åˆ°1MBå¯»å€èƒ½åŠ›ï¼Œä½†æ•°æ®æ€»çº¿åªæœ‰16ä½ï¼Œå®ƒåªèƒ½ä¼ è¾“16çš„åœ°å€ï¼Œè¡¨ç°å‡ºæ¥çš„å¯»å€èƒ½åŠ›åªæœ‰64KBï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸¤ä¸ª16ä½çš„åœ°å€æ¥åˆæˆ20ä½çš„ç‰©ç†åœ°å€ã€‚</p><p>è¿™ä¸¤ä¸ª16ä½çš„åœ°å€ï¼Œä¸€ä¸ªæ˜¯æ®µåœ°å€CSï¼Œä¸€ä¸ªæ˜¯åç§»åœ°å€IPï¼Œé‡‡ç”¨ç‰©ç†åœ°å€=çŸ­åœ°å€*16+åç§»åœ°å€çš„è¿ç®—æ–¹å¼æ‰©å±•16ä½åˆ°20ä½ï¼Œæ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯é€»è¾‘å·¦ç§»4ä½ã€‚</p><p>æœ‰äº†ç‰©ç†åœ°å€ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ä»å“ªä¸ªå†…å­˜åœ°å€è¯»å–æŒ‡ä»¤ï¼Œé‚£å¦‚ä½•å°†å–å‡ºæ¥çš„æŒ‡ä»¤æ‰§è¡Œå‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262121725.png" alt="image-20201108221905157"></p><p>äº†è§£äº†æŒ‡ä»¤æ‰§è¡Œçš„æ¨¡å‹ï¼Œæˆ‘ä»¬çŸ¥é“CS,IPçš„å€¼æ˜¯ä»å¯„å­˜å™¨ä¸­è¯»å–çš„ï¼Œé‚£å¯„å­˜å™¨æ˜¯æ€æ ·å­˜å‚¨å€¼çš„å‘¢ï¼Ÿ</p><h3 id="4-å¯„å­˜å™¨çš„åˆ†ç±»"><a href="#4-å¯„å­˜å™¨çš„åˆ†ç±»" class="headerlink" title="4.å¯„å­˜å™¨çš„åˆ†ç±»"></a>4.å¯„å­˜å™¨çš„åˆ†ç±»</h3><p>ä»ç±»å‹ä¸Šè¯´ï¼Œæˆ‘ä»¬å­˜å‚¨çš„æ•°æ®æœ‰ä¸¤ç±»ï¼Œå­—èŠ‚å‹å’Œå­—å‹ã€‚</p><p>è€Œä»æ•°æ®ç±»å‹æ¥è¯´ï¼Œæ•°æ®åˆ†ä¸ºé€šç”¨çš„æ•°æ®å’Œå…·æœ‰ç‰¹å®šæ„ä¹‰çš„æ•°æ®ï¼Œåœ¨è®¡ç®—æ—¶ï¼Œé€šç”¨çš„å¯„å­˜å™¨å­˜å‚¨åœ¨é€šç”¨å¯„å­˜å™¨ä¸­ï¼Œè€Œç‰¹æ®Šçš„æ•°æ®ï¼Œæ¯”å¦‚éœ€è¦ä¿ç•™çŠ¶æ€çš„æ•°æ®ï¼Œä¼šè¢«å­˜å‚¨åœ¨æ ‡å¿—å¯„å­˜å™¨ä¸­ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹å…·ä½“çš„æè¿°â€”â€”</p><p>8086CPUæœ‰8ä¸ªå¯„å­˜å™¨ï¼Œä¸”éƒ½æ˜¯16ä½çš„ï¼Œå³å¯ä»¥å­˜æ”¾ä¸¤ä¸ªå­—èŠ‚ï¼Œ8ä¸ªå¯„å­˜å™¨ä¸­åŒ…æ‹¬4ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œ4ä¸ªæ®µå¯„å­˜å™¨ã€‚</p><p>4ä¸ªé€šç”¨çš„å¯„å­˜å™¨åˆ†åˆ«æ˜¯AX,BX,CX,DX,ç”¨äºå­˜æ”¾ä¸€èˆ¬æ€§çš„æ•°æ®ã€‚è€Œè€ƒè™‘åˆ°å…¼å®¹ï¼Œåˆå°†è¿™å››ä¸ªå¯„å­˜å™¨åˆ†æˆäº†ç‹¬ç«‹çš„8ä¸ªå¯„å­˜å™¨æ¥ä½¿ç”¨ã€‚æ¯”å¦‚å–AXçš„ä½å…«ä½ç»„æˆäº†ALå¯„å­˜å™¨ï¼Œé«˜å…«ä½ç»„æˆäº†AHå¯„å­˜å™¨ã€‚</p><p>å½“CPUè¦è®¿é—®å†…å­˜æ—¶ï¼Œç”±æ®µå¯„å­˜å™¨æ¥æä¾›å†…å­˜å•å…ƒçš„æ®µåœ°å€ï¼Œè¿™äº›å¯„å­˜å™¨åŒ…æ‹¬DS,ES,SS,CS.</p><p>å…¶ä¸­DSå¯„å­˜å™¨é€šå¸¸ç”¨äºå­˜æ”¾è¦è®¿é—®æ•°æ®çš„æ®µåœ°å€ï¼ŒCSå¯„å­˜å™¨æ˜¯ä»£ç æ®µå¯„å­˜å™¨ï¼Œå½“æˆ‘ä»¬è¦è®¿é—®æ ˆæ®µæ—¶ï¼Œæ ˆæ®µçš„èµ·å§‹åœ°å€ä»SSå¯„å­˜å™¨ä¸­è¯»å–ï¼Œåç§»åœ°å€ä»SPå¯„å­˜å™¨ä¸­è¯»å–ï¼ŒESä¸ºæ‰©å±•æ®µå¯„å­˜å™¨ã€‚</p><h3 id="2-å†…å­˜æ¨¡å‹"><a href="#2-å†…å­˜æ¨¡å‹" class="headerlink" title="2. å†…å­˜æ¨¡å‹"></a>2. å†…å­˜æ¨¡å‹</h3><p>å¯„å­˜å™¨åªèƒ½å­˜æ”¾å°‘é‡çš„æ•°æ®ï¼Œå¤§å¤šæ•°æ—¶å€™ï¼ŒCPUè¦æŒ‡æŒ¥å¯„å­˜å™¨ä¸å†…å­˜è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œæ‰€ä»¥ï¼Œé™¤äº†å¯„å­˜å™¨ï¼Œè¿˜å¿…é¡»äº†è§£å†…å­˜å¦‚ä½•å­˜å‚¨æ•°æ®ã€‚</p><p>å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºç¨‹åºåˆ†é…ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜å‚¨ç¨‹åºå’Œç¨‹åºè¿è¡Œäº§ç”Ÿçš„ç»“æœã€‚è¿™æ®µå†…å­˜ç©ºé—´æœ‰ä¸€ä¸ªèµ·å§‹åœ°å€å’Œä¸€ä¸ªç»“æŸåœ°å€ã€‚ä¸”ä½ä½çš„æ˜¯èµ·å§‹åœ°å€ï¼Œé«˜ä½çš„æ˜¯ç»“æŸåœ°å€ã€‚</p><p>é€šä¿—çš„è¯´ï¼Œå†…å­˜ä¸­å­˜æ”¾çš„æ˜¯æºç¨‹åºï¼Œæºç¨‹åºä¸­æœ‰æ•ˆçš„éƒ¨åˆ†ç§°ä¸ºç¨‹åºï¼Œè€Œç¨‹åºæ˜¯ç”±æ•°æ®å’ŒæŒ‡ä»¤ç»„æˆçš„ï¼Œé‚£å†…å­˜æ˜¯å¦‚ä½•åŒºåˆ†æ•°æ®å’ŒæŒ‡ä»¤çš„å‘¢ï¼ŸCS:IPæŒ‡å‘çš„å†…å­˜å•å…ƒå­˜æ”¾çš„æ˜¯æŒ‡ä»¤ï¼Œå…¶ä»–çš„åˆ™æ˜¯æ•°æ®ã€‚ä½†æ•°æ®çš„ä½¿ç”¨é¢‘åº¦æ˜¯ä¸åŒçš„ï¼Œä½¿ç”¨åœºæ™¯ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå› æ­¤æˆ‘ä»¬æŠŠä¸€èˆ¬æ€§çš„æ•°æ®å­˜æ”¾åœ¨å †ä¸­ï¼Œè€ŒæŠŠéœ€è¦ä¿å­˜çŠ¶æ€çš„æ•°æ®å­˜æ”¾åœ¨æ ˆä¸­ï¼Œé‚£å †æ ˆæœ‰æ€æ ·çš„ç»“æ„ç‰¹ç‚¹å‘¢â€”â€”</p><h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><p>ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºåŠ¨æ€çš„å†…å­˜å ç”¨è¯·æ±‚ï¼Œæ¯”å¦‚è¯´æ–°å»ºå¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨mallocå‘½ä»¤ï¼Œç³»ç»Ÿå°±ä¼šä»é¢„å…ˆåˆ†é…å¥½çš„é‚£æ®µå†…å­˜æ‰¾é‚£ä¸ªï¼Œåˆ’å‡ºä¸€éƒ¨åˆ†ç»™ç”¨æˆ·ï¼Œè§„åˆ™æ˜¯ä»èµ·å§‹åœ°å€ç®—èµ·ï¼Œè€Œå®é™…ä¸Šèµ·å§‹åœ°å€ä¼šæœ‰ä¸€æ®µé™æ€æ•°æ®ï¼Œè¿™é‡Œæš‚ä¸”å¿½ç•¥ã€‚</p><p>è¿™ç§å› ä¸ºç”¨æˆ·ä¸»åŠ¨è¯·æ±‚è€Œåˆ’åˆ†å‡ºæ¥çš„å†…å­˜åŒºåŸŸï¼Œå«åšheapï¼ˆå †ï¼‰ï¼Œå®ƒç”±èµ·å§‹åœ°å€å¼€å§‹å‘é«˜ä½å¢é•¿ï¼ŒHeapçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹å°±æ˜¯ä¸ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œå¿…é¡»æ‰‹åŠ¨çš„é‡Šæ”¾æˆ–è€…é€šè¿‡å†…å­˜åƒåœ¾å›æ”¶æœºåˆ¶æ¥å›æ”¶ã€‚</p><p>é™¤äº†Heapä»¥å¤–ï¼Œå…¶ä»–çš„å†…å­˜å ç”¨å«åšStack(æ ˆ)ï¼Œç®€å•è¯´ï¼Œæ ˆæ˜¯å‡½æ•°è¿è¡Œæ—¶è¢«ä¸´æ—¶ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p><p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­â€”â€”</p><pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> a<span class="token punctuation">;</span>    <span class="token keyword">int</span> b<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å½“ç³»ç»Ÿå¼€å§‹æ‰§è¡Œmainå‡½æ•°æ—¶ï¼Œä¼šä¸ºå…¶åœ¨å†…å­˜ä¸­å»ºç«‹ä¸€ä¸ªå¸§ï¼Œè¿™ä¸ªæ•°æ®å¸§ä¸­ä¼šå­˜æ”¾mainå‡½æ•°ä¸­å£°æ˜çš„å†…éƒ¨å˜é‡a,b.è€Œå½“ç¨‹åºæ‰§è¡Œåˆ°è°ƒç”¨addå‡½æ•°æ—¶ï¼Œè¿™æ—¶å°±éœ€è¦ä¸ºè¿™ä¸ªå‡½æ•°ä¹Ÿå»ºç«‹ä¸€ä¸ªå¸§ï¼Œç”¨æ¥å­˜å‚¨å®ƒçš„å†…éƒ¨å˜é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨äº†å¤šå°‘å±‚çš„å¸§ï¼Œå°±æœ‰å¤šå°‘ä¸ªæ ˆï¼Œç­‰åˆ°addå‡½æ•°æ‰§è¡Œç»“æŸï¼Œå®ƒçš„å¸§å°±ä¼šè¢«å›æ”¶ï¼Œç¨‹åºå†æ¬¡å›åˆ°mainå‡½æ•°ä¸­æ–­çš„åœ°æ–¹ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç³»ç»Ÿä½¿ç”¨è¿™ç§æœºåˆ¶ï¼Œå®ç°äº†å‡½æ•°çš„å±‚å±‚è°ƒç”¨ã€‚</p><p>æ‰€æœ‰çš„å¸§ï¼Œéƒ½å­˜æ”¾åœ¨æ ˆä¸­ï¼Œç”Ÿæˆæ–°çš„å¸§ï¼Œå«åšå…¥æ ˆï¼Œè‹±æ–‡æ˜¯push.å°†æ ˆå›æ”¶ï¼Œå«åšå‡ºæ ˆ,è‹±æ–‡æ˜¯pop,æ ˆçš„ç‰¹ç‚¹å°±æ˜¯å…ˆè¿›åå‡ºï¼Œæ ˆé¡¶æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘æœ€å¤–å±‚çš„å¸§ï¼Œå¸§æ˜¯ä»æ ˆçš„é«˜åœ°å€å¼€å§‹å­˜æ”¾ï¼Œä¹‹åå†…å­˜åœ°å€ä¸æ–­é€’å‡ç›´è‡³æ ˆæ»¡ã€‚</p><p>é‚£æ ˆçš„ç©ºé—´æ˜¯ç”±è°æ¥å†³å®šçš„å‘¢ï¼Ÿç³»ç»Ÿèƒ½å¦åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡å‘¢ï¼Ÿ</p><p>å¹¶ä¸èƒ½ï¼Œå½“éœ€è¦ä½¿ç”¨æ ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€æ®µå†…å­˜ç©ºé—´ä½œä¸ºæ ˆæ®µï¼Œæˆ‘ä»¬åªèƒ½äººä¸ºçš„é¿å…é€ æˆæ ˆæ»¡ï¼Œè€Œä¸èƒ½å¯„å¸Œæœ›äºæ“ä½œç³»ç»Ÿã€‚</p><h2 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><h3 id="1-ä¼ªæŒ‡ä»¤ä¸æŒ‡ä»¤"><a href="#1-ä¼ªæŒ‡ä»¤ä¸æŒ‡ä»¤" class="headerlink" title="1. ä¼ªæŒ‡ä»¤ä¸æŒ‡ä»¤"></a>1. ä¼ªæŒ‡ä»¤ä¸æŒ‡ä»¤</h3><p>ç¨‹åºæ˜¯æŒ‡ä»¤çš„é›†åˆï¼Œæ¯ä¸€æ¡æŒ‡ä»¤éƒ½å¯¹åº”CPUçš„æ“ä½œï¼Œä½†ä»…æœ‰æŒ‡ä»¤æ˜¯ä¸å¤Ÿçš„ï¼ŒæŒ‡ä»¤ä¸èƒ½å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œç¨‹åºä»€ä¹ˆæ—¶å€™ç»“æŸï¼Œä¹Ÿä¸èƒ½å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæ•°æ®æ®µå­˜å‚¨åœ¨å“ªæ®µå†…å­˜ç©ºé—´ï¼Œä»£ç æ®µåˆå­˜å‚¨åœ¨å“ªæ®µå†…å­˜ç©ºé—´ã€‚æ‰€ä»¥éœ€è¦æœ‰ä¸€ç§èƒ½è¢«ç¼–è¯‘å™¨æ‰€è¯†åˆ«çš„ï¼Œç”¨äºå®šä¹‰ç¨‹åºç»“æ„åŒ–çš„è¯­è¨€ã€‚è¿™å°±æ˜¯ä¼ªæŒ‡ä»¤äº†ã€‚</p><p>ä¼ªæŒ‡ä»¤æ˜¯ç”¨äºå‘Šè¯‰æ±‡ç¼–ç¨‹åºå¦‚ä½•è¿›è¡Œ<strong>æ±‡ç¼–</strong>çš„æŒ‡ä»¤ã€‚å®ƒæ—¢ä¸æ§åˆ¶æœºå™¨çš„æ“ä½œä¹Ÿä¸è¢«æ±‡ç¼–æˆæœºå™¨ä»£ç ï¼Œåªèƒ½ä¸ºæ±‡ç¼–å™¨æ‰€è¯†åˆ«å¹¶æŒ‡å¯¼æ±‡ç¼–ç¨‹åºå¦‚ä½•è¿›è¡Œã€‚ å°†ç›¸å¯¹äºç¨‹åºæˆ–ç›¸å¯¹äºå¯„å­˜å™¨çš„åœ°å€è½½å…¥å¯„å­˜å™¨ä¸­ã€‚</p><h3 id="2-å¸¸ç”¨æŒ‡ä»¤"><a href="#2-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="2 .å¸¸ç”¨æŒ‡ä»¤"></a>2 .å¸¸ç”¨æŒ‡ä»¤</h3><table><thead><tr><th>åºå·</th><th><strong>è¯­æ³•</strong></th><th><strong>åŠŸèƒ½</strong></th><th align="center"><strong>æ¡ˆä¾‹</strong></th><th><strong>è¯´æ˜</strong></th><th><strong>å¤‡æ³¨</strong></th></tr></thead><tbody><tr><td>1</td><td>mov</td><td>æ•°æ®ä¼ é€æŒ‡ä»¤</td><td align="center">mov[0],cs</td><td>å°†å¯„å­˜å™¨CSä¸­çš„å†…å®¹ä¼ é€åˆ°åç§»åœ°å€ä¸º0çš„å†…å­˜å•å…ƒä¸­</td><td>ç¬¦åˆåå¯¹ç§°</td></tr><tr><td>2</td><td>add/sub</td><td>åŠ ã€å‡æŒ‡ä»¤</td><td align="center">sub ax,bx</td><td>å°†axå¯„å­˜å™¨ä¸­çš„å†…å®¹å‡å»bxå¯„å­˜å™¨ä¸­çš„å†…å®¹çš„ç»“æœå­˜å‚¨åœ¨axä¸­</td><td></td></tr><tr><td>3</td><td>push</td><td>å…¥æ ˆ</td><td align="center">push ax</td><td>åˆ†ä¸¤æ­¥ï¼Œé¦–å…ˆæ ˆé¡¶æŒ‡é’ˆåç§»ï¼Œå…¶æ¬¡å°†axå¯„å­˜å™¨ä¸­çš„å†…å®¹å…¥æ ˆ</td><td>æ®µåœ°å€ä»dsä¸­å–å¾—</td></tr><tr><td>4</td><td>pop</td><td>å‡ºæ ˆ</td><td align="center">pop ax</td><td>åˆ†ä¸¤æ­¥ï¼Œé¦–å…ˆå°†æ ˆé¡¶æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹èµ‹ç»™axå¯„å­˜å™¨ï¼Œç„¶åæ ˆé¡¶æŒ‡é’ˆåç§»</td><td></td></tr><tr><td>5</td><td>loop æ ‡å·</td><td>è·³è½¬è‡³æ ‡å·å¤„</td><td align="center">loop continue</td><td>CPUæ‰§è¡ŒloopæŒ‡ä»¤æ—¶ï¼Œè¿›è¡Œä¸¤æ­¥æ“ä½œï¼šé¦–å…ˆCXé€’å‡ï¼Œç„¶ååˆ¤æ–­CXä¸­çš„å€¼ï¼Œè‹¥ä¸ä¸º0ï¼Œåˆ™è·³è½¬æ ‡å·å¤„ï¼Œè‹¥ä¸º0ï¼Œåˆ™å‘ä¸‹æ‰§è¡Œ</td><td>CXä¸“ç”¨äºå­˜æ”¾å¾ªç¯æ¬¡æ•°</td></tr><tr><td>6</td><td>and</td><td>é€»è¾‘ä¸</td><td align="center">and      al,01100011B</td><td>æŒ‰ä½è¿›è¡Œä¸è¿ç®—</td><td>å¸¸ç”¨äºä½æ¸…é™¤</td></tr><tr><td>7</td><td>or</td><td>é€»è¾‘æˆ–</td><td align="center">or al,01100011B</td><td>æŒ‰ä½è¿›è¡Œæˆ–è¿ç®—</td><td>å¸¸ç”¨äºä½å¡«å……</td></tr><tr><td>8</td><td>div</td><td>é™¤æ³•</td><td align="center">div byte ptr ds:[0]</td><td>åšé™¤æ³•æ“ä½œæ—¶ï¼Œé™¤æ•°æœ‰8ä½å’Œ16ä½ä¸¤ç§ï¼Œå­˜æ”¾åœ¨åœ¨ä¸€ä¸ªreg/å†…å­˜å•å…ƒä¸­ã€‚è¢«é™¤æ•°é»˜è®¤æ”¾åœ¨AXæˆ–è€…DXå’ŒAXä¸­ï¼Œå¦‚æœé™¤æ•°ä¸º8ä½ï¼Œè¢«é™¤æ•°åˆ™ä¸º<strong>16ä½</strong>ï¼Œé»˜è®¤åœ¨<strong>AX</strong>ä¸­å­˜æ”¾ï¼›å¦‚æœé™¤æ•°ä¸º16ä½ï¼Œè¢«é™¤æ•°ä¸º<strong>32ä½</strong>ï¼Œåœ¨<strong>DXå’ŒAX</strong>ä¸­å­˜æ”¾ï¼ŒD<strong>Xå­˜æ”¾é«˜16ä½ï¼ŒAXå­˜æ”¾ä½16ä½</strong>ã€‚ç»“æœï¼šå¦‚æœé™¤æ•°ä¸º8ä½ï¼Œåˆ™ALå‚¨å­˜é™¤æ³•æ“ä½œçš„å•†ï¼ŒAHå‚¨å­˜é™¤æ³•æ“ä½œçš„ä½™æ•°ï¼›å¦‚æœé™¤æ•°ä¸º16ä½ï¼Œåˆ™AXå‚¨å­˜é™¤æ³•æ“ä½œçš„å•†ï¼ŒDXå‚¨å­˜é™¤æ³•æ“ä½œçš„ä½™æ•°ï¼Œ</td><td>è¿›è¡Œé™¤æ³•æ“ä½œå‰ï¼Œé¦–å…ˆè¦è¿›è¡Œé™¤æ•°å’Œè¢«é™¤æ•°çš„è®¾ç½®</td></tr><tr><td>9</td><td>jmp</td><td>æ— æ¡ä»¶è½¬ç§»æŒ‡ä»¤</td><td align="center">jmp short s</td><td><strong>æ®µå†…çŸ­ä½ç§»</strong>ï¼Œè½¬åˆ°æ ‡å·så¤„æ‰§è¡ŒæŒ‡ä»¤ã€‚</td><td>jmpæŒ‡ä»¤åº”è¯¥åŒ…å«ä¸¤ç§ä¿¡æ¯ï¼šè½¬ç§»çš„<strong>ç›®çš„åœ°å€</strong>ä¸è½¬ç§»çš„<strong>è·ç¦»</strong></td></tr><tr><td>10</td><td></td><td></td><td align="center">jmp far ptr s</td><td><strong>æ®µé—´è½¬ç§»</strong>ï¼Œä½¿ç”¨Sçš„æ®µåœ°å€å’Œåç§»åœ°å€ä¿®æ”¹CSå’ŒIP</td><td></td></tr><tr><td>11</td><td></td><td></td><td align="center">jmp AX</td><td><strong>æ®µå†…åç§»</strong>ï¼Œå°†å¯„å­˜å™¨AXä¸­çš„å†…å®¹èµ‹ç»™IP</td><td></td></tr><tr><td>12</td><td></td><td></td><td align="center">jmp word ptr ds:[0]</td><td><strong>æ®µå†…åç§»</strong>ï¼Œä»å†…å­˜å•å…ƒçš„åœ°å€å¤„å¼€å§‹å­˜æ”¾ä¸€ä¸ªå­—ï¼Œå³è½¬ç§»çš„ç›®çš„<strong>åç§»åœ°å€</strong></td><td></td></tr><tr><td>13</td><td>jcxz</td><td>æœ‰æ¡ä»¶è½¬ç§»æŒ‡ä»¤</td><td align="center">jcxz s</td><td><strong>çŸ­ä½ç§»</strong>ï¼ŒæŒ‡ä»¤ä¸­åŒ…å«è½¬ç§»ä½ç§»ï¼Œè€Œä¸æ˜¯ç›®çš„åœ°å€ã€‚ç­‰åŒäº if(CX == 0) jmp short æ ‡å·</td><td></td></tr><tr><td>14</td><td>call</td><td>è½¬ç§»æŒ‡ä»¤</td><td align="center">call s</td><td>ä¸èƒ½å®ç°çŸ­ä½ç§»ï¼Œæ‰§è¡ŒcallæŒ‡ä»¤ï¼Œæ‰§è¡Œä¸¤æ­¥æ“ä½œï¼špush IP ï¼Œ jmp  near ptr æ ‡å·</td><td></td></tr><tr><td>15</td><td>ret</td><td>å¤åŸæŒ‡ä»¤</td><td align="center">ret</td><td>CPUæ‰§è¡Œretæ“ä½œæ—¶ï¼Œç­‰åŒäºæ‰§è¡ŒæŒ‡ä»¤ pop IP</td><td></td></tr><tr><td>16</td><td>retf</td><td>å¤åŸæŒ‡ä»¤</td><td align="center">retf</td><td>CPUæ‰§è¡Œretfæ“ä½œæ—¶ï¼Œç­‰åŒäºæ‰§è¡ŒæŒ‡ä»¤pop IP,pop CS</td><td></td></tr><tr><td>17</td><td>mul</td><td>ä¹˜æ³•æŒ‡ä»¤</td><td align="center">mov ax,100 mov bx,10000 mul bx</td><td>ç±»divæŒ‡ä»¤</td><td></td></tr><tr><td>18</td><td>adc</td><td>å¸¦è¿›ä½åŠ æ³•</td><td align="center">adc AX,BX</td><td>ç­‰åŒäºadd AX,BX, ADD AX,CF</td><td></td></tr><tr><td>19</td><td>sub</td><td>å¸¦å€Ÿä½å‡æ³•</td><td align="center">sub AX,BX</td><td>ç­‰åŒäºsub AX,BX, sub AX,CF</td><td></td></tr><tr><td>20</td><td>cmp</td><td>æ¯”è¾ƒæŒ‡ä»¤</td><td align="center">mov ax,8        mov bx,3      cmp ax,bx</td><td>ç›¸å½“äºå‡æ³•æ“ä½œï¼Œè®¡ç®—ç»“æœä¼šå¯¹æ ‡å¿—å¯„å­˜å™¨äº§ç”Ÿå½±å“</td><td></td></tr><tr><td>21</td><td>je jne jb jnb ja jna</td><td>æ ¹æ®æ¯”è¾ƒç»“æœçš„è·³è½¬æŒ‡ä»¤</td><td align="center">jxx s</td><td>ç­‰äº/ä¸ç­‰äº/ä½äº/ä¸ä½äº/å¤§äº/ä¸å¤§äº</td><td></td></tr><tr><td>22</td><td>pushf  popf</td><td></td><td align="center">pushf  popf</td><td>å°†æ ‡å¿—å¯„å­˜å™¨ä¸­çš„å€¼å‹æ ˆ/å‡ºæ ˆ</td><td></td></tr><tr><td>23</td><td>iret</td><td>å¤åŸæŒ‡ä»¤</td><td align="center">iret</td><td>ç­‰åŒäºï¼špop IPï¼Œpop CS,popf</td><td></td></tr><tr><td>24</td><td>int</td><td>ä¸­æ–­æŒ‡ä»¤</td><td align="center">int n</td><td>è¿™é‡Œçš„nè¡¨ç¤ºçš„æ˜¯ä¸­æ–­ç±»å‹ç ã€‚CPUæ‰§è¡Œint næŒ‡ä»¤ï¼Œæ‰§è¡Œè¿‡ç¨‹ï¼šé¦–å…ˆå–ä¸­æ–­ç±»å‹ç nï¼Œç„¶åæ ‡å¿—å¯„å­˜å™¨å…¥æ ˆï¼Œæ¥ç€CSï¼ŒIPå…¥æ ˆã€‚æœ€åè·³è½¬æ‰§è¡Œ</td><td></td></tr><tr><td>25</td><td>shl</td><td>é€»è¾‘å·¦ç§»æŒ‡ä»¤</td><td align="center">shl al,1</td><td>å°†alä¸­çš„æ•°æ®é€»è¾‘å·¦ç§»1ä½ï¼Œæœ€åç§»å‡ºçš„1ä½å†™å…¥CFï¼Œæœ€ä½ä½ç”¨0è¡¥å……</td><td></td></tr><tr><td>26</td><td>shr</td><td>é€»è¾‘å³ç§»æŒ‡ä»¤</td><td align="center">shr al,1</td><td>å°†alä¸­çš„æ•°æ®é€»è¾‘å³ç§»1ä½ï¼Œæœ€åç§»å‡ºçš„1ä½å†™å…¥CFï¼Œæœ€é«˜ä½ç”¨0è¡¥å……</td><td></td></tr></tbody></table><h3 id="3-å¸¸ç”¨çš„ä¼ªæŒ‡ä»¤"><a href="#3-å¸¸ç”¨çš„ä¼ªæŒ‡ä»¤" class="headerlink" title="3.å¸¸ç”¨çš„ä¼ªæŒ‡ä»¤"></a>3.å¸¸ç”¨çš„ä¼ªæŒ‡ä»¤</h3><table><thead><tr><th>åç§°</th><th>åŠŸèƒ½</th><th>æ¡ˆä¾‹</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>dd(double word)</td><td>å®šä¹‰åŒå­—å‹æ•°æ®</td><td>dd 12345</td><td>å®šä¹‰äº†å 2ä¸ªå­—çš„æ•°æ®12345</td><td></td></tr><tr><td>db(define byte)</td><td>å®šä¹‰å­—èŠ‚å‹æ•°æ®</td><td>db 1</td><td>å®šä¹‰äº†å 1ä¸ªå­—èŠ‚çš„æ•°æ®1</td><td></td></tr><tr><td>dw(define word)</td><td>å®šä¹‰å­—å‹æ•°æ®</td><td>dw 100</td><td>å®šä¹‰äº†å 1ä¸ªå­—çš„æ•°æ®100</td><td></td></tr><tr><td>dup</td><td>ç”¨äºè¿›è¡Œæ•°æ®çš„é‡å¤</td><td>db 3 dup (0,1,)</td><td>å®šä¹‰äº†6ä¸ªå­—èŠ‚æ•°æ®ï¼Œåˆ†åˆ«æ˜¯0,1,0,1,0,1</td><td></td></tr><tr><td>offset</td><td>å–å¾—æ ‡å·çš„åç§»åœ°å€</td><td>mov si,offset s</td><td>å°†æ ‡å·sçš„åç§»åœ°å€èµ‹ç»™si</td><td></td></tr><tr><td>seg</td><td>å›é€å˜é‡æˆ–è€…æ ‡å·çš„æ®µåœ°å€</td><td></td><td></td><td></td></tr></tbody></table><ul><li><input disabled type="checkbox"> æ›´å¤šçš„å¯å‚è€ƒ<a href="http://blog.sina.com.cn/s/blog_4a92ce12010006m2.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_4a92ce12010006m2.html</a></li></ul><h3 id="4-ä»¥å­¦ä¿ƒç”¨"><a href="#4-ä»¥å­¦ä¿ƒç”¨" class="headerlink" title="4. ä»¥å­¦ä¿ƒç”¨"></a>4. ä»¥å­¦ä¿ƒç”¨</h3><h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><blockquote><p>å°†å®éªŒä¸ƒä¸­çš„Power idea å…¬å¸çš„æ•°æ®ï¼ŒæŒ‰ç…§å›¾10.2æ‰€ä¸‹å›¾å±å¹•ä¸­æ˜¾ç¤ºå‡ºæ¥</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262122441.png" alt="image-20201112151602560"></p><h4 id="ä»£ç ä¸æ³¨é‡Š"><a href="#ä»£ç ä¸æ³¨é‡Š" class="headerlink" title="ä»£ç ä¸æ³¨é‡Š"></a>ä»£ç ä¸æ³¨é‡Š</h4><pre class=" language-ASM"><code class="language-ASM">assume cs:codesg;å°†æ•´ä¸ªdataæ®µçœ‹ä½œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé•¿åº¦ä¸€å…±ä¸º;21*4+21*4+2*21=168+42=210å­—èŠ‚data segment    db '1975', '1976', '1977', '1978', '1979', '1980', '1981', '1982', '1983'    db '1984', '1985', '1986', '1987', '1988', '1989', '1990', '1991', '1992'    db '1993', '1994', '1995'    ;é•¿åº¦ä¸º84çš„æ•°ç»„ï¼Œä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—èŠ‚ï¼š4X21    dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514    dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000    dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226    dw 11542, 14430, 15257, 17800data ends;ax+210/16å‘ä¸Šå–æ•´ï¼Œå³ax+14h;å¯¹äºdsï¼Œåç§»é‡ä¸º16*14=224table segment    db 21 dup('year summ ne ?? ')table endsshow segment    db 100 dup(0)show endstemp segment    dw 10 dup(0)temp endscodesg segmentstart:          mov ax, data            mov ds, ax             mov bx, table            mov es, bx              mov bx, 0   ;å®šä½ç»“æ„ä½“æ•°ç»„å…ƒç´             mov di, 0   ;å®šä½dataä¸­çš„4å­—èŠ‚æ•°æ®            mov si, 0   ;å®šä½dataä¸­çš„2å­—èŠ‚æ•°æ®            mov cx, 15hs0:            ;è½¬ç§»å¹´ä»½            mov ax, ds:[di]            mov es:[bx], ax            mov ax, ds:[di+2]            mov es:[bx+2], ax            ;æ·»åŠ ç©ºæ ¼             mov byte ptr es:[bx+4], 32            ;è½¬ç§»æ”¶å…¥            ;ä½œä¸ºè¢«é™¤æ•°            mov ax, ds:[di+84];            mov es:[bx+5], ax            mov ax, ds:[di+86]            mov es:[bx+7], ax            ;æ·»åŠ ç©ºæ ¼             mov byte ptr es:[bx+9], 32            ;è½¬ç§»é›‡å‘˜æ•°é‡            mov ax, ds:[si+168]            mov es:[bx+10], ax            ;æ·»åŠ ç©ºæ ¼             mov byte ptr es:[bx+12], 32            ;è®¡ç®—äººå‡æ”¶å…¥ï¼Œå¹¶è½¬ç§»åˆ°tableä¸­            mov ax, es:[bx+5]   ;ä½16ä½            mov dx, es:[bx+7]   ;é«˜16ä½            div word ptr es:[bx+10]            mov es:[bx+13], ax  ;å•†é»˜è®¤å­˜æ”¾åœ¨axä¸­             ;æ·»åŠ ç©ºæ ¼             mov byte ptr es:[bx+15], 32            ;æ“ä½œå®Œæˆï¼ŒbxåŠ 16ï¼ŒdiåŠ 2            add bx, 16              add di, 4            add si, 2            loop s0;s0å¾ªç¯çš„ä½œç”¨ä¸»è¦æ˜¯å°†æ•°æ®å­˜å‚¨åˆ°tableæ®µä¸­;è€Œåœ¨s1å¾ªç¯ä¸­ï¼Œå…ˆæŠŠtableæ®µä¸­çš„æ•°æ®è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œè½¬å‚¨åˆ°;showæ®µä¸­ï¼Œç„¶åå†åœ¨s2å¾ªç¯ä¸­è°ƒç”¨show_strå­ç¨‹åºæ¥å°†è¿™äº›å­—ç¬¦ä¸²ä¸€è¡Œä¸€è¡Œåœ°;æ˜¾ç¤ºåˆ°å±å¹•ä¸Š            mov ax, table            mov ds, ax            mov ax, show            mov es, ax            mov dx, 0            mov dh, 4            mov bx, 0            mov cx, 15hs1:            mov di, 0            ;è¿™é‡Œçš„diä½œä¸ºtableæ•°æ®æ®µçš„æŒ‡é’ˆ            push ds            push es            push cx            push dx            ;ä¿å­˜è¡Œåˆ—ä¿¡æ¯ï¼Œåœ¨è°ƒç”¨show_stræ—¶ä¼šç”¨åˆ°            ;è½¬å‚¨å¹´ä»½            mov ax, ds:[bx+di]            mov es:[di], ax            add di, 2            mov ax, ds:[bx+di]            mov es:[di], ax            mov byte ptr es:[di+4], 0            ;è½¬å‚¨æ”¶å…¥            mov di, 5            mov ax, ds:[bx+di]            mov dx, ds:[bx+di+2]            call dtoc             ;è½¬å‚¨äººæ•°            mov ax, ds:[bx+10]            mov dx, 0            call dtoc             ;è½¬å‚¨äººå‡æ”¶å…¥            mov ax, ds:[bx+13]            mov dx, 0            call dtoc            ;ä»¥ä¸Šå°±æ˜¯tableæ®µä¸­çš„ä¸€è¡Œè½¬æ¢ä¸ºASCIIç å€¼çš„å¤„ç†è¿‡ç¨‹            ;ä¸‹é¢å¼€å§‹æ˜¾ç¤ºè¿‡ç¨‹ï¼Œæ­¤è¿‡ç¨‹éœ€è¦å¾ªç¯å››æ¬¡            pop dx                        mov di, 0            ;è¿™é‡Œçš„diä½œä¸ºå¾…è¾“å‡ºæ•°æ®æ®µçš„æŒ‡é’ˆ            mov cx, 4s2:            mov si, 0            call show_str            add dl, 20            ;æŠŠåˆ—é”™å¼€            loop s2            mov dl, 0            add dh, 1            add bx, 16            pop cx            pop es            pop ds            loop s1            mov ax, 4c00h            int 21hdtoc:        ;è¯¥å­ç¨‹åºç”¨äºå°†æ•°å€¼å‹çš„æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²            ;åè¿›åˆ¶æ•°å€¼è½¬æ¢ä¸ºASCIIç å€¼ï¼Œè½¬æ¢å…³ç³»ä¸ºï¼šascii=10è¿›åˆ¶+30H            ;è¦æƒ³å°†ä¸€ä¸ªåè¿›åˆ¶çš„æ•´æ•°æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ª            çš„æ•°å€¼ï¼Œé‚£æˆ‘ä»¬éœ€è¦è®©è¿™ä¸ªæ•°            ;é™¤ä»¥10ï¼Œç„¶åå°†å¾—åˆ°çš„ç»“æœä¾æ¬¡å…¥æ ˆï¼Œé™¤å®Œä¹‹åå†ä¾æ¬¡å‡ºæ ˆï¼Œå³å¯å¾—åˆ°ç”±é«˜ä½åˆ°ä½ä½            ;çš„æ‰€æœ‰æ•°å€¼ï¼Œä¹‹åå°†è¿™äº›å€¼åŠ ä¸Š30Hï¼Œå³å¾—åˆ°å…¶å¯¹åº”çš„ASCIIç å€¼ï¼Œç„¶åå°†è¿™äº›            ;ASCIIç å€¼å­˜æ”¾åˆ°ä¸€ä¸ªæ•°æ®æ®µä¸­ï¼Œè°ƒç”¨show_strå‡½æ•°ï¼Œæ¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¿™äº›æ•°å€¼            ;ä¸ºäº†å­˜å‚¨è½¬æ¢åçš„ASCIIç å€¼ï¼Œæˆ‘ä»¬éœ€è¦æ–°å¼€è¾Ÿä¸€ä¸ªæ•°æ®æ®µ            push bx            push cx            push dx            push ds             push ax            push si            push es              mov bx, 0            ;è®°å½•åè¿›åˆ¶æ•°æ®çš„ä½æ•°split:        mov cx, 0ah            ;cxå­˜æ”¾é™¤æ•°              call divdw            ;å¦‚æœè¢«é™¤æ•°å¤§äº2550ï¼Œalæ˜¯æ— æ³•å­˜æ”¾å•†çš„ï¼Œä¼šé€ æˆæº¢å‡ºï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨æœ¬å®éªŒä¸­ç¬¬äºŒä¸ªç¨‹åº            ;ä¸“é—¨ç”¨äºè§£å†³é™¤æ³•æº¢å‡ºé—®é¢˜çš„ç¨‹åº            ;æ­¤ç¨‹åºè¿”å›è¿ç®—åçš„å•†å’Œä½™æ•°ï¼Œåˆ†åˆ«ä¿å­˜åœ¨axå’Œcxä¸­             push cx            ;ä½™æ•°å…¥æ ˆ            inc bx            ;å½“å¾ªç¯ç»ˆæ­¢çš„æ—¶å€™å¯ä»¥è¿›è¡Œå¼¹æ ˆå­˜å‚¨æ“ä½œäº†ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ‡è®°ï¼Œæ¥æ ‡è¯†æˆ‘ä»¬éœ€è¦            ;å¼¹å‡ºå¤šå°‘æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨bxæ¥è¿›è¡Œå­˜å‚¨            mov cx, ax            add cx, dx            ;axä¸­çš„å€¼åœ¨ä¸‹ä¸€æ¬¡è¿ç®—ä¸­ä¸€å®šä¼šç”¨åˆ°ï¼Œdxä¸­çš„å€¼ä¹Ÿæœ‰å¯èƒ½ä¼šç”¨åˆ°ï¼ˆå½“è¢«é™¤æ•°å¾ˆå¤§æ—¶ï¼‰            ;æ­¤æ—¶å¯ä»¥ä¸´æ—¶ä¿å­˜æ•°æ®çš„åªæœ‰cxäº†ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥å°†è¿ç®—ç»“æœæ”¾åˆ°cxä¸­            ;ä¸€ä¸¾ä¸¤å¾—            ;åˆ¤æ–­æ¡ä»¶æ˜¯å•†==0ï¼Œå› æ­¤æˆ‘ä¹ˆéœ€è¦é«˜16ä½å’Œä½16ä½å…¨éƒ½ä¸º0            jcxz ok1            ;å¤„ç†è¿‡ç¨‹æ˜¯éœ€è¦å¾ªç¯çš„ï¼Œå¾ªç¯ç»“æŸçš„æ¡ä»¶æ˜¯å•†==0             ;æˆ‘ä»¬åªéœ€è¦å°†æ‰§è¡ŒjcxzæŒ‡ä»¤å³å¯ï¼Œå½“cxçš„å€¼ä½0çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨è·³è½¬åˆ°ok1å¾ªç¯çš„            jmp short split ok1:        pop ax            add al, 30h            mov byte ptr es:[di], al            inc di            dec bx            mov cx, bx            jcxz last            jmp short ok1last:        ;æœ€åä¸€æ­¥ï¼Œåœ¨æ•°æ®çš„ASCIIæ•°æ®å½¢å¼çš„æœ€ååŠ ä¸Šä¸€ä¸ª0            mov ah, 0            mov byte ptr es:[di], ah             inc di            pop es            pop si            pop ax             pop ds            pop dx            pop cx            pop bx            retdivdw:        push ds            push dx            push cx            push bx            push ax             mov ax, temp            mov ds, ax             mov ax, dx             mov dx, 0             div cx            ;axå­˜æ”¾å•†ï¼Œdxå­˜æ”¾ä½™æ•°            ;æ ¹æ®å…¬å¼ï¼Œä½¿ç”¨è¢«é™¤æ•°é«˜ä½é™¤ä»¥é™¤æ•°å¾—åˆ°çš„å•†Ã—65536            ;*65536ç­‰ä»·äºåœ¨ä½ä½åŠ 16ä¸ª0ï¼Œå› æ­¤æ“ä½œå°±ä¼šå˜å¾—éå¸¸ç®€å•            ;ä½¿ç”¨è¢«é™¤æ•°é«˜ä½é™¤ä»¥é™¤æ•°å¾—åˆ°çš„ä½™æ•°Ã—65536+è¢«é™¤æ•°çš„ä½ä½ï¼Œå†å°†å¾—åˆ°çš„ç»“æœé™¤ä»¥é™¤æ•°            ;ä¸¤è€…çš„ç»“æœç›¸åŠ ï¼Œå³å¯å¾—åˆ°32ä½/16ä½çš„æ— æº¢å‡ºç»“æœ            push dx            ;ä½¿ç”¨æ ˆä¸´æ—¶ä¿å­˜ä½™æ•°            mov dx, ax            mov ax, 0            mov ds:[0], ax            mov ds:[2], dx            pop dx            ;å¼¹å‡ºä½™æ•°ï¼Œä½œä¸ºå³æ“ä½œæ•°ä¸­è¢«é™¤æ•°çš„é«˜16ä½            pop ax            ;å¾—åˆ°è¢«é™¤æ•°çš„ä½16ä½            push ax            ;æ¢å¤æ ˆé¡¶æ•°æ®ï¼Œé¿å…å¯¹ä¸»ç¨‹åºé€ æˆå¹²æ‰°             ;å°†å³æ“ä½œæ•°[]ä¸­çš„å·¦æ“ä½œæ•°çš„ä½16ä½å’Œè¢«é™¤æ•°çš„ä½16ä½ç›¸åŠ             ;ä½†æ˜¯å³æ“ä½œæ•°[]ä¸­çš„å·¦æ“ä½œæ•°çš„ä½16ä½ä¸€å®šæ˜¯å…¨0çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çœç•¥è¿™ä¸€æ­¥            ;ç›´æ¥æ‰§è¡Œpop axï¼Œå°†è¢«é™¤æ•°çš„ä½16ä½ä½œä¸ºå³æ“ä½œæ•°çš„ä½16ä½            div cx            ;axå­˜æ”¾å•†ï¼Œdxå­˜æ”¾ä½™æ•°            ;ç”±äºå·¦æ“ä½œæ•°çš„ä½16ä½ä¸€å®šæ˜¯å…¨0ï¼Œæ‰€ä»¥ä¸å¿…ä¸å…¶ç›¸åŠ ï¼Œç›´æ¥å°†            ;å³æ“ä½œæ•°çš„ä½16ä½å­˜å‚¨åˆ°ds:[0]å†…å­˜å•å…ƒå³å¯            mov ds:[0], ax            ;å•†çš„ä½16ä½æ”¾åˆ°ds:[0]å•å…ƒä¸­            mov ds:[4], dx              ;ä½™æ•°æ”¾åˆ°ds:[4]å•å…ƒä¸­            ;ds:[2]ä¸­ä¸€ç›´ä¿å­˜çš„éƒ½æ˜¯å•†çš„é«˜16ä½ï¼Œä¸”æ²¡æœ‰è¢«æ›´æ”¹è¿‡ï¼Œå› æ­¤æ— é¡»ä»»ä½•æ“ä½œ            pop ax            pop bx            pop cx            pop dx            mov ax, ds:[0]            ;axä¿å­˜å•†çš„ä½16ä½            mov dx, ds:[2]            ;dxä¿å­˜å•†çš„é«˜16ä½            mov cx, ds:[4]            ;cxä¿å­˜ä½™æ•°              pop ds            ;ä¹‹æ‰€ä»¥è¦åœ¨pop dsä¹‹å‰å°†æ•°æ®è½¬ç§»ï¼Œæ˜¯å› ä¸ºå­ç¨‹åºdivdwè°ƒç”¨å‰ï¼Œdså·²ç»è¢«ä½¿ç”¨            ;æŒ‡å‘çš„æ˜¯å…¶ä»–çš„æ®µï¼Œå¦‚æœä¸åœ¨popä¹‹å‰è½¬ç§»æ•°æ®ï¼Œé‚£ä¹ˆdivæ®µçš„æ•°æ®å°±æ— æ³•è·å–äº†            ret     show_str:    push ax            push bx            push cx            push dx            push es             push ds            ;æ ¹æ®ä¸ŠèŠ‚ä¸­çš„æ¡†æ¶ï¼Œä¸ºäº†ä¸è®©å­ç¨‹åºå¹²æ‰°ä¸»ç¨‹åºä¸­å¯„å­˜å™¨çš„å€¼ï¼Œå°†æ‰€æœ‰å­ç¨‹åºä¼šç”¨åˆ°çš„å¯„å­˜å™¨è¿›è¡Œå‹æ ˆ            mov ax, 0b800h            mov es, ax            ;é¢œè‰²åŒºçš„æ®µåœ°å€            mov ax, show            mov ds, ax            ;è¦è¯»å…¥çš„æ•°æ®åŒºçš„æ®µåœ°å€            mov al, 160             mul dh            ;æ¯è¡Œå 160ä¸ªå­—èŠ‚ï¼Œä¹˜ä»¥è¡Œæ•°            push ax            ;å°†è¡Œè®¡ç®—çš„ç»“æœå­˜å‚¨åˆ°æ ˆä¸­            mov al, 2            mul dl            ;æ¯åˆ—å 2ä¸ªå­—èŠ‚ï¼Œä¹˜ä»¥åˆ—æ•°            pop bx            ;å°†ä¸Šæ¬¡è¿ç®—çš„ç»“æœï¼ˆ160Ã—è¡Œæ•°ï¼‰çš„å€¼è½¬ç§»åˆ°bxä¸­            add bx, ax  ;æ­¤æ—¶çš„axå€¼ä¸ºï¼ˆ2Ã—åˆ—æ•°ï¼‰            ;å°†ä¸¤è€…ç›¸åŠ ï¼Œæœ€ç»ˆç»“æœä¿å­˜åˆ°bxä¸­            mov dl, 130            ;æ˜¾ç¤ºé¢œè‰²ä¸ºç»¿è‰²change:        mov cl, ds:[di]            inc di             mov ch, 0            jcxz ok            mov ch, dl            mov es:[bx+si], cx            add si, 2             jmp short changeok:            pop ds             pop es            pop dx            pop cx            pop bx            pop ax            retcodesg endsend startcodesg endsend startcodesg endsend start</code></pre><h2 id="ä¸­æ–­"><a href="#ä¸­æ–­" class="headerlink" title="ä¸­æ–­"></a>ä¸­æ–­</h2><h3 id="1-åˆ†ç±»"><a href="#1-åˆ†ç±»" class="headerlink" title="1. åˆ†ç±»"></a>1. åˆ†ç±»</h3><p>æ‰€è°“<strong>ä¸­æ–­</strong>ï¼ŒæŒ‡çš„æ˜¯CPUä¸å†æ¥ç€<strong>åˆšæ‰§è¡Œå®Œçš„æŒ‡ä»¤</strong>å¾€ä¸‹æ‰§è¡Œï¼Œè€Œæ˜¯è½¬è€Œå¤„ç†ç”±CPUå†…éƒ¨æˆ–è€…å¤–éƒ¨äº§ç”Ÿçš„ä¸€ç§<strong>ç‰¹æ®Šä¿¡æ¯</strong>ã€‚è¿™ç§ç‰¹æ®Šä¿¡æ¯æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ä¸­æ–­ä¿¡æ¯</strong>ã€‚ä¸­æ–­ä¿¡æ¯è¦æ±‚CPUé©¬ä¸Šè¿›è¡ŒæŸç§å¤„ç†ï¼Œå¹¶å¯¹æ‰€è¦è¿›è¡Œçš„å¤„ç†æä¾›<strong>å¿…å¤‡å‚æ•°</strong>çš„é€šçŸ¥ä¿¡æ¯ã€‚</p><p>ä¸­æ–­ä¿¡æ¯å¯ä»¥æ¥è‡ªå¤–éƒ¨ï¼Œä¹Ÿå¯ä»¥æ¥è‡ªå†…éƒ¨ã€‚</p><p>æˆ‘ä»¬é€šå¸¸å°†æ¥è‡ªå†…éƒ¨çš„ä¸­æ–­ç§°ä¸º<strong>å¼‚å¸¸</strong>ï¼Œè€ŒæŠŠæ¥è‡ªå¤–éƒ¨çš„ä¸­æ–­ç§°ä¸º<strong>ä¸­æ–­</strong>ã€‚</p><h3 id="2-æœºåˆ¶"><a href="#2-æœºåˆ¶" class="headerlink" title="2. æœºåˆ¶"></a>2. æœºåˆ¶</h3><h4 id="å†…ä¸­æ–­"><a href="#å†…ä¸­æ–­" class="headerlink" title="å†…ä¸­æ–­"></a>å†…ä¸­æ–­</h4><p>å¯¹äº8086CPUæ¥è¯´ï¼Œå½“CPUå†…éƒ¨æœ‰ä¸‹é¢çš„æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå°†äº§ç”Ÿç›¸åº”çš„ä¸­æ–­ä¿¡æ¯â€”â€”</p><ol><li><strong>é™¤æ³•é”™è¯¯</strong>ã€‚å¦‚æ‰§è¡Œé™¤æ³•æŒ‡ä»¤äº§ç”Ÿçš„é™¤æ³•æº¢å‡º</li><li><strong>å•æ­¥æ‰§è¡Œ</strong></li><li>æ‰§è¡Œ<strong>intoæŒ‡ä»¤</strong></li><li>æ‰§è¡Œ<strong>intæŒ‡ä»¤</strong></li></ol><p>é‚£ä¹ˆCPUæ¥æ”¶åˆ°ä¸­æ–­ä¿¡æ¯ä»¥åï¼Œä¼šåšå‡ºæ€æ ·çš„å“åº”å‘¢?</p><p>CPUé¦–å…ˆä¼šåˆ¤æ–­ä¸­æ–­ä¿¡æ¯çš„æ¥æºï¼Œå› è€Œä¸­æ–­ä¿¡æ¯ä¸­å¿…é¡»åŒ…å«æœ‰èƒ½å¤Ÿè¯†åˆ«ä¸­æ–­æ¥æºçš„ç¼–ç ï¼Œè¿™ç§ç¼–ç å°±æ˜¯<strong>ä¸­æ–­ç±»å‹ç </strong>ã€‚</p><p>CPUæ”¶åˆ°ä¸­æ–­ä¿¡æ¯åï¼Œæ ¹æ®ä¸­æ–­ç±»å‹ç ä¼šè§¦å‘ç‰¹å®šçš„<strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong>ï¼Œè€Œè¦å®šä½ä¸€æ®µç¨‹åºï¼Œå°±éœ€è¦çŸ¥é“è¿™æ®µç¨‹åºçš„<strong>å…¥å£åœ°å€</strong>ã€‚æ˜¾ç„¶ä¸­æ–­ä¿¡æ¯å’Œå…¶å¤„ç†ç¨‹åºå…¥å£åœ°å€ä¹‹é—´å­˜åœ¨ç€æŸç§<strong>è”ç³»</strong>ã€‚</p><p>è¿™ç§è”ç³»å°±æ˜¯ä¸­æ–­å‘é‡è¡¨ã€‚CPUå¯ä»¥é€šè¿‡8ä½çš„ä¸­æ–­ç±»å‹ç é€šè¿‡ä¸­æ–­å‘é‡è¡¨æ‰¾åˆ°ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ã€‚</p><p>ä¸­æ–­å‘é‡è¡¨ï¼Œå°±æ˜¯ä¸­æ–­å‘é‡çš„åˆ—è¡¨ã€‚æˆ‘ä»¬é€šå¸¸å°†å…·æœ‰å¤§å°å’Œæ–¹å‘ä¸¤ä¸ªæ€§è´¨çš„å‡ ä½•å¯¹è±¡ç§°ä¸º<strong>å‘é‡</strong>ï¼Œè¿™é‡Œçš„ä¸­æ–­å‘é‡<strong>æŒ‡çš„å°±æ˜¯</strong>ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ã€‚</p><p>ä¸­æ–­å‘é‡è¡¨åœ¨<strong>å†…å­˜</strong>ä¸­ä¿å­˜ï¼Œå…¶ä¸­å­˜æ”¾äº†256ä¸ªä¸­æ–­æºæ‰€å¯¹åº”ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£ï¼Œå¯¹äº8086CPUæ¥è¯´ï¼Œä¸­æ–­å‘é‡è¡¨<strong>æŒ‡å®š</strong>æ”¾åœ¨å†…å­˜åœ°å€0å¤„ï¼Œä»å†…å­˜<strong>0000:0000</strong>åˆ°<strong>0000:03FF</strong>çš„1024ä¸ªå•å…ƒä¸­å­˜æ”¾ç€ä¸­æ–­å‘é‡è¡¨ã€‚</p><p>é‚£ä¹ˆåœ¨ä¸­æ–­å‘é‡è¡¨ä¸­ï¼Œä¸€ä¸ªè¡¨é¡¹å å¤šå¤§çš„ç©ºé—´å‘¢ï¼Ÿä¸€ä¸ªè¡¨é¡¹å­˜æ”¾ä¸€ä¸ªä¸­æ–­å‘é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ï¼Œå¯¹äº8086CPUæ¥è¯´ï¼Œè¿™ä¸ªå…¥å£åœ°å€åŒ…æ‹¬æ®µåœ°å€å’Œåç§»åœ°å€ï¼Œæ‰€ä»¥ä¸€ä¸ªè¡¨é¡¹å 2ä¸ªå­—ï¼Œé«˜åœ°å€å­˜æ”¾æ®µåœ°å€ï¼Œä½åœ°å€å­˜æ”¾åç§»åœ°å€ã€‚å­˜å‚¨<strong>Nå·ä¸­æ–­æº</strong>æ‰€å¯¹åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£çš„<strong>æ®µåœ°å€</strong>å’Œ<strong>åç§»åœ°å€</strong>çš„å†…å­˜å•å…ƒåœ°å€åˆ†åˆ«æ˜¯ï¼š<strong>4N</strong>ï¼Œ<strong>4N+2</strong></p><p>æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼šCPUåœ¨æ‰§è¡Œå®Œä¸­æ–­å¤„ç†ç¨‹åºåï¼Œåº”è¯¥è¿”å›åŸæ¥çš„æ‰§è¡Œç‚¹ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œæ‰€ä»¥åœ¨ä¸­æ–­è¿‡ç¨‹ä¸­ï¼Œåœ¨è®¾ç½®CS:IPä¹‹å‰ï¼Œè¿˜è¦å°†åŸæ¥çš„CS:IPå€¼ä¿å­˜èµ·æ¥ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥æ¦‚æ‹¬ä¸€ä¸‹ä¸­æ–­è¿‡ç¨‹çš„æœºåˆ¶â€”â€”</p><blockquote><ol><li>ä»ä¸­æ–­ä¿¡æ¯ä¸­å–å¾—ä¸­æ–­ç±»å‹ç </li><li>æ ‡å¿—å¯„å­˜å™¨ä¸­çš„å€¼å…¥æ ˆ</li><li>è®¾ç½®æ ‡å¿—å¯„å­˜å™¨TFå’ŒIFçš„å€¼ä¸º0</li><li>CSï¼ŒIPçš„å†…å®¹å…¥æ ˆ</li><li>ä»å†…å­˜å•å…ƒä¸ºä¸­æ–­ç±»å‹ç Ã—4å’Œä¸­æ–­ç±»å‹ç *4+2çš„ä¸¤ä¸ªå­—å•å…ƒä¸­è¯»å–ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£è®¾ç½®IPå’ŒCS</li></ol></blockquote><h2 id="ç«¯å£ä¸BIOSè¯»å†™"><a href="#ç«¯å£ä¸BIOSè¯»å†™" class="headerlink" title="ç«¯å£ä¸BIOSè¯»å†™"></a>ç«¯å£ä¸BIOSè¯»å†™</h2><p>å¾…æ›´æ–°</p><hr><p>å‚è€ƒç›®å½•</p><ol><li>ç‹ç‡•è€å¸ˆçš„ã€Šæ±‡ç¼–è¯­è¨€ã€‹ï¼Œå¦‚æœæƒ³ç®€å•äº†è§£ä¸‹æ±‡ç¼–è¯­è¨€çš„å°ä¼™ä¼´ï¼Œå…¥æ‰‹è¿™æœ¬ä¹¦å°±å¯¹å•¦ã€‚</li></ol><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> intel8086æ±‡ç¼– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œä¼ è¾“å±‚</title>
      <link href="/2021/07/12/ji-suan-ji-wang-luo-chuan-shu-ceng/"/>
      <url>/2021/07/12/ji-suan-ji-wang-luo-chuan-shu-ceng/</url>
      
        <content type="html"><![CDATA[<h2 id="1-1-æ¦‚è¿°å’Œä¼ è¾“å±‚æœåŠ¡"><a href="#1-1-æ¦‚è¿°å’Œä¼ è¾“å±‚æœåŠ¡" class="headerlink" title="1.1 æ¦‚è¿°å’Œä¼ è¾“å±‚æœåŠ¡"></a>1.1 æ¦‚è¿°å’Œä¼ è¾“å±‚æœåŠ¡</h2><p>ä¼ è¾“å±‚ä½äºåº”ç”¨å±‚ä¸ç½‘ç»œå±‚ä¹‹é—´ï¼Œèµ·ç€æ‰¿ä¸Šå¯ä¸‹çš„é‡è¦ä½œç”¨ã€‚æ¦‚æ‹¬çš„è¯´ï¼Œ<strong>ä¼ è¾“å±‚åè®®ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹æä¾›é€»è¾‘é€šä¿¡çš„åŠŸèƒ½</strong>ã€‚è€Œä»TCP/IPåè®®æ—çš„ç»„æˆæ¥çœ‹ï¼Œå®ƒå‘ä¸Šä½¿<strong>è¿›ç¨‹é—´çš„é€šä¿¡æˆä¸ºå¯èƒ½</strong>ï¼Œå‘ä¸‹<strong>åŠ å¼ºäº†ç½‘ç»œå±‚æä¾›çš„å°½åŠ›è€Œä¸ºå¼</strong>çš„æœåŠ¡ã€‚é‚£å…·ä½“ä¼ è¾“å±‚å¦‚ä½•ä½¿ç”¨æœåŠ¡ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸ŠåŠ å¼ºï¼Œæœ€åæä¾›æœåŠ¡çš„å‘¢ï¼Ÿæˆ‘ä»¬è¿˜éœ€è¦ç»§ç»­å‹¾å‹’è¿™ä¸ªè“å›¾ï¼š</p><p>åœ¨æ­¤ä¹‹å‰ï¼Œé¦–å…ˆæ¥çœ‹ä¹¦ä¸­ç»™å‡ºçš„ä¾‹å­â€”â€”</p><p>æœ‰ä¸¤ä¸ªå…³ç³»ä¸é”™çš„å®¶åº­Aå’ŒBï¼Œå®¶åº­Açš„5ä½å®¶åº­æˆå‘˜éƒ½ä¼šå‘å®¶åº­Bçš„5ä½å®¶åº­æˆå‘˜å†™ä¿¡ã€‚å†™å¥½ä¿¡åäº¤ç”±é‚®é€’å…¬å¸å°†å…¶é€åˆ°å®¶åº­Bçš„ä¿¡ç®±ä¸­ï¼Œå®¶åº­Bçš„é•¿å­å†å°†ä¿¡ä»ä¿¡ç®±ä¸­å–å‡ºäº¤ç»™å¼Ÿå¼Ÿå¦¹å¦¹ä»¬ã€‚æˆ‘ä»¬æ¥å¯¹è¿™ä¸ªä¾‹å­åšä¸€ä¸ªç±»æ¯”ï¼š</p><p>ä¸¤ä¸ªå®¶åº­å¯ä»¥çœ‹åšä¸¤ä¸ªä¸»æœºï¼Œå¼Ÿå¼Ÿå¦¹å¦¹ä»¬å¯ä»¥çœ‹åšæ˜¯åº”ç”¨è¿›ç¨‹ï¼Œé•¿å­å¯ä»¥çœ‹åšæ˜¯ä¼ è¾“å±‚åè®®ï¼Œé‚®é€’æœåŠ¡å¯ä»¥è®¤ä¸ºæ˜¯ç½‘ç»œå±‚æä¾›çš„æœåŠ¡ï¼Œåº”ç”¨å±‚çš„æŠ¥æ–‡å³æ˜¯ä¿¡çš„å†…å®¹ã€‚</p><p>ä»è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºä¸€äº›<strong>æœ‰è¶£çš„ä¿¡æ¯</strong>â€”â€”</p><ul><li>é‚®ä»¶æœåŠ¡æœ‰å¯èƒ½å‡ºç°çº°æ¼ï¼Œæ¯”å¦‚ä¼šä¼ é”™ï¼Œä¸¢å¤±ç­‰ï¼Œå³<code>ç½‘ç»œå±‚ä¼ è¾“çš„æ˜¯ä¸å¯é çš„æœåŠ¡ï¼Œå®ƒä¸å¯¹åˆ†ç»„åšæœ‰æ•ˆåŠ›çš„ä¿è¯</code>ã€‚</li><li>é‚®ç®±é‡Œçš„ä¿¡ä»¶æ˜¯ä¹±åºçš„ï¼Œä½†é€šè¿‡é•¿å­æ¥ä¼ é€’åˆ°å¼Ÿå¼Ÿå¦¹å¦¹çš„ä¿¡ä»¶å´æ˜¯æœ‰åºçš„ï¼Œå³<code>ä¼ è¾“å±‚åè®®ä¼šå¯¹å¯é æ€§åšä¿è¯ï¼Œè€Œå…¶åº”ç”¨çš„æœºåˆ¶åˆ™æ˜¯RDTåŸç†</code>ã€‚</li><li>é•¿å­ä¸éœ€è¦è·‘å»é‚®å±€å–ä¿¡ä»¶ï¼Œè€Œåªéœ€è¦å®šæœŸæ£€æŸ¥é‚®ç®±å°±è¡Œå•¦ã€‚å³ä¼ è¾“å±‚åè®®è¢«å®šä¹‰åœ¨ç«¯ç³»ç»Ÿï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œ<code>ç½‘ç»œæ ¸å¿ƒçš„åŠŸèƒ½å…¶å®æ˜¯åœ¨ç½‘ç»œè¾¹æ²¿å®ç°çš„</code>ã€‚</li><li>å¦‚æœé‚®å±€æ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…ä¼ é€’é‚®ä»¶ï¼Œé‚£åœ¨æ­¤æœŸé—´åœ¨å®¶é‡Œå°±ä¸å¯èƒ½å–åˆ°ä¿¡ä»¶ã€‚å³<code>ä¼ è¾“å±‚çš„æœåŠ¡æ˜æ˜¾å—é™äºç½‘ç»œå±‚æä¾›çš„æœåŠ¡</code>ã€‚</li><li>å¦‚æœé‚®ç®±ä¸­æœ‰å¾ˆå¤šä¿¡ä»¶ï¼Œé•¿å­å¯ä»¥é€‰æ‹©æ€§çš„å…ˆå–å‡ºä¸€äº›é‚®ä»¶ã€‚å³<code>ä¼ è¾“å±‚æä¾›æµé‡ç®¡ç†å’Œæ‹¥å¡æ§åˆ¶çš„æœåŠ¡</code>ã€‚</li><li>é•¿å­åœ¨å–é‚®ä»¶æ—¶ï¼Œé¦–å…ˆéœ€è¦éœ€è¦æ‹†å¼€ä¿¡å°ï¼Œå†å–å‡ºä¿¡ä»¶ã€‚å³<code>ç›®æ ‡ç«¯å¯ä»¥å®ç°è§£å¤ç”¨</code>ã€‚</li></ul><p>é™¤äº†ä¸Šé¢å°†ä¼ è¾“å±‚å½“åš<strong>æ•´ä½“</strong>çœ‹å¾…æ¥åˆ†æå®ƒçš„ç‰¹ç‚¹ä¸å®ç°ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†ä¼ è¾“å±‚æ‹†è§£ï¼Œå¹¿ä¸ºäººçŸ¥çš„æ˜¯ï¼Œä¼ è¾“å±‚æä¾›TCPå’ŒUDPä¸¤ä¸ªåè®®ï¼Œ</p><p><code>TCP</code>ï¼šTCPæä¾›çš„æœåŠ¡æ˜¯å¯é çš„ï¼Œä¿åºçš„ï¼Œæœ‰æ‹¥å¡æ§åˆ¶ï¼Œæµé‡ç®¡ç†æœºåˆ¶çš„ï¼Œé¢å‘è¿æ¥çš„ï¼Œæ¶‰åŠå¤ç”¨ä¸è§£å¤ç”¨ï¼Œæ•°æ®ä»¥<strong>å­—èŠ‚æµ</strong>çš„å½¢å¼ä¼ è¾“ã€‚</p><p><code>UDP</code>:   UDPæä¾›çš„æœåŠ¡æ˜¯ä¸å¯é çš„ï¼Œä¸ä¿åºçš„ï¼Œä¸é¢å‘è¿æ¥çš„ï¼Œæ•°æ®ä»¥<strong>æ•°æ®æŠ¥</strong>çš„å½¢å¼ä¼ è¾“ã€‚</p><p>è“å›¾å·²ç»ç”»å°±ï¼Œæˆ‘ä»¬æ¥ç”¨ç¬”å¢¨ç­‘èµ·ä¼ è¾“å±‚çš„ä¸‡ä¸ˆé«˜æ¥¼â€”â€”</p><h2 id="1-2-å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨"><a href="#1-2-å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨" class="headerlink" title="1.2 å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨"></a>1.2 å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨</h2><p>æˆ‘ä»¬åœ¨PCä¸Šå¯ä»¥åŒæ—¶è¿è¡ŒQQ,ç½‘æ˜“äº‘.å®ƒä»¬æ˜¯ä»å±äºä¸åŒçš„è¿›ç¨‹ï¼Œæ‰€ä»¥å½“ä¼ è¾“å±‚å‘ä¸Šå±‚ä¼ è¾“ä¿¡æ¯æ—¶ï¼Œéœ€è¦æ ‡è¯†ç»™å“ªä¸€ä¸ªè¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä½¿ç”¨<strong>Socketæ¥æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹</strong>ï¼Œé‚£å‘ä¸Šä¼ è¾“çš„å†…å®¹ï¼Œé™¤äº†Socketï¼Œæ˜¾ç„¶è¿˜éœ€è¦æœ‰æŠ¥æ–‡ã€‚<strong>æŠ¥æ–‡ä¸­åŒ…å«ä¼ è¾“å±‚çš„é¦–éƒ¨å­—æ®µå’ŒMSG</strong>ã€‚è¿™é‡Œçš„æè¿°å…¶å®å°±æ˜¯è§£å¤ç”¨çš„è¿‡ç¨‹ï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰å·²ç»æ¥è§¦è¿‡ã€‚ä¸‹é¢æˆ‘ä»¬æ›´å…·ä½“åœ°æè¿°ä¼ è¾“å±‚çš„å¤ç”¨ä¸è§£å¤ç”¨ã€‚</p><ul><li><code>å¤ç”¨ï¼š</code>åœ¨æºä¸»æœºä»ä¸åŒçš„å¥—æ¥å­—ä¸­æ”¶é›†æ•°æ®å—ï¼Œå¹¶<strong>ä¸ºæ¯ä¸ªæ•°æ®å—å°è£…é¦–éƒ¨ä¿¡æ¯</strong>ï¼Œç”ŸæˆæŠ¥æ–‡æ®µï¼Œæœ€ç»ˆå°†æŠ¥æ–‡æ®µäº¤ä»˜äºç½‘ç»œå±‚ã€‚</li><li><code>è§£å¤ç”¨ï¼š</code>å°†ä¼ è¾“å±‚æŠ¥æ–‡æ®µä¸­çš„æ•°æ®äº¤ä»˜ç»™åº”ç”¨è¿›ç¨‹çš„è¿‡ç¨‹</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ è¾“å±‚çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨å®ç°çš„å°±æ˜¯<code>å°†ä¸»æœºåˆ°ä¸»æœºçš„äº¤ä»˜æœåŠ¡å»¶ä¼¸åˆ°åº”ç”¨ç¨‹åºåˆ°åº”ç”¨ç¨‹åºä¹‹é—´</code>ï¼Œå®ƒå…³æ³¨çš„é—®é¢˜æ— éæ˜¯<strong>å°†æŠ¥æ–‡ä¼ ç»™è°ï¼ŒæŠ¥æ–‡ä¸­éƒ½åŒ…æ‹¬ä»€ä¹ˆ</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262101368.png" alt="image-20210707210324385"></p><p>å¯ä»¥çœ‹å‡ºï¼Œå¤ç”¨ä¸è§£å¤ç”¨çš„æ ¸å¿ƒæ˜¯é€šè¿‡å¥—æ¥å­—æ¥å®Œæˆçš„ã€‚è€Œé€šè¿‡ä¸Šä¸€ç« èŠ‚çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬çŸ¥é“TCPå’ŒUDPçš„å¥—æ¥å­—æ‰€å¼•ç”¨çš„ä¿¡æ¯æ˜¯ä¸ä¸€æ ·çš„ã€‚æˆ‘ä»¬åˆ†æƒ…å†µæ¥çœ‹â€”â€”</p><h3 id="æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨"><a href="#æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨" class="headerlink" title="æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨"></a>æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨</h3><p>æˆ‘ä»¬é€šè¿‡å›¾è§£æ¥è§£æUDPå¤šè·¯å¤ç”¨çš„è¿‡ç¨‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262101248.png" alt="image-20210707210337051"></p><p><code>é¥®</code>ï¼šä¸»æœºAä¸­çš„ä¼ è¾“å±‚åˆ›å»ºä¸€ä¸ªä¼ è¾“å±‚æŠ¥æ–‡ï¼Œ<strong>æŠ¥æ–‡åŒ…å«åº”ç”¨ç¨‹åºæ•°æ®ï¼Œæºç«¯å£å·19157ï¼Œç›®çš„ç«¯å£å·46428å’Œå…¶ä»–ä¸¤ä¸ªå€¼</strong>ã€‚æ¥ç€ï¼Œä¼ è¾“å±‚å°†è¯¥æŠ¥æ–‡æ®µä¼ è¾“ç»™<strong>ç½‘ç»œå±‚</strong>ï¼Œç½‘ç»œå±‚å†å°†æŠ¥æ–‡æ®µå°è£…åˆ°ä¸€ä¸ª<strong>IPæ•°æ®æŠ¥</strong>ä¸­ï¼Œå¹¶é€šè¿‡ç½‘ç»œé“¾è·¯äº¤ä»˜ç»™æ¥æ”¶ä¸»æœºã€‚</p><p><code>å•„</code>ï¼šæ¥æ”¶ä¸»æœºä¼ è¾“å±‚æ£€æŸ¥è¯¥æŠ¥æ–‡æ®µä¸­çš„<strong>ç›®çš„ç«¯å£å·46428</strong>ï¼Œå¹¶å°†è¯¥æŠ¥æ–‡æ®µäº¤ä»˜ç»™ç«¯å£å·46428æ‰€<strong>æ ‡è¯†çš„å¥—æ¥å­—</strong>ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ç‚¹å¯èƒ½ä¼šå¼•èµ·<strong>å›°æƒ‘</strong>çš„åœ°æ–¹ï¼šsocketæ˜¯å¦‚ä½•å‚ä¸è¿™ä¸ªè¿‡ç¨‹çš„ã€‚é¦–å…ˆæ˜ç¡®çš„æ˜¯ï¼Œ<strong>socketæ˜¯ä¸è¢«åŒ…å«åœ¨æŠ¥æ–‡æ®µä¸­çš„</strong>ã€‚UDPçš„SocketåŒ…å«ç›®çš„IPï¼Œç›®çš„ç«¯å£å·ï¼Œå®ƒä»…ç”¨äºå¤„ç†æºç«¯å£æˆ–è€…ç›®æ ‡ç«¯å£çš„<strong>è¯†åˆ«</strong>ï¼Œå³<strong>å±‚é—´æ¥å£</strong>ã€‚ä½†æŠ¥æ–‡æ˜¯å®é™…å‚ä¸é€šä¿¡è¿‡ç¨‹çš„ã€‚è¿™é‡Œçš„socketå°±åƒæ˜¯ä¸€ä¸ª<strong>å¼€é—¨çš„é’¥åŒ™</strong>ã€‚</p><h3 id="é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨"><a href="#é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨" class="headerlink" title="é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨"></a>é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸è§£å¤ç”¨</h3><p>åŒæ ·çš„ï¼Œå¼€å±€ä¸€å¼ å›¾â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262101328.png" alt="image-20210707224235450"></p><p>åŒºåˆ«äºUDPï¼ŒTCPçš„socketæ‰€å¼•ç”¨çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªå››å…ƒç»„ï¼Œå³â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262101625.png" alt="image-20210707224252958"></p><p>é¢ï¼ŒPIDå°±ä¸ç”¨ç®¡äº†ï¼Œå½“ä¸€ä¸ªæŠ¥æ–‡æ®µè¢«äº¤ä»˜ç»™åº”ç”¨è¿›ç¨‹æ—¶ï¼Œå®ƒéœ€è¦ä½¿ç”¨å››å…ƒç»„çš„socketæ¥åˆ¤åˆ«æŠ¥æ–‡æ®µåº”è¯¥è¢«äº¤ä»˜ç»™å…·ä½“å“ªä¸€ä¸ªåº”ç”¨è¿›ç¨‹ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦æ±‚åœ¨ä¼ è¾“å±‚ä¸Šåªå®ç°<strong>å¿…è¦çš„æœ€ç®€å•åè®®</strong>ï¼Œé‚£UDPå®Œæˆç¬¦åˆè¿™æ ·çš„è¦æ±‚ã€‚UDPçš„å…¨ç§°æ˜¯<strong>ç”¨æˆ·æ•°æ®æŠ¥åè®®</strong>ã€‚å®ƒä»…åœ¨ç½‘ç»œå±‚çš„åŸºç¡€ä¸Šæä¾›<strong>å¿…è¦çš„å¤ç”¨ï¼Œè§£å¤ç”¨ï¼Œä»¥åŠç®€å•çš„æ ¡éªŒå’Œ</strong>ã€‚è¿™ä½¿å¾—å®ƒçš„åŠŸèƒ½åŸºæœ¬ä¸Šå’Œç½‘ç»œå±‚ä¸€è‡´ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œç½‘ç»œå±‚æä¾›çš„æœåŠ¡æ˜¯ä¸å¯é çš„ï¼Œæ‰€ä»¥ä½¿ç”¨UDPçš„ä¼ è¾“å±‚æä¾›çš„æœåŠ¡åŒæ ·ä¸å¯é ã€‚è¿™æ„å‘³ç€å®ƒä¸éœ€è¦æ¡æ‰‹ï¼Œå³ä¸é¢å‘è¿æ¥ã€‚æ•°æ®æœ‰å¯èƒ½å‘ç”Ÿä¹±åºï¼Œé‡å¤ã€‚è€Œå‡è®¾å‘ç”Ÿäº†è¿™ç§é”™è¯¯ï¼Œå®¢æˆ·ç«¯å¦‚ä½•å¤„ç†å‘¢ï¼Ÿå®ƒä¼šç›´æ¥<strong>ä¸¢å¼ƒ</strong>ã€‚</p><p>è¿™ç§ç®€æ´çš„è®¾è®¡ä¼šæœ‰å®ƒçš„ç”¨æ­¦ä¹‹åœ°å—ï¼Ÿå½“ç„¶ï¼Œ<strong>ç®€æ´ä¹Ÿæ˜¯ä¸€ç§ä¼˜é›…</strong>ï¼Œå®ƒç®€å•æ‰€ä»¥å¤´éƒ¨ä¿¡æ¯å°‘ï¼Œä¼ è¾“å¿«ï¼Œå®ƒä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œä¹Ÿè‡ªç„¶æ²¡å¿…è¦ç»´æŠ¤è¿æ¥çš„çŠ¶æ€ã€‚ç”šè‡³ä¸€äº›åº”ç”¨æ˜¯åœ¨UDPçš„åè®®ä¸Šæ„å»ºçš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102628.png" alt="image-20210707224304322"></p><p>é‚£è¿™æ˜¯å¦æ„å‘³ç€åŸºäºUDPçš„åº”ç”¨æ˜¯ä¸å¯é çš„å‘¢ï¼Ÿä¸å®Œå…¨æ˜¯ï¼Œ<strong>åœ¨åº”ç”¨ç¨‹åºåšå¯é ä¼ è¾“çš„å¤„ç†</strong>æ˜¯ä¸€ç§å¯é€‰çš„æ–¹å¼ã€‚</p><p>æˆ‘ä»¬å†æ¥æ‹¨äº‘è§æ—¥åœ°çœ‹çœ‹UDPçš„æŠ¥æ–‡ç»“æ„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102234.png" alt="image-20210707224316644"></p><p>å€¼å¾—ä¸€æçš„æ˜¯UDPä»ç„¶æä¾›äº†å¿…è¦çš„ç®€å•æ£€é”™æœºåˆ¶ï¼Œå³<strong>æ ¡éªŒå’Œ</strong>ï¼Œæ¥çœ‹æ ¡éªŒå’Œçš„åŸç†â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102683.png" alt="image-20210707224330412"></p><p>å³æˆ‘ä»¬åœ¨æºç«¯å¾—åˆ°æµ‹è¯•çš„å’Œï¼Œå¦‚æœæœ‰è¿›ä½ï¼Œåˆ™å†å›å·å¾—åˆ°å’Œã€‚æ•°æ®æŠ¥ä¼ è¾“åˆ°ç›®æ ‡ç«¯ä»¥åï¼Œç›®æ ‡ç«¯å°†<strong>æ ¡éªŒå’Œçš„åç ä¸æºç«¯å¾—åˆ°çš„æ ¡éªŒå’Œç›¸åŠ </strong>ï¼Œå¦‚æœç›¸åŠ ä¸ºå…¨1ï¼Œåˆ™æ ¡éªŒé€šè¿‡ï¼Œåä¹‹ä¸é€šè¿‡ã€‚</p><h2 id="1-4-é‡ç‚¹ï¼šå¯é æ•°æ®ä¼ è¾“åŸç†"><a href="#1-4-é‡ç‚¹ï¼šå¯é æ•°æ®ä¼ è¾“åŸç†" class="headerlink" title="1.4 é‡ç‚¹ï¼šå¯é æ•°æ®ä¼ è¾“åŸç†"></a>1.4 é‡ç‚¹ï¼šå¯é æ•°æ®ä¼ è¾“åŸç†</h2><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>å¯é æ•°æ®ä¼ è¾“æ˜¯ä¸€ä¸ª<strong>ä¸€èˆ¬æ€§çš„é—®é¢˜</strong>ï¼Œå®ƒä¸ä»…åœ¨ä¼ è¾“å±‚ä½¿ç”¨è¿™ä¸ªæœºåˆ¶ï¼Œåœ¨ç½‘ç»œå±‚å’Œåº”ç”¨å±‚ä¹Ÿå¯ä»¥å®ç°ã€‚è€Œä¸‹ä¸€ä¸ªå°èŠ‚ä¸­æˆ‘ä»¬å°†ä»¥æœ€é€šç”¨çš„ä¼ è¾“å±‚ä¸ºä¾‹ä»‹ç»å¯é æ•°æ®ä¼ è¾“åè®®RDTã€‚</p><p>åœ¨ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨è¿™æ ·çš„æ€ç»´ï¼šå³<code>é¦–å…ˆå°†å…·ä½“é—®é¢˜è½¬åŒ–ä¸ºæŠ½è±¡çš„æ•°å­¦é—®é¢˜ï¼Œå†ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å°†æ•°å­¦é—®é¢˜å®ç°</code>ï¼Œåœ¨å­¦ä¹ rdtæ—¶ï¼Œè¿™ç§æ€è·¯åŒæ ·é€‚ç”¨ã€‚</p><p>é¦–å…ˆæ¥çœ‹å¯é æ•°æ®ä¼ è¾“é¢ä¸´çš„åœºæ™¯ï¼šå¯¹äºåº”ç”¨å±‚æ¥è¯´ï¼Œä¼ è¾“å±‚é€šè¿‡å¯é æ•°æ®ä¼ è¾“çš„æœºåˆ¶ï¼Œå¹¶ä½¿ç”¨<strong>å¯é çš„ä¿¡é“</strong>æ¥å‘åº”ç”¨å±‚æä¾›æœåŠ¡â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102012.png" alt="image-20210707224342304"></p><p><code>é‚£è¿™ä¸ªå¯é çš„æœåŠ¡æ˜¯å¦‚ä½•å®ç°çš„å‘¢</code>ï¼Ÿæ˜¾ç„¶æ˜¯é€šè¿‡è°ƒç”¨ä¸‹å±‚æœåŠ¡ã€‚ä»è€Œå¯¹æœ¬å±‚æœåŠ¡åšåŠ å¼ºæ¥å®ç°çš„ï¼Œæˆ‘ä»¬å°†è¿™ä¸€è¿‡ç¨‹<strong>æŠ½è±¡æˆåŸè¯­å®ç°</strong>ï¼Œæˆ‘ä»¬å°†è¿™äº›åŸè¯­å…·ä½“æè¿°ï¼Œä»–ä»¬å‘æŒ¥ç€è¿™æ ·çš„åŠŸèƒ½â€”â€”</p><ul><li><code>rdt_send:</code>è¢«ä¸Šå±‚è°ƒç”¨ï¼Œå°†æ•°æ®äº¤ä»˜ç»™ä¸‹å±‚çš„å‘é€æ–¹å®ä½“ã€‚</li><li><code>udt_send:</code>è¢«rdtè°ƒç”¨ï¼Œå°†åˆ†ç»„é€šè¿‡ä¸å¯é çš„ä¿¡é“å‘é€ç»™æ¥æ”¶æ–¹ã€‚</li><li><code>rdt_rcv:</code>åˆ†ç»„åˆ°è¾¾æ¥æ”¶æ–¹æ—¶è¢«è°ƒç”¨ã€‚</li><li><code>deliver_data:</code>è¢«rdtè°ƒç”¨ï¼Œå°†æ•°æ®äº¤ä»˜ç»™ä¸Šå±‚ã€‚</li></ul><p>æˆ‘ä»¬éœ€è¦é€šè¿‡rdtæ¥å®ç°<strong>å‘é€æ–¹å’Œæ¥æ”¶æ–¹åŠ¨ä½œçš„æŠ½è±¡</strong>ï¼Œä½†è¿™ç§æŠ½è±¡æ˜¯åŸºäºä¸å¯é çš„ä¿¡é“ï¼Œå®ƒå¯èƒ½ä¼šå‘ç”Ÿ<strong>ä¹±åºï¼Œé‡å¤ï¼Œç¯¡æ”¹</strong>ç­‰é—®é¢˜ï¼Œç›´æ¥ç»™å‡ºè§£å†³æ–¹æ¡ˆç€å®æœ‰ç‚¹éš¾ä¸ºäººã€‚æ‰€ä»¥è¿™é‡Œå¼•å…¥äº†ä¸€ç§å¤„ç†å¤æ‚é—®é¢˜çš„æ€è·¯ï¼Œå³<strong>æ¸è¿›å¼è§£å†³</strong>ã€‚</p><p><code>å…·ä½“çš„è¯´ï¼Œæˆ‘ä»¬ä¸€å±‚å±‚åœ°å»æ‰é‚£äº›ç¾å¥½çš„å‡è®¾ï¼Œç„¶ååœ¨ä¸€ä¸ªå¯è¡Œæ–¹æ¡ˆçš„åŸºç¡€ä¸Šé€æ¸å®Œå–„</code>ã€‚æˆ‘ä»¬çš„ä»»åŠ¡ä»…ä»…æ˜¯å®ç°ä¸€ä¸ªèƒ½å¤Ÿå®Œæˆå¿…è¦åŠŸèƒ½çš„rdtåè®®ï¼Œæ‰€ä»¥åŒå‘ä¼ è¾“å¯ä»¥ç®€åŒ–ä¸ºå•å‘ä¼ è¾“ï¼Œæ­¤å¤–ï¼Œç»™å‡ºæœ‰åŠ©äºè§£å†³é—®é¢˜çš„é€šç”¨æ¨¡å‹ä¹ŸåŠ¿åœ¨å¿…è¡Œã€‚ä¹Ÿå°±æ˜¯æœ‰é™çŠ¶æ€æœºFSMï¼Œåœ¨å­¦ä¹ æ•°å­—ç³»ç»Ÿè®¾è®¡æ—¶ï¼Œæ¥è§¦è¿‡ä½¿ç”¨<strong>FSMæè¿°çš„ç©ºè°ƒçŠ¶æ€æœº</strong>ã€‚ä¸æƒ³é™¤äº†è€ƒè¯•ï¼Œå±…ç„¶è¿˜èƒ½æœ‰ç¼˜å†è§ã€‚åœ¨è¯¾å ‚ç»ˆäºå­¦åˆ°æœ‰ç”¨çš„çŸ¥è¯†äº†ã€‚ã€‚ã€‚</p><p>FSMæ˜¯è¿™æ ·è®¾è®¡çš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102979.png" alt="image-20210707224353943"></p><p>è‡³æ­¤ï¼Œå‰ç½®çŸ¥è¯†å°±å®Œç»“äº†ï¼Œæ•…äº‹çš„å¤§å¹•å°±æ­¤æ‹‰å¼€â€”â€”</p><h3 id="rdt1-0"><a href="#rdt1-0" class="headerlink" title="rdt1.0"></a>rdt1.0</h3><p>è¿™é‡Œ<code>å‡è®¾ä¿¡é“å®Œå…¨å¯é </code>ï¼Œå®ƒæ²¡æœ‰æ¯”ç‰¹å‡ºé”™ï¼Œç”šè‡³ä¸ä¼šåˆ†ç»„ä¸¢å¤±ï¼Œæ­¤æ—¶çš„rdtåè®®,æ•æˆ‘è¯´å¥ï¼šå·¥å…·äºº~ã€‚</p><p>ç”¨çŠ¶æ€æœºæ¥æè¿°ä¸€ä¸‹æ­¤æ—¶çš„å‘é€æ–¹ä¸æ¥æ”¶æ–¹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102888.png" alt="image-20210707224406899"></p><p>è¿™ä¸ªæ˜¾ç„¶è¿˜æ²¡æœ‰å¤æ‚åº¦éœ€è¦è¯¦ç»†æè¿°çš„åœ°æ­¥ï¼Œnext~</p><h3 id="rdt2-0"><a href="#rdt2-0" class="headerlink" title="rdt2.0"></a>rdt2.0</h3><p>åœ¨2.0ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å°±è¦æŠ›å¼ƒæ‰ä¸€äº›å¹»æƒ³ï¼Œè¿™æ—¶å€™çš„ä¿¡é“ä¸é‚£ä¹ˆå¯é ï¼Œå®ƒå¯èƒ½ä¼šå‘ç”Ÿ<code>æ¯”ç‰¹çš„é”™è¯¯</code>ã€‚ä¹‹å‰åœ¨èŠUDPæ—¶è°ˆåŠUDPæŠ¥æ–‡ç»“æ„ä¸­ä½¿ç”¨æ ¡éªŒå’Œæ¥åšå·®é”™æ£€æµ‹ï¼Œå½“ç„¶TCPä¹Ÿæœ‰è¿™ä¸ªæœºåˆ¶ã€‚æ£€æµ‹å‡ºæ¥åï¼Œæ€ä¹ˆæ›´æ­£å‘¢ï¼Ÿè‡ªç„¶æ˜¯é‡å‘ï¼Œé‚£<code>å¦‚ä½•æ ‡è¯†å‡ºé”™çš„çŠ¶æ€</code>å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦å¼•å…¥<code>æ ‡è®°é‡</code>ã€‚å‡å¦‚æ¥å—æ–¹æ£€æµ‹åˆ°æ¯”ç‰¹å‡ºé”™ï¼Œå°±å‘é€æ˜¾ç¤ºçš„å‘é€é”™è¯¯æ ‡å¿—ï¼Œä¹Ÿå°±æ˜¯<code>NAK</code>ï¼Œä¿—ç§°ï¼šåå‘è°¢è°¢ï¼›è€Œå½“æ£€æµ‹åå‘é€æ— è¯¯ï¼Œå°±å‘é€æ˜¾ç¤ºçš„å‘é€æ­£ç¡®æ ‡å¿—ï¼Œè¿™å›æ˜¯æ­£å‘çš„è°¢è°¢ï¼š<code>ACK</code>ã€‚</p><p>åŒæ ·çš„ï¼Œå‘é‡æœºæè¿°â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262102586.png" alt="image-20210707224420197"></p><p>è¿™æ—¶ï¼ŒçŠ¶æ€æœºå·²ç»æ²¡é‚£ä¹ˆå‹å¥½äº†ï¼Œæˆ‘ä»¬ç®€è¦æè¿°ä¸€ä¸‹â€”â€”</p><ul><li><code>å‘é€æ–¹ï¼š</code>å½“rdtæ¥æ”¶åˆ°åº”ç”¨å±‚çš„æ•°æ®åï¼Œå°†<code>æ•°æ®ä¸æ ¡éªŒå’Œç»„æˆä¼ è¾“æŠ¥æ–‡</code>é€šè¿‡ä¸å¯é çš„ä¿¡é“å‘é€ç»™æ¥æ”¶æ–¹ï¼Œç„¶åå‘é€æ–¹ç­‰å¾…æ¥æ”¶æ–¹çš„å›åº”ã€‚å½“ç­‰å¾…åˆ°çš„æ˜¯ACKæ—¶ï¼Œç»§ç»­ç­‰å¾…ä¸Šå±‚è°ƒç”¨ã€‚</li><li><code>æ¥æ”¶æ–¹ï¼š</code>æ¥æ”¶æ–¹æ¥æ”¶æ¥è‡ªä¸å¯é ä¿¡é“çš„æ•°æ®ï¼Œç„¶å<code>åšæ ¡éªŒ</code>ï¼Œå½“æ ¡éªŒå‡ºé”™æ—¶å‘é€NAK,æ ¡éªŒæ­£ç¡®æ—¶å‘é€ACKã€‚</li></ul><h3 id="rdt2-1"><a href="#rdt2-1" class="headerlink" title="rdt2.1"></a>rdt2.1</h3><p>å’¦ï¼Œæ€ä¹ˆåˆå‡ºç°äº†2.1ï¼Œè‡ªç„¶æ˜¯å› ä¸º2.0å®åœ¨ä¸å ªå¤§ç”¨ã€‚2.0ç‰ˆæœ¬çš„ç¡®ç›¸æ¯”1.0ç‰ˆæœ¬è¿ˆå‡ºäº†ä¸€å¤§æ­¥ï¼Œä½†å®ƒæœ¬èº«å­˜åœ¨è‡´å‘½çš„ç¼ºé™·ï¼Œä¹Ÿå°±æ˜¯<strong>ACK,NAKæœ¬èº«ä¹Ÿæœ‰å¯èƒ½å‘é€é”™è¯¯</strong>ã€‚rdtçš„æœºåˆ¶åº”è¯¥ä¹Ÿå¿…é¡»æ˜¯å¥å£®çš„ï¼Œæ‰€ä»¥å½“æ¥æ”¶åˆ°ä¸å¯è¯†åˆ«çš„ä¿¡æ¯æ—¶<strong>æœ‰å¿…è¦é‡å‘æ•°æ®åŒ…</strong>ã€‚æ‰€ä»¥å¯¹æ•°æ®åŒ…çš„æ ‡è¯†å°±è¿™ä¹ˆé¡ºæ°´æ¨èˆŸçš„å‘ç”Ÿäº†.å³<strong>å¯¹åˆ†ç»„åŠ åºå·</strong>ã€‚ä½†è¿™é‡Œåªä½¿ç”¨1ä½ï¼Œå³2ç§å¯èƒ½ç»“æœæ ‡è¯†æ­£åœ¨å¤„ç†çš„åˆ†ç»„ã€‚è¿™æ˜¯å› ä¸ºç›®å‰ä»å¤„äº<strong>STOP AND WAITé˜¶æ®µ</strong>ï¼Œä¸€æ¬¡å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨0å’Œ1æ¥æ ‡è¯†è¦å¤„ç†çš„æ•°æ®åŒ…å°±è¡Œå•¦ã€‚ä½†å¦‚ä½•å¤„ç†é‡å¤å‘¢ï¼Ÿ<strong>ä¸¢å¼ƒ</strong>å‘é€æ—¶é—´è¾ƒæ—©é‚£ä¸ªçš„æ•°æ®åŒ…ã€‚</p><h4 id="æ¥æ”¶æ–¹å¤„ç†å‡ºé”™çš„ACK-NAK"><a href="#æ¥æ”¶æ–¹å¤„ç†å‡ºé”™çš„ACK-NAK" class="headerlink" title="æ¥æ”¶æ–¹å¤„ç†å‡ºé”™çš„ACK/NAK"></a>æ¥æ”¶æ–¹å¤„ç†å‡ºé”™çš„ACK/NAK</h4><p>è€è§„çŸ©â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262103260.png" alt="image-20210707224431777"></p><p>è¿™æ—¶æ¥æ”¶æ–¹åœ¨2.0ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå¢åŠ äº†å¯¹åˆ†ç»„åºå·çš„è¯†åˆ«ï¼Œå†æ¥çœ‹å‘é€æ–¹çš„å¤„ç†â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262103560.png" alt="image-20210707224444037"></p><p>çœ‹ä¼¼å¾ˆå¤æ‚ï¼Œä½†å®åˆ™åªæ˜¯ç©·ä¸¾äº†å¯¹äºä¸åŒåˆ†ç»„çš„ç±»ä¼¼å¤„ç†ï¼Œæ¯•ç«Ÿåªéœ€è¦è€ƒè™‘ä¸¤ä¸ªåˆ†ç»„ï¼Œå¯ä»¥ä»»æ€§åœ°ç©·ä¸¾ã€‚æ¥çœ‹ä¸‹å…·ä½“çš„åœºæ™¯â€”â€”</p><p><img src="http://qnuez6z2b.hn-bkt.clouddn.com/typora/image-20210223150554157.png" alt="image-20210223150554157"></p><h3 id="rdt2-2"><a href="#rdt2-2" class="headerlink" title="rdt2.2"></a>rdt2.2</h3><p>2.2ç‰ˆæœ¬æœ¬è´¨ä¸Šå’Œ2.1ç‰ˆæœ¬å¹¶æ— äºŒè‡´ï¼Œä½†å‡ºäºç®€æ´çš„è€ƒè™‘ï¼Œåªä½¿ç”¨ACKï¼Œè€Œä¸ç”¨NAKã€‚é‚£å…·ä½“æ€ä¹ˆæ“ä½œçš„å‘¢ï¼Ÿ</p><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯â€”â€”</p><blockquote><p>å‘é€æ–¹å‘é€<strong>æ•°æ®åŒ…1</strong>ï¼Œæ¥æ”¶æ–¹æ£€æµ‹å‡ºé”™äº†ï¼Œæ‰€ä»¥å‘é€<strong>ACK0</strong>ç»™å‘é€æ–¹ã€‚å‘é€æ–¹é»˜å¿µä¸€å¥ä½ ä¸«çš„ï¼Œç„¶åé‡æ–°å‘é€æ•°æ®åŒ…1.åŒæ–¹ç»§ç»­å’Œè°åœ°ä¼ é€’ç€æ•°æ®åŒ…ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262103497.png" alt="image-20210707224454789"></p><p>ä¸€çœ‹å°±ä¼šçš„å›¾è§£â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262103298.png" alt="image-20210707224504993"></p><p>è¿™é‡Œä¸å†ç»™å‡ºçŠ¶æ€æœºæè¿°ï¼Œå®ƒçš„ç¡®é€‚åˆè½¬æ¢ä¸ºç¼–ç¨‹è¯­è¨€ã€‚ä½†ä¸äººäº¤äº’è¿˜æ˜¯ä¸Šå›¾æ›´å‹å¥½äº›ã€‚</p><h3 id="rdt3-0"><a href="#rdt3-0" class="headerlink" title="rdt3.0"></a>rdt3.0</h3><p>è§£å†³äº†ä¹±åºï¼Œæ¯”ç‰¹å‡ºé”™ã€‚ä»æ—§è¿˜æœ‰<strong>åˆ†ç»„ä¸¢å¤±</strong>çš„é—®é¢˜ï¼Œå¦‚æœæŒ‰ç…§rdt2.2æœºåˆ¶ï¼Œåˆ†ç»„ä¸¢å¤±åå‘é€æ–¹æ¥æ”¶æ–¹éƒ½é¸¦é›€æ— å£°ï¼Œé™·å…¥äº†<strong>æ­»é”ï¼Œæµªè´¹CPUèµ„æº</strong>ã€‚æ‰€ä»¥éœ€è¦åŠ å…¥<strong>è¶…æ—¶é‡ä¼ æœºåˆ¶</strong>ã€‚</p><p>å³å½“åˆ†ç»„å‘é€å‡ºå»åï¼Œè®¡æ—¶å™¨å¼€å§‹å€’è®¡æ—¶ï¼Œå¦‚æœè®¡æ•°åˆ°0è¿˜æ²¡æœ‰æ”¶åˆ°å“åº”ï¼Œé‚£å°±é‡ä¼ ã€‚æœºåˆ¶çš„æ ¸å¿ƒåœ¨äº<strong>è®¡æ—¶çš„ç¡®å®š</strong>ï¼Œ<strong>ç½‘ç»œçŠ¶æ€æ˜¯å¾ˆéš¾é¢„æµ‹</strong>çš„ï¼Œå®ƒçš„æ‹¥å µçŠ¶å†µå¯ä»¥ç±»ä¼¼äºé«˜æ–¯åˆ†å¸ƒï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ•°å­¦ä¸­æ¦‚ç‡è®ºçš„çŸ¥è¯†å°½å¯èƒ½ç¡®å®šæ—¶é—´ã€‚å½“ç„¶ï¼Œä¸€ä¸ªç›¸å¯¹å‡†ç¡®çš„è®¡æ—¶å™¨è¿˜éœ€è¦<strong>ç›¸å½“é•¿çš„è·¯è¦èµ°</strong>ã€‚</p><p>è¯šç„¶ï¼Œå‡¡äº‹è®²ç©¶å–„å§‹å¦‚ç»ˆï¼Œæ­¤å¤„åº”æœ‰çŠ¶æ€æœºâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262103317.png" alt="image-20210707224518042"></p><ol><li>é¦–å…ˆå‘é€æ–¹ç­‰å¾…åº”ç”¨å±‚è°ƒç”¨ï¼Œä¼ è¾“å±‚ç»„ç»‡å¥½æŠ¥æ–‡ç»“æ„åï¼Œé€šè¿‡ä¸å¯é çš„ä¿¡é“å°†åˆ†ç»„0ä¼ è¾“ç»™æ¥æ”¶æ–¹ï¼Œå¹¶å¯åŠ¨è¶…æ—¶å®šæ—¶å™¨ï¼›</li><li>çŠ¶æ€åˆ‡æ¢åˆ°ç­‰å¾…ACK0çš„å“åº”ï¼Œå¦‚æœè¶…æ—¶æˆ–å‡ºé”™(ACK1)ï¼Œåˆ™é‡ä¼ ï¼Œå¦‚æœæ¥æ”¶åˆ°ACK0ï¼ŒçŠ¶æ€åˆ‡æ¢è‡³ç­‰å¾…åº”ç”¨å±‚è°ƒç”¨1ï¼›</li><li>å·æ‡’ä¸€æ‰‹ï¼ŒåŒä¸Šã€‚</li></ol><hr><p>è‡³æ­¤ï¼Œrdt3.0å·²ç»æ˜¯ç”¨äºä¼ è¾“å•ä¸ªåˆ†ç»„çš„æ— æ‡ˆå¯å‡»çš„åè®®ï¼Œä½†åœ¨ä¿¡é“å¸¦å®½å¤§çš„æƒ…å†µä¸‹ï¼Œrdt3.0çš„æ€§èƒ½éå¸¸æ„Ÿäººã€‚è¿™å°±å¥½æ¯”å…«è½¦é“çš„é«˜é€Ÿå…¬è·¯å…¨ç¨‹åªå‡†è·‘ä¸€è¾†è‡ªè¡Œè½¦ã€‚è¿™æ˜¾ç„¶å¾ˆéš¾ä»¥å¿å—ï¼Œæ‰€ä»¥å¦‚ä½•ä¸€æ¬¡æ€§å‘é€å¤šä¸ªåˆ†ç»„è€Œæ— é¡»ç­‰å¾…ç¡®è®¤æ˜¯å¿…é¡»è¦è§£å†³çš„é—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262103055.png" alt="image-20210707224528848"></p><p>æˆ‘ä»¬å°†è¿™ç§å‘é€å¤šä¸ªåˆ†ç»„å¯ä»¥çœ‹åšæ˜¯å¡«å……åˆ°ä¸€æ¡æµæ°´çº¿ä¸­ã€‚å› æ­¤è§£å†³è¿™ä¸ªé—®é¢˜çš„æœºåˆ¶è¢«ç§°ä¸º<strong>æµæ°´çº¿åè®®</strong>ã€‚æµæ°´çº¿åè®®åœ¨rdt3.0åŸºç¡€ä¸Šå¢åŠ äº†<strong>ä¼ è¾“åˆ†ç»„çš„ç²’åº¦</strong>ã€‚ä½†å®ƒåŒæ—¶å¸¦æ¥çš„é—®é¢˜å¯ä¸€ç‚¹ä¹Ÿä¸å°‘â€”â€”</p><ul><li>åˆ†ç»„çš„åºå·æ˜¾ç„¶åªç”¨0å’Œ1æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»<strong>æ‰©å¤§åˆ†ç»„åºå·çš„èŒƒå›´</strong>ï¼Œæ¥å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªåˆ†ç»„ï¼›</li><li>åˆ†ç»„ä¼ è¾“ä¸æ¥æ”¶çš„é€Ÿç‡ä¸ä¸€è‡´ï¼Œéœ€è¦åœ¨æ¥æ”¶æ–¹å¢åŠ <strong>ç¼“å­˜æœºåˆ¶</strong>ï¼Œæ­¤å¤–ï¼Œå‘é€æ–¹åœ¨å‘é€åˆ†ç»„ä»¥åå¯èƒ½å¤„äºä¸¤ç§çŠ¶æ€ï¼š<code>ç­‰å¾…ç¡®è®¤,ç¡®è®¤å®Œæˆ</code>ã€‚æ‰€ä»¥å‘é€æ–¹çš„åˆ†ç»„éœ€è¦åˆ†åŒºï¼Œå³å‘é€æ–¹ä¹Ÿéœ€è¦ç¼“å­˜æœºåˆ¶ï¼›</li><li>å½“åˆ†ç»„å‡ºç°æŸåï¼Œä¸¢å¤±ï¼Œå»¶è¿Ÿæ—¶å¦‚ä½•å¤„ç†å‘¢ï¼Ÿæ ¹æ®åœºæ™¯æœ‰ä¸¤ç§å¯é€‰çš„æ–¹å¼ï¼š<code>GBN(å›é€€Næ­¥)å’ŒSR(é€‰æ‹©é‡ä¼ )</code>.</li></ul><hr><p>è¿™ä¸¤ç§å¤„ç†å·®é”™çš„æ–¹å¼åˆéƒ½æ˜¯åŸºäº<strong>é€šç”¨çš„æ»‘åŠ¨çª—å£</strong>æ¥å®ç°çš„ï¼Œæ»‘åŠ¨çª—å£æ˜¯åœ¨<strong>ç¼“å†²åŒºçš„åŸºç¡€ä¸Š</strong>è¿ä½œçš„ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£å‘é€ç¼“å†²åŒºåŠæ¥æ”¶ç¼“å†²åŒºâ€”â€”</p><ul><li><code>å‘é€ç¼“å†²åŒºï¼š</code>ç¼“å†²åŒºå³æ˜¯å†…å­˜ä¸­çš„ä¸€å—åŒºåŸŸï¼Œå®ƒæœ‰å¤§å°å±æ€§ï¼Œè¿™é‡Œçš„å‘é€ç¼“å†²åŒºå¤§å°å¯ä»¥ä¸º1ï¼Œå³RDT3.0,å½“å¤§å°&gt;1æ—¶ï¼Œå³ä¸ºæµæ°´çº¿åè®®ã€‚è¿™é‡Œçš„å‘é€ç¼“å†²åŒºç”¨äº<strong>å­˜æ”¾å·²å‘é€æœªç¡®è®¤çš„åˆ†ç»„</strong>ï¼Œä»¥ä¾¿ç”¨äºæ£€é”™é‡å‘æˆ–è¶…æ—¶é‡ä¼ ã€‚</li><li><code>æ¥æ”¶ç¼“å†²åŒºï¼š</code>æ˜¯ä¸ºäº†è§£å†³åˆ†ç»„åœ¨ä¿¡é“ä¸­ä¼ è¾“çš„é€Ÿç‡ä¸æ¥æ”¶æ–¹æ¥æ”¶çš„<strong>é€Ÿç‡ä¸ä¸€è‡´</strong>çš„é—®é¢˜æ‰€å¼•å…¥çš„ã€‚å®ƒçš„å¤§å°ä¸º1æ—¶å³ä¸ºRDT3.0,å½“å‘é€ç¼“å†²åŒºå¤§å°&gt;1æ—¶ï¼Œæ¥æ”¶ç¼“å†²åŒºå¯ä»¥ä¸º1ï¼Œæ­¤æ—¶ä¸ºGBNåè®®ï¼Œå¦‚æœæ¥æ”¶ç¼“å†²åŒº&gt;1,åˆ™ä¸ºSRåè®®ã€‚</li></ul><p>é‚£å¦‚ä½•è¡¨ç¤ºç¼“å†²åŒºåŠ¨æ€ä¼ è¾“çš„è¿‡ç¨‹å‘¢ï¼Ÿè¿™å°±éœ€è¦å¼•å…¥æ»‘åŠ¨çª—å£â€”â€”</p><h3 id="å‘é€çª—å£"><a href="#å‘é€çª—å£" class="headerlink" title="å‘é€çª—å£"></a>å‘é€çª—å£</h3><p>æ»‘åŠ¨çª—å£ç”¨æ¥è¡¨ç¤º<code>å‘é€ç¼“å†²åŒºçš„èŒƒå›´</code>ï¼Œå³å®é™…çš„<code>å·²å‘é€æœªç¡®è®¤çš„åˆ†ç»„ä¸ªæ•°</code>ï¼Œæˆ‘ä»¬é€šè¿‡å›¾è§£æ¥è®¤è¯†è¿™ä¸ªåŠ¨æ€çš„è¿‡ç¨‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104143.png" alt="image-20210707224540604"></p><p>æ­¤æ—¶ï¼Œæ²¡æœ‰åˆ†ç»„å‘é€ï¼Œç¼“å†²åŒºå¤§å°N=5ï¼Œæ»‘åŠ¨çª—å£å‰æ²¿=åæ²¿ï¼Œçª—å£å¤§å°=å‰æ²¿-åæ²¿=0ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104225.png" alt="image-20210707224551296"></p><p>æ¥ç€ï¼Œä¸€ä¸ªåˆ†ç»„è¢«å‘é€ï¼Œå‰æ²¿ç§»åŠ¨ä¸€ä½ï¼Œæ»‘åŠ¨çª—å£å¤§å°=å‰æ²¿-åæ²¿=1.æ­¤æ—¶åˆ†ç»„0å¤„äºå·²å‘é€æœªç¡®è®¤çŠ¶æ€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104480.png" alt="image-20210707224601189"></p><p>æ­¤æ—¶ï¼Œ5ä¸ªåˆ†ç»„éƒ½è¢«å‘é€ï¼Œç¼“å†²åŒºå·²æ»¡ï¼Œæ»‘åŠ¨çª—å£å¤§å°=å‰æ²¿-åæ²¿=5=ç¼“å†²åŒºå¤§å°ã€‚</p><hr><p>è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬æ˜¯å‡è®¾æ²¡æœ‰åˆ†ç»„æ”¶åˆ°ç¡®è®¤ï¼Œç°åœ¨æˆ‘ä»¬æ‰“å¼€æ½˜å¤šæ‹‰é­”ç›’ï¼Œè®¤ä¸ºå·²ç»æœ‰åˆ†ç»„å·²ç»æ”¶åˆ°ç¡®è®¤ï¼Œæƒ…å†µå°±æœ‰æ‰€ä¸åŒäº†â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104491.png" alt="image-20210707224616355"></p><p>è¿™æ—¶ï¼Œ<code>åˆ†ç»„0å¾—åˆ°ç¡®è®¤ï¼Œçª—å£åæ²¿ç§»åŠ¨</code>ï¼Œæ­¤æ—¶å‰æ²¿ä»ç„¶æŒ‡å‘æœ€åä¸€ä¸ªè¿›å…¥ç¼“å†²åŒºçš„å·²å‘é€æœªç¡®è®¤åˆ†ç»„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104096.png" alt="image-20210707224627690"></p><p>ç„¶åï¼Œåˆ†ç»„1ä¹Ÿå¾—åˆ°ç¡®è®¤ï¼Œçª—å£åæ²¿ç§»åŠ¨ã€‚æœ‰ä¸¤ä¸ªåˆ†ç»„5,6è¢«å‘é€ï¼Œè¿›å…¥ç¼“å†²åŒºç­‰å¾…ç¡®è®¤ã€‚çª—å£å‰æ²¿ç§»åŠ¨åˆ°6çš„ä½ç½®ã€‚</p><hr><h3 id="æ¥æ”¶çª—å£"><a href="#æ¥æ”¶çª—å£" class="headerlink" title="æ¥æ”¶çª—å£"></a>æ¥æ”¶çª—å£</h3><p>å‘é€çª—å£å‘Šä¸€æ®µè½ï¼Œæ¥ç±»æ¯”åœ°çœ‹æ¥æ”¶çª—å£ï¼Œæ¥æ”¶çª—å£å¯ä»¥æ§åˆ¶å“ªäº›åˆ†ç»„å¯ä»¥æ¥æ”¶ï¼š</p><ul><li><code>æ”¶åˆ°çš„åˆ†ç»„åºå·è½åœ¨æ¥æ”¶çª—å£å†…å¯ä»¥æ¥å—</code>ï¼›</li><li>è½åœ¨æ¥æ”¶çª—å£å¤–ï¼Œåˆ™ä¸¢å¼ƒã€‚</li></ul><p>æ­¤å¤–ï¼Œæ¥æ”¶çª—å£æ ¹æ®å‡ºé”™çš„æ¦‚ç‡åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œå¯¹åº”ä¸¤ç§åè®®â€”â€”</p><h4 id="GBN"><a href="#GBN" class="headerlink" title="GBN"></a>GBN</h4><p>æ¥æ”¶çª—å£çš„å°ºå¯¸ç­‰äº1ï¼Œå³<code>åªèƒ½é¡ºåºæ¥æ”¶</code>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104832.png" alt="image-20210707224639851"></p><p>æ¥æ”¶çª—å£é¦–å…ˆåœ¨åˆ†ç»„0çš„ä½ç½®ï¼Œæ­¤æ—¶åªæœ‰åˆ†ç»„0çš„ä¼šè¢«æ¥æ”¶ï¼Œå¦‚æœæ¥æ”¶åˆ°çš„æ˜¯åˆ†ç»„1ï¼Œåˆ™ä¸¢å¼ƒã€‚å‡è®¾æ¥æ”¶æ–¹æ¥æ”¶åˆ°åˆ†ç»„n,åˆ™è¡¨ç¤ºå°äºç­‰äºåˆ†ç»„nçš„æ‰€æœ‰åˆ†ç»„éƒ½å·²ç»è¢«æ¥æ”¶ï¼Œå³<strong>ç´¯è®¡å¼ç¡®è®¤</strong>ã€‚</p><h4 id="SR"><a href="#SR" class="headerlink" title="SR"></a>SR</h4><p>æ¥æ”¶çª—å£çš„å°ºå¯¸å¤§äº1ï¼Œå¯ä»¥ä¹±åºæ¥æ”¶ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262104639.png" alt="image-20210707224650324"></p><p>èµ·åˆï¼Œæ¥æ”¶çª—å£ä¸­æœ‰åˆ†ç»„0,1,2,3.æ”¶åˆ°åˆ†ç»„0,1åï¼Œæ¥æ”¶çª—å£å‘å‰æ»‘åŠ¨ã€‚ä½†å¦‚æœåˆ†ç»„æ²¡æœ‰æŒ‰åºåˆ°æ¥ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262106126.png" alt="image-20210707224701886"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“é«˜åºå·çš„åˆ†ç»„åˆ°æ¥å<code>ï¼Œä»æ—§å°†å…¶ç¼“å­˜ï¼Œä½†å¹¶ä¸ç§»åŠ¨æ»‘åŠ¨çª—å£</code>ï¼Œåªæœ‰å½“ä½åºå·çš„åˆ†ç»„åˆ°æ¥åï¼Œçª—å£æ‰ä¼šæ•´ä½“åç§»â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262106075.png" alt="image-20210707224711512"></p><p>æœ€åï¼Œå¯ä»¥æ€»ç»“å‡ºSRåè®®ä¸ºéç´¯ç§¯å¼æ¥æ”¶ã€‚</p><hr><h4 id="æ­£å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨"><a href="#æ­£å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨" class="headerlink" title="æ­£å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨"></a>æ­£å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨</h4><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262106433.png" alt="image-20210707224721902"></p><h4 id="å¼‚å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨"><a href="#å¼‚å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨" class="headerlink" title="å¼‚å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨"></a>å¼‚å¸¸æƒ…å†µä¸‹çš„çª—å£äº’åŠ¨</h4><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107370.png" alt="image-20210707224736296"></p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107565.png" alt="image-20210707224827566"></p><h4 id="ç”¨FSMæè¿°çš„GBN"><a href="#ç”¨FSMæè¿°çš„GBN" class="headerlink" title="ç”¨FSMæè¿°çš„GBN"></a>ç”¨FSMæè¿°çš„GBN</h4><ol><li><p>å‘é€æ–¹</p><p>é¦–å…ˆå£°æ˜è¿™äº›å˜é‡ä»£è¡¨çš„å«ä¹‰ï¼š<code>Nä¸ºçª—å£é•¿åº¦ï¼Œbaseä¸ºçª—å£åæ²¿ï¼Œnextseqnumä¸ºæ»¡è¶³å‘é€æ¡ä»¶ä½†å› ç¼“å†²åŒºå·²æ»¡æ²¡æœ‰å‘é€çš„åˆ†ç»„åºå·</code>ï¼Œ</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107249.png" alt="image-20210707224840765"></p><ol start="2"><li><p>æ¥æ”¶æ–¹</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107610.png" alt="image-20210707224850680"></p></li></ol><h4 id="è¿è¡Œä¸­çš„SR"><a href="#è¿è¡Œä¸­çš„SR" class="headerlink" title="è¿è¡Œä¸­çš„SR"></a>è¿è¡Œä¸­çš„SR</h4><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107238.png" alt="image-20210707224903011"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>GBNé€‚ç”¨äº<code>å‡ºé”™ç‡ä½</code>çš„åœºæ™¯ï¼Œ<code>è€Œé“¾è·¯å®¹é‡å¤§ï¼Œå›é€€ä»£ä»·é«˜</code>çš„åœºæ™¯åˆ™æ˜¯SRæ›´ä¼˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107797.png" alt="image-20210707224915038"></p><h2 id="1-5-é¢å‘è¿æ¥çš„ä¼ è¾“â€”â€”TCP"><a href="#1-5-é¢å‘è¿æ¥çš„ä¼ è¾“â€”â€”TCP" class="headerlink" title="1.5 é¢å‘è¿æ¥çš„ä¼ è¾“â€”â€”TCP"></a>1.5 é¢å‘è¿æ¥çš„ä¼ è¾“â€”â€”TCP</h2><p>åœ¨å¯¹TCPæœ‰å¤§è‡´çš„çº¹è·¯äº†è§£åï¼Œæˆ‘ä»¬è¿›å…¥TCPæ­£å¼çš„æ¢ç´¢ã€‚æœ¬ç€ç»“æ„å†³å®šåŠŸèƒ½çš„ç‰¹ç‚¹ï¼Œä»TCPçš„æ®µç»“æ„èµ·ç¬”ï¼Œæ¸²æŸ“TCPçš„å¯é æ•°æ®ä¼ è¾“ï¼Œè¿›è€Œæµ“å¢¨äºæµé‡æ§åˆ¶æœºåˆ¶ï¼Œæœ€ç»ˆè½ç¬”äºè¿æ¥ç®¡ç†ã€‚</p><p><code>TCPæä¾›çš„æ˜¯ç‚¹åˆ°ç‚¹ï¼Œå¯é çš„ï¼Œç®¡é“åŒ–çš„ï¼ŒæŒ‰åºçš„å­—èŠ‚æµï¼Œæ‹¥æœ‰æµé‡æ§åˆ¶æœºåˆ¶ï¼Œé¢å‘è¿æ¥çš„æœåŠ¡ã€‚</code></p><h3 id="æ®µç»“æ„"><a href="#æ®µç»“æ„" class="headerlink" title="æ®µç»“æ„"></a>æ®µç»“æ„</h3><p>TCPçš„æŠ¥æ–‡æ®µç”±ä¸€ä¸ª<strong>é¦–éƒ¨å­—æ®µå’Œæ•°æ®å­—æ®µ</strong>æ„æˆï¼Œæ•°æ®å­—æ®µå³æ˜¯åº”ç”¨å±‚çš„æ•°æ®ï¼Œé‚£è¿™éƒ¨åˆ†æ•°æ®æ˜¯æºæ•°æ®æ ¹æ®æ€æ ·çš„è§„åˆ™åˆ’åˆ†çš„å‘¢ï¼Ÿè¿™é‡Œå¼•å…¥<strong>æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSS</strong>çš„æ¦‚å¿µã€‚TCPä¼šå°†è¦ä¼ è¾“çš„æ–‡ä»¶åˆ†ä¸ºè‹¥å¹²ä¸ªMSSã€‚<strong>MSSçš„é•¿åº¦</strong>é€šå¸¸ç”±<strong>æœ¬åœ°å‘é€ä¸»æœºå‘é€çš„æœ€å¤§é“¾è·¯å±‚å¸§é•¿åº¦</strong>æ¥è®¾ç½®ã€‚åœ¨ç¡®å®šæ•°æ®éƒ¨åˆ†åï¼ŒTCPä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æ•°æ®é…ä¸Šä¸€ä¸ª<strong>TCPé¦–éƒ¨</strong>ï¼Œä»è€Œå½¢æˆå¤šä¸ªTCPæŠ¥æ–‡æ®µã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107649.png" alt="image-20210707224931500"></p><p>å…·ä½“æ¥çœ‹æ¯ä¸ªå­—æ®µï¼š</p><ul><li><p><code>æºç«¯å£å·ï¼š</code>TCPæä¾›çš„æ˜¯è¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œè€Œæ ‡è¯†è¿›ç¨‹çš„å³æ˜¯ç«¯å£å·ï¼Œæ ‡è¯†æºç«¯å£å·å°±ç›¸å½“äºç»™å‡ºäº†æ•°æ®<strong>å¤ç”¨</strong>çš„è·¯å¾„ã€‚</p></li><li><p><code>ç›®çš„ç«¯å£å·ï¼š</code>åŒæ ·çš„ï¼Œåªæœ‰ç»™å‡ºç›®çš„ç«¯å£å·ï¼Œåœ¨æ¥æ”¶æ–¹æ‰èƒ½å®Œæˆ<strong>è§£å¤ç”¨</strong>çš„å·¥ä½œã€‚</p></li><li><p><code>åºå·ï¼š</code>TCPæŠŠæ•°æ®çœ‹åšä¸€ä¸ª<strong>æ— ç»“æ„ï¼Œæœ‰åºçš„å­—èŠ‚æµ</strong>ã€‚è€Œä¸ºäº†æ¥æ ‡è¯†æ¯ä¸ªæŠ¥æ–‡æ®µ(<code>MSS</code>)çš„é¦–å­—èŠ‚åœ¨æ•´ä¸ªå­—èŠ‚æµä¸­çš„ä½ç½®ï¼Œæˆ–è€…è¯´åç§»é‡ï¼Œå°±å¼•å…¥äº†åºå·çš„æ¦‚å¿µã€‚è¯¥åºå·çš„èŒƒå›´ä¸º<strong>2çš„32æ¬¡æ–¹</strong>ï¼Œå¯è§å†²çªçš„å‡ ç‡æ¯”æˆ‘ä¸­å½©ç¥¨è¿˜ä½~</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262107745.png" alt="image-20210707225012629"></p></li><li><p><code>ç¡®è®¤å·ï¼š</code>åœ¨å¯é æ•°æ®ä¼ è¾“ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ACKæ¥ä½œä¸ºç¡®è®¤å­—æ®µï¼Œä½†ACKåªèƒ½è¡¨ç¤ºæ¥æ”¶æ–¹å¯¹æ¥æ”¶åˆ°æ•°æ®çš„å›åº”ï¼Œè€Œå®é™…çš„ä¼ è¾“æ˜¯å…¨åŒå·¥ï¼Œä¸”é«˜å¹¶å‘çš„ã€‚æ‰€ä»¥æ¥æ”¶æ–¹çš„ç¡®è®¤å·å°†<strong>ç¡®è®¤ä¸ä¸‹ä¸€æ¬¡ä¼ è¾“çš„æ•°æ®ç›¸ç»“åˆ</strong>ä½œä¸ºç¡®è®¤å·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾ç¡®è®¤å·ä¸º2000,å³è¡¨ç¤º<strong>æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·</strong>ï¼Œè¿™é‡Œç»™å‡ºçš„åºå·åŒæ ·ä¹Ÿå…·æœ‰<strong>GBNç´¯è®¡ç¡®è®¤</strong>çš„æ„ä¹‰ã€‚</p><p>æˆ‘ä»¬è¯•ç€ä½¿ç”¨åºå·ä¸ç¡®è®¤å·æ¥æè¿°ç®€åŒ–çš„ä¼ è¾“è¿‡ç¨‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262108234.png" alt="image-20210707225024780"></p><p>å³ä¸»æœºAå‘é€åºå·42åŠå¯¹äºåºå·79çš„ç¡®è®¤ï¼Œä¸»æœºBæ”¶åˆ°åï¼Œå‘é€å¯¹äºåºå·42çš„ç¡®è®¤ï¼Œå³ACK=43ï¼Œä¸”å‘é€ä¸»æœºAæœŸæœ›çš„79ï¼Œå³seq=79.</p></li><li><p><code>æ¥æ”¶çª—å£ï¼š</code>è¯¥å­—æ®µç”¨äº<strong>æµé‡æ§åˆ¶</strong>ï¼Œå³æŒ‡ç¤ºæ¥æ”¶æ–¹æ„¿æ„æ¥å—çš„å­—èŠ‚æ•°é‡ï¼Œåœ¨æŠ“åŒ…çš„æ—¶å€™ä»»ä¸€æ•°æ®å‘é€æºéƒ½ä¼šä½¿ç”¨<strong>Winå­—æ®µ</strong>æ¥å‘Šè¯‰å¦ä¸€æ–¹è‡ªå·±æ¥æ”¶çª—å£çš„å¤§å°ã€‚</p></li><li><p><code>CRCæ ¡éªŒå’Œï¼š</code>åœ¨UDPéƒ¨åˆ†è°ˆåŠè¿‡ï¼Œç”¨äº<strong>æ£€é”™</strong>ã€‚</p></li></ul><p>è€Œä»è¿›ç¨‹é€šä¿¡çš„<code>æµç¨‹æ¡†æ¶</code>æ¥çœ‹ï¼ŒTCPæŠ¥æ–‡æ®µåˆä¼šç»å†æ€æ ·çš„<strong>å¤ç”¨ä¸è§£å¤ç”¨</strong>å‘¢â€”â€”</p><p><img src="../../../old_img/imgs/zyz_img3/image-20210707225039262.png" alt="image-20210707225039262"></p><p>å³å½“è¶…æ—¶å®šæ—¶å™¨è§¦å‘ä»¥åï¼Œå‘é€æ–¹ä¼šä¼ è¾“<strong>è‡³ä»Šæ²¡æœ‰å¾—åˆ°ç¡®è®¤çš„æœ€å°åºå·åˆ†ç»„</strong>ã€‚å³è¿™é‡Œçš„æœºåˆ¶åˆæ˜¯ç±»ä¼¼äº<strong>é€‰æ‹©æ€§é‡å‘SR</strong>ã€‚åœ¨é‡å‘åï¼Œè¶…æ—¶å®šæ—¶å™¨åˆä¼šä¸å½“å‰æ²¡æœ‰å¾—åˆ°ç¡®è®¤çš„æœ€å°åºå·åˆ†ç»„ç›¸å…³è”ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå³ç¼“å†²åŒºä¸ºç©ºï¼Œå³æ‰€æœ‰çš„åˆ†ç»„éƒ½å·²å¾—åˆ°ç¡®è®¤ï¼Œæ­¤æ—¶éœ€è¦é‡å¯å®šæ—¶å™¨ã€‚</p><p>é€šè¿‡ä¸‹å›¾æ¥çœ‹ç®€è¦çš„äº¤äº’ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262108170.png" alt="image-20210707225051029"></p><p>å¦å¤–ï¼Œæˆ‘ä»¬æ¥ç©·ä¸¾å…³äºACKçš„å‡ ç§æƒ…å†µåŠç›¸åº”çš„å¤„ç†æ–¹å¼â€”â€”</p><table><thead><tr><th><strong>æ¥æ”¶æ–¹äº‹ä»¶</strong></th><th><strong>TCPæ¥æ”¶æ–¹åŠ¨ä½œ</strong></th></tr></thead><tbody><tr><td>æ‰€æœŸæœ›åºå·çš„æŠ¥æ–‡æ®µæŒ‰åºåˆ°è¾¾ï¼ŒæœŸæœ›åºå·ä¹‹å‰çš„éƒ½å·²å¾—åˆ°ç¡®è®¤</td><td>å»¶è¿Ÿçš„ACKï¼Œå³å¯¹å¦ä¸€ä¸ªæŒ‰åºæŠ¥æ–‡æ®µæœ€å¤šç­‰å¾…500ms</td></tr><tr><td>æœ‰æœŸæœ›åºå·çš„æŠ¥æ–‡æ®µåˆ°è¾¾ï¼Œå¦ä¸€ä¸ªæŒ‰éœ€æŠ¥æ–‡æ®µç­‰å¾…å‘é€ACK</td><td>ç«‹å³å‘é€å•ä¸ªç´¯ç§¯ACKï¼Œä»¥ç¡®è®¤ä¸¤ä¸ªæŒ‰åºæŠ¥æ–‡æ®µ</td></tr><tr><td>æ¯”æœŸæœ›åºå·å¤§çš„æŠ¥æ–‡æ®µä¹±åºåˆ°è¾¾ï¼Œæ£€æµ‹åˆ°æ•°æ®æµçš„é—´éš”</td><td>ç«‹å³å‘é€é‡å¤ACKï¼ŒæŒ‡æ˜ä¸‹ä¸€ä¸ªæœŸå¾…å­—èŠ‚çš„åºå·</td></tr><tr><td>èƒ½éƒ¨åˆ†æˆ–è€…å®Œå…¨å¡«å……æ¥æ”¶æ•°æ®é—´éš”çš„æŠ¥æ–‡æ®µåˆ°è¾¾</td><td>è‹¥è¯¥æŠ¥æ–‡æ®µèµ·å§‹äºé—´éš”çš„ä½ç«¯ï¼Œåˆ™ç«‹å³å‘é€ACK</td></tr></tbody></table><p>è¿™ä¸ªç®€åŒ–çš„TCPäº¤äº’æ˜¯é»˜è®¤ä¸å­˜åœ¨é‡å¤ç¡®è®¤çš„ï¼Œä½†å®é™…ä¸Šé‡å¤ç¡®è®¤çš„æƒ…å†µæ˜¯æœ‰å¯èƒ½å‡ºç°çš„ï¼ŒTCPé’ˆå¯¹è¿™ç§æƒ…å†µä¹Ÿç»™å‡ºäº†<strong>å¿«é€Ÿé‡ä¼ æœºåˆ¶</strong>ã€‚</p><p>æ”¶åˆ°<strong>é‡å¤ç¡®è®¤</strong>å¾€å¾€æ˜¯å› ä¸º<strong>å®šæ—¶å™¨è®¾ç½®çš„å¤ªå¤§</strong>ï¼Œæ¥æ”¶æ–¹æ²¡æœ‰æ”¶åˆ°æŸä¸ªåˆ†ç»„ï¼Œä½†åœ¨å®šæ—¶å™¨æ—¶é—´å†…ä»ä¼šæ”¶åˆ°ä¹±åºåˆ°è¾¾çš„å…¶ä»–åˆ†ç»„ï¼Œè¿™æ—¶æ¥æ”¶æ–¹å°±ä¼šå‘é€å†—ä½™åˆ†ç»„ï¼Œå½“å‘é€æ–¹æ¥æ”¶åˆ°<strong>ä¸‰ä¸ªå†—ä½™ç¡®è®¤</strong>åï¼Œå°±ä¼šåœ¨å®šæ—¶æœŸé—´<strong>é‡ä¼ æœ€å°åºå·çš„æŠ¥æ–‡æ®µ</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262108914.png" alt="image-20210707225101991"></p><p>å†æ¥çœ‹ä¸‹å¿«é€Ÿé‡ä¼ çš„ä¼ªä»£ç â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262108053.png" alt="image-20210707225112511"></p><p>å³æ¥æ”¶æ–¹æ”¶åˆ°ACKï¼Œåˆ¤æ–­ACKä¸çª—å£åæ²¿çš„å…³ç³»ï¼Œå‡å¦‚<strong>ACKå¤§äºçª—å£åæ²¿ï¼Œåˆ™å°†çª—å£åæ²¿æ»‘åŠ¨</strong>ï¼Œå°†<strong>å®šæ—¶å™¨ä¸æ–°çš„æŠ¥æ–‡æ®µå…³è”</strong>ã€‚å¦åˆ™ï¼Œä¹Ÿå°±æ˜¯ACKé‡å¤çš„æƒ…å†µï¼Œåˆ™è®°å½•ACKé‡å¤çš„ä¸ªæ•°ï¼Œå½“å…¶ç­‰äº3æ—¶ï¼Œè§¦å‘å¿«é€Ÿé‡ä¼ æœºåˆ¶ã€‚</p><h3 id="æµé‡ç®¡ç†"><a href="#æµé‡ç®¡ç†" class="headerlink" title="æµé‡ç®¡ç†"></a>æµé‡ç®¡ç†</h3><p>ä¼ è¾“å±‚åœ¨å°†æ•°æ®è§£å¤ç”¨ä»¥åï¼Œä¸æ˜¯ç›´æ¥äº¤ä»˜ç»™åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œè€Œæ˜¯å°†å…¶æ”¾ç½®åœ¨<strong>æ¥æ”¶ç¼“å†²åŒº</strong>å†…ï¼Œä¸Šå±‚åº”ç”¨å†<strong>ä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®</strong>ã€‚ä½†å½“ä»å‘é€æ–¹å‘é€æ¥çš„æ•°æ®å¤ªå¤šå°±æœ‰å¯èƒ½<strong>æ·¹æ²¡æ¥æ”¶ç¼“å†²åŒº</strong>ï¼Œå¯¼è‡´æŠ¥æ–‡æ®µä¸¢å¤±ï¼Œå› æ­¤ï¼Œçº¦å®šå‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸æ¥æ”¶æ–¹çš„æ¥æ”¶é€Ÿç‡æ˜¯å¿…é¡»çš„ï¼Œè¿™ç§<strong>ä¸ºäº†åŒ¹é…é€Ÿç‡çš„æœºåˆ¶å°±ç§°ä¸ºæµé‡æ§åˆ¶</strong>ã€‚</p><p>æµé‡æ§åˆ¶æœºåˆ¶æ˜¯é€šè¿‡äº’ç›¸å‘ŠçŸ¥ç¼“å†²åŒºå¯ç”¨ç©ºé—´æ¥å®ç°çš„ã€‚é‚£å¦‚ä½•å‘ŠçŸ¥å‘¢ï¼Ÿå³æ˜¯é€šè¿‡æ¥æ”¶æ–¹å‘å‘é€æ–¹å‘é€çš„æŠ¥æ–‡æ®µä¸­çš„<strong>rwndå­—æ®µ</strong>ï¼Œå®ƒè¡¨ç¤ºäº†<strong>æ¥æ”¶ç¼“å†²åŒºä¸­å¯ç”¨çš„ç©ºé—´</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262109134.png" alt="image-20210707225128655"></p><p>æˆ‘ä»¬å°†rwndå†å…·è±¡åŒ–ï¼Œå³å®ƒæ˜¯é€šè¿‡ä»€ä¹ˆæ¥å®ç°çš„å‘¢ï¼Ÿæ¥æ”¶çª—å£ï¼ï¼ï¼ä½†è¿™é‡Œçš„æ¥æ”¶çª—å£å’Œrdtä¸­çš„æ¥æ”¶çª—å£è¿˜æ˜¯æœ‰æ‰€åŒºåˆ«çš„ã€‚ä¸ºäº†é‡åŒ–æ¥æ”¶çª—å£çš„å¤§å°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¼•å…¥ä¸¤ä¸ªå˜é‡ï¼š</p><ul><li><code>LastByteRead</code>:ä¸»æœºBä¸Šçš„åº”ç”¨è¿›ç¨‹ä»ç¼“å­˜è¯»å‡ºçš„æ•°æ®æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚</li><li><code>LastByteRcvd</code>:ä»ç½‘ç»œä¸­åˆ°è¾¾çš„å¹¶ä¸”å·²æ”¾å…¥ä¸»æœºBæ¥æ”¶ç¼“å­˜ä¸­çš„æ•°æ®æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚</li></ul><p>é‚£ä¹ˆæ¥æ”¶çª—å£å°±å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>rwnd=RcvBuffer-[LastByteRcvd-LastByteRead]<br>$$</p><h3 id="è¿æ¥ç®¡ç†"><a href="#è¿æ¥ç®¡ç†" class="headerlink" title="è¿æ¥ç®¡ç†"></a>è¿æ¥ç®¡ç†</h3><p>æˆ‘ä»¬æ¥æ·±å…¥äº†è§£å¦‚ä½•å»ºç«‹å’Œæ‹†é™¤ä¸€ä¸ªTCPè¿æ¥ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€äº›å…±è¯†ï¼Œä¹Ÿå°±æ˜¯è¿æ¥éƒ½éœ€è¦åšä»€ä¹ˆï¼Ÿ</p><p>åœ¨socketAPIçš„ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸¤ä¸ªå¥—æ¥å­—ï¼Œå³è¿æ¥æ˜¯é’ˆå¯¹åŒæ–¹è€Œè¨€çš„ï¼Œ<strong>æ¯ä¸€ç«¯å¯ä»¥çœ‹åšç»´æŠ¤ä¸€ä¸ªåŠè¿æ¥</strong>ï¼Œæ‰€ä»¥åœ¨å»ºç«‹TCPè¿æ¥æ—¶ï¼Œä¸¤ç«¯éƒ½æœ‰<strong>å‘Šè¯‰å¯¹æ–¹æˆ‘è¦å»ºç«‹è¿æ¥</strong>çš„è¯‰æ±‚ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦<strong>ä¸ºè¿æ¥é…ç½®èµ„æº</strong>ï¼Œå› ä¸ºè¿æ¥å°±æ„å‘³ç€é©¬ä¸Šä¼šæœ‰æ•°æ®ä¼ è¾“ï¼Œæ‰€ä»¥<strong>ç¼“å†²åŒºè‡ªç„¶æ˜¯éœ€è¦</strong>çš„ï¼Œæ­¤å¤–ï¼Œ<strong>åºå·å’Œç¡®è®¤å·ä¹Ÿæ˜¯å¿…é€‰é¡¹</strong>å’¯ã€‚</p><h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h3><p>å¥½å•¦ï¼Œå®é™…åœ°å»å»ºç«‹è¿æ¥æ—¶ï¼Œé¦–å…ˆå…ˆå…¥ä¸ºä¸»çš„æƒ³æ³•æ˜¯ä¸¤æ¬¡æ¡æ‰‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262109592.png" alt="image-20210707225141658"></p><p>ä½†ä¸¤æ¬¡æ¡æ‰‹é¢ä¸´ç€å¾ˆå¤šé—®é¢˜ï¼š</p><ul><li>å‡å¦‚æ¥æ”¶æ–¹çš„ç¡®è®¤è¶…æ—¶äº†ï¼Œæ­¤æ—¶å‘é€æ–¹ä¼šé‡å‘è¿æ¥å»ºç«‹è¯·æ±‚ã€‚ä½†æˆ‘ä»¬æ³¨æ„åˆ°<strong>æ¥æ”¶æ–¹çš„æœºåˆ¶ç®€è¨€ä¹‹å°±æ˜¯æ”¶åˆ°è¿æ¥è¯·æ±‚åˆ™åŒæ„å»ºç«‹</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ç¡®è®¤è¶…æ—¶äº†ï¼Œä½†æ¥æ”¶æ–¹ä»ä¼šç»´æŠ¤ä¸€ä¸ª<strong>åŠè¿æ¥çš„çŠ¶æ€</strong>åŠå¯¹åº”çš„èµ„æºã€‚</li><li>åœ¨ä¸Šé¢çŠ¶å†µçš„åŸºç¡€ä¸Šï¼Œå‡å¦‚å‘é€æ–¹æ¥æ”¶åˆ°ç¡®è®¤åï¼Œå‘é€æ•°æ®dataï¼Œè€Œæ¥æ”¶dataçš„æ¥æ”¶æ–¹çš„çŠ¶æ€ä¸ºæ–°çš„è¿æ¥ï¼Œé‚£ä¹ˆæ­¤æ—¶<strong>æ–°çš„è¿æ¥æ¥æ”¶çš„æ˜¯è€è¿æ¥çš„æ•°æ®</strong>ã€‚</li></ul><p>è¿™äº›é—®é¢˜çš„ç—‡ç»“æœ¬è´¨ä¸Šæ˜¯<strong>åŠè¿æ¥çš„å­¤ç«‹</strong>ï¼Œé‚£ä¹ˆå¦‚æœ<strong>åœ¨åŒæ–¹åŠè¿æ¥çš„åŸºç¡€ä¸Šå¢åŠ ä¸¤ä¸ªåŠè¿æ¥çš„äº¤äº’</strong>ï¼Œé‚£é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚ä¸‰æ¬¡æ¡æ‰‹å°±æ˜¯åŸºäºè¿™æ ·çš„æ€æƒ³å®ç°çš„ã€‚æˆ‘ä»¬æ¥è¯¦ç»†å‰–æä¸‰æ¬¡æ¡æ‰‹çš„è¯¦ç»†è¿‡ç¨‹â€”â€”</p><ol><li><p><code>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š</code>å®¢æˆ·ç«¯çš„TCPé¦–å…ˆå‘æœåŠ¡å™¨ç«¯çš„TCPå‘é€ä¸€ä¸ªç‰¹æ®Šçš„TCPæŠ¥æ–‡æ®µã€‚è¯¥æŠ¥æ–‡æ®µä¸­<strong>ä¸åŒ…å«åº”ç”¨å±‚æ•°æ®</strong>ã€‚ä½†æ˜¯åœ¨æŠ¥æ–‡æ®µçš„é¦–éƒ¨ä¸­çš„ä¸€ä¸ªæ ‡å¿—ä½ï¼ˆå³<strong>SYN</strong>æ¯”ç‰¹ï¼‰<strong>è¢«ç½®ä¸º1</strong>ã€‚å› æ­¤ï¼Œè¿™ä¸ªç‰¹æ®ŠæŠ¥æ–‡æ®µè¢«ç§°ä¸º<strong>SYNæŠ¥æ–‡æ®µ</strong>ã€‚å¦å¤–ï¼Œå®¢æˆ·ä¼š<strong>éšæœºåœ°é€‰æ‹©ä¸€ä¸ªåˆå§‹åºå·</strong>ï¼ˆclient_isnï¼‰,å¹¶å°†æ­¤ç¼–å·æ”¾ç½®äºè¯¥èµ·å§‹çš„TCPSYNæŠ¥æ–‡æ®µçš„åºå·å­—æ®µä¸­ã€‚</p></li><li><p><code>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š</code>æœåŠ¡å™¨ä¼šä»è¯¥æ•°æ®æŠ¥ä¸­æå–å‡ºSYNæŠ¥æ–‡æ®µï¼Œä¸ºè¯¥TCPè¿æ¥<strong>åˆ†é…TCPç¼“å­˜å’Œå˜é‡</strong>ï¼Œå¹¶å‘è¯¥å®¢æˆ·TCPå‘é€å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µã€‚è¿™ä¸ªå…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µ<strong>ä¹Ÿä¸åŒ…å«åº”ç”¨å±‚æ•°æ®</strong>ã€‚ä½†æ˜¯ï¼Œåœ¨æŠ¥æ–‡æ®µçš„é¦–éƒ¨å´åŒ…å«<strong>3ä¸ªé‡è¦çš„ä¿¡æ¯</strong>ã€‚</p><ol><li>SYNæ¯”ç‰¹è¢«ç½®ä¸º1ã€‚</li><li>TCPæŠ¥æ–‡æ®µé¦–éƒ¨çš„ç¡®è®¤å·å­—æ®µè¢«ç½®ä¸º<strong>client_isn+I</strong></li><li>æœåŠ¡å™¨é€‰æ‹©è‡ªå·±çš„åˆå§‹åºå·ï¼ˆ<strong>serverjsn</strong>ï¼‰,å¹¶å°†å…¶æ”¾ç½®åˆ°TCPæŠ¥æ–‡æ®µé¦–éƒ¨çš„åºå·å­—æ®µä¸­ã€‚è¿™ä¸ªå…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µå®é™…ä¸Šè¡¨æ˜äº†ï¼š<strong>â€œæˆ‘æ”¶åˆ°äº†ä½ å‘èµ·å»ºç«‹è¿æ¥çš„SYNåˆ†ç»„ï¼Œè¯¥åˆ†ç»„å¸¦æœ‰åˆå§‹åºå·clientjsnoæˆ‘åŒæ„å»ºç«‹è¯¥è¿æ¥ã€‚æˆ‘è‡ªå·±çš„åˆå§‹åºå·æ˜¯serverjsnon</strong></li></ol><p>è¯¥å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µè¢«ç§°ä¸º<strong>SYNACKæŠ¥æ–‡æ®µ</strong>.</p></li><li><p><code>ç¬¬ä¸‰æ¬¡æ¡æ‰‹:</code>åœ¨æ”¶åˆ°ACKæŠ¥æ–‡æ®µåï¼Œå®¢æˆ·ä¹Ÿè¦ç»™è¯¥è¿æ¥<strong>åˆ†é…ç¼“å­˜å’Œå˜</strong>é‡ã€‚å®¢æˆ·ä¸»æœºåˆ™å‘æœåŠ¡å™¨å‘é€å¦å¤–ä¸€ä¸ªæŠ¥æ–‡æ®µï¼›è¿™æœ€åä¸€ä¸ªæŠ¥æ–‡æ®µ<strong>å¯¹æœåŠ¡å™¨çš„å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µè¿›è¡Œäº†ç¡®è®¤</strong>ï¼ˆè¯¥å®¢æˆ·é€šè¿‡<strong>å°†å€¼serverjsn+1æ”¾ç½®åˆ°TCPæŠ¥æ–‡æ®µé¦–éƒ¨çš„ç¡®è®¤å­—æ®µ</strong>ä¸­æ¥å®Œæˆæ­¤é¡¹å·¥ä½œï¼‰ã€‚å› ä¸ºè¿æ¥å·²ç»å»ºç«‹äº†ï¼Œæ‰€ä»¥è¯¥<strong>SYNæ¯”ç‰¹è¢«ç½®ä¸º0</strong>ã€‚è¯¥ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰ä¸ªé˜¶æ®µå¯ä»¥åœ¨æŠ¥æ–‡æ®µ<strong>è´Ÿè½½ä¸­æºå¸¦å®¢æˆ·åˆ°æœåŠ¡å™¨çš„æ•°æ®</strong>ã€‚</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262109132.png" alt="image-20210707225201937"></p><p>å—¯ï¼Œç†Ÿæ‚‰çš„FSMç¯èŠ‚â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262109716.png" alt="image-20210707225214552"></p><hr><h3 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h3><p>å¤©ä¸‹æ²¡æœ‰ä¸æ•£çš„å®´å¸­ã€‚TCPè¿æ¥ä¹Ÿä¸èƒ½å…ä¿—ã€‚ç›¸æ¯”äºä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹è¿˜æ˜¯æ°´åˆ°æ¸ æˆçš„ï¼ŒåŒç«¯éƒ½å¯ä»¥ä¸»åŠ¨å‘èµ·æ–­å¼€è¿æ¥çš„è¯·æ±‚ï¼Œç„¶å<strong>åŒæ–¹æ–­å¼€è‡ªå·±ç»´æŠ¤çš„åŠè¿æ¥</strong>å³å¯ï¼ŒåŒæ ·çš„ï¼Œæˆ‘ä»¬æ¥å¤ç°è¿™ä¸ªè¿‡ç¨‹â€”â€”</p><ol><li>å®¢æˆ·ç«¯è¿›ç¨‹å‘æœåŠ¡å™¨è¿›ç¨‹å‘é€ä¸€ä¸ªç‰¹æ®Šçš„æŠ¥æ–‡æ®µï¼Œè¯¥æŠ¥æ–‡æ®µä¸­é¦–éƒ¨æ ‡å¿—ä½<strong>FINç½®1</strong>ï¼›</li><li>æœåŠ¡å™¨æ¥æ”¶è¯¥æŠ¥æ–‡æ®µåï¼Œ<strong>å…¶ACKæ¯”ç‰¹ç½®1</strong>.</li><li>åå‘åŒç†ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262109651.png" alt="image-20210707225225357"></p><h2 id="1-6-æ‹¥å¡æ§åˆ¶åŸç†"><a href="#1-6-æ‹¥å¡æ§åˆ¶åŸç†" class="headerlink" title="1.6 æ‹¥å¡æ§åˆ¶åŸç†"></a>1.6 æ‹¥å¡æ§åˆ¶åŸç†</h2><hr><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨rdtå¯é æ•°æ®ä¼ è¾“æœºåˆ¶ä¸­ï¼Œåˆ†ç»„ä¸¢å¤±æ˜¯ä¸å¯é¿å…çš„ï¼Œè€Œ<strong>åˆ†ç»„ä¸¢å¤±çš„åŸå› é€šå¸¸æ˜¯ç”±ç½‘ç»œæ‹¥å¡</strong>ï¼Œå½“è·¯ç”±å™¨çš„ç¼“å­˜è¢«å æ»¡åï¼Œåæ¥è€…å°†ä¼šåˆ«æŠ›å¼ƒï¼Œæœ¬è´¨ä¸Šè¯´è¿™ç§çŠ¶å†µæ˜¯å› ä¸ºç½‘ç»œæ˜¯ä¸å¯æ§çš„ï¼Œå¾ˆéš¾ä»ç«¯ç³»ç»Ÿè·çŸ¥ç½‘ç»œçš„çŠ¶å†µï¼Œä½†å‘é€æ–¹åˆæœ¬ç€<code>å¤šå¤šç›Šå–„</code>çš„æ–¹å¼åœ¨åŠ å‰§ç½‘ç»œçš„æ¶åŒ–ã€‚</p><p>ä¸ºäº†é¿å…ç½‘ç»œæ‹¥å¡ï¼ŒTCPä½¿ç”¨äº†æ€æ ·çš„æœºåˆ¶ï¼Œè¿™ç§å¤„ç†æœºåˆ¶å‡ºå‘ç‚¹æ˜¯ä»€ä¹ˆï¼Œå®ƒé’ˆå¯¹æ€§åœ°è§£å†³äº†å“ªäº›é—®é¢˜ï¼Œå¦‚æ­¤ç§ç§ã€‚è¦è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä»è¦é“ºå¥½ç¬¬ä¸€å—ç –çŸ³â€”â€”</p><p><code>ç½‘ç»œæ‹¥å¡çš„å®šä¹‰</code>ï¼šå¤ªå¤šçš„æ•°æ®éœ€è¦ç½‘ç»œä¼ è¾“ï¼Œè¶…è¿‡äº†ç½‘ç»œçš„å¤„ç†èƒ½åŠ›ã€‚</p><h3 id="æ‹¥å¡åŸå› ä¸è¡¨ç°"><a href="#æ‹¥å¡åŸå› ä¸è¡¨ç°" class="headerlink" title="æ‹¥å¡åŸå› ä¸è¡¨ç°"></a>æ‹¥å¡åŸå› ä¸è¡¨ç°</h3><p>è¿™é‡Œæˆ‘ä»¬ä»ä½¿ç”¨æ¸è¿›å¼åˆ†æé—®é¢˜çš„æ€æƒ³ï¼Œä¸€ä¸ªä¸ä¼šå‘ç”Ÿåˆ†ç»„ä¸¢å¤±çš„ç½‘ç»œæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><ul><li><p><code>è·¯ç”±å™¨ç¼“å­˜æ— é™å¤§</code></p></li><li><p><code>ç«¯ç³»ç»Ÿå¯ä»¥äº†è§£ç½‘ç»œçš„çŠ¶å†µå¹¶ä½œå‡ºè°ƒæ•´ã€‚</code></p></li><li><p><code>æ‰€æœ‰åˆ†ç»„éƒ½å¯ä»¥ä¸è¶…æ—¶çš„åˆ°è¾¾ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡ä¼ </code></p></li></ul><p>å…ˆæ¥çœ‹è·¯ç”±å™¨ç¼“å­˜ï¼Œå‡è®¾è·¯ç”±å™¨ç¼“å­˜æ— é™å¤§ï¼Œé‚£åˆ†ç»„å°±ä¸ä¼šè¢«ä¸¢å¼ƒã€‚è¿™æ—¶å‡è®¾æœ‰ä¸¤ä¸ªå‘é€ç«¯é€šè¿‡ä¸€æ¡é“¾è·¯(å¸¦å®½ä¸ºR)å‘é€æ•°æ®ï¼Œé‚£ä¹ˆå®ƒçš„ååé‡å’Œå»¶æ—¶è¡¨ç°ä¸ºè¿™æ ·â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262110916.png" alt="image-20210707225238081"></p><p>å¯è§ï¼Œå³ä¾¿åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼Œå½“è¶…å‡ºé“¾è·¯çš„æ‰¿è½½èƒ½åŠ›åï¼Œ<code>æµé‡å¼ºåº¦å˜å¤§ï¼Œæ’é˜Ÿå»¶æ—¶æ¿€å¢</code>ã€‚ç¡¬ä»¶æ¡ä»¶è¿™æ˜¯ä¸å¯é€¾è¶Šçš„å¤©èŠ±æ¿ã€‚æ‰€ä»¥æˆ‘ä»¬å¾ˆéš¾æ§åˆ¶ä¸å‘ç”Ÿæ‹¥å¡ï¼Œè€Œè¦ä»æ‹¥å¡å‘ç”Ÿåçš„å¤„ç†æŠ€å·§å…¥æ‰‹ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å»æ‰ç¼“å­˜æ— é™çš„å‡è®¾ï¼Œè¿™æ—¶åˆ†ç»„ä¸¢å¤±å°±å˜å¾—æ— å¯é¿å…ï¼Œåˆ†ç»„ä¸¢å¤±å°±æ„å‘³ç€é‡ä¼ ï¼Œè€Œ<code>é‡ä¼ å¯¼è‡´é“¾è·¯ä¸­é‡å¤çš„åˆ†ç»„</code>ï¼Œä¹Ÿå°±æ˜¯ä¸å¿…è¦çš„åˆ†ç»„å¢å¤šï¼Œç›´æ¥ä½¿å¾—<code>å‘é€æ–¹æ¯”æ¥æ”¶æ–¹æ›´é«˜çš„å‘é€é€Ÿç‡</code>ï¼Œå¯¼è‡´æœ¬å°±ä¸å®½è£•çš„é“¾è·¯å¸¦å®½æ›´æ˜¾çš„æ‰è¥Ÿè§è‚˜ã€‚å¦å¤–ï¼Œè¶…æ—¶é‡ä¼ ä½œç”¨çš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬è®¾æƒ³åœ¨ç±»ä¼¼<code>è¿›ç¨‹å‘ç”Ÿæ­»é”</code>çš„ä¸€ç§æƒ…æ™¯ï¼Œæ¯ä¸ªå‘é€æ–¹å ç”¨ç€åˆ«çš„å‘é€æ–¹éœ€è¦çš„é“¾è·¯å¸¦å®½ï¼Œè€Œåˆ«çš„è¿›ç¨‹ä¹Ÿå ç”¨ç€è‡ªå·±éœ€è¦çš„é“¾è·¯å¸¦å®½ï¼Œå¦‚æœäººçš„æ¬²æœ›ä¸€èˆ¬ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ¡è·¯æ˜¯é”™çš„ï¼Œä½†è´ªå¿µä»åœ¨é©±ä½¿ç€èº¯å¹²å‘å‰ã€‚</p><h3 id="æ‹¥å¡æ§åˆ¶çš„æ–¹å¼"><a href="#æ‹¥å¡æ§åˆ¶çš„æ–¹å¼" class="headerlink" title="æ‹¥å¡æ§åˆ¶çš„æ–¹å¼"></a>æ‹¥å¡æ§åˆ¶çš„æ–¹å¼</h3><p>é’ˆå¯¹ä¸Šé¢çš„çŠ¶å†µï¼Œä¸€èˆ¬é‡‡ç”¨ä¸¤ç§æ§åˆ¶æ‹¥å¡çš„æ–¹æ³•â€”â€”</p><ul><li><code>ç«¯å¯¹ç«¯çš„æ‹¥å¡æ§åˆ¶ï¼š</code>TCPå°±ä½¿ç”¨è¿™ç§ç­–ç•¥ã€‚ç«¯ç³»ç»Ÿæ ¹æ®<code>å»¶è¿Ÿå’Œä¸¢å¤±äº‹ä»¶</code>æ¨æ–­æ˜¯å¦æœ‰æ‹¥å¡ã€‚</li><li><code>ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ï¼š</code>è·¯ç”±å™¨é€šè¿‡<code>ç½®ä½</code>çš„æ–¹å¼æ˜¾ç¤ºçš„å‘Šè¯‰å‘é€ç«¯å¯ä»¥é‡‡ç”¨çš„é€Ÿç‡ã€‚</li></ul><p>æ¥é€šè¿‡å®é™…çš„<strong>ATM ABRåœºæ™¯</strong>è®¤è¯†ä¸‹è¿™ä¸¤ç§æ–¹å¼æ˜¯æ€æ ·å®é™…è¿è½¬çš„ï¼š</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç½‘ç»œä¸­ä¼ è¾“çš„æ•°æ®ç²’åº¦æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä¸“çº¿æ›´å¤šä½¿ç”¨çº¿è·¯äº¤æ¢çš„æ–¹å¼ï¼Œè€Œé€šç”¨çš„åˆ™æ˜¯åˆ†ç»„äº¤æ¢çš„æ–¹å¼ï¼Œè¿™ç§åœ¨é“¶è¡Œä¸­å¤§è¡Œå…¶é“çš„ATM ABRçº¿è·¯åˆ™ä½¿ç”¨æ•°æ®ç²’åº¦<code>ä»‹äºçº¿è·¯äº¤æ¢å’Œåˆ†ç»„äº¤æ¢çš„ç²’åº¦å¤§å°</code>ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œå®ƒä¼ è¾“çš„æœ€å°å•å…ƒæ˜¯<code>53ä¸ªçš„æ¯”ç‰¹</code>ã€‚</p><p><strong>ABR(available bit rate)</strong>æä¾›çš„æ˜¯å¼¹æ€§æœåŠ¡ï¼Œå®ƒå¯ä»¥<code>æ ¹æ®ç½‘ç»œçš„è´Ÿè½½å®æ—¶è°ƒæ•´å‘é€é€Ÿç‡</code>ã€‚å¦‚æœå‘é€æ–¹è·¯å¾„è½»è½½ï¼Œåˆ™å‘é€æ–¹å°±ä½¿ç”¨å°½å¯èƒ½å¤šåœ°åˆ©ç”¨è´·æ¬¾ã€‚å¦‚æœå‘é€æ–¹è·¯å¾„é˜»å¡ï¼Œå‘é€æ–¹é™åˆ¶é€Ÿç‡è‡³ä¸€ä¸ªæœ€å°ä¿éšœé€Ÿç‡ã€‚</p><p>é‚£ç½‘ç»œä¸­çš„æ‹¥å¡çŠ¶å†µæ˜¯å¦‚ä½•è¢«è·çŸ¥çš„å‘¢ï¼Ÿé€šè¿‡RMä¿¡å…ƒï¼Œå³<strong>èµ„æºç®¡ç†ä¿¡å…ƒ</strong>ã€‚</p><p>å®ƒç”±å‘é€ç«¯å‘é€ï¼Œåœ¨æ•°æ®ä¿¡å…ƒä¸­é—´éš”æ’å…¥ï¼Œé€šè¿‡è¯¥ä¿¡å…ƒç‰¹å®šçš„æ¯”ç‰¹ä½æ¥ä½œä¸ºç½‘ç»œè¾…åŠ©ï¼Œè¿™ç§è¡Œä¹‹æœ‰æ•ˆçš„æ¯”ç‰¹ä½åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>NI bit:</code>å³no increase in rateã€‚</li><li><code>CI bit:</code>å³congestion indicationæ‹¥å¡æŒ‡ç¤ºã€‚</li></ul><p>å‘é€æ–¹å‘é€çš„RMä¿¡å…ƒè¢«æ¥æ”¶æ–¹è¿”å›ï¼Œ<code>æ¥æ”¶æ–¹ä»…ç”¨ä½œä¸­è½¬</code>ä½¿ç”¨ã€‚å¦å¤–ï¼Œä¹‹å‰è°ˆåŠä¿¡å…ƒå¯ä»¥è¿”å›ç»™å‘é€æ–¹æœ€å°å‘é€é€Ÿç‡ï¼Œè¿™æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><p>é€šè¿‡RMä¿¡å…ƒä¸­çš„2ä¸ªå­—èŠ‚<code>ER(explicit rate)å­—æ®µ</code>.æ‹¥å¡çš„äº¤æ¢æœºä¼šé™ä½ERçš„å€¼ï¼Œæœ€ç»ˆè¿”å›ç»™å‘é€æ–¹ã€‚</p><hr><h2 id="1-7-TCPæ‹¥å¡"><a href="#1-7-TCPæ‹¥å¡" class="headerlink" title="1.7 TCPæ‹¥å¡"></a>1.7 TCPæ‹¥å¡</h2><p>åœ¨ä¸Šä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬èŠäº†é€šç”¨çš„æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ï¼š<strong>ç«¯ç³»ç»Ÿå¤„ç†</strong>ï¼Œ<strong>ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶</strong>ã€‚åŒæ—¶å¯¹ç½‘ç»œè¾…åŠ©çš„æ¡ˆä¾‹åšäº†ç®€å•æè¿°ï¼Œè¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬å°†å±•å¼€è®²è¿°åœ¨ç«¯ç³»ç»Ÿå¦‚ä½•å¤„ç†æ‹¥å¡ã€‚</p><p>æ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯<strong>TCPçš„æ‹¥å¡æ§åˆ¶æœºåˆ¶</strong>ã€‚è€Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè§£å†³ä¸€ä¸ªå‰ç½®é—®é¢˜ï¼šTCP<code>ä¸ºä»€ä¹ˆä¸åœ¨ç½‘ç»œæ ¸å¿ƒé€šè¿‡ä½¿ç”¨è¾…åŠ©ä¿¡å…ƒçš„æ–¹å¼å®ç°æ‹¥å¡æ§åˆ¶</code>ã€‚å…¶å®ï¼Œçºµè§‚æ•´ä¸ªç½‘ç»œæ¶æ„ï¼Œå¤æ‚æ€§éƒ½æ˜¯åœ¨ä¼ è¾“å±‚åŠå…¶ä»¥ä¸Šæä¾›çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>ç½‘ç»œå±‚ä¸ä¼šå‘ä¸Šå±‚åº”ç”¨æä¾›æ˜¾å¼çš„æ‹¥å¡æ§åˆ¶æœºåˆ¶</code>ã€‚</p><p>é‚£TCPçš„æ‹¥å¡æ§åˆ¶æœºåˆ¶æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿä¸ç€æ€¥ï¼Œæœ¬ç€å…ˆæœ‰é—®é¢˜ï¼Œå†æœ‰æ–¹æ¡ˆçš„æ€è·¯ï¼Œæˆ‘ä»¬å…ˆæ¥å›ç­”TCPæ‹¥å¡æœºåˆ¶é¢ä¸´çš„<strong>ä¸‰å¤§é—®é¢˜</strong>â€”â€”</p><ul><li><p><code>å¦‚ä½•æ„ŸçŸ¥åˆ°æ‹¥å¡</code></p><p>ç½‘ç»œæ‹¥å¡çš„æœ€ç»ˆç»“æœæ˜¯åˆ†ç»„ä¸¢å¤±ï¼Œè€Œå¯¼è‡´åˆ†ç»„ä¸¢å¤±çš„åŸå› å´æœ‰ä¸€äº›åŒºåˆ«â€”â€”</p><ol><li>å‡å¦‚åˆ°è¾¾è·¯ç”±å™¨çš„åˆ†ç»„è¿‡å¤šå¯¼è‡´ç¼“å†²åŒºå·²æ»¡ï¼Œ<strong>åˆ†ç»„å°±ä¼šè¢«ä¸¢å¼ƒ</strong>ã€‚æ­¤å¤–ï¼Œæœ‰å¯èƒ½åˆ†ç»„åœ¨ä¼ è¾“æ—¶æ¯”ç‰¹åè½¬ï¼Œæ¥æ”¶æ–¹è®¤ä¸å‡ºæ¥è¿™æ˜¯å•¥ï¼Œé‚£ä¹Ÿä¼šå°†å…¶ä¸¢å¼ƒã€‚è¿™ä¸¤ç§æƒ…å†µçš„ç›´è§‚è¡¨ç°éƒ½æ˜¯è¶…æ—¶ï¼Œè¿™ç§<code>æ‹¥å¡æƒ…èŠ‚ä¸¥é‡</code>ï¼Œå‘é€æ–¹æ˜æ˜¾è¢«åŠ¨ã€‚</li><li>å½“å‘é€æ–¹è¿ç»­æ”¶åˆ°4ä¸ªACKä¿¡å·ï¼Œä¹Ÿå°±æ˜¯<strong>3ä¸ªå†—ä½™ACK</strong>æ—¶ï¼Œå°±ä¼šè§¦å‘å¿«é€Ÿé‡ä¼ æœºåˆ¶ï¼Œè¿™æ—¶è¿˜æ²¡æœ‰è¶…æ—¶ï¼Œå‘é€æ–¹ä¸»åŠ¨å‡ºæ‰‹é™ä½æŸå¤±ï¼Œå§‘ä¸”ç§°å…¶<code>è½»å¾®æ‹¥å¡</code>ã€‚</li></ol></li><li><p><code>å¦‚ä½•å¯¹é€Ÿç‡åšè°ƒæ•´</code></p><p>é‚£æ˜ç¡®äº†é—®é¢˜ï¼Œå¦‚ä½•é’ˆå¯¹ä¸¤ç§æ‹¥å¡åšå‡ºå‘é€é€Ÿç‡çš„è°ƒæ•´å‘¢ï¼Ÿåœ¨<strong>RDT</strong>ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥<code>æ¥æ”¶çª—å£rwnd</code>æ¥é™åˆ¶æ¥æ”¶åˆ†ç»„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿé‡‡ç”¨ç±»ä¼¼çš„æœºåˆ¶ï¼Œå¼•å…¥<code>æ‹¥å¡çª—å£cwnd</code>ã€‚ç±»æ¯”æ¥æ”¶çª—å£è¡¨ç¤ºèƒ½å¤Ÿæ¥æ”¶åˆ†ç»„çš„ä¸Šé™ï¼Œæ‹¥å¡çª—å£è¡¨ç¤ºçš„å³æ˜¯â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262110805.png" alt="image-20210707225253295"></p><p>æ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†ï¼Œå‘é€çª—å£è¡¨ç¤ºçš„æ˜¯<strong>å®é™…çš„</strong>å·²å‘é€æœªç¡®è®¤çš„åˆ†ç»„æ•°é‡ã€‚è€Œæ‹¥å¡çª—å£å°±å¦‚åŒåœ¨å¯¹å‘é€çª—å£åš<strong>åŠ¨æ€è°ƒæ•´</strong>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåˆ«æ— äºŒè‡´ã€‚é‚£ç¡®å®šäº†æ‹¥å¡çª—å£çš„å€¼ï¼Œå‘é€æ–¹çš„å‘é€é€Ÿç‡ä¹Ÿå¯ä»¥å¾—å‡ºæ¥â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262110531.png" alt="image-20210707225302111"></p></li></ul><ul><li><code>é€šè¿‡æ€æ ·çš„ç®—æ³•å¯¹é€Ÿç‡åšè°ƒæ•´ï¼š</code></li></ul><p>æœ‰äº†è¡¡é‡æ‹¥å¡çš„æ ‡å¿—ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦é€šè¿‡æ‹¥å¡çŠ¶å†µè§¦å‘åŠ¨æ€è°ƒæ•´å•¦ï¼Œè¿™é‡Œçš„åŠ¨æ€è°ƒæ•´ï¼Œå°±æ˜¯å¹¿å—èµèª‰çš„<strong>TCPæ‹¥å¡æ§åˆ¶ç®—æ³•</strong>ã€‚</p><p>è¯¥ç®—æ³•åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæ…¢å¯åŠ¨ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é€Ÿæ¢å¤ã€‚æˆ‘ä»¬è¯¦ç»†æ¥èŠèŠâ€”â€”</p><ul><li><p><code>æ…¢å¯åŠ¨ï¼š</code></p><p>TCPä¼šå°†cwndçš„å€¼<code>åˆå§‹åŒ–ä¸ºä¸€ä¸ª2/3/4MSS</code>(å…·ä½“ç”±MSSçš„å¤§å°å†³å®š)çš„å€¼ï¼Œä½†æ˜¾ç„¶ï¼Œè¿™ç‚¹é€Ÿç‡æ˜¯ä¸å¤Ÿæ‰“çš„ï¼Œæ‰€ä»¥å½“åˆ†ç»„é¦–æ¬¡è¢«ç¡®è®¤åï¼Œä¼šä»¥<code>æŒ‡æ•°çº§çš„å¢é•¿è¶‹åŠ¿</code>å°½å¿«åŠ é€Ÿï¼Œç›´è‡³è¶…æ—¶åæ‰“å›åŸå½¢ï¼Œä¹Ÿå°±æ˜¯1ä¸ªMSS.è¿™æ—¶ï¼ŒTCPè¿˜ä¼šç»´æŠ¤ä¸€ä¸ª<strong>æ…¢å¯åŠ¨é˜ˆå€¼</strong>ï¼Œä¹Ÿå°±æ˜¯è­¦æˆ’å€¼ï¼Œå®ƒçš„å€¼ä¸º<strong>cwnd(max)/2</strong>ï¼Œæ¥ç€ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡æ‹¥å¡æ§åˆ¶ï¼Œå½“cwndçš„å€¼æŒ‡æ•°å¢åŠ è‡³æ…¢å¯åŠ¨é˜ˆå€¼åï¼Œä¸å†é²è½åœ°æŒ‡æ•°çº§å¢é•¿ï¼Œè€Œæ˜¯ç»´æŒ<code>çº¿æ€§å¢é•¿</code>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262110199.png" alt="image-20210707225311975"></p><p>è¿™ç§çº¿æ€§å¢é•¿çš„æœºåˆ¶å°±æ˜¯æ‹¥å¡é¿å…â€”â€”</p></li><li><p><code>æ‹¥å¡é¿å…ï¼š</code></p><p>é‚£æ‹¥å¡é¿å…ä»€ä¹ˆæ—¶å€™ç»“æŸå‘¢ï¼Ÿå’Œæ…¢å¯åŠ¨ä¸€æ ·ï¼Œæ‹¥å¡é¿å…é˜¶æ®µåœ¨è§¦å‘è¶…æ—¶åä¼šé‡æ–°å¼€å§‹SSæ…¢å¯åŠ¨é˜¶æ®µ,è¿™æ—¶ï¼Œæ…¢å¯åŠ¨çš„é˜ˆå€¼ä¹ŸåŠ¿å¿…ä¼šæ›´æ–°ã€‚</p><p>å†æ¥è®¨è®ºä¸‹å‘é€æ–¹æ”¶åˆ°<strong>3ä¸ªå†—ä½™ACK</strong>çš„çŠ¶å†µâ€”â€”</p><p>å®ƒçš„å¤„ç†æœºåˆ¶æ˜¾ç„¶æ²¡å¿…è¦åƒæ‹¥å¡æ—¶é‚£ä¹ˆå‰§çƒˆï¼Œåªéœ€è¦åœ¨è§¦å‘å¿«é€Ÿé‡ä¼ åï¼Œè®°å½•æ…¢å¯åŠ¨é˜ˆå€¼ï¼Œç„¶å<code>ç›´æ¥ä»é˜ˆå€¼å¼€å§‹çº¿æ€§å¢åŠ </code>è¿›å…¥å¿«é€Ÿæ¢å¤é˜¶æ®µâ€”â€”</p></li><li><p><code>å¿«é€Ÿæ¢å¤ï¼š</code></p><p>æ‰€è°“çš„å¿«é€Ÿæ¢å¤æ— éæ˜¯é’ˆå¯¹ä¸¤ç§æ‹¥å¡çŠ¶å†µçš„ä¸åŒç§å¤„ç†ï¼Œåœ¨ä¸Šé¢å·²ç»æåŠï¼Œå°±ä¸å†èµ˜è¿°ã€‚</p><ol><li>è¶…æ—¶é‡ä¼ ï¼šRFCå»ºè®®å°†æ‹¥å¡çª—å£é™è‡³1ä¸ªMSSï¼Œè€Œç”±æ…¢å¯åŠ¨è¿‡æ¸¡è‡³æ‹¥å¡çª—å£çš„å€¼å°±æœ‰è®²ç©¶äº†ï¼Œåº”è¯¥è°ƒæ•´è‡³æ²¡åˆ«ç¡®è®¤çš„æ•°æ®é‡çš„1/2,ä½†ä¸èƒ½å°äºä¸¤ä¸ªMSS</li><li>å¿«é€Ÿæ¢å¤ï¼šä¸ä¼šå¤„ç†æ‹¥å¡çª—å£çš„å€¼ï¼›</li></ol></li></ul><p>æ¥ä¸‹æ¥å°±æ˜¯å°æ€»ç»“ç¯èŠ‚â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262110595.png" alt="image-20210707225324365"></p><p>å†å°†ä¸¤ç§æƒ…å†µæ±‡æ€»ï¼Œå°±æœ‰äº†ä¸‹å›¾â€”â€”</p><p><img src="C:%5CUsers%5Czyz%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210304182714108.png" alt="image-20210304182714108"></p><h3 id="TCPååé‡"><a href="#TCPååé‡" class="headerlink" title="TCPååé‡"></a>TCPååé‡</h3><p>è¿™é‡Œæˆ‘ä»¬å–å¿«é€Ÿæ¢å¤é˜¶æ®µçš„æ•°æ®é‡å‡å€¼ä½œä¸ºå‚è€ƒ(æ…¢å¯åŠ¨æŒ‡æ•°çº§çš„å¢åŠ å®åˆ™å¾ˆå¿«ï¼Œä¹Ÿå¯¼è‡´å®é™…ä¼ è¾“çš„æµé‡ä¸å¤š)ï¼Œå³â€”â€”<br>$$<br>ä¸€æ¡è¿æ¥çš„å¹³å‡ååé‡=3/4<em>W/RTT<br>$$<br>å¦å¤–ä¹Ÿç»™å‡ºåœ¨<code>ç»è¿‡é«˜å¸¦å®½TCPï¼Œä¸”ä¸¢åŒ…ç‡ä¸ºLçš„æƒ…å†µ</code>ä¸‹ï¼Œååé‡çš„æè¿°â€”â€”<br>$$<br>ä¸€æ¡è¿æ¥çš„å¹³å‡ååé‡ï¼š1.22</em>MSS/RTT/æ ¹å·ä¸‹2<br>$$</p><h3 id="TCPå…¬å¹³æ€§"><a href="#TCPå…¬å¹³æ€§" class="headerlink" title="TCPå…¬å¹³æ€§"></a>TCPå…¬å¹³æ€§</h3><p>å¤ªé¥¿äº†ï¼Œå»åƒé¥­ï¼Œå·æ‡’ä¸€æ‰‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262110286.png" alt="image-20210707225338648"></p><p>ä¹Ÿå°±æ˜¯å¤šä¸ªTCPè¿æ¥æ—¶ï¼Œç½‘ç»œçŠ¶å†µä¼šè¶‹å‘äº<code>å¸¦å®½å‡åˆ†</code>ã€‚</p><p>è€Œå¦‚æœä¸€ä¸ªé“¾è·¯ä¸­æ—¢æœ‰ä½¿ç”¨TCPçš„æœåŠ¡ï¼Œä¹Ÿæœ‰ä½¿ç”¨UDPçš„æœåŠ¡ï¼Œé‚£å¯¹äºTCPæ˜¯ä¸å‹å¥½çš„ï¼Œå› ä¸º<code>UDPç™¾æ— ç¦å¿Œ</code>ï¼Œå®ƒæ²¡æœ‰æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼ŒUDPä¼šä¸€ç‚¹ç‚¹çš„èš•é£Ÿæ‰å¸¦å®½ï¼Œè€Œæœ€ç»ˆå¯¼è‡´æ›´æ¶åŠ£çš„åæœï¼Œå¯è§ï¼Œ<strong>ä¸é™åˆ¶è´ªæ¬²æœ€ç»ˆä¼šé™·å…¥æ¶æ€§å¾ªç¯</strong>ã€‚ä½†è¿™ç§æœºåˆ¶ä¹Ÿå¹¶éä¸€æ— æ˜¯å¤„ï¼Œæµåª’ä½“å°±è¡¨ç¤ºè¿™æ˜¯æˆ‘çš„èœï¼Œå› ä¸º<code>éŸ³è§†é¢‘åº”ç”¨èµ·ç æ³µå‡ºæ•°æ®çš„é€Ÿç‡æ˜¯æ’å®š</code>çš„ï¼Œå³ä¾¿æ•°æ®ä¼šä¸¢å¤±ã€‚</p><hr><h2 id="æŠ“åŒ…ç•ªå¤–"><a href="#æŠ“åŒ…ç•ªå¤–" class="headerlink" title="æŠ“åŒ…ç•ªå¤–"></a>æŠ“åŒ…ç•ªå¤–</h2><h3 id="ç®€å•çš„ä»£ä»·â€”â€”UDP"><a href="#ç®€å•çš„ä»£ä»·â€”â€”UDP" class="headerlink" title="ç®€å•çš„ä»£ä»·â€”â€”UDP"></a>ç®€å•çš„ä»£ä»·â€”â€”UDP</h3><h3 id="DNSé‚£äº›äº‹"><a href="#DNSé‚£äº›äº‹" class="headerlink" title="DNSé‚£äº›äº‹"></a>DNSé‚£äº›äº‹</h3><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210506232028231.png" alt="image-20210506232028231"></p><p>DNSå¸¸ç”¨çš„<strong>åº”ç”¨åœºæ™¯</strong>æœ‰ä¸¤ç§ï¼š</p><ul><li><p><code>CNMAE:</code>å³å°†ä¸€ä¸ªåŸŸåæ˜ å°„åˆ°å¦ä¸€ä¸ªåŸŸåï¼Œ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210506234636802.png" alt="image-20210506234636802"></p></li><li><p><code>Aï¼š</code>è¯·æ±‚è·å–åŸŸåå¯¹åº”çš„IPåœ°å€</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210506234517700.png" alt="image-20210506234517700"></p></li></ul><p>å½“DNSåœ¨ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°è¦æŸ¥è¯¢çš„è®°å½•åï¼Œå°±ä¼šå‘èµ·<strong>DNSæŸ¥è¯¢</strong>ï¼ŒæŸ¥è¯¢æœ‰ä¸¤ç§ï¼šé€’å½’æŸ¥è¯¢ï¼Œè¿­ä»£æŸ¥è¯¢ã€‚å‡å¦‚æˆ‘ä»¬å‘ä¸€ä¸ª<code>ä¸æƒå¨çš„DNSæœåŠ¡å™¨å‘èµ·é€’å½’æŸ¥è¯¢è¯·æ±‚</code>ï¼Œæˆ‘ä»¬åªä¼šä¸è¿™ä¸ªä¸æƒå¨çš„DNSæœåŠ¡å™¨äº¤äº’ï¼Œè€Œ<code>æ— ä»å¾—çŸ¥å®ƒçš„æŸ¥è¯¢ç»“æœæ˜¯å¦å¯é </code>ã€‚è¿­ä»£æŸ¥è¯¢åˆ™ä¼šç›¸å¯¹å®‰å…¨ä¸€äº›ï¼Œå› ä¸ºå®¢æˆ·ç«¯é¦–å…ˆä¼šæŸ¥åˆ°æ ¹æœåŠ¡å™¨çš„åœ°å€ï¼Œå†ä»æ ¹æœåŠ¡å™¨æŸ¥åˆ°æƒå¨æœåŠ¡å™¨ï¼Œç„¶åä»æƒå¨æœåŠ¡å™¨æŸ¥è¯¢ã€‚ã€‚ã€‚ç›´åˆ°è¿”å›æƒ³è¦çš„ç»“æœã€‚</p><p>å®ƒçš„<strong>å“åº”</strong>ä¸€èˆ¬åŒ…å«è¿™äº›å­—æ®µï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210506235701873.png" alt="image-20210506235701873"></p><p>å†æ¥èŠä¸€äº›ç”Ÿåƒ»çš„ï¼š<strong>DNSå¾ªç¯å·¥ä½œæ¨¡å¼</strong>â€”â€”</p><p>å‡å¦‚æŸä¸ªç½‘ç«™æœ‰10å°WebæœåŠ¡å™¨ï¼Œç®¡ç†å‘˜å¯ä»¥åœ¨DNSåˆ›å»º10ä¸ªåŒåè®°å½•æŒ‡å‘è¿™äº›æœåŠ¡å™¨çš„IPï¼Œç”±äºä¸åŒå®¢æˆ·ç«¯æŸ¥åˆ°çš„ç»“æœé¡ºåºä¸åŒï¼Œè€Œä¸”ä¸€èˆ¬ä¼šé€‰ç”¨ç»“æœä¸­çš„ç¬¬ä¸€ä¸ªIPï¼Œæ‰€ä»¥å¤§é‡å®¢æˆ·ç«¯å°±ä¼šè¢«å‡è¡¡çš„åˆ†é…åˆ°10å°WebæœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå°±æ˜¯<code>è´Ÿè½½å‡è¡¡</code>å’¯ã€‚</p><p>å†æ¥è¯´è¯´<strong>DNSçš„ç¼ºç‚¹</strong>ï¼Œä¸ºäººæ‰€çŸ¥çš„<code>DNSæ”¾å¤§æ”»å‡»</code>å°±æ˜¯ç¼ºé™·ä¹‹ä¸€ï¼Œå‡å¦‚æœ‰è¿™æ ·çš„åœºæ™¯ï¼šæˆ‘ä»¬ç”±åŒ…å‘å‡ºå»çš„è¯·æ±‚åªæœ‰å°‘è®¸å­—èŠ‚ï¼Œä½†æ”¶åˆ°çš„å›å¤å´é«˜è¾¾å‡ åƒå­—èŠ‚ï¼Œè¿™ç§æƒ…å†µéå¸¸å€¼å¾—æˆ‘ä»¬è­¦æƒ•ã€‚</p><h3 id="è€ç”Ÿå¸¸è°ˆçš„TCP"><a href="#è€ç”Ÿå¸¸è°ˆçš„TCP" class="headerlink" title="è€ç”Ÿå¸¸è°ˆçš„TCP"></a>è€ç”Ÿå¸¸è°ˆçš„TCP</h3><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210506235956824.png" alt="image-20210506235956824"></p><p>è¿™ä¸ªåŒ…æŠ“çš„è¿˜æ˜¯<code>æ°å¦‚å…¶åˆ†</code>çš„ï¼Œå®ƒå®Œç¾çš„æ¶µç›–äº†ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹çš„7ä¸ªåŒ…ï¼ŒåŒæ—¶å‡ºç°çš„<code>ä¹±åºé—®é¢˜</code>ä¹Ÿå°è¯äº†TCPçš„å¼ºå¤§ä¹‹å¤„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«ä»ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹æ¥åˆ†æå®ƒçš„ç»†èŠ‚â€”â€”</p><p><strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼š</p><ul><li><p><code>SYNæŠ¥æ–‡æ®µ</code></p><p>åœ¨è¿™ä¸ªå¸§ä¸­ï¼ŒåŒ…å«äº†Seq,Winï¼ŒLenç­‰å­—æ®µï¼Œæ˜¾ç„¶<code>Seqè¡¨ç¤ºéšæœºé€‰æ‹©çš„æŠ¥æ–‡æ®µçš„åˆå§‹å­—èŠ‚åç§»é‡</code>ï¼Œè€ŒWinå°±æ¯”è¾ƒæœ‰æ„æ€äº†ï¼Œæˆ‘ä»¬å¯èƒ½æ›´ç†Ÿæ‚‰å®ƒçš„å¦ä¸€ä¸ªåç§°ï¼šrwndï¼Œä¹Ÿå°±æ˜¯è¯´<code>Winå°±æ˜¯æ¥æ”¶çª—å£çš„å¤§å°</code>ï¼Œåªä¸è¿‡æè¿°å­—æ®µæœ‰åŒºåˆ«ï¼Œè‡³äºLenå­—æ®µï¼Œè§åçŸ¥æ„ï¼Œå®ƒæè¿°äº†æŠ¥æ–‡æ®µçš„é•¿åº¦ï¼Œä½†è¿™å¹¶ä¸åŒ…å«æŠ¥æ–‡å¤´éƒ¨çš„é•¿åº¦ï¼Œæ‰€ä»¥<code>Lenä¸º0åªèƒ½è¯´æ˜æ²¡æœ‰æ•°æ®ä¼ è¾“</code>ã€‚</p></li><li><p><code>SYN/ACKæŠ¥æ–‡æ®µï¼š</code></p></li></ul><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210507092224812.png" alt="image-20210507092224812"></p><p>æ˜¾ç„¶ï¼ŒTCPæŠ¥æ–‡æ®µï¼ˆä¸€ä¸ªMSSé•¿åº¦ï¼‰çš„<code>å¤´éƒ¨åŒ…å«32ä¸ªå­—èŠ‚</code>ï¼Œè€Œæˆ‘ä»¬å¸¸è¯´çš„<code>XXæŠ¥æ–‡æ®µå…¶å®å°±æ˜¯é€šè¿‡ç½®ä½æ¥æ ‡è¯†</code>çš„ã€‚</p><ul><li><p><code>ACKæŠ¥æ–‡æ®µ</code></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210507093012217.png" alt="image-20210507093012217"></p><p>æˆ‘ä»¬è¯•å›¾å†å‘ç°ä¸€äº›æ–°é¢–çš„äº‹ç‰©ï¼Œåœ¨è¿™ä¸ªçª—å£æˆ‘ä»¬çœ‹åˆ°<code>ä¸€ä¸ªåŒ…è¢«æ¥å£è¿‡æ»¤å™¨ï¼ˆç½‘å£ï¼‰æ”¶åˆ°çš„å®Œæ•´è¿‡ç¨‹</code>ï¼Œå®ƒä¾æ¬¡ç»å†äº†ç‰©ç†å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘é™…å±‚ï¼Œä¼ è¾“å±‚ã€‚</p></li></ul><p><strong>å››æ¬¡æ¡æ‰‹</strong></p><ul><li><p><code>SYN/ACKæŠ¥æ–‡æ®µï¼š</code></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210507093632419.png" alt="image-20210507093632419"></p><p>æ˜¾ç„¶ï¼Œåœ¨å‘é€è¯¥æŠ¥æ–‡æ®µå<code>ä¸å†å‘é€æ•°æ®ï¼Œä½†ä»ç„¶å¯ä»¥æ¥æ”¶æ•°æ®</code>ã€‚</p></li><li><p><code>ACKæŠ¥æ–‡æ®µ</code></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210507093904412.png" alt="image-20210507093904412"></p><p>æ˜¾ç„¶ï¼ŒACKåŒ…ä¹±åºäº†ï¼Œä½†å®ƒä»å¯ä»¥è¢«æ¥æ”¶ï¼Œè¿™ä¾èµ–äº<code>TCPçš„ç´¯è®¡ç¡®è®¤</code>ï¼Œä¹Ÿå°±æ˜¯è¯´TCPåªå…³å¿ƒå‘é€çš„æœ€å¤è€çš„çš„é‚£ä¸ªåŒ…æœ‰æ²¡æœ‰è¢«æ”¶åˆ°ï¼Œå¦‚æœ<code>æœ‰ä¹±åºçš„åŒ…åˆ°è¾¾ï¼Œå®ƒä¼šå°†å…¶æ”¾ç½®åœ¨æ¥æ”¶çª—å£è€Œä¸ç»™ä¸ç¡®è®¤</code>ï¼Œåœ¨æ”¶åˆ°æœ€å¤è€çš„çš„é‚£ä¸ªåŒ…åï¼Œå®ƒä¼šæ¥æ”¶è¯¥åŒ…å¹¶ç´¯è®¡ç¡®è®¤ï¼Œåº”ç”¨å±‚å†ä»æ¥æ”¶çª—å£ä¸­è¯»å–è¿™äº›åŒ…ã€‚</p></li></ul><p>æœ€åå†æ¥çœ‹ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼š<strong>netstat</strong></p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210507095047707.png" alt="image-20210507095047707"></p><p>è¿™æ˜¯æˆ‘ä½¿ç”¨netstatå‘½ä»¤é™ˆåˆ—å‡ºæ¥çš„TCPè¿æ¥çŠ¶æ€ï¼Œæˆ‘ä»¬å‘ç°æœ‰è¿™æ ·å‡ ç§çŠ¶æ€ï¼š</p><ol><li><p>TIME_WAIT:</p><p>TIME_WAITåˆç§°<code>2MSLçŠ¶æ€</code>(æŠ¥æ–‡æ®µæœ€å¤§å­˜æ´»æ—¶é—´)ï¼Œè¢«åŠ¨å…³é—­æ–¹åœ¨æ”¶åˆ°FINå¹¶å›å¤ACKåä¼šè¿›å…¥è¯¥çŠ¶æ€ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</p><ol><li><p>å…è®¸è€çš„é‡å¤æŠ¥æ–‡åˆ†ç»„åœ¨ç½‘ç»œä¸­æ¶ˆé€ï¼Œ<code>é¿å…æ–°è¿æ¥æ¥æ”¶è€è¿æ¥çš„æ•°æ®</code>ã€‚</p></li><li><p>ä¿è¯TCPå…¨åŒå·¥è¿æ¥çš„æ­£ç¡®å…³é—­ï¼Œ<code>é¿å…RSTæ‹’ç»æœåŠ¡</code>ã€‚</p></li></ol></li><li><p>ESTABLISHED:</p><p>è¡¨ç¤º<code>æ•°æ®ä¼ è¾“æ­£åœ¨è¿›è¡Œ</code></p></li><li><p>CLOSE_WAIT</p><p>æ­£å¸¸çŠ¶æ€ï¼Œä¼š<code>å¾ˆå¿«è½¬åŒ–ä¸ºLAST_WAIT</code>,åªå‡ºç°åœ¨è¢«åŠ¨å…³é—­æ–¹ã€‚</p></li></ol><h3 id="å†ä¹…å¼¥æ–°çš„HTTP"><a href="#å†ä¹…å¼¥æ–°çš„HTTP" class="headerlink" title="å†ä¹…å¼¥æ–°çš„HTTP"></a>å†ä¹…å¼¥æ–°çš„HTTP</h3><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210506232400891.png" alt="image-20210506232400891"></p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
            <tag> æŠ“åŒ… </tag>
            
            <tag> é€šç”¨æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œåº”ç”¨å±‚</title>
      <link href="/2021/07/12/ji-suan-ji-wang-luo-ying-yong-ceng/"/>
      <url>/2021/07/12/ji-suan-ji-wang-luo-ying-yong-ceng/</url>
      
        <content type="html"><![CDATA[<h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>åˆ°ç¬¬äºŒç« æˆ‘ä»¬å°±å°†è¿›å…¥å…·ä½“5å±‚åè®®æ ˆçš„æè¿°ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯ä»é¡¶å±‚<strong>åº”ç”¨å±‚</strong>å¼€å§‹ï¼Œæ¸è¿›åœ°å­¦ä¹ è®¡ç®—æœºç½‘ç»œã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåº”ç”¨å±‚æ˜¯åœ¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡ä¸Šå®ç°åº”ç”¨è¿›ç¨‹é€šä¿¡çš„ï¼Œä¹Ÿå°±æ˜¯<strong>å€ŸåŠ©æ“ä½œç³»ç»Ÿä½¿ç”¨Socket APIçš„æ–¹å¼</strong>å®ç°çš„ã€‚é‚£åŸºäºSocket APIåº”ç”¨å±‚éƒ½å®ç°äº†æœåŠ¡å‘¢ï¼Ÿå¸¸ç”¨çš„æœ‰<strong>Web,Httpï¼ŒFTP,Emailï¼ŒDNSï¼ŒCDN</strong>ã€‚åœ¨è®²è¿°è¿™äº›å…·ä½“åº”ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šå…ˆå¯¹<strong>é€šç”¨çš„åŸç†</strong>ä½œä»¥ä»‹ç»ã€‚ç„¶åå±•å¼€æè¿°è¿™äº›åº”ç”¨å±‚çš„æœåŠ¡ã€‚</p><p>å¥½å•¦ï¼Œäº†è§£äº†æ¦‚å†µï¼Œå°±è®©æˆ‘ä»¬å‡ºå‘å§ã€‚ã€‚ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262111663.png" alt="image-20210707205341750"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å¼€å§‹æ­£å¼çš„å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå»ºç«‹æœ‰æ„è¯†çš„å­¦ä¹ ä¹ æƒ¯ã€‚</p><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ åº”ç”¨å±‚å‘¢ï¼Ÿåº”ç”¨å±‚æˆ–è€…æ›´å…·ä½“çš„è¯´æ˜¯åº”ç”¨ç¨‹åºï¼Œ<strong>åº”ç”¨ç¨‹åºæ˜¯äº’è”ç½‘å­˜åœ¨çš„ç†ç”±</strong>ï¼Œåœ¨å…¶ä»¥ä¸‹çš„å››å±‚ï¼Œå®ƒä»¬çš„ç¡®å®ç°äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä½†è¿™äº›åŠŸèƒ½å¦‚æœä¸èƒ½è¢«é›†æˆåº”ç”¨åˆ°ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸Šï¼Œé‚£åˆ†å±‚çš„ç»“æ„å°±åªæ˜¯çº¸ä¸Šè°ˆå…µç½¢äº†ã€‚</p><p>åº”ç”¨å±‚ä¹Ÿæ˜¯ä¸æˆ‘ä»¬<strong>æ—¥å¸¸ç”Ÿæ´»æœ€è´´è¿‘</strong>çš„ä¸€å±‚ï¼Œæˆ‘ä»¬ä¸ç”µè„‘ä¸Šå¯ä»¥å®ç°<strong>äººæœºäº¤äº’</strong>çš„ç»å¤§éƒ¨åˆ†åº”ç”¨éƒ½æ˜¯åº”ç”¨å±‚çš„åº”ç”¨ã€‚</p><p>å¥½å•¦ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œæ— éæƒ³è¡¨è¾¾ä¸€ä¸ªè§‚ç‚¹ï¼Œåº”ç”¨å±‚å¾ˆé‡è¦ã€‚</p><ul><li><input checked disabled type="checkbox"> <code>æˆ‘ä»¬å°†ä»åº”ç”¨å±‚åè®®åŸç†èµ·ç¬”ï¼Œæµ“å¢¨é‡å½©çš„æè¿°Web,Http,Ftp,Email,DNS,è¿™å‡ ä¸ªåº”ç”¨å±‚åè®®ï¼Œè½ç¬”äºP2Påº”ç”¨ä¸CDNã€‚</code></li></ul><h2 id="1-1-åº”ç”¨å±‚åè®®åŸç†"><a href="#1-1-åº”ç”¨å±‚åè®®åŸç†" class="headerlink" title="1.1 åº”ç”¨å±‚åè®®åŸç†"></a>1.1 åº”ç”¨å±‚åè®®åŸç†</h2><p>ä»»ä½•å¤æ‚çš„ç³»ç»Ÿå®ç°éƒ½æ˜¯ä»ä¸€ä¸ªå°çš„çµæ„Ÿå¼‚æˆ–æƒ³æ³•å¼€å§‹çš„ã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³åšä¸€ä¸ªäº¤æ˜“æ—§ä¹¦çš„ç½‘ç«™ï¼Œå¹¶ä¸”è®©å®ƒå®é™…çš„è¿è¥ï¼Œé‚£æˆ‘ä»¬åº”è¯¥ä»å“ªé‡Œç‚¹äº®è¿™ä¸ªç«å…‰å‘¢ï¼Ÿ</p><blockquote><p>ç ”å‘ç½‘ç»œåº”ç”¨ç¨‹åºçš„<strong>æ ¸å¿ƒæ˜¯å†™å‡ºèƒ½å¤Ÿè¿è¡Œåœ¨ä¸åŒçš„ç«¯ç³»ç»Ÿå’Œé€šè¿‡ç½‘ç»œå½¼æ­¤é€šä¿¡çš„ç¨‹åº</strong>ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é‡ç‚¹å…³æ³¨å¦‚ä½•ç”¨ç¨‹åºå®ç°ç«¯ç³»ç»Ÿé—´é€šä¿¡ï¼Œè€Œç¨‹åºçš„ä¹¦å†™é¦–å…ˆå¿…é¡»æ˜¯åŸºäºæ¡†æ¶çš„ï¼Œäº’è”ç½‘åº”ç”¨çš„ä½“ç³»ç»“æ„åˆ†ä¸ºä¸¤ç§ï¼šCSæ¶æ„å’ŒP2Pæ¶æ„ã€‚</p><h3 id="CSæœåŠ¡ä½“ç³»"><a href="#CSæœåŠ¡ä½“ç³»" class="headerlink" title="CSæœåŠ¡ä½“ç³»"></a>CSæœåŠ¡ä½“ç³»</h3><p>CSæœåŠ¡ä½“ç³»æŒ‡çš„æ˜¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç»„æˆçš„æ¶æ„ã€‚</p><p><code>æœåŠ¡å™¨</code> ï¼šæœåŠ¡å™¨æ˜¯<strong>ä¸€ç›´è¿è¡Œç€</strong>çš„ï¼Œé€šè¿‡<strong>å›ºå®šIPä¸ç«¯å£å·</strong>æ¥è®¿é—®çš„ï¼Œ<strong>å¯æ‰©å±•æ€§è¾ƒå·®</strong>çš„ç»ˆç«¯è®¾å¤‡ï¼›</p><p><code>å®¢æˆ·ç«¯</code>ï¼šå®¢æˆ·ç«¯åœ¨ç½‘ç»œä¸­ä»¥<strong>åŠ¨æ€IP</strong>çš„æ–¹å¼æ ‡è¯†ï¼Œå¹¶<strong>ä¸»åŠ¨ä¸æœåŠ¡å™¨å»ºç«‹é€šä¿¡</strong>ã€‚</p><h3 id="P2PæœåŠ¡ä½“ç³»"><a href="#P2PæœåŠ¡ä½“ç³»" class="headerlink" title="P2PæœåŠ¡ä½“ç³»"></a>P2PæœåŠ¡ä½“ç³»</h3><p>åœ¨P2Pä½“ç³»ç»“æ„ä¸­ï¼Œä»»ä½•ç«¯ç³»ç»Ÿæ—¢å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ï¼Œè¿™ä¹Ÿä½¿å¾—å®ƒä»¬çš„<strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼Œåˆå› ä¸ºæ²¡æœ‰é™åˆ¶ï¼Œæ‰€ä»¥<strong>ä»»æ„ä¸¤å°ç«¯è®¾å¤‡ä¹‹é—´å¯ä»¥è¿›è¡Œé€šä¿¡</strong>ã€‚ä½†è¿™ä¹Ÿå¯¼è‡´<strong>éš¾ä»¥æœ‰æ•ˆçš„ç®¡ç†</strong>ä½“ç³»ä¸­çš„ç«¯ç³»ç»Ÿï¼Œåœ¨ç°å®ä¸­çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬<strong>è¿…é›·ï¼ŒGnutella</strong>ã€‚</p><hr><p>æˆ‘ä»¬å‘ç°ï¼ŒP2Pçš„è´Ÿè½½å‡è¡¡èƒ½åŠ›å¼ºï¼Œè€ŒCSæ¶æ„æ›´å®¹æ˜“ç»´æŠ¤ï¼Œé‚£å¯ä¸å¯ä»¥å–å…¶æ‰€é•¿ï¼Œæ¥åšä¸€ç§CSä¸P2Pä½“ç³»ç»“æ„çš„æ··åˆä½“å‘¢ï¼Ÿ</p><p>åˆ«è¯´ï¼Œè¿˜çœŸæœ‰äººå®ç°äº†ã€‚ä¸€ä¸ªå¤§å­¦ç”Ÿåšäº†ä¸€ä¸ªåä¸º<strong>Napster</strong>çš„åº”ç”¨ã€‚è¿™ä¸ªåº”ç”¨æ˜¯ç”¨æ¥æä¾›<strong>æ–‡ä»¶ä¼ è¾“</strong>çš„ã€‚ä¸€ä¸ªç”¨æˆ·æƒ³æŸ¥è¯¢è¯¥ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ–‡ä»¶ï¼Œé¦–å…ˆå¥¹çš„ä¸»æœºå‘<strong>ä¸­å¿ƒæœåŠ¡å™¨</strong>æŸ¥è¯¢èµ„æºçš„ä½ç½®ï¼Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½å°±éœ€è¦ä½¿ç”¨<strong>CSä½“ç³»</strong>ï¼Œå³æ¯å°ä¸»æœºä¸Šçº¿ä»¥åï¼Œä¼š<strong>åœ¨ä¸­å¿ƒæœåŠ¡å™¨ä¸Šæ³¨å†Œå®ƒæ‰€æ‹¥æœ‰çš„çš„èµ„æº</strong>ã€‚æŸ¥è¯¢åˆ°å­˜åœ¨è¿™ä¸ªèµ„æºåï¼Œä¸­å¿ƒæœåŠ¡å™¨ä¼šè¿”å›ç»™ä¸»æœº<strong>è¿™ä¸ªèµ„æºæ‰€åœ¨çš„ä¸»æœºä½ç½®</strong>ï¼Œæœ€åä½¿ç”¨<strong>P2Pä½“ç³»</strong>å®Œæˆ<strong>ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„æ–‡ä»¶ä¼ è¾“</strong>å³å¯ã€‚</p><hr><h3 id="åˆ†å¸ƒå¼è¿›ç¨‹é€šä¿¡"><a href="#åˆ†å¸ƒå¼è¿›ç¨‹é€šä¿¡" class="headerlink" title="åˆ†å¸ƒå¼è¿›ç¨‹é€šä¿¡"></a>åˆ†å¸ƒå¼è¿›ç¨‹é€šä¿¡</h3><p>å†å›åˆ°æ ¸å¿ƒé—®é¢˜ï¼Œåœ¨ç¡®å®šä½¿ç”¨å“ªç§ä½“ç³»çš„å‰æä¸‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è§£å†³é€šä¿¡çš„é—®é¢˜ã€‚è€Œ<strong>é€šä¿¡çš„å®ä½“æ˜¯è¿›ç¨‹</strong>ï¼Œä¹Ÿå°±æ˜¯è¦è§£å†³<strong>åˆ†å¸ƒå¼è¿›ç¨‹é—´é€šä¿¡</strong>çš„é—®é¢˜ã€‚ä½†è¿™ä¸ªé—®é¢˜æ˜¯å®½æ³›çš„ï¼Œæˆ‘ä»¬ä¸å¦¨åˆ†è€Œæ²»ä¹‹â€”â€”</p><ol><li><strong>å¦‚ä½•æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ï¼Œæ€æ ·æ¥å¯»å€ä¸€ä¸ªè¿›ç¨‹ã€‚</strong></li><li><strong>ä¼ è¾“å±‚æ˜¯å¦‚ä½•ä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡çš„ï¼Ÿ</strong></li><li><strong>å¦‚ä½•ä½¿ç”¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡æ¥å®ç°è¿›ç¨‹ä¹‹é—´çš„æŠ¥æ–‡äº¤æ¢ã€‚</strong></li></ol><p>æ¢ä¸ªè§’åº¦æ¥æ€è€ƒè¿™ä¸‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ€æ ·æ‰¾åˆ°è¦æœåŠ¡çš„ç”¨æˆ·ï¼Œè¿™ä¸ªæœåŠ¡æ€æ ·æä¾›ç»™ç”¨æˆ·ï¼Œç”¨æˆ·æ€æ ·ä½¿ç”¨è¿™ä¸ªæœåŠ¡ã€‚å¸¦ç€è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å‡ºå‘å§â€”â€”</p><h4 id="é—®é¢˜ä¸€"><a href="#é—®é¢˜ä¸€" class="headerlink" title="é—®é¢˜ä¸€"></a>é—®é¢˜ä¸€</h4><p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨<strong>32ä½çš„IPåœ°å€æ¥å”¯ä¸€çš„æ ‡è¯†ä¸€å°ä¸»æœº</strong>ï¼Œåœ¨ä¸»æœºä¹‹ä¸Šï¼Œç”¨<strong>ç«¯å£å·æ¥æ ‡è¯†ç‰¹å®šçš„è¿›ç¨‹</strong>ã€‚æ¯”å¦‚HTTP,<strong>TCPçš„é»˜è®¤ç«¯å£å·å°±ä¸º80</strong>.è¿›ç¨‹å¯ä»¥ä½¿ç”¨TCPæˆ–è€…UDPçš„ä¼ è¾“å±‚åè®®è¿›è¡Œé€šä¿¡ã€‚</p><h4 id="é—®é¢˜äºŒ"><a href="#é—®é¢˜äºŒ" class="headerlink" title="é—®é¢˜äºŒ"></a>é—®é¢˜äºŒ</h4><p>å‰é¢æåˆ°ï¼Œä¼ è¾“å±‚é€šè¿‡æ¥å£å‘åº”ç”¨å±‚æä¾›æœåŠ¡ã€‚è¿™ä¸ªæ¥å£éœ€è¦æºå¸¦ä¸€äº›é€šä¿¡å¿…é¡»çš„ä¿¡æ¯ï¼Œè¿™ç§ä¿¡æ¯è‡³å°‘åº”è¯¥åŒ…å«ï¼šè¦ä¼ è¾“çš„æŠ¥æ–‡ï¼Œè¿™ä¸ªæŠ¥æ–‡è¦ä¼ ç»™è°ï¼Œè¿™ä¸ªæŠ¥æ–‡æ˜¯ä»å“ªé‡Œä¼ è¾“æ¥çš„ã€‚</p><p>å®˜æ–¹åœ°è¯´ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“<code>SDU,IP+TCP(UDP)ç«¯å£ï¼Œå¯¹æ–¹çš„IP+TCP(UDP)ç«¯å£ã€‚</code></p><p>ä½†æ¯æ¬¡é€šè¿‡æ¥å£é€šä¿¡ä½¿å•ç‹¬ä¼ è¾“è¿™äº›ä¿¡æ¯å®åœ¨æœ‰ç‚¹ç¹çã€‚æ‰€ä»¥ï¼Œå°†è¿™äº›ä¿¡æ¯å°è£…å˜å¾—å¾ˆæœ‰å¿…è¦ã€‚</p><p><code>åº”ç”¨è¿›ç¨‹é€šè¿‡ä¸€ä¸ªç§°ä¸ºå¥—æ¥å­—çš„è½¯ä»¶æ¥å£å‘ç½‘ç»œä¸­å‘é€æŠ¥æ–‡å’Œæ¥æ”¶æŠ¥æ–‡ã€‚</code>æ‰€è°“å¥—æ¥å­—ï¼Œä¹Ÿå°±æ˜¯Socket .é‚£å¦‚ä½•æ¥ç†è§£è¿™ä¸ªsocketå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆä»å®ƒçš„ä½œç”¨å…¥æ‰‹<strong>ï¼Œsocketæ˜¯ç”¨äºæŒ‡æ˜åº”ç”¨è¿›ç¨‹ä¼šè¯çš„æœ¬åœ°æ ‡è¯†</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“ä¸ªæ¯”æ–¹æ¥å½¢è±¡åœ°ç†è§£â€”â€”</p><blockquote><p>è¿›ç¨‹å¯ç±»æ¯”äºä¸€åº§æˆ¿å­ï¼Œè€Œå®ƒçš„å¥—æ¥å­—å¯ä»¥ç±»æ¯”äºå®ƒçš„é—¨ã€‚å½“ä¸€ä¸ªè¿›ç¨‹æƒ³å‘ä½äºå¦å¤–ä¸€å°ä¸»æœºä¸Šçš„å¦ä¸€ä¸ªè¿›ç¨‹å‘é€æŠ¥æ–‡æ—¶ï¼Œå®ƒæŠŠæŠ¥æ–‡æ¨å‡ºè¯¥é—¨ï¼ˆå¥—æ¥å­—ï¼‰ã€‚è¯¥å‘é€è¿›ç¨‹å‡å®šè¯¥é—¨åˆ°å¦å¤–ä¸€ä¾§ä¹‹é—´æœ‰è¿è¾“çš„åŸºç¡€è®¾æ–½ï¼Œè¯¥è®¾æ–½å°†æŠŠæŠ¥æ–‡ä¼ é€åˆ°ç›®çš„è¿›ç¨‹çš„é—¨å£ã€‚ä¸€æ—¦è¯¥æŠ¥æ–‡æŠµè¾¾ç›®çš„ä¸»æœºï¼Œå®ƒé€šè¿‡æ¥æ”¶è¿›ç¨‹çš„é—¨ï¼ˆå¥—æ¥å­—ï¼‰ä¼ é€’ï¼Œç„¶åæ¥æ”¶è¿›ç¨‹å¯¹è¯¥æŠ¥æ–‡è¿›è¡Œå¤„ç†ã€‚</p></blockquote><p>å†ä»å®ƒçš„å«ä¹‰æ¥çœ‹ï¼Œsocketæ˜¯æ“ä½œç³»ç»Ÿç”Ÿæˆçš„ä¸€ä¸ªæ•´æ•°ï¼Œè¿™ä¸ªæ•´æ•°å¯ä»¥ç†è§£ä¸º<strong>ä¼ è¾“ä¿¡æ¯çš„å¼•ç”¨</strong>ã€‚è¿™äº›ä¿¡æ¯å…·ä½“çš„è¯´ï¼Œå³æ˜¯åŒ…å«æºIPï¼Œæºportï¼Œç›®æ ‡IPï¼Œç›®æ ‡portçš„å››å…ƒç»„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262111500.png" alt="image-20210707205357679"></p><p>æˆ‘ä»¬ä¸å¿…å…³æ³¨å››å…ƒç»„çš„ä¿¡æ¯ï¼Œè€Œåªéœ€è¦å…³æ³¨<strong>socketçš„çŠ¶æ€</strong>å³å¯ã€‚æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»ŸåŒæ ·åº”ç”¨äº†è¿™æ ·çš„æ€æƒ³ï¼Œåœ¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œ<strong>OSè¿”å›ä¸€ä¸ªæ–‡ä»¶å¥æŸ„</strong>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶çš„ç›®å½•åï¼Œæ–‡ä»¶åï¼Œè¿™æ ·ä½¿ç”¨ç®€å•ä¸”æ˜“ç®¡ç†ã€‚</p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå››å…ƒç»„æ˜¯é’ˆå¯¹TCPçš„socketä¿¡æ¯ï¼Œä½†å¯¹äºä½¿ç”¨UDPçš„æœåŠ¡æ¥è¯´ï¼Œæƒ…å†µåˆæœ‰æ‰€ä¸åŒã€‚</p><p>ä½¿ç”¨UDPæä¾›çš„æœåŠ¡æ—¶ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œå³<strong>ä¸é¢å‘è¿æ¥</strong>ï¼Œæ¯ä¸ªæŠ¥æ–‡éƒ½æ˜¯ç‹¬ç«‹ä¼ è¾“çš„ï¼Œå®ƒçš„å‰åæŠ¥æ–‡ä¹Ÿå¯èƒ½è¢«é€åˆ°<strong>ä¸åŒçš„åˆ†å¸ƒå¼è¿›ç¨‹</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºUDPçš„socketï¼Œå³åªéœ€æŒ‡æ˜æŠ¥æ–‡å°†å‘å¾€ä½•å¤„ï¼Œè€Œä¸å¿…å…³å¿ƒæŠ¥æ–‡æ¥è‡ªå“ªé‡Œã€‚æ‰€ä»¥<strong>Socketä¸­å°è£…å¯¹æ–¹çš„IPåŠç«¯å£</strong>å³å¯ï¼Œ</p><h3 id="é—®é¢˜ä¸‰"><a href="#é—®é¢˜ä¸‰" class="headerlink" title="é—®é¢˜ä¸‰"></a>é—®é¢˜ä¸‰</h3><p>é—®é¢˜ä¸‰éœ€è¦å›ç­”çš„æ˜¯æ€æ ·çº¦å®šä¼ è¾“çš„æ ¼å¼ï¼ŒåŠ¨ä½œã€‚è¿™å°±éœ€è¦å®šä¹‰<strong>åº”ç”¨å±‚çš„åè®®</strong>ï¼Œé‚£è¿™ä¸ªåè®®çš„éµå®ˆæ˜¯å¦‚ä½•ä½“ç°çš„å‘¢ï¼Ÿé€šè¿‡<strong>ç¼–åˆ¶ç¨‹åº</strong>ï¼Œä½¿ç”¨<strong>API</strong>æ¥è°ƒç”¨ç½‘ç»œåŸºç¡€è®¾æ–½æ¥æä¾›é€šä¿¡æœåŠ¡ä¼ æŠ¥æ–‡ï¼Œè§£ææŠ¥æ–‡ï¼Œå®ç°åº”ç”¨æ—¶åºç­‰ã€‚</p><p>åº”ç”¨å±‚çš„åè®®æ˜¯å¦‚ä½•å®šä¹‰çš„å‘¢ï¼Ÿå®ƒéœ€è¦è§£å†³çš„å…·ä½“åŒ…å«å“ªäº›é—®é¢˜ï¼Ÿ</p><ul><li><input checked disabled type="checkbox"> <p><code>åº”ç”¨å±‚çš„åè®®å®šä¹‰äº†è¿è¡Œåœ¨ä¸åŒç«¯ç³»ç»Ÿä¸Šçš„åº”ç”¨è¿›ç¨‹å¦‚ä½•ç›¸äº’äº¤æ¢æŠ¥æ–‡</code>ã€‚</p></li><li><input checked disabled type="checkbox"> <p><code>å®ƒéœ€è¦åŒ…å«æŠ¥æ–‡çš„ç±»å‹ï¼ŒæŠ¥æ–‡ç±»å‹å¯¹åº”çš„è¯­æ³•ï¼ŒæŠ¥æ–‡ä¸­å­—æ®µçš„è¯­ä¹‰ï¼ŒæŠ¥æ–‡æ‰€å¯¼è‡´çš„åŠ¨ä½œã€‚</code></p></li></ul><h2 id="1-2-Webä¸http"><a href="#1-2-Webä¸http" class="headerlink" title="1.2 Webä¸http"></a>1.2 Webä¸http</h2><p>æˆ‘ä»¬åœ¨å­¦ä¹ å·¥ä½œæ—¶æ€»ä¼šæ— å¯é¿å…åœ°è®¿é—®webé¡µé¢äº†ï¼Œä¸€ä¸ªé”®ç›˜ï¼Œä¸€å£°æ•²å‡»ï¼Œä¸€ä¸ªå¥‡è¿¹ã€‚è¿™å¥‡è¿¹çš„èƒŒåä¼¼ä¹<code>æœ‰è¿¹å¯å¾ª</code>â€”â€”</p><p>åœ¨æˆ‘ä»¬æµè§ˆçš„ç½‘é¡µä¸­ï¼ŒåŒ…å«å›¾æ–‡ï¼ŒåŠ¨ç”»ï¼Œè§†é¢‘ç­‰ï¼Œä¸ºäº†æ›´å¥½åœ°æè¿°è¿™äº›äº‹ç‰©ï¼Œå®ƒä»¬æœ‰äº†é€šç”¨çš„åå­—ï¼š<strong>å¯¹è±¡</strong>ã€‚å¯¹è±¡å¯ä»¥è®¤ä¸ºæ˜¯<strong>HTMLé¡µé¢çš„æœ€å°ç»„æˆå•å…ƒ</strong>ã€‚ç›´è§‚åœ°çœ‹ï¼Œåœ¨æˆ‘ä»¬æµè§ˆä¸€ä¸ªé¡µé¢æ—¶ï¼Œä¸åŒçš„å¯¹è±¡å¹¶éåŒæ—¶å‡ºç°ï¼Œæ˜¾ç„¶å®ƒä»¬æœ‰å¯èƒ½æ¥è‡ªä¸åŒçš„ç›®çš„åœ°ï¼Œé‚£å¦‚ä½•æ¥<strong>æ ‡è¯†ç”±å¯¹è±¡ç»„æˆçš„HTMLé¡µé¢</strong>å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦<strong>URL</strong>(ç»Ÿä¸€èµ„æºå®šä½ç¬¦)ï¼ŒURLè¡¨ç¤ºèµ„æºçš„<strong>åœ°ç‚¹</strong>ï¼Œå³èµ„æºæ¥è‡ªäºäº’è”ç½‘ä¸­å“ªä¸ªIPã€‚å¦‚æœåªä½¿ç”¨URLæ ‡è¯†èµ„æºä½ç½®ï¼Œæœªå…æœ‰ç‚¹å®½æ³›ã€‚æ‰€ä»¥å¼•å…¥<strong>URI</strong>(ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)å°±åŠ¿åœ¨å¿…è¡Œäº†ã€‚</p><p>URIç”¨å­—ç¬¦ä¸²æ ‡è¯†èµ„æºçš„<strong>ä½ç½®</strong>ã€‚åˆ™URLæ˜¯URIçš„å­é›†ï¼Œå…·ä½“çœ‹ä¸‹ç¬¦åˆ<strong>RFCæ ‡å‡†</strong>çš„URIæ ¼å¼â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262111959.png" alt="image-20210707205411737"></p><ul><li><code>åè®®æ–¹æ¡ˆåï¼š</code>æ›´å¤šè¢«ä½¿ç”¨çš„æ˜¯httpï¼Œä½†ä½¿ç”¨<strong>SSLå®‰å…¨ä¼ è¾“å±‚</strong>æœåŠ¡çš„<strong>https</strong>å¿…ç„¶å°†å–ä»£http.</li><li><code>ç™»å½•ä¿¡æ¯ï¼š</code>å³ç”¨æˆ·è®¤è¯ï¼Œé»˜è®¤æ˜¯åŒ¿åè®¿é—®ã€‚</li><li><code>æœåŠ¡å™¨åœ°å€ï¼š</code>å³æœåŠ¡å™¨çš„åŸŸåã€‚</li><li><code>æœåŠ¡å™¨ç«¯å£å·ï¼š</code> è¿™é‡Œçš„80ç«¯å£æŒ‡çš„å°±æ˜¯TCPæœåŠ¡ã€‚</li><li><code>æ–‡ä»¶è·¯å¾„ï¼š</code> ä¸èƒ½å†å…·ä½“çš„æè¿°äº†ã€‚</li><li><code>æŸ¥è¯¢å­—ç¬¦ä¸²ï¼š</code> å³å‚æ•°ï¼Œæ¯”å¦‚ç‚¹å¼€æŸä»¶å•†å“çš„è¯¦æƒ…é¡µæ—¶éœ€è¦é™„å¸¦è¯¥å•†å“çš„IDä¸è¯¥å®¢æˆ·çš„IDã€‚</li><li><code>ç‰‡æ®µæ ‡è¯†ç¬¦ï¼š</code> æ— é¢˜ã€‚</li></ul><p>äº†è§£äº†é¡µé¢çš„ç»„æˆï¼Œä»¥åŠèµ„æºå¦‚ä½•æ ‡è¯†ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹é¡µé¢æ˜¯å¦‚ä½•å±•ç¤ºç»™ç”¨æˆ·çš„â€”â€”</p><ol><li>æµè§ˆå™¨é€šè¿‡HTMLè¡¨å•æˆ–è¶…é“¾æ¥è¯·æ±‚æŒ‡å‘ä¸€ä¸ª<code>åº”ç”¨ç¨‹åºçš„URL</code>ã€‚</li><li>æœåŠ¡å™¨æ”¶å‘åˆ°ç”¨æˆ·çš„è¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨æ‰§è¡Œå·²æ¥å—åˆ›å»ºçš„æŒ‡å®šåº”ç”¨ç¨‹åºã€‚</li><li>åº”ç”¨ç¨‹åºé€šå¸¸æ˜¯åŸºäºç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œæ‰§è¡Œæ‰€éœ€è¦çš„æ“ä½œã€‚</li><li>åº”ç”¨ç¨‹åºæŠŠç»“æœæ ¼å¼åŒ–ä¸ºç½‘ç»œæœåŠ¡å™¨å’Œæµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„æ–‡æ¡£ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„<code>HTMLç½‘é¡µ</code>ã€‚</li><li>ç½‘ç»œæœåŠ¡å™¨æœ€åå°†ç»“æœè¿”å›åˆ°æµè§ˆå™¨ä¸­ã€‚</li><li>æµè§ˆå™¨ä½¿ç”¨è§£é‡Šå™¨è§£æé¡µé¢ã€‚</li></ol><p>è¿™ä¹ˆå¤šçš„æ­¥éª¤ï¼Œæƒ³æ¥åº”è¯¥ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œè¿™ä¹Ÿæ˜¯èµ·åˆwebè¢«æˆç§°<strong>World wide wait</strong>çš„åŸå› ï¼Œå¦‚ä»Šç½‘ç»œèŠ‚ç‚¹çš„å¢åŠ ä¸å¸¦å®½çš„æé«˜è®©ç½‘é¡µçš„ä¼ è¾“æœ‰äº†ä¸€ä¸é£ä¸€èˆ¬çš„æ„Ÿè§‰~</p><h3 id="HTTPåè®®çš„å¼•å…¥"><a href="#HTTPåè®®çš„å¼•å…¥" class="headerlink" title="HTTPåè®®çš„å¼•å…¥"></a>HTTPåè®®çš„å¼•å…¥</h3><p>æˆ‘ä»¬çŸ¥é“åº”ç”¨å±‚çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦éµå¾ªè§„èŒƒï¼Œé‚£webåº”ç”¨ç¨‹åºéœ€è¦éµå¾ªä»€ä¹ˆè§„èŒƒå‘¢ï¼Ÿ</p><p>è‡ªç„¶æ˜¯HTTPåè®®å’¯ï¼ŒHTTPåè®®å…¨ç§°æ˜¯<strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®</strong>ã€‚å®ƒçš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³<strong>æ–‡æœ¬ä¼ è¾“</strong>çš„é—®é¢˜ã€‚ä¸€è·¯èµ°æ¥ç»å†äº†<strong>HTTP1.0,HTTP1.1,HTTP2.0</strong>.å¯è§ç‰ˆæœ¬æ›´è¿­å¼‚å¸¸ç¼“æ…¢ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€HTTPä¸å—äººé’çã€‚ç›¸åï¼Œç”±äºå®ƒæœ¬èº«éå¸¸ç®€å•ã€‚å¼€å‘è€…åœ¨å®ƒçš„åŸºç¡€ä¸Šå¼€å‘å‡ºäº†å¾ˆå¤šåº”ç”¨æ–¹æ³•å¹¶æŠ•å…¥ä½¿ç”¨ï¼Œç°åœ¨<strong>HTTPåè®®å·²ç»è¶…å‡ºWebæ¡†æ¶çš„å±€é™</strong>ï¼Œè¢«ç”¨äºå„ç§å„æ ·çš„åœºæ™¯ä¸­ã€‚å¯è§ï¼Œç®€å•ä¹Ÿæ„å‘³ç€ä¸°å¯Œçš„å¯æ‰©å±•æ€§ã€‚</p><h3 id="ç½‘ç»œåŸºç¡€TCP-IP"><a href="#ç½‘ç»œåŸºç¡€TCP-IP" class="headerlink" title="ç½‘ç»œåŸºç¡€TCP/IP"></a>ç½‘ç»œåŸºç¡€TCP/IP</h3><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£HTTPï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹TCP/IPã€‚</p><p>æˆ‘ä»¬æ‰€ç”¨çš„ç½‘ç»œéƒ½æ˜¯åœ¨TCP/IPåè®®æ—çš„åŸºç¡€ä¸Šè¿è¡Œçš„ï¼Œå®ƒçº¦å®šäº†<strong>ç«¯ç³»ç»Ÿé—´ç›¸äº’é€šä¿¡çš„è§„åˆ™</strong>ã€‚å› ä¸ºåé¢çš„å°ç»“ä¼šæ¶‰åŠåˆ°å…·ä½“çš„TCP/IPåè®®æ—ï¼Œè¿™é‡Œæˆ‘ä»¬åªç»™å‡ºä¸€ä¸ªæ¡†æ¶â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112579.png" alt="image-20210707205429415"></p><p>åœ¨TCP/IPåè®®æ—æä¾›çš„ç½‘ç»œåŸºç¡€ä¸Šï¼ŒHTTPæŒ‰éƒ¨å°±ç­åœ°ä¼ è¾“ç€æŠ¥æ–‡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†å‰¥èŒ§æŠ½ä¸åœ°<strong>è§£ææŠ¥æ–‡ä¼ è¾“</strong>çš„è¿‡ç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112161.png" alt="image-20210707205540218"></p><p>åœ¨è¿™å¼ å›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°HTTPåè®®çš„èŒè´£åœ¨äº<strong>ç”Ÿæˆç›®æ ‡WebæœåŠ¡å™¨çš„è¯·æ±‚æŠ¥æ–‡ï¼ŒåŠå¯¹WebæœåŠ¡å™¨è¯·æ±‚å†…å®¹çš„å¤„ç†</strong>ã€‚</p><h3 id="HTTPæŠ¥æ–‡"><a href="#HTTPæŠ¥æ–‡" class="headerlink" title="HTTPæŠ¥æ–‡"></a>HTTPæŠ¥æ–‡</h3><p>HTTPæŠ¥æ–‡éƒ½æ˜¯ä»¥<strong>ASCIIç </strong>çš„å½¢å¼ä¸äººäº¤äº’ï¼Œè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„æ ¼å¼æ˜¯è¿™æ ·çš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112330.png" alt="image-20210707205553641"></p><h3 id="HTTPè¯·æ±‚æŠ¥æ–‡"><a href="#HTTPè¯·æ±‚æŠ¥æ–‡" class="headerlink" title="HTTPè¯·æ±‚æŠ¥æ–‡"></a>HTTPè¯·æ±‚æŠ¥æ–‡</h3><p>è¿™é‡Œç»™å‡ºä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ¥å‰–æå®ƒçš„æ¯ä¸€ä¸ªå­—æ®µâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112015.png" alt="image-20210707205631561"></p><p>è¯·æ±‚è¡Œä¸­åŒ…æ‹¬è¯·æ±‚çš„æ–¹æ³•ï¼Œä½¿ç”¨çš„åè®®åŠç‰ˆæœ¬ã€‚</p><ul><li><code>Host:</code>è¯·æ±‚èµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œæ¯”å¦‚WWW.Baidu.com</li><li><code>User-Agent:</code>HTTPå®¢æˆ·ç«¯ç¨‹åºçš„ä¿¡æ¯</li><li><code>Accept:</code>ç”¨æˆ·ä»£ç†å¯ä»¥å¤„ç†çš„<strong>åª’ä½“ç±»å‹</strong>ã€‚</li><li><code>Accept-Language:</code>ä¼˜å…ˆçš„è¯­è¨€ã€‚</li><li><code>Accept-Encoding:</code>ä¼˜å…ˆçš„å†…å®¹ç¼–ç ã€‚</li><li><code>DNT:</code>è¯·æ±‚è¿½è¸ªå­—æ®µï¼Œå³<strong>ç”¨æˆ·ä¸å¸Œæœ›è¢«è¿½è¸ª</strong>ã€‚</li><li><code>Connection:</code>ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼š<strong>æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µ</strong>å’Œ<strong>æŒä¹…è¿æ¥</strong>çš„çŠ¶æ€ç®¡ç†</li><li><code>Pragma:</code>æŠ¥æ–‡çš„<strong>æŒ‡ä»¤</strong>ã€‚</li><li><code>Cache-Control:</code>æ§åˆ¶<strong>æµè§ˆå™¨ç«¯ç¼“å­˜</strong>çš„è¡Œä¸º</li></ul><p>å…¶ä»–çš„é¦–éƒ¨è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚</p><h3 id="HTTPå“åº”æŠ¥æ–‡"><a href="#HTTPå“åº”æŠ¥æ–‡" class="headerlink" title="HTTPå“åº”æŠ¥æ–‡"></a>HTTPå“åº”æŠ¥æ–‡</h3><p>åŒæ ·çš„ï¼Œé€šè¿‡ä¸€ä¸ªå°ä¾‹å­æˆ‘ä»¬ç®€è¦è®¤è¯†ä¸€ä¸‹HTTPå“åº”æŠ¥æ–‡â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112197.png" alt="image-20210707205648733"></p><p>é¦–å…ˆæ˜¯çŠ¶æ€è¡Œï¼Œå®ƒçš„ä¿¡æ¯åŒ…æ‹¬åè®®ç±»å‹ï¼Œç‰ˆæœ¬ï¼ŒçŠ¶æ€ç ï¼ŒçŠ¶æ€ç å¯¹åº”çš„è§£é‡Šã€‚</p><p>å†æ¥çœ‹å­—æ®µçš„è§£æï¼š</p><ul><li><code>Date:</code>æœåŠ¡å™¨ç«¯<strong>åˆ›å»ºæŠ¥æ–‡çš„æ—¥æœŸæ—¶é—´</strong>ï¼Œå¿…é€‰é¡¹ã€‚</li><li><code>Server:</code>ç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯å½“å‰<strong>æœåŠ¡å™¨ä¸Šå®‰è£…çš„HTTPæœåŠ¡å™¨åº”ç”¨ç¨‹åº</strong>çš„ä¿¡æ¯ã€‚</li><li><code>Last-Modified:</code>èµ„æº<strong>æœ€ç»ˆä¿®æ”¹çš„æ—¶é—´</strong>ã€‚</li><li><code>ETag:</code>èµ„æºçš„åŒ¹é…ä¿¡æ¯ï¼Œåªæœ‰å½“If-Matchçš„å­—æ®µå€¼ä¸ETagå€¼<strong>åŒ¹é…æ—¶ï¼ŒæœåŠ¡å™¨æ‰ä¼šæ¥æ”¶è¯·æ±‚</strong>ã€‚</li><li><code>Accept-Ranges:</code>æ˜¯å¦æ¥æ”¶<strong>å­—èŠ‚èŒƒå›´è¯·æ±‚</strong>ï¼Œå½“æˆ‘ä»¬åªéœ€è¦ä¸€éƒ¨åˆ†æ•°æ®æ—¶ï¼Œå¯ä»¥åŠ è¿™ä¸ªå‚æ•°æ¥å‡å°‘ç½‘ç»œé“¾è·¯çš„å¸¦å®½å‹åŠ›ã€‚</li><li><code>Content-Length:</code>å®ä½“ä¸»ä½“çš„é•¿åº¦ï¼Œå®ƒçš„<strong>å•ä½æ˜¯å­—èŠ‚</strong>ï¼ŒTCPæä¾›çš„æ˜¯å­—èŠ‚æµçš„æœåŠ¡ï¼Œä»–ä¸ä¼šç»´æŠ¤ä¿¡æ¯çš„è¾¹ç•Œï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›è¾…åŠ©ä¿¡æ¯ã€‚</li><li><code>Connection:</code>è¿æ¥çš„çŠ¶æ€ï¼Œå¯é€‰Keep-aliveå’ŒClose</li><li><code>Connect-Type:</code> å®ä½“ç±»å‹</li></ul><p>æˆ‘ä»¬å†ä»å±‚é—´æ¥å£çš„è§’åº¦æ¥çœ‹Webæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ã€‚ã€‚</p><h3 id="Webçš„å±‚é—´æ¥å£Socket"><a href="#Webçš„å±‚é—´æ¥å£Socket" class="headerlink" title="Webçš„å±‚é—´æ¥å£Socket"></a>Webçš„å±‚é—´æ¥å£Socket</h3><p>HTTPåè®®ä½¿ç”¨æ˜¯<strong>åŸºäºTCPçš„ä¼ è¾“å±‚æœåŠ¡</strong>ï¼Œåˆ™æœåŠ¡å™¨çš„<strong>80å·ç«¯å£</strong>ä¼šå§‹ç»ˆå¤„äºç­‰å¾…çŠ¶æ€ï¼Œå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯çš„<strong>å®ˆæŠ¤socket</strong>åœ¨æ¥æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œä¼šç”Ÿæˆä¸€ä¸ªè¯¥è¯·æ±‚<strong>ç‹¬æœ‰çš„socket</strong>ï¼Œè¿™ä¸ªsocketè¡¨ç¤ºæœåŠ¡å™¨ç«¯ä¸ç‰¹å®šå®¢æˆ·ç«¯çš„<strong>ä¼šè¯å…³ç³»</strong>ã€‚</p><h3 id="æ— çŠ¶æ€åè®®"><a href="#æ— çŠ¶æ€åè®®" class="headerlink" title="æ— çŠ¶æ€åè®®"></a>æ— çŠ¶æ€åè®®</h3><p>HTTPåè®®æ˜¯ä¸€ä¸ª<strong>æ— çŠ¶æ€</strong>çš„åè®®ï¼Œå®ƒä¸ä¼šç»´æŠ¤å†å²ä¿¡æ¯ï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤Ÿ<strong>æ”¯æŒçš„ç”¨æˆ·æ•°é‡å¤š</strong>ï¼Œä½†æ¯”å¦‚è¯´åœ¨ç™»å½•ç½‘é¡µä»¥åï¼Œç»´æŠ¤ç™»å½•çŠ¶æ€åˆæ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><p>é‚£å¦‚ä½•ä½¿å®ƒå¯ä»¥è®°å½•çŠ¶æ€å‘¢ï¼Ÿå¯¹HTTPåè®®æœ¬èº«åšæ–‡ç« æœªå…<strong>ä¸æ˜¯å¼€å‘è€…çš„åˆè¡·</strong>ï¼Œæ‰€ä»¥ç”±<strong>å®¢æˆ·ç«¯</strong>æ¥ç»´æŠ¤å†å²ä¿¡æ¯ï¼Œç”±äºè¦ç»´æŠ¤çš„å†å²ä¿¡æ¯æ¯”è¾ƒå¤šï¼Œè¿™é‡Œä¸ç”¨æˆ·äº¤äº’çš„ä¸æ˜¯ä¿¡æ¯æœ¬èº«ï¼Œè€Œæ˜¯æŒ‡å‘è¿™äº›ä¿¡æ¯çš„å¼•ç”¨ï¼Œå°ç”œé¥¼<strong>Cookie</strong>å°±è¿™æ ·åº”è¿è€Œç”Ÿäº†ã€‚</p><p>æˆ‘ä»¬é€šè¿‡ä¸‹å›¾æ¥è®¤è¯†ä¸€ä¸‹Cookieæœºåˆ¶â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112353.png" alt="image-20210707205705315"></p><h3 id="æŒä¹…è¿æ¥"><a href="#æŒä¹…è¿æ¥" class="headerlink" title="æŒä¹…è¿æ¥"></a>æŒä¹…è¿æ¥</h3><p>HTTP1.0åè®®æ˜¯ä¸æ”¯æŒæŒä¹…è¿æ¥çš„ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å‘é€æŠ¥æ–‡æ—¶ï¼Œéƒ½éœ€è¦å»ºç«‹TCPè¿æ¥â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262112356.png" alt="image-20210707205856780"></p><p>è¿™æ ·æ¯æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šé€ æˆ<strong>æ— è°“çš„TCPè¿æ¥å’Œæ–­å¼€</strong>ï¼Œå¢åŠ é€šä¿¡é‡çš„æ¶ˆè€—ã€‚</p><p>å› æ­¤åœ¨HTTP1.1ä¸­å¼•å…¥äº†æŒä¹…è¿æ¥ï¼ŒæŒä¹…è¿æ¥æ˜¯æŒ‡å¦‚æœ<strong>æ²¡æœ‰ä¸€æ–¹æ˜ç¡®è¦æ±‚æ–­å¼€è¿æ¥æ—¶ï¼Œè¿™ä¸ªè¿æ¥ä¼šä¸€ç›´ä¿å­˜</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒä¹…è¿æ¥æ˜¯<code>åŒæ–¹ç«¯ç³»ç»Ÿéœ€è¦è®¾ç½®çš„</code>ï¼Œè€Œä¸æ˜¯åœ¨é€šä¿¡è¿‡ç¨‹ä¸­è®¾å®šã€‚</p><p>æŒä¹…è¿æ¥ä½¿å¤šæ•°è¯·æ±‚ä»¥<strong>ç®¡çº¿åŒ–æ–¹å¼</strong>å‘é€ç§°ä¸ºå¯èƒ½ã€‚è¿™å°±å¯ä»¥å®ç°<strong>é«˜å¹¶å‘å‘é€</strong>ã€‚ç±»ä¼¼äº<strong>æµæ°´çº¿</strong>ã€‚</p><h3 id="HTTPé¦–éƒ¨å­—æ®µçš„åº”ç”¨"><a href="#HTTPé¦–éƒ¨å­—æ®µçš„åº”ç”¨" class="headerlink" title="HTTPé¦–éƒ¨å­—æ®µçš„åº”ç”¨"></a>HTTPé¦–éƒ¨å­—æ®µçš„åº”ç”¨</h3><p>æˆ‘ä»¬é€šè¿‡<strong>æœç´¢å¼•æ“</strong>æ¥è·å–æƒ³è¦çš„webé¡µé¢ï¼Œé‚£æœç´¢å¼•æ“æ˜¯å¦‚ä½•æ‰¾åˆ°webé¡µé¢çš„å‘¢ï¼Ÿå®ƒä¼šé€šè¿‡ç½‘ç»œ<strong>çˆ¬è™«</strong>çˆ¬å–åˆ°HTTPçš„<strong>é¦–éƒ¨å­—æ®µ</strong>ï¼Œä½¿ç”¨é¦–éƒ¨å­—æ®µä¸­çš„å…³é”®ä¿¡æ¯æ¥å»ºç«‹<strong>ç´¢å¼•</strong>ï¼Œå®ç°é«˜æ•ˆæŸ¥æ‰¾ã€‚</p><h3 id="HTTPè¯·æ±‚è¡Œä¸çŠ¶æ€è¡Œæµ…æ"><a href="#HTTPè¯·æ±‚è¡Œä¸çŠ¶æ€è¡Œæµ…æ" class="headerlink" title="HTTPè¯·æ±‚è¡Œä¸çŠ¶æ€è¡Œæµ…æ"></a>HTTPè¯·æ±‚è¡Œä¸çŠ¶æ€è¡Œæµ…æ</h3><ul><li><code>è¯·æ±‚è¡Œï¼š</code>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æè¿°ç”¨äºå‘ŠçŸ¥æœåŠ¡å™¨æ„å›¾çš„æ–¹æ³•ï¼š<ul><li>å¦‚getç”¨äºè¯·æ±‚è®¿é—®å·²è¢«URIè¯†åˆ«çš„èµ„æºï¼›</li><li>POSTæ–¹æ³•ç”¨æ¥ä¼ è¾“å®ä½“çš„ä¸»ä½“ï¼›</li><li>PUTç”¨äºä¼ è¾“æ–‡ä»¶;</li><li>HEADç”¨äºè¯·æ±‚æŠ¥æ–‡é¦–éƒ¨</li></ul></li><li><code>çŠ¶æ€è¡Œï¼š</code><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262113733.png" alt="image-20210707205842449"></li><li></li></ul><h3 id="Webç¼“å­˜"><a href="#Webç¼“å­˜" class="headerlink" title="Webç¼“å­˜"></a>Webç¼“å­˜</h3><p>å‡è®¾æœ‰è¿™æ ·ä¸€ç§éœ€æ±‚ï¼Œå®¢æˆ·è¯·æ±‚æœåŠ¡å™¨èµ„æºæ—¶å› ä¸ºé“¾è·¯å¤ªé•¿å¯¼è‡´å“åº”æ—¶é—´æ…¢ï¼Œè€æ¿è¦æ±‚ä½ è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ—¶æ ¹æ®ä½ çš„ç»éªŒæœ‰ä¸¤ç§å¤„ç†æ–¹å¼â€”â€”</p><ol><li><strong>å¢åŠ é“¾è·¯å¸¦å®½</strong>ï¼Œå¯è¡Œï¼Œä½†ä½ è¢«è¾é€€äº†ï¼Œå› ä¸ºè§£å†³æ–¹å¼å¤ªåœŸè±ªï¼›</li><li><strong>åœ¨å±€åŸŸç½‘å†…éƒ¨å¢åŠ ç¼“å­˜èŠ‚ç‚¹</strong>ã€‚ä¹Ÿå°±æ˜¯Webä»£ç†ï¼Œè´­ç½®ä¸€å°æœåŠ¡å™¨å°±å¥½äº†ï¼Œè¿˜å¯ä»¥é€šè¿‡å¢åŠ ç¼“å­˜çš„å‘½ä¸­ç‡æ¥<strong>å‡è½»æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œé™ä½ç½‘ç»œçš„é€šä¿¡é‡</strong>ï¼Œçˆ½æ­ªæ­ªã€‚è€æ¿ç›´å‘¼å†…è¡Œã€‚</li></ol><p>ç¼“å­˜åº”è¯¥æ˜¯å­¦ä¹ çš„ä¸€å¤§çƒ­ç‚¹äº†ï¼Œä½†å‡¡ç¼“å­˜ï¼Œå°±éœ€è¦æ³¨æ„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚é¦–å…ˆæˆ‘ä»¬è¦èƒ½å‘ç°ç¼“å­˜æ˜¯å¦ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯<strong>é€šè¿‡åŠ æ—¶é—´å­—æ®µ</strong>ã€‚å¦‚æœå­—æ®µå€¼è¶…æ—¶äº†ï¼ŒWebä»£ç†å°±ä¸¢å¼ƒç¼“å­˜å†…å®¹ã€‚</p><hr><h3 id="åŠ é¤â€”â€”HTTPS"><a href="#åŠ é¤â€”â€”HTTPS" class="headerlink" title="åŠ é¤â€”â€”HTTPS"></a>åŠ é¤â€”â€”HTTPS</h3><p>å…ˆæ¥çœ‹å¼ å›¾ï¼Œå¯ä»¥çœ‹åˆ°åœ¨URLçš„å‰é¢æœ‰ä¸€ä¸ª<strong>é”çš„æ ‡è¯†</strong>ï¼Œè€Œæˆ‘ä»¬æ‰€ç†Ÿè¯†çš„HTTPæ˜¯ä¸åŠ å¯†çš„ï¼Œæ‰€ä»¥å‘¢ï¼Œè¿™é‡Œçš„é”å®é™…ä¸Šæ ‡è¯†ä½¿ç”¨çš„åè®®æ˜¯HTTPSï¼Œæˆ‘ä»¬çš„æ•…äº‹ä¹Ÿå°†ä»è¿™å¼ å›¾å¼€å§‹å•¦ã€‚ã€‚ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262113511.png" alt="image-20210408101342730"></p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒHTTPæœ€å¤§çš„ç‰¹ç‚¹ä¸ä¼˜ç‚¹å°±æ˜¯<strong>ç®€å•æ˜“ç”¨</strong>ï¼Œä½†ç®€å•ä¹Ÿå¿…ç„¶å¸¦æ¥ä¸€äº›é—®é¢˜ï¼š</p><ul><li><p><code>æ˜æ–‡ä¼ è¾“</code>ï¼šç”±äºHTTPæœ¬èº«ä¸å…·å¤‡åŠ å¯†çš„åŠŸèƒ½ï¼Œè‡ªç„¶å°±ä¸å¯èƒ½å¯¹é€šä¿¡æ•´ä½“(å³é€šä¿¡è¯·æ±‚ä¸é€šä¿¡å†…å®¹)è¿›è¡ŒåŠ å¯†ï¼Œè€Œä¸åŠ å¯†çš„HTTPæœ‰è¢«çªƒå¬çš„é£é™©ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨<strong>wireSharkæŠ“åŒ…å·¥å…·</strong>ï¼Œå°±ä¼šæ”¶è·æ»¡æ»¡â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262113278.png" alt="image-20210408102109238"></p><p>è¿™å¯ä¸æ€ä¹ˆé è°±ï¼Œé‚£æ€æ ·å®ç°åŠ å¯†å‘¢ï¼Ÿè€ƒè™‘åˆ°å‘ç”Ÿæ•°æ®æ³„éœ²çš„ä½ç½®å¯èƒ½æ˜¯<strong>é€šä¿¡æºæˆ–è€…é€šä¿¡é“¾è·¯</strong>ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç—‡ä¸‹è¯ï¼Œå¯¹<strong>é€šä¿¡é“¾è·¯</strong>è¿›è¡ŒåŠ å¯†ï¼Œè¿™å°±å¼•å‡ºäº†<strong>SSLå®‰å…¨å¥—æ¥å­—å±‚/TLSå®‰å…¨å±‚ä¼ è¾“åè®®</strong>ã€‚å½“ç„¶å¯¹é€šä¿¡å†…å®¹æœ¬èº«åŠ å¯†ä¹Ÿæ˜¯ä¸€ç§å¯è¡Œçš„idea,è¿™é‡Œæˆ‘ä»¬å…ˆç€é‡ä»‹ç»SSLã€‚</p><p>SSLé‡‡ç”¨ä¸€ç§å«åšå…¬å¼€å¯†é’¥åŠ å¯†çš„åŠ å¯†å¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬å¸¸è¯´çš„ä½¿ç”¨å¯†é’¥åŠ å¯†ï¼ŒæŒ‡çš„æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨å¯†é’¥åŠ å¯†ï¼ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨åŒä¸€å¯†é’¥è§£å¯†ï¼Œä½†è¿™æ ·æ˜¾ç„¶é¢ä¸´ä¸€ç§å›°å¢ƒï¼šå¦‚æœæœ‰ç¬¬ä¸‰æ–¹å¾—åˆ°å¯†é’¥ï¼Œé‚£å°±å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºã€‚è¿™é‡Œå¯ä»¥å°è¯•å®¢æˆ·ç«¯ä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†ï¼Œè€ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨ç§æœ‰ç§˜é’¥è§£å¯†çš„ç­–ç•¥ã€‚</p><p>ä¸¤ç§ç­–ç•¥å„æœ‰åƒç§‹ï¼Œé‚£åˆ°åº•ä½¿ç”¨å“ªä¸€ç§å‘¢ï¼Ÿ</p><p>HTTPSè¡¨ç¤ºæˆ‘å…¨éƒ½è¦ï¼ŒHTTPSä½¿ç”¨æ··åˆåŠ å¯†æœºåˆ¶ï¼Œåœ¨<strong>äº¤æ¢å¯†é’¥ç¯èŠ‚ä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼</strong>ï¼Œä¹‹åçš„<strong>å»ºç«‹é€šä¿¡äº¤æ¢æŠ¥æ–‡ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†æ–¹å¼</strong>ã€‚</p></li><li><p><code>èº«ä»½éªŒè¯</code>ï¼šHTTPåè®®ä¸­çš„è¯·æ±‚ä¸å“åº”ä¸ä¼šå¯¹åŒæ–°æ–¹è¿›è¡Œç¡®è®¤ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•äººéƒ½å¯ä»¥å‘èµ·è¯·æ±‚ï¼Œå¦‚æœå‘èµ·å¤šæ¬¡<strong>æ¶æ„è¯·æ±‚ï¼Œç½‘ç«™è´Ÿè½½å°±ä¼šå¢å¤§</strong>ï¼Œæ˜¾ç„¶éœ€è¦æœºåˆ¶æ¥ç¡®è®¤é€šä¿¡æ–¹çš„èº«ä»½ã€‚</p><p>SSLä¸ä»…æä¾›åŠ å¯†å¤„ç†ï¼Œè¿˜ä½¿ç”¨äº†ç§°ä¹‹ä¸º<strong>è¯ä¹¦</strong>çš„æ‰‹æ®µæ¥èº«ä»½è®¤è¯ï¼Œè¯ä¹¦ç”±é è°±çš„ç¬¬ä¸‰æ–¹æœºæ„é¢å‘ã€‚</p></li><li><p><code>æŠ¥æ–‡å®Œæ•´æ€§</code>ï¼šåœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¯·æ±‚æˆ–è€…å“åº”çš„å†…å®¹é­åˆ°ä¸­é—´äººçš„ç¯¡æ”¹ï¼Œå°±ä¼šäº‹ä¸æ„¿è¿ï¼Œé‚£å¦‚ä½•æ¥é˜²æ­¢ç¯¡æ”¹å‘¢ï¼Ÿæ˜¾ç„¶éœ€è¦ä¸€ç§æŒ‡ä»£å†…å®¹çš„å”¯ä¸€æ ‡è¯†ï¼Œ<strong>MD5å’ŒSHA</strong>å°±æ˜¯å¸¸ç”¨çš„æ–¹æ³•ï¼Œ</p></li></ul><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡ºHTTPSçš„æ˜ç¡®å®šä¹‰äº†ï¼š</p><blockquote><p>HTTPS = HTTP + åŠ å¯† + è®¤è¯ +å®Œæ•´æ€§ä¿æŠ¤</p></blockquote><h2 id="1-3-FTP-amp-Email"><a href="#1-3-FTP-amp-Email" class="headerlink" title="1.3 FTP&amp;Email"></a>1.3 FTP&amp;Email</h2><p>åœ¨å¼€å‘åº”ç”¨æ—¶ï¼ŒFTPçš„èº«å½±å¹¶ä¸å¤šï¼Œå”¯ä¸€ä¸€æ¬¡è§è¯å®ƒçš„èƒŒå½±æ˜¯åœ¨ä½¿ç”¨<strong>Mavenæ‰¾åŒ…</strong>çš„æ—¶å€™ï¼Œç»™æˆ‘çš„ç›´è§‚æ„Ÿè§‰å°±æ˜¯ï¼Œè¿™ä¸å°±æ˜¯<strong>æ–‡ä»¶ç³»ç»Ÿ</strong>å˜›~</p><p>é‰´äºå®ƒå¤ªå¤è€äº†ï¼Œæˆ‘ä»¬åªæ˜¯ç®€è¦æè¿°ä¸€ä¸‹å®ƒå·¥ä½œçš„æµç¨‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114883.png" alt="image-20210707205929522"></p><ol><li>FTPçš„æœåŠ¡å™¨å§‹ç»ˆå®ˆæŠ¤åœ¨21å·ç«¯å£å¤„ç­‰å¾…è¿æ¥ï¼ŒFTPçš„å®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼Œ<strong>åŸºäºTCPçš„æ§åˆ¶è¿æ¥</strong>å»ºç«‹ã€‚</li><li><strong>ç”¨æˆ·èº«ä»½è®¤è¯</strong>ï¼Œè®¤è¯åè®¿é—®æ–‡ä»¶ç›®å½•ï¼Œä¹Ÿå› æ­¤éœ€è¦ç»´æŠ¤å†å²ä¿¡æ¯ï¼Œå³<strong>FTPæ˜¯æœ‰çŠ¶æ€çš„åè®®</strong>ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œèº«ä»½è®¤è¯æ˜¯ä½¿ç”¨<strong>æ˜æ–‡ä¼ è¾“</strong>ï¼Œç€å®ä¸å¯é ã€‚</li><li>æœåŠ¡å™¨<strong>ä¸»åŠ¨</strong>ä¸å®¢æˆ·ç«¯çš„20å·ç«¯å£å»ºç«‹<strong>æ•°æ®è¿æ¥</strong>ï¼Œå®¢æˆ·ç«¯ä¸‹è½½æ•°æ®ï¼Œå®Œç»“ã€‚</li></ol><hr><p>è¿™æ˜¯ä¸€ä¸ªä¹ˆå¾—æ„Ÿæƒ…çš„åˆ†å‰²çº¿~</p><p>Emailä¸åŒäºFTPï¼Œå®ƒåœ¨å·¥ä½œäº¤æµï¼Œé¢è¯•ç®€å†æäº¤ç­‰æ–¹é¢<strong>åº”ç”¨éå¸¸å¹¿æ³›</strong>ã€‚Emailç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š<strong>ç”¨æˆ·ä»£ç†</strong>ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯è½¯ä»¶ï¼Œ<strong>é‚®ä»¶æœåŠ¡å™¨</strong>ï¼Œ<strong>åè®®</strong>ã€‚</p><p>æˆ‘ä»¬åŒæ ·å¤ç°EMailçš„å·¥ä½œæµç¨‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114959.png" alt="image-20210707205938954"></p><ol><li>é¦–å…ˆç”¨æˆ·åœ¨ç”¨æˆ·ä»£ç†ä¸­å†™å¥½é‚®ä»¶ï¼Œç”¨æˆ·ä»£ç†é€šè¿‡<strong>STMPåè®®</strong>å°†é‚®ä»¶ä¼ è¾“åˆ°<strong>ç”¨æˆ·é‚®ç®±æœåŠ¡å™¨çš„é˜Ÿåˆ—</strong>ä¸­ã€‚</li><li>é‚®ç®±æœåŠ¡å™¨å†å°†é‚®ä»¶ä»é˜Ÿåˆ—ä¸­æå–å‡ºæ¥ï¼Œä½¿ç”¨SMTPåè®®å°†é‚®ä»¶å‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</li><li>ç›®æ ‡æœåŠ¡å™¨å°†é‚®ä»¶å­˜å‚¨åœ¨<strong>ç›®æ ‡ç”¨æˆ·çš„é‚®ç®±ç›®å½•</strong>ä¸­ã€‚</li><li>ç›®æ ‡ç”¨æˆ·é€šè¿‡<strong>POP3åè®®</strong>ä»é‚®ç®±ä¸­æ‹‰å–é‚®ä»¶é˜…è¯»ã€‚</li></ol><p>Emailä½¿ç”¨<strong>7ä½çš„ASCIIç </strong>ç¼–ç ï¼Œè€Œä¸­æ–‡éœ€è¦ä¸¤ä¸ªå­—èŠ‚æè¿°ï¼Œå¦‚æœä½¿ç”¨7ä½ASCIIç ä¼ è¾“æ—¶å°±ä¼šä¹±ç ã€‚ä¸ºäº†é˜²æ­¢ä¹±ç ï¼Œä½¿ç”¨<strong>MIMEå¤šåª’ä½“æ‰©å±•åè®®</strong>ï¼Œè¿™æ˜¯åŸºäº<strong>Base64</strong>çš„ç¼–ç ï¼Œå³<strong>å°†ASCIIç åºåˆ—åŒ–</strong>å†ä¼ è¾“ã€‚</p><p>è€Œä½¿ç”¨POP3çš„æ‹‰å–åè®®ï¼Œæ˜¾ç„¶ä¸åº”è¯¥è®°å½•é‚®ä»¶éƒ½ç»ç”±è°æ‰‹ï¼Œåœ¨ä»€ä¹ˆæ—¶é—´å†™å¥½è¿™ç§æ•æ„Ÿä¿¡æ¯ï¼Œæ‰€ä»¥å®ƒè¢«è®¾è®¡ä¸º<strong>æ— çŠ¶æ€åè®®</strong>ã€‚</p><h2 id="1-5-DNS"><a href="#1-5-DNS" class="headerlink" title="1.5 DNS"></a>1.5 DNS</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>DNSä¸åŒäºå…¶ä»–åº”ç”¨å±‚åè®®ï¼Œå®ƒæ˜¯ç”¨æ¥<strong>ä¸ºå…¶ä»–åº”ç”¨åè®®æä¾›æœåŠ¡</strong>çš„åè®®ï¼ŒDNSä¸ºäººæ‰€çŸ¥çš„åŠŸèƒ½æ˜¯<strong>å®ŒæˆåŸŸååˆ°IPåœ°å€çš„è½¬æ¢</strong>ï¼Œä¸”éå¸¸<strong>å¥å£®</strong>ã€‚è€Œè¿™ä¸ªè½¬åŒ–å®è´¨ä¸Šæ˜¯ç”±<strong>DNSç³»ç»Ÿ</strong>æ¥å®Œæˆçš„ã€‚</p><p>ç³»ç»Ÿçš„è®¾è®¡æ˜¯ä¸ºäº†è§£å†³å¤æ‚é—®é¢˜ï¼Œè€ŒDNSç³»ç»Ÿè§£å†³çš„æ ¸å¿ƒé—®é¢˜å°±æ˜¯å¦‚ä½•å®ŒæˆåŸŸååˆ°IPåœ°å€çš„è½¬æ¢ï¼Œæˆ‘ä»¬å†å°†è¿™ä¸ªé—®é¢˜æ‹†è§£ä¸ºä¸‰ä¸ªå°é—®é¢˜â€”â€”</p><h3 id="1-å¦‚ä½•å‘½åä¸€å°è®¾å¤‡ï¼Ÿ"><a href="#1-å¦‚ä½•å‘½åä¸€å°è®¾å¤‡ï¼Ÿ" class="headerlink" title="1.å¦‚ä½•å‘½åä¸€å°è®¾å¤‡ï¼Ÿ"></a>1.å¦‚ä½•å‘½åä¸€å°è®¾å¤‡ï¼Ÿ</h3><p>å¦‚æœæˆ‘ä»¬æƒ³è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œé‚£å°±éœ€è¦åœ¨åœ°å€è¾“å…¥æ ä¸­è¾“å…¥ç½‘ç«™çš„URIï¼Œè€ŒURIä¸­æ˜¾ç„¶éœ€è¦<strong>åŒ…å«æ˜“è®°çš„ç”¨æ¥æ ‡è¯†ç«¯ç³»ç»Ÿä½ç½®</strong>çš„ä¸œè¥¿ï¼Œè¿™å°±æ˜¯<strong>åŸŸå</strong>ï¼ŒåŸŸåæ˜¯ä¸€ä¸ªç«¯ç³»ç»Ÿçš„<strong>åˆ«å</strong>ï¼Œæ˜“äºè®°å¿†ï¼Œæ˜¾ç„¶<a href="http://www.baidu.comæ¯”èµ·çº¯æ•°å­—çš„æ–¹å¼äº¤äº’èµ·æ¥å‹å¥½åœ°å¤šã€‚" target="_blank" rel="noopener">www.baidu.comæ¯”èµ·çº¯æ•°å­—çš„æ–¹å¼äº¤äº’èµ·æ¥å‹å¥½åœ°å¤šã€‚</a></p><p>æ—¢ç„¶æœ‰åˆ«åï¼Œé‚£å°±ä¸€å®šæœ‰æ­£è§„åç§°ï¼Œä¹Ÿå°±æ˜¯IPåœ°å€.IPåœ°å€è¢«ç”¨æ¥è¡¨ç¤ºä¸€å°ä¸»æœºï¼ŒåŒæ—¶ä¹Ÿç”¨äºå¯»å€ã€‚IPåœ°å€åˆ†ä¸ºIPV4å’ŒIPV6ä¸¤ç§ã€‚IPV4ä½¿ç”¨ç‚¹åˆ†åè¿›åˆ¶çš„ä¹¦å†™ä¹ æƒ¯ï¼Œå…±æœ‰32ä½ï¼ŒIPV6åˆ™æœ‰128ä½ï¼Œå¯æ ‡è¯†çš„ä¸»æœºæ•°é‡éå¸¸å¤šã€‚</p><p>æ˜¾ç„¶ï¼Œæ—¥å¸¸ä½¿ç”¨æ—¶åŸŸåæ˜¾ç„¶æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼ŒåŸŸååœ¨åˆæœŸä½¿ç”¨æ²¡æœ‰åˆ†å±‚çš„ç»“æ„ï¼Œå› ä¸ºä¸»æœºæ•°é‡å°‘ï¼Œä¸ä¼šå‡ºç°é‡åï¼Œåªéœ€è¦ç»´æŠ¤ä¸€å¼ æ˜ å°„è¡¨å°±è¡Œäº†ï¼Œç»´æŠ¤èµ·æ¥æ¸¸åˆƒæœ‰ä½™ã€‚</p><p>ä½†å½“ä¸»æœºæ•°æŒ‡æ•°çº§å¢å¤šä»¥åï¼Œé‡åå˜å¾—ä¸å¯é¿å…ï¼Œ<strong>åˆ†å±‚å¼çš„å‘½å</strong>å¼€å§‹å¤§åŠ¿æ‰€è¶‹ã€‚è¿™æ—¶åªç»´æŠ¤ä¸€å¼ è¡¨ä¹Ÿæ˜¾ç„¶ä¸å¤Ÿäº†ï¼Œ<strong>åˆ†å¸ƒå¼æ•°æ®åº“</strong>è¢«å¼•å…¥ã€‚è€Œæ—¢ç„¶æ˜¯åº”ç”¨å±‚åè®®ï¼Œè‡ªç„¶ä¼šä½¿ç”¨åˆ°ä¼ è¾“å±‚çš„æœåŠ¡ï¼ŒDNSä½¿ç”¨çš„å°±æ˜¯ç›¸å¯¹ç®€å•çš„<strong>UDPåè®®</strong>ï¼Œå¯è§ç½‘ç»œæ ¸å¿ƒçš„åŠŸèƒ½å…¶å®æ˜¯åœ¨ç½‘ç»œè¾¹æ²¿å®ç°çš„ï¼Œç½‘ç»œæ ¸å¿ƒåªè¦ä¿è¯ä¼ è¾“å°±okäº†ã€‚</p><p>å†è¯´å›<strong>å±‚æ¬¡æ ‘çŠ¶åŒ–</strong>çš„å‘½åï¼Œé¦–å…ˆä»æ ¹å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯é¡¶çº§åŸŸåï¼Œé¡¶çº§åŸŸåå¯¹åº”çš„æ˜¯é¡¶çº§æœåŠ¡å™¨ï¼Œå…¨ä¸–ç•Œåªæœ‰13å°é¡¶çº§ï¼Œå³<strong>æ ¹æœåŠ¡å™¨</strong>ã€‚è€Œä¸”<strong>ä¸­å›½å¹¶æ²¡æœ‰</strong>ï¼Œæœ‰äººæ‹…å¿§ä¸‡ä¸€æ ¹æœåŠ¡å™¨è¢«é»‘äº†ï¼Œç½‘ç»œå®‰å…¨æ˜¯å¦å˜çš„ä¸å¯é äº†ã€‚ä½†å®é™…ä¸Šè¿™å¯¹ç½‘ç»œå®‰å…¨å¹¶æ²¡æœ‰ä»€ä¹ˆå¤§çš„å½±å“ã€‚åˆ†å¸ƒå¼è¶³ä»¥è§£å†³è¿™ä¸€çœ‹èµ·æ¥å¾ˆæ£˜æ‰‹çš„é—®é¢˜ã€‚åœ¨è¿™äº›é¡¶çº§åŸŸä¸‹ï¼Œåˆæœ‰å¾ˆå¤š<strong>å­åŸŸ</strong>ï¼Œå­åŸŸçš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼Œå³<strong>é€šç”¨çš„</strong>å’Œ<strong>å›½å®¶çš„</strong>ã€‚æœ€ç»ˆæ¼”åŒ–åˆ°æ ‘å¶ï¼Œå°±æ˜¯<strong>ä¸»æœº</strong>å•¦ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114702.png" alt="image-20210707210048205"></p><p>å¦‚æœå°†DNSçš„å‘½åè§„åˆ™å¹³é¢åŒ–çš„è¯ï¼Œå®ƒå¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114976.png" alt="image-20210707210104057"></p><p>å‡å¦‚æˆ‘ä»¬è¦è®¿é—®è€¶é²å¤§å­¦AIå­¦é™¢çš„ç½‘ç«™ã€‚é€šä¿—çš„æ–¹å¼æ˜¯é¦–å…ˆæ‰¾åˆ°é¡¶çº§åŸŸåï¼Œå†æ‰¾åˆ°é€šç”¨åŸŸåeduï¼Œç„¶åæ‰¾åˆ°eduä¸‹çš„yale,æ¥ç€å‘ç°csï¼Œæœ€åå®šä½åˆ°AIã€‚ä»å®ƒå®½æ³›çš„å‘½åæ¡†æ¶æ¥çœ‹ï¼ŒåŸŸåé€‚ç”¨äºä»»ä½•ä¸»æœºï¼Œè¿™å°±æ„å‘³ç€<strong>åŸŸåä¸ä»£è¡¨åœ°åŸŸï¼Œå®ƒåªæ˜¯ä¸€ä¸ªé€»è¾‘çš„æ¦‚å¿µ</strong>ï¼Œè€Œéç‰©ç†ä¸Šçš„ã€‚</p><h3 id="2-å¦‚ä½•è§£æè½¬æ¢å…³ç³»ï¼Ÿ"><a href="#2-å¦‚ä½•è§£æè½¬æ¢å…³ç³»ï¼Ÿ" class="headerlink" title="2.å¦‚ä½•è§£æè½¬æ¢å…³ç³»ï¼Ÿ"></a>2.å¦‚ä½•è§£æè½¬æ¢å…³ç³»ï¼Ÿ</h3><p>è§£æå…³ç³»ç›´è§‚åœ°çœ‹ï¼Œå¯ä»¥ç»´æŠ¤ä¸€å¼ æ˜ å°„è¡¨ï¼Œä½†è€ƒè™‘åˆ°æ€§èƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸“é—¨çš„åå­—æœåŠ¡å™¨æ¥å­˜å‚¨è¿™æ ·çš„ä¸€å¼ è¡¨ï¼Œä½†å½“ä¸»æœºå˜å¤šæ—¶ï¼Œ<strong>ä¸€ä¸ªæœåŠ¡å™¨å®¹æ˜“å®•æœºï¼Œä¸”ä¸å¥½ç»´æŠ¤</strong>ã€‚</p><p>è¿™æ—¶éœ€è¦æ¼”åŒ–ä¸ºåˆ†å¸ƒå¼çš„åå­—æœåŠ¡å™¨ï¼Œè€Œå®Œæˆå…¶åŠŸèƒ½çš„å®é™…ä¸Šæ˜¯<strong>åˆ†å¸ƒå¼çš„æ•°æ®åº“</strong>ã€‚</p><p>åœ¨<strong>æ¯ä¸€ä¸ªåŒºåŸŸZone</strong>å†…éœ€è¦ç»´æŠ¤ä¸€ä¸ªåå­—æœåŠ¡å™¨ï¼Œå®ƒå­˜å‚¨æœ‰è¿™ä¸ªåŒºåŸŸå†…æ‰€æœ‰ä¸»æœºIpä¸åŸŸåçš„<strong>æ˜ å°„å…³ç³»</strong>ï¼ŒåŒæ—¶å®ƒä¹Ÿåº”è¯¥æ»¡è¶³<strong>å¯»å€</strong>çš„è¦æ±‚ï¼Œè¿™å°±éœ€è¦ç»´æŠ¤æŒ‡å‘è·¯å¾„çš„æŒ‡é’ˆã€‚å› å…¶å®Œå¤‡çš„åŠŸèƒ½ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºæƒå¨æœåŠ¡å™¨ã€‚</p><p>é‚£æƒå¨æœåŠ¡å™¨æ˜¯å¦‚ä½•ç»´æŠ¤è½¬æ¢å…³ç³»çš„å‘¢ï¼Ÿé€šè¿‡æ•°æ®åº“ä¸­çš„<strong>èµ„æºè®°å½•</strong>ã€‚</p><p>èµ„æºè®°å½•ä½¿ç”¨<strong>RRæ ¼å¼</strong>æ¥ç»´æŠ¤<strong>åŸŸååˆ°IP</strong>(æˆ–è€…å…¶ä»–æ ‡è¯†)çš„æ˜ å°„å…³ç³»ã€‚å®ƒåŒ…å«å¦‚ä¸‹å­—æ®µâ€”â€”</p><ul><li><code>Domain_name:</code>åŸŸåï¼Œæ²¡ä»€ä¹ˆå¯è¯´çš„~</li><li><code>Ttl:</code>ç”Ÿå­˜æ—¶é—´ï¼Œå‡å¦‚æˆ‘ç°åœ¨è¦è®¿é—®ä¸­å›½ä»¥å¤–çš„ä¸€ä¸ªåŸŸåï¼Œæˆ‘æ‰€åœ¨åŒºåŸŸçš„æƒå¨æœåŠ¡å™¨ä¼šæ²¿è·¯å¾„è·å–åˆ°è¿™ä¸ªåŸŸåä¸IPçš„æ˜ å°„å…³ç³»ï¼Œå¹¶å°†å…¶æ˜¯ä½œä¸ºç¼“å­˜è®°å½•ä¸‹æ¥ï¼Œä½†å®ƒæ˜¾ç„¶ä¸å¸¸ç”¨ï¼Œæ‰€ä»¥å­˜æ´»æ—¶é—´ä»…æœ‰<strong>ä¸¤å¤©</strong>ã€‚è€Œå¯¹äºåŒºåŸŸå†…çš„åŸŸåï¼Œè€ƒè™‘åˆ°ä½œä¸ºè€å¤§çš„èŒè´£ï¼Œä¼š<strong>é•¿æœŸç¼“å­˜</strong>åŒºåŸŸå†…å°å¼Ÿçš„æ˜ å°„å…³ç³»ã€‚</li><li><code>Class:</code>åªè¦æ˜¯å› ç‰¹ç½‘èŒƒå›´å†…çš„ï¼Œå€¼éƒ½ä¸ºIN,åœ¨ç‰©è”ç½‘æ—¶ä»£ï¼ŒNOT INå°†æˆä¸ºä¸€ç§å¯èƒ½ã€‚</li><li><code>Value:</code>å¯ä»¥æ˜¯æ•°å­—ï¼ŒåŸŸåæˆ–è€…ASCIIç ã€‚</li><li><code>Type:</code>èµ„æºè®°å½•çš„ç±»å‹ï¼Œå®ƒåŒ…æ‹¬ï¼š<ul><li><code>A</code>ï¼šnameä¸ºä¸»æœºï¼ŒValueä¸ºIPåœ°å€</li><li><code>CNMAE</code>:nameä¸ºè§„èŒƒåå­—çš„åˆ«åï¼Œvalueæ˜¯è§„èŒƒåå­—ã€‚</li><li><code>NS</code>:nameä¸ºåŸŸåï¼Œvalueä¸ºè¯¥åŸŸåæƒå¨æœåŠ¡å™¨çš„åå­—</li><li><code>MX</code>:valueä¸ºnameå¯¹åº”çš„é‚®ä»¶æœåŠ¡å™¨çš„åå­—ã€‚</li></ul></li></ul><h4 id="DNSç³»ç»Ÿçš„å·¥ä½œåŸç†"><a href="#DNSç³»ç»Ÿçš„å·¥ä½œåŸç†" class="headerlink" title="DNSç³»ç»Ÿçš„å·¥ä½œåŸç†"></a>DNSç³»ç»Ÿçš„å·¥ä½œåŸç†</h4><ul><li>åº”ç”¨é¦–å…ˆè°ƒç”¨è§£æå™¨ï¼Œè§£æå™¨ä½œä¸ºå®¢æˆ·å‘åå­—æœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢æŠ¥æ–‡ï¼Œè¯¥æŸ¥è¯¢æŠ¥æ–‡è¢«å°è£…åœ¨UDPæ®µä¸­ã€‚</li><li>åå­—æœåŠ¡å™¨è¿”å›å“åº”æŠ¥æ–‡ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114850.png" alt="image-20210707210144625"></p><p>é‚£åå­—æœåŠ¡å™¨æ˜¯å¦‚ä½•è·å–åˆ°è¿œç«¯çš„IPæ˜ å°„å…³ç³»å‘¢ï¼Ÿ</p><p>è¿™é‡Œè¦åˆ†æœ‰ç¼“å­˜å’Œæ²¡ç¼“å­˜ä¸¤ç§æƒ…å†µè®¨è®ºâ€”â€”</p><ol><li><code>å­˜åœ¨ç¼“å­˜</code>ï¼šç›´æ¥è¿”å›</li><li><code>æ²¡æœ‰ç¼“å­˜</code>ï¼š<ol><li><code>é€’å½’æŸ¥è¯¢</code>ï¼Œå³ä»æ ¹æœåŠ¡å™¨å¼€å§‹é€’ï¼Œå†ä»ç›®æ ‡æœåŠ¡å™¨çš„æƒå¨æœåŠ¡å™¨å¼€å§‹å½’</li><li><code>è¿­ä»£æŸ¥è¯¢</code>ï¼Œå³ä¾æ¬¡éå†æ¯ç§å¯èƒ½ã€‚</li></ol></li></ol><h3 id="3-å¦‚ä½•ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Ÿ"><a href="#3-å¦‚ä½•ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Ÿ" class="headerlink" title="3.å¦‚ä½•ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Ÿ"></a>3.å¦‚ä½•ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Ÿ</h3><p>å…³ç³»çš„ç»´æŠ¤æ— éå¢åˆ æ”¹æŸ¥ï¼Œå‡å¦‚è¦åœ¨ä¸Šçº§åŸŸçš„åå­—æœåŠ¡å™¨ä¸­å¢åŠ ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œé‚£å°±å¾€æ•°æ®åº“ä¸­<strong>æ·»åŠ ä¸¤æ¡è®°å½•</strong>ï¼Œåˆ†åˆ«æŒ‡å‘<strong>æ–°å¢çš„å­åŸŸçš„åŸŸå</strong>å’Œ<strong>åŸŸåæœåŠ¡å™¨çš„åœ°å€</strong>ã€‚è¿™æ ·åœ¨ä¸‹æ¬¡è®¿é—®æ—¶ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ä½†ç¼“å­˜æœ‰å¯èƒ½å‡ºç°<strong>ä¸ä¸€è‡´</strong>çš„é—®é¢˜ï¼Œå› è€Œåœ¨æŸäº›æ—¶å€™åˆ é™¤ä¹Ÿæ˜¯å¿…è¦çš„ã€‚</p><h3 id="æŠ¥æ–‡ç»“æ„"><a href="#æŠ¥æ–‡ç»“æ„" class="headerlink" title="æŠ¥æ–‡ç»“æ„"></a>æŠ¥æ–‡ç»“æ„</h3><p>æœ€åï¼Œç®€å•çœ‹ä¸‹DNSåè®®çš„æŠ¥æ–‡â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114238.png" alt="image-20210707210157098"></p><h2 id="1-6-P2Påº”ç”¨"><a href="#1-6-P2Påº”ç”¨" class="headerlink" title="1.6 P2Påº”ç”¨"></a>1.6 P2Påº”ç”¨</h2><p>å› ä¸ºæˆ‘åœ¨æ¯•ä¸šåæ‰€å°†ä»äº‹çš„å·¥ä½œå’ŒP2Pçš„ä½“ç³»æ¶æ„<strong>å¤§æŠµæ˜¯æ²¡æœ‰å¤ªå¤šäº¤é›†</strong>çš„ï¼Œæ‰€ä»¥è¿™ä¸€å°èŠ‚çš„çŸ¥è¯†ç‚¹æˆ‘åª<strong>ç®€è¦æè¿°åŸç†</strong>ã€‚</p><p>å…ˆå…¥ä¸ºä¸»åœ°è¯´ï¼ŒP2Pçš„äº§ç”Ÿæ˜¯ä¸ºäº†è§£å†³CSä½“ç³»çš„ç¼ºé™·ï¼Œå³<strong>æœåŠ¡å™¨å‹åŠ›å¤§ï¼Œè´Ÿè½½å‡è¡¡èƒ½åŠ›å¼±ï¼Œå¯é æ€§ä¸å¥½</strong>ã€‚è€Œç›¸åº”çš„ï¼ŒP2Pä½“ç³»åœ¨è¿™äº›æ–¹é¢æ˜¯è¦ç•¥èƒœä¸€ç­¹çš„ã€‚</p><p>P2Pä½“ç³»å¸¸å¸¸è¢«åº”ç”¨åœ¨<strong>æ–‡ä»¶åˆ†å‘ï¼Œæµåª’ä½“</strong>ï¼Œåœ¨è¿™äº›åº”ç”¨åœºæ™¯ä¸­ï¼ŒpeerèŠ‚ç‚¹çš„å‹åŠ›æ¯”è¾ƒè½»ã€‚</p><p>ä¸ºäº†å½¢è±¡æè¿°P2Pä½“ç³»ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™å¼ å›¾â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262114534.png" alt="image-20210707210209024"></p><p>è¿™å¼ å›¾æè¿°äº†ä¸¤ç§ä½“ç³»ç»“æ„éšç€å®¢æˆ·ç«¯æ•°é‡çš„å¢åŠ ï¼Œä¸‹è½½æ–‡ä»¶æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒCSä½“ç³»å‘ˆç°å‡ºçº¿æ€§çš„å…³ç³»ï¼Œè€ŒP2Påˆ™æ˜¯ç±»ä¼¼äºå¯¹æ•°å…³ç³»ã€‚</p><p>å¦‚æœå•çº¯ä»ä¸‹è½½æ€§èƒ½æ–¹é¢æ¥çœ‹çš„è¯ï¼ŒP2Pæ—©å°±é£é¡ä¸€æ—¶äº†ã€‚ä½†å› ä¸ºå®ƒéš¾ä»¥ç®¡ç†çš„ç¼ºé™·ï¼Œå¯¼è‡´äº†å®ƒåº”ç”¨çš„å¹¶ä¸å¤šã€‚</p><p>æˆ‘ä»¬æ¥äº†è§£é€šç”¨çš„P2Pçš„ç®¡ç†æ¨¡å¼â€”â€”</p><ul><li><p><code>éç»“æ„åŒ–çš„P2Pï¼š</code>é‚»å±…èŠ‚ç‚¹é—´å­˜åœ¨äº’é€šæœ‰æ— çš„å…³ç³»ï¼Œå½¢æˆ<strong>è¦†ç›–ç½‘</strong>ã€‚å…¸å‹çš„åº”ç”¨æ˜¯<strong>æ–‡ä»¶å…±äº«</strong>ï¼Œå³é€šè¿‡<strong>é›†ä¸­ç›®å½•</strong>çš„æ–¹å¼ï¼Œç”¨æˆ·é¦–å…ˆé”®å…¥<strong>å…³é”®å­—</strong>ï¼Œç„¶å<strong>ç›®å½•æœåŠ¡å™¨</strong>å‘Šè¯‰ç”¨æˆ·æœ‰å“ªäº›èŠ‚ç‚¹æ‹¥æœ‰è¯¥èµ„æºï¼Œç”¨æˆ·å»ºç«‹<strong>TCPè¿æ¥</strong>ï¼Œå†å»è¯·æ±‚æŸèŠ‚ç‚¹çš„èµ„æºã€‚æ‹¥æœ‰è¯¥èµ„æºåï¼Œå°†è‡ªå·±æ‹¥æœ‰è¯¥èµ„æºçš„ä¿¡æ¯<strong>ä¸ŠæŠ¥ç›®å½•æœåŠ¡å™¨</strong>ï¼Œæµç¨‹ç»“æŸã€‚</p><p>ä½†é›†ä¸­å¼çš„ç›®å½•ï¼Œå­˜åœ¨<strong>å•ç‚¹æ•…éšœï¼Œæ€§èƒ½ç“¶é¢ˆï¼Œä¾µçŠ¯ç‰ˆæƒ</strong>çš„é—®é¢˜ã€‚æ­¤å¤–ï¼ŒæŸ¥è¯¢æ—¶é‡‡ç”¨<strong>æ´ªæ³›</strong>çš„æ–¹å¼æœ‰å¯èƒ½å¯¼è‡´<strong>è¯·æ±‚æ— é™æ”¾å¤§</strong>ï¼Œæ‰€ä»¥æœ‰å¿…è¦è®¾ç½®<strong>TTLæˆ–ç”±èŠ‚ç‚¹ç»´æŠ¤å†å²ä¿¡æ¯</strong>é¿å…æˆç¯ã€‚å› æ­¤é™¤äº†é›†ä¸­å¼çš„ç›®å½•ä»¥å¤–ï¼Œè¿˜å­˜åœ¨<strong>å®Œå…¨åˆ†å¸ƒå¼</strong>å’Œ<strong>æ··åˆä½“</strong>çš„æœºåˆ¶ã€‚æ··åˆä½“æœºåˆ¶åˆ©ç”¨èŠ‚ç‚¹çš„<strong>ä¸å‡åŒ€æ€§</strong>ï¼ŒæŸä¸ªå¯¹ç­‰ç‚¹è¦ä¹ˆæ˜¯å±äºä¸€ä¸ªç»„æˆ–è€…ç»„é•¿ï¼ŒæŸ¥è¯¢æ—¶ï¼Œä¸ŠæŠ¥ç»„é•¿ï¼Œå¦‚æœç»„å†…æœ‰ï¼Œç›´æ¥å»è¯·æ±‚ï¼Œç»„å†…æ²¡æœ‰çš„è¯ï¼Œåˆ™äº¤ç”±ç»„é•¿ä¼ é€’ç»™å…¶ä»–ç»„é•¿ã€‚</p><p>é‚£å¦‚ä½•æ‰¾åˆ°å”¯ä¸€åœ°é‚£ä¸ªæ–‡ä»¶å‘¢ï¼Œé¦–å…ˆé€šè¿‡è¾“å…¥æ¡†çš„<strong>æè¿°ä¿¡æ¯</strong>æ‰¾åˆ°è¯¥æ–‡ä»¶çš„<strong>å“ˆå¸Œå€¼</strong>ï¼Œç„¶åå°†å“ˆå¸Œå€¼ä½œä¸º<strong>å”¯ä¸€Id</strong>æŸ¥è¯¢è¿”å›ç»“æœ</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„æ¨¡å¼ï¼Œ<strong>BitTorrow</strong>ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ–‡ä»¶è¢«åˆ†ä¸ºå¾ˆå¤šå—ï¼Œæ¯ä¸ªèŠ‚ç‚¹å„æŒä¸€å—ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä¸€ä¸ªä½å›¾ï¼Œå³<strong>BitMap</strong>ï¼Œ0æ ‡è¯†ä¸æ‹¥æœ‰æ­¤èµ„æºï¼Œ1è¡¨ç¤ºæ‹¥æœ‰æ­¤èµ„æºã€‚ä¸ºäº†ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‹¥æœ‰ç›¸åŒçš„èµ„æºï¼Œéœ€è¦<strong>å®šæœŸæ´ªæ³›</strong>ã€‚</p></li><li><p><code>ç»“æ„åŒ–çš„P2Pï¼š</code>èŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»æ˜¯å¾€å¾€æˆ<strong>ç½‘çŠ¶æˆ–è€…ç¯çŠ¶</strong>çš„ã€‚åœ¨æ›´æ–°èŠ‚ç‚¹æ—¶å§‹ç»ˆç»´æŠ¤èŠ‚ç‚¹é—´çš„å…³ç³»ï¼Œå³æ ¹æ®å“ˆå¸Œå€¼æ›´æ–°ç¯ã€‚</p></li></ul><h2 id="1-7-CDN"><a href="#1-7-CDN" class="headerlink" title="1.7 CDN"></a>1.7 CDN</h2><p>åœ¨äº’è”ç½‘ä¸­ï¼Œè§†é¢‘ç±»çš„æµé‡å æ®æ‰€æœ‰æµé‡çš„å¤§éƒ¨åˆ†ï¼Œè¿™ä¹Ÿä½¿å¾—<strong>å¸¦å®½çš„å¢åŠ æœ‰ç”¨æ­¦ä¹‹åœ°</strong>ã€‚é‚£è§†é¢‘çš„æµé‡ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤§å‘¢ï¼Ÿ</p><p>è§†é¢‘æ˜¯<strong>å›ºå®šé€Ÿåº¦æ˜¾ç¤ºçš„å›¾ç‰‡åºåˆ—</strong>ï¼Œè€Œå›¾ç‰‡æ˜¯ç”±è®¸å¤š<strong>åƒç´ ç‚¹é›†æˆ</strong>å¾—åˆ°çš„ã€‚æ‰€ä»¥è§†é¢‘å°±ä¼šæ¯”è¾ƒå¤§ï¼Œç¼–ç ä¹Ÿä¼šç›¸åº”å¤æ‚ä¸€äº›ã€‚</p><p>é‚£é’ˆå¯¹å¤ªå¤§çš„è§†é¢‘ï¼Œåº”è¯¥åšå¦‚ä½•çš„å¤„ç†å‘¢ï¼Ÿè¿™å°±é¦–å…ˆè¦çœ‹ç½‘ç»œè§†é¢‘çš„ç‰¹ç‚¹â€”â€”</p><ul><li>é«˜ç ç‡</li><li>å¯å‹ç¼©</li></ul><p>æ‰€ä»¥é™ä½è§†é¢‘æµé‡çš„æ–¹å¼å°±æ˜¯<strong>é™ä½ç ç‡å¹¶åšæ—¶ç©ºä¸Šçš„å‹ç¼©</strong>ï¼Œæ¯”å¦‚æˆ‘å›½çš„AVSç¼–ç æ–¹å¼ã€‚</p><p>æˆ‘ä»¬å†ä»æ•´ä½“çš„æ¡†æ¶çœ‹ï¼Œæ˜¾ç„¶åªç”¨ä¸€å°è¶…çº§æœåŠ¡å™¨æ¥æä¾›æµå¼æœåŠ¡æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸º<strong>è§„æ¨¡å¤ªå¤§</strong>ï¼Œå¹¶ä¸”<strong>å­˜åœ¨å¼‚æ„æ€§</strong>ã€‚å› æ­¤æä¾›æµå¼æœåŠ¡çš„<strong>åˆ†å¸ƒå¼æœåŠ¡å™¨</strong>è¢«å¹¿æ³›åº”ç”¨ã€‚</p><p>æˆ‘ä»¬åœ¨å¹³æ—¶è§‚çœ‹è§†é¢‘æ—¶ï¼Œæœ‰æ—¶ä¼šå‘ç”Ÿå¡é¡¿ï¼Œå¹¶ä¸”æç¤ºæˆ‘ä»¬ç¼“å­˜ä¸€ä¼šå†çœ‹ï¼Œå¦‚ä½•è§£é‡Šå®ƒçš„åŸç†å‘¢ï¼Ÿ</p><p><code>äº’è”ç½‘æä¾›ç»™æˆ‘ä»¬çš„æ˜¯å­˜å‚¨è§†é¢‘çš„æµåŒ–æœåŠ¡ï¼Œå®ƒå¯ä»¥å®ç°è¾ºä¸‹è½½è¾ºçœ‹ï¼Œå°±åƒæ²³æµä¸€èˆ¬ï¼Œæˆ‘ä»¬åœ¨ä»ç¼“å†²åŒºä¸­å–è§†é¢‘å†…å®¹ï¼Œå®ç°äº†é«˜å¹¶å‘çš„è§†é¢‘ä¼ è¾“ã€‚</code></p><p>ä½†ä¸åŒçš„ç”¨æˆ·å¯¹äºè§†é¢‘çš„è¦æ±‚ä¸åŒï¼Œè¿™å¯èƒ½å—é™äºå¸¦å®½ï¼Œæˆ–è€…æ˜¯è®¾å¤‡ã€‚é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>é‡‡ç”¨<strong>åŠ¨æ€è‡ªé€‚åº”çš„æµåŒ–æŠ€æœ¯DASH</strong>ï¼ŒæœåŠ¡å™¨ç«¯å¹¶ä¸ä¼šæœ‰é€‰æ‹©æ€§çš„å‘é€å†…å®¹ï¼Œä½†å®ƒä¼šå°†è§†é¢‘åˆ†å—ï¼Œæ¯å—æœ‰ä¸åŒçš„è§£æåº¦ï¼Œä¸åŒçš„ç¼–ç æ ‡å‡†ï¼Œä¸ºäº†ä¸ºå®¢æˆ·ç«¯æ ‡è¯†ä¸åŒå—çš„URLï¼ŒæœåŠ¡å™¨è¿˜ç»´æŠ¤ä¸€ä¸ª<strong>å‘Šç¤ºæ–‡ä»¶</strong>ç”¨ä»¥æä¾›ä¸åŒå—çš„URLã€‚</p><p>å®¢æˆ·ç«¯é¦–å…ˆè·å–åˆ°å‘Šç¤ºæ–‡ä»¶ï¼Œç„¶å<strong>å‘¨æœŸæ€§çš„æµ‹è¯•</strong>æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„<strong>å¸¦å®½</strong>ï¼Œæ ¹æ®å¸¦å®½æ¥<strong>å®æ—¶</strong>åœ°è¯·æ±‚æŸä¸€å—ï¼Œæœ€å<strong>è§£æ</strong>è§‚çœ‹è§†é¢‘ã€‚</p><p>å‡å¦‚è§†é¢‘æµé‡å‡ºç°è¶…é«˜å¹¶å‘ï¼Œæ¯”å¦‚æ˜¥æ™šç›´æ’­ï¼Œå¦‚æœä»…ä»å¤®è§†çš„æœåŠ¡å™¨å»è¯·æ±‚èµ„æºçš„è¯ï¼Œé‚£ä½ å°†ä½“ä¼šåˆ°ä»€ä¹ˆå«åšè¶…é«˜é¢‘å»¶è¿Ÿã€‚ä½†æˆ‘ä»¬å®é™…è§‚çœ‹æ—¶ï¼Œè²Œä¼¼å¾ˆæµç•…ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?</p><p>å› ä¸ºä½¿ç”¨äº†CDNæœåŠ¡å•†çš„åŠ é€ŸæœåŠ¡ï¼ŒåŠ é€Ÿçš„åŸç†ä¹Ÿå¾ˆç®€æ´ï¼Œæ— ééƒ¨ç½²ç¼“å­˜èŠ‚ç‚¹ã€‚ä½†å¦‚ä½•éƒ¨ç½²å‘¢ï¼ŸCDNæœåŠ¡å•†ä½¿ç”¨çš„éƒ¨ç½²ç­–ç•¥é€šå¸¸æœ‰ä¸¤ç§â€”â€”</p><ul><li><code>ç­–ç•¥1</code>ï¼šåœ¨æœ¬åœ°ISPçš„åŒºåŸŸå†…éƒ¨ç½²ç¼“å­˜èŠ‚ç‚¹ï¼Œè¿™æ ·ç¦»ç”¨æˆ·æœ€è¿‘ï¼Œä½†æœªå…æŠ•å…¥å¤ªé«˜ã€‚</li><li><code>ç­–ç•¥2</code>ï¼šé è¿‘ISPçš„æ•°æ®ä¸­å¿ƒéƒ¨ç½²ï¼Œæ•ˆæœä¹Ÿå¾ˆä¸é”™ï¼Œè€Œä¸”éƒ¨ç½²çš„èŠ‚ç‚¹ç›¸å¯¹è¾ƒå°‘ï¼Œå‡å°‘äº†æˆæœ¬ã€‚</li></ul><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå°ä¾‹å­æ¥ä½“ä¼šä¸‹CDNæœåŠ¡æ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262115570.png" alt="image-20210707210224483"></p><p>æ­¥éª¤ï¼š</p><ol><li><p>ICPé¢„å…ˆéƒ¨ç½²èµ„æºåˆ°CDNèŠ‚ç‚¹</p></li><li><p>ç”¨æˆ·è®¿é—®Netflixçš„æ³¨å†Œç½‘ç«™ï¼›</p></li><li><p>é‡å®šå‘åˆ°éƒ¨ç½²åœ¨äºšé©¬é€Šäº‘ç«¯çš„ç½‘ç«™ï¼›</p></li><li><p>ä½¿ç”¨åŸŸåè§£æé‡å®šå‘çš„æœºåˆ¶ä»æœ€è¿‘çš„CDNèŠ‚ç‚¹ä¸­è·å–èµ„æºï¼›</p></li><li><p>å°†åŠ¨æ€è‡ªé€‚åº”çš„èµ„æºè¿”å›ç»™ç”¨æˆ·ï¼Œ</p></li></ol><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
            <tag> æŠ“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</title>
      <link href="/2021/07/12/ji-suan-ji-wang-luo-gai-shu/"/>
      <url>/2021/07/12/ji-suan-ji-wang-luo-gai-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç»ˆäºè¦è¿›å…¥<strong>æ­£é¢˜</strong>äº†ã€‚</p><p>ä½†å½“çœ‹åˆ°ç¬¬ä¸€ç« å±…ç„¶æ˜¯æ¦‚è¿°ï¼Œå°ä¼™ä¼´ä»¬å¯èƒ½ä¼šå›°æƒ‘ï¼Œæ¦‚è¿°çš„å†…å®¹å€¼å¾—è¿™ä¹ˆå¤§çš„ç¯‡ç« å—ï¼Ÿèµ·åˆæˆ‘ä¹ŸæŠ±ç€è¿™æ ·çš„å¿ƒé‡Œï¼Œæ‰€ä»¥ä»“ä¿ƒçš„çœ‹äº†ä¸‹ç¬¬ä¸€ç« ï¼Œå°±å»çœ‹åé¢çš„é‡ç‚¹å†…å®¹äº†ã€‚ä½†å¾€åå­¦ï¼Œæ…¢æ…¢å‘ç°<strong>æ‰€æœ‰çš„æ¡†æ¶çŸ¥è¯†éƒ½æ˜¯åœ¨æ¦‚è¿°å»ºç«‹çš„ï¼Œè¿˜æœ‰é‚£ç¹å¤šå´å®ç”¨çš„æœ¯è¯­</strong>ï¼Œæ‰€ä»¥å‘¢ï¼Œåœ¨å†™è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘åˆè€è€å®å®çœ‹äº†ä¸€éè¿™çœ‹ä¼¼é¸¡è‚‹çš„æ¦‚è¿°ã€‚</p><p>å…¶å®å‘¢ï¼Œç¬¬ä¸€ç« çš„å†…å®¹è®¾ç½®è¿˜æ˜¯å¾ˆ<strong>å‹å¥½</strong>çš„ï¼Œåœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå°±ä¼šä»<strong>ç½‘ç»œçš„å®šä¹‰</strong>å‡ºå‘ï¼Œæ¢å¯»<strong>ç½‘ç»œçš„æ¡†æ¶ç»“æ„</strong>ï¼Œæ·±å…¥<strong>æŠ€æœ¯å‘å±•çš„å¾é€”</strong>ï¼Œæœ€ç»ˆè‡ªç„¶çš„å›å½’<strong>åˆ†å±‚æ¨¡å‹</strong>ã€‚</p><p>å¦‚æœé€šè¿‡ç¬¬ä¸€ç« çš„å­¦ä¹ èƒ½è®©æˆ‘ä»¬å»ºç«‹èµ·å­¦ä¹ çš„çº¹è·¯ï¼Œé‚£å°±ä¸è™šæ­¤è¡Œäº†ã€‚è¯ä¸å¤šè¯´ï¼Œå‡ºå‘å’¯â€”â€”</p><hr><h2 id="1-1-ä»€ä¹ˆæ˜¯Internet"><a href="#1-1-ä»€ä¹ˆæ˜¯Internet" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯Internet"></a>1.1 ä»€ä¹ˆæ˜¯Internet</h2><p>ç½‘ç»œæ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªæ˜¯å¾ˆå®½æ³›çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†ä»ä¸¤ä¸ªç»´åº¦æ¥å±•å¼€â€”â€”</p><h3 id="ä»ç»„æˆè§’åº¦"><a href="#ä»ç»„æˆè§’åº¦" class="headerlink" title="ä»ç»„æˆè§’åº¦"></a>ä»ç»„æˆè§’åº¦</h3><p>ä»æ•°å­¦çš„æ¦‚å¿µå‡ºå‘ï¼Œç½‘è¿™ç§æ•°æ®ç»“æ„åŒ…å«è¾¹å’Œç‚¹ã€‚åŒæ ·çš„ï¼ŒInternetåŒ…å«<strong>èŠ‚ç‚¹</strong>å’Œ<strong>é€šä¿¡é“¾è·¯</strong>ã€‚è€Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸€ä¸ªç½‘ç»œè¿˜å¿…é¡»æœ‰<strong>åè®®</strong>çš„æ”¯æŒæ‰èƒ½ç¨³å®šçš„è¿è¡Œã€‚</p><p><code>èŠ‚ç‚¹</code>ï¼šç½‘ç»œä¸­çš„èŠ‚ç‚¹æœ‰ä¸¤ç±»ï¼Œç«¯èŠ‚ç‚¹å’Œåˆ†ç»„èŠ‚ç‚¹ã€‚ç«¯èŠ‚ç‚¹æ˜¯æŒ‡<strong>ä¸»æœºåŠå…¶ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åº</strong>ï¼Œè€Œåˆ†ç»„èŠ‚ç‚¹åˆ™æ˜¯<strong>è·¯ç”±å™¨ï¼Œäº¤æ¢æœºç­‰ç½‘ç»œäº¤æ¢è®¾å¤‡</strong>ï¼›</p><p><code>é€šä¿¡é“¾è·¯</code> ï¼š æ ¹æ®é€šä¿¡é“¾è·¯æ‰€åœ¨çš„ä½ç½®åˆ†ä¸º<strong>æ¥å…¥ç½‘é“¾è·¯</strong>å’Œ<strong>ä¸»å¹²é“¾è·¯</strong>ã€‚æ¥å…¥ç½‘é“¾è·¯æ˜¯æŒ‡ä»ä¸»æœºè¿æ¥åˆ°äº’è”ç½‘çš„é“¾è·¯ï¼Œæ¯”å¦‚æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä½¿ç”¨æ— çº¿æ¥å…¥è®¾å¤‡WIFIæ¥å…¥äº’è”ç½‘å°±æ˜¯æ¥å…¥ç½‘ã€‚è€Œä¸»å¹²é“¾è·¯æ˜¯æŒ‡è·¯ç”±å™¨ä¹‹é—´çš„é“¾è·¯ï¼Œå®ƒè´Ÿè´£æ•°æ®çš„ä¼ è¾“å’Œä¸­è½¬ï¼Œé€šå¸¸é€šä¿¡é“¾è·¯ä½¿ç”¨çš„æè´¨ä¸º<strong>åŒç»çº¿ï¼Œå…‰çº¤ï¼Œç”µç¼†</strong>ç­‰ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è¡¡é‡é€šä¿¡é“¾è·¯çš„ä¼ è¾“é€Ÿç‡å‘¢ï¼Œå°±éœ€è¦å¼•å…¥<strong>å¸¦å®½</strong>ï¼Œå¸¦å®½åœ¨é€šä¿¡å’Œç½‘ç»œä¸­çš„å®šä¹‰æ˜¯æœ‰æ‰€åŒºåˆ«çš„ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œå¸¦å®½è¢«è¿™æ ·å®šä¹‰ï¼š</p><blockquote><p>å¸¦å®½ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„<strong>é€šä¿¡çº¿è·¯ä¼ è¾“æ•°æ®çš„èƒ½åŠ›</strong>ã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä¼ è¾“ï¼Œè€Œä¸æ˜¯ä¼ æ’­ï¼Œå¸¦å®½æè¿°çš„æ˜¯<strong>å‘é€æ•°æ®çš„å‘é€å™¨çš„èƒ½åŠ›å¼ºå¼±</strong>ï¼Œè€Œå¸¦å®½è¶Šå¤§ï¼Œå°†æ•°æ®æ³¨å…¥è¿™ä¸ªé“¾è·¯æ‰€éœ€è¦çš„æ—¶é—´å°±è¶Šå°‘ã€‚è€Œä¼ æ’­å’Œå‘é€å™¨æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚å®ƒè¡¨ç¤ºçš„æ˜¯ä¿¡å·åœ¨ä¿¡é“ä¸­ä¼ è¾“çš„é€Ÿç‡ã€‚</p></blockquote><p>é‚£åè®®åˆæ˜¯ä»€ä¹ˆä¸œä¸œå‘¢ï¼Ÿåè®®æŒ‡åœ¨å¯¹ç­‰å®ä½“ä¹‹é—´é€šä¿¡éœ€è¦éµå¾ªçš„è§„åˆ™ã€‚é€šå¸¸æˆ‘ä»¬ä¼šä»ä¸€ä¸ªåè®®çš„<strong>è¯­æ³•</strong>ï¼Œ<strong>è¯­ä¹‰</strong>ï¼Œ<strong>æ—¶åº</strong>ï¼Œ<strong>åŠ¨ä½œ</strong>æ–¹é¢æ¥è¡¡é‡ä¸€ä¸ªåè®®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262116307.png" alt="image-20210707204758527"></p><h3 id="ä»æœåŠ¡è§’åº¦"><a href="#ä»æœåŠ¡è§’åº¦" class="headerlink" title="ä»æœåŠ¡è§’åº¦"></a>ä»æœåŠ¡è§’åº¦</h3><p>ä»æœåŠ¡çš„ç»´åº¦æ¥çœ‹ï¼ŒInternetåŒ…æ‹¬<strong>åˆ†å¸ƒå¼çš„åº”ç”¨ç¨‹åº</strong>å’Œ<strong>æ”¯æ’‘åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºé€šä¿¡çš„åŸºç¡€è®¾æ–½</strong>ã€‚</p><hr><h2 id="1-2-ç½‘ç»œè¾¹ç¼˜"><a href="#1-2-ç½‘ç»œè¾¹ç¼˜" class="headerlink" title="1.2 ç½‘ç»œè¾¹ç¼˜"></a>1.2 ç½‘ç»œè¾¹ç¼˜</h2><p>ç½‘ç»œè¾¹ç¼˜åŒ…å«<strong>è®¡ç®—æœºå’Œå…¶ä»–æ¥å…¥ç½‘ç»œçš„è®¾å¤‡</strong>ï¼Œåˆå› ä¸ºä»–ä»¬å¤„äºè¾¹ç¼˜ä½ç½®ï¼Œæ•…ä¹Ÿç§°<strong>ç«¯ç³»ç»Ÿ</strong>ã€‚å®ƒçš„å¦ä¸€ä¸ºäººæ‰€çŸ¥çš„ç§°è°“æ˜¯<strong>ä¸»æœº</strong>ï¼Œè€Œç½‘ç»œè¾¹ç¼˜å³æ˜¯<strong>ä¸»æœº+è¿è¡Œåœ¨ä¸»æœºä¸Šçš„åº”ç”¨ç¨‹åº</strong></p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ç½‘ç»œå›¾ç¤ºâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262116719.png" alt="image-20210707204813922"></p><p>åœ¨è¿™ä¸ªå›¾ä¸­<strong>ï¼Œè®¡ç®—æœºï¼ŒæœåŠ¡å™¨ï¼ŒAP(æ— çº¿è®¿é—®è®¾å¤‡)</strong>éƒ½å±äºç«¯ç³»ç»Ÿçš„èŒƒç•´ã€‚</p><p>é‚£è¿™äº›ç«¯ç³»ç»Ÿæ˜¯å¦‚ä½•ä»‹å…¥ç½‘ç»œçš„å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œé€šè¿‡é€šä¿¡é“¾è·¯ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œæ˜¯é€šè¿‡<strong>æ¥å…¥ç½‘</strong>ï¼Œæ¥å…¥ç½‘æ˜¯<strong>å°†ç«¯ç³»ç»Ÿç‰©ç†è¿æ¥åˆ°è¾¹ç¼˜è·¯ç”±å™¨</strong>çš„é“¾è·¯ã€‚</p><p>å†™åˆ°è¿™ï¼Œ<strong>ä¸å¦¨å°†çŸ¥è¯†æ˜ å°„åˆ°å®é™…çš„åº”ç”¨</strong>ã€‚æˆ‘å®¶æ˜¯ä½¿ç”¨<strong>ç”µè¯çº¿</strong>æ¥æ¥å…¥å› ç‰¹ç½‘çš„ï¼Œå­¦è¿‡é€šä¿¡åŸç†çš„æœ‹å‹éƒ½çŸ¥é“åœ¨ä¿¡é“ä¸­ä¼ è¾“çš„ä¿¡å·å¿…é¡»æ˜¯<strong>æ•°å­—ä¿¡å·</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>è°ƒåˆ¶è§£è°ƒå™¨</strong>æ¥å®Œæˆä¿¡å·çš„è½¬æ¢ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<strong>çŒ«(Modem)</strong>ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯ä½¿ç”¨è®¡ç®—æœºä¸Šç½‘äº†ã€‚ä½†å¦‚æœè¦å¤šä¸ªè®¾å¤‡éƒ½æ¥å…¥ç½‘ç»œï¼Œå°±éœ€è¦æˆ‘ä»¬å¸¸è¯´çš„WIFIï¼Œå…·ä½“çš„è¯´ï¼Œæ˜¯<strong>WIFIè·¯ç”±å™¨</strong>ï¼ŒWIFIè·¯ç”±å™¨ä¸Šæœ‰<strong>å¾ˆå¤šä»¥å¤ªç½‘çš„ç½‘å£</strong>ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å¤šè®¾å¤‡çš„æ¥å…¥ç½‘ç»œäº†ï¼Œå½“ç„¶ï¼Œæ˜¯<strong>å…±äº«å¸¦å®½</strong>å“¦ã€‚</p><p><img src="https://gitee.com//future727/imgs/raw/master/zyz_img2/image-20210707204838947.png" alt="image-20210707204826842"></p><p>è€ŒåŒæ ·å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½¿ç”¨ç”µè¯çº¿çš„æ¥å…¥ç½‘å®ƒçš„<strong>ä¸Šè¡Œå’Œä¸‹è¡Œçš„é€Ÿç‡æ˜¯ä¸ä¸€æ ·çš„</strong>ï¼Œæˆ‘ä»¬æ™®éçš„éœ€æ±‚æ˜¯ä¸‹è½½çš„é€Ÿåº¦æ›´å¿«ï¼Œè€Œå¯¹ä¸Šä¼ çš„é€Ÿç‡æ²¡æœ‰ä¸¥æ ¼çš„è¦æ±‚ï¼Œå› æ­¤ä½¿ç”¨è¿™ç§å¸¦å®½åˆ†å‘ç­–ç•¥æ›´æœ‰åˆ©ã€‚</p><p>æ¥å…¥ç½‘çš„æ–¹å¼è‡ªç„¶ä¸é™äºç”µè¯çº¿ï¼Œä½¿ç”¨çº¿ç¼†åè€Œæ˜¯ç°åœ¨æ›´é€šç”¨çš„æ–¹å¼ã€‚<img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262117561.png" alt="image-20210707204838947"></p><p>æˆ‘ä»¬æ¥æè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹â€”â€”<br><strong>é¦–å…ˆè®¡ç®—æœºé€šè¿‡Modem,å³DSLè°ƒåˆ¶è§£è°ƒå™¨å®Œæˆä¿¡å·çš„è½¬åŒ–ï¼Œè¿æ¥çº¿ç¼†çš„è®¾å¤‡å…±äº«çº¿ç¼†çš„æ¥å…¥ç½‘ç»œï¼Œå†é€šè¿‡CMTS(çº¿ç¼†è°ƒåˆ¶è§£è°ƒç»ˆç«¯ç³»ç»Ÿ)æ¥å…¥åˆ°ISPçš„è·¯ç”±å™¨ä¸­ã€‚</strong></p><p>æˆ‘ä»¬æè¿°äº†ç«¯ç³»ç»Ÿæ˜¯å¦‚ä½•æ¥å…¥ç½‘ç»œçš„ï¼Œé‚£ç«¯ç³»ç»Ÿä¹‹ä¸Šçš„<strong>åº”ç”¨è¿›ç¨‹æ˜¯å¦‚ä½•é€šä¿¡çš„å‘¢</strong>ï¼Ÿ</p><p>åº”ç”¨è¿›ç¨‹å±äºåº”ç”¨å±‚ï¼Œåº”ç”¨å±‚çš„é€šä¿¡å®ç°éœ€è¦<strong>é€šè¿‡ä¼ è¾“å±‚æä¾›çš„æ¥å£è°ƒç”¨ä¼ è¾“å±‚çš„æœåŠ¡</strong>ã€‚å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ¦‚è¿°ï¼Œå…·ä½“å±•å¼€é‚£å°±æ˜¯ç¬¬äºŒç« çš„æ•…äº‹äº†ã€‚</p><p>æ¢ä¸€ä¸ªç»´åº¦çœ‹ï¼Œä¹Ÿå°±æ˜¯ä»é€šä¿¡æ¨¡å¼ä¸Šè¯´ï¼Œåº”ç”¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡åˆ†ä¸ºCSæ¨¡å¼å’ŒP2Pæ¨¡å¼ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨çš„WEBåº”ç”¨ä½¿ç”¨çš„å°±æ˜¯CSæ¶æ„ï¼Œè€Œè¿…é›·ä½¿ç”¨çš„åˆ™æ˜¯P2Pæ¨¡å¼ï¼Œå®ƒä»¬å„æœ‰åƒç§‹ï¼Œåœ¨åé¢ç« èŠ‚ä¸­åæåŠ~</p><blockquote><p>æ€»è€Œè¨€ä¹‹ã€‚ç½‘ç»œè¾¹ç¼˜è´Ÿè´£æä¾›åº”ç”¨è¿›ç¨‹ç«¯åˆ°ç«¯çš„é€šä¿¡ã€‚</p></blockquote><hr><h2 id="1-3-ç½‘ç»œæ ¸å¿ƒ"><a href="#1-3-ç½‘ç»œæ ¸å¿ƒ" class="headerlink" title="1.3 ç½‘ç»œæ ¸å¿ƒ"></a>1.3 ç½‘ç»œæ ¸å¿ƒ</h2><p>å‰é¢æˆ‘ä»¬æåŠç½‘ç»œè¾¹ç¼˜é€šè¿‡æ¥å…¥ç½‘æ¥å…¥Internetï¼Œå…¶å®è¿™ç§è¯´æ³•æ˜¯ä¸å‡†ç¡®çš„ï¼Œé€šè¿‡æ¥å…¥ç½‘æ¥å…¥çš„æ˜¯ç½‘ç»œæ ¸å¿ƒï¼Œè€Œç½‘ç»œæ ¸å¿ƒæŒ‡çš„æ˜¯è·¯ç”±å™¨çš„ç½‘çŠ¶ç½‘ç»œï¼Œæ‰€ä»¥è¯´ï¼Œç½‘ç»œæ ¸å¿ƒå…¶<strong>æœ¬è´¨æ˜¯ç½‘ç»œçš„ç½‘ç»œ</strong>ã€‚</p><p>ä»å¤§çš„æ¡†æ¶æ¥çœ‹ï¼Œ<strong>ç½‘ç»œæ ¸å¿ƒæ˜¯ä¸ºç½‘ç»œè¾¹ç¼˜æœåŠ¡çš„</strong>ï¼Œå®ƒè´Ÿè´£å°†æ•°æ®ä»ä¸€ä¸ªåº”ç”¨è¿›ç¨‹é€šè¿‡ç½‘ç»œæ ¸å¿ƒè¿™ä¸ªé»‘ç›’å­ä¼ è¾“åˆ°å¦ä¸€ä¸ªåº”ç”¨è¿›ç¨‹ã€‚</p><p>é‚£æ€æ ·å®ç°ä¼ è¾“å‘¢ï¼Ÿæ¥æ ¹çº¿ç›´æ¥è¿è¿‡å»æ˜¾ç„¶ä¸åˆé€‚ï¼Œé‚£æ˜¯åå‰¯å…¶å®çš„äº’è¿ï¼Œä½†ç€å®ä¸ä¼˜é›…ã€‚</p><p>æˆ‘ä»¬éœ€è¦ä¸€ç§<strong>ä¸­ç»§çš„è®¾å¤‡</strong>ï¼Œå®ƒéœ€è¦çŸ¥é“æ•°æ®ä»ä½•è€Œæ¥ï¼Œè¦å»å¾€ä½•å¤„ï¼Œä¹Ÿè¦ä¿è¯ä¼ è¾“ä¸€å®šç¨‹åº¦çš„ç¨³å®šã€‚åœ¨å®é™…ä¸­ï¼Œæ»¡è¶³è¿™æ ·éœ€æ±‚çš„è®¾å¤‡å°±æ˜¯<strong>äº¤æ¢æœºã€‚è€Œä½¿ç”¨ç½‘ç»œé“¾è·¯å’Œäº¤æ¢æœºä¼ è¾“æ•°æ®æœ‰ä¸¤ç§åŸºæœ¬æ–¹æ³•ï¼š</strong>ç”µè·¯äº¤æ¢å’Œåˆ†ç»„äº¤æ¢ã€‚</p><h3 id="ç”µè·¯äº¤æ¢"><a href="#ç”µè·¯äº¤æ¢" class="headerlink" title="ç”µè·¯äº¤æ¢"></a>ç”µè·¯äº¤æ¢</h3><p>ç”µè·¯äº¤æ¢çš„æ€è·¯æ˜¯<strong>ä¸ºæ¯ä¸€ä¸ªå‘¼å«é¢„ç•™ä¸€æ¡ä¸“æœ‰çš„ç”µè·¯</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262117944.png" alt="image-20210707204900893"></p><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸¤ä¸ªäº¤æ¢æœºä¹‹é—´æœ‰å››æ¡é“¾è·¯ï¼Œå‡å¦‚ç½‘ç»œå¸¦å®½æ˜¯1Mbps,é‚£æ¯æ¡é“¾è·¯çš„å¸¦å®½éƒ½æ˜¯250Kbps,å‘èµ·é€šä¿¡ä»¥åä»¥åï¼Œé¦–å…ˆä¼šå»ºç«‹ä¸€ä¸ªä¸“æœ‰çš„è¿æ¥ï¼Œåœ¨è¿æ¥ä¿æŒæœŸé—´ï¼Œå®ƒç‹¬äº«é“¾è·¯èµ„æºã€‚è¿™å°±å¥½æ¯”ä¸¤ä¸ªäººé€šè¿‡æ‰‹æœºæ­£åœ¨é€šè¯ï¼Œç¬¬ä¸‰æ–¹æƒ³æ¥å…¥çš„è¯ä¼šæ˜¾ç¤ºå çº¿ä¸­ã€‚</p><p>è¿™ç§VIPçš„é€šä¿¡æœåŠ¡é™¤äº†<code>ä¸“ç”¨å¸¦å®½</code>ä»¥å¤–ï¼Œå®ƒä¹Ÿæä¾›<code>ç¼“å­˜æœåŠ¡</code>ã€‚ä½†åŒæ—¶å®ƒçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ¥å…¥çš„ç”¨æˆ·å¤ªå°‘äº†ã€‚å› ç‰¹ç½‘çš„ç”¨æˆ·æ¥å…¥æ˜¯æœ‰å±€éƒ¨æ€§å’Œçªå‘æ€§çš„ï¼Œä¸€æˆä¸å˜çš„ç”µè·¯äº¤æ¢æ˜¾ç„¶ä¸èƒ½èƒœä»»ã€‚</p><p>è¿™é‡Œéœ€è¦é¢å¤–çš„ç»™å‡ºä¸€äº›<strong>å°è´´å£«</strong>ï¼š</p><blockquote><p>å¸¦å®½å¯ä»¥è®¤ä¸ºæ˜¯ç½‘ç»œä¸­çš„ä¸€ç§èµ„æºï¼Œè€Œä¸ºäº†æ›´å……åˆ†çš„åˆ©ç”¨è¿™ç§èµ„æºï¼Œé€šå¸¸å°†å¸¦å®½åˆ†æˆç‰‡ã€‚è¿™é‡Œå¯ä»¥ç±»æ¯”CPUçš„æ—¶é—´ç‰‡ã€‚é€šå¸¸çš„åˆ†ç‰‡æ–¹å¼æœ‰æ—¶åˆ†ï¼Œé¢‘åˆ†ï¼Œç åˆ†ï¼Œæ³¢åˆ†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262117833.png" alt="image-20210707204915415"></p></blockquote><h3 id="åˆ†ç»„äº¤æ¢"><a href="#åˆ†ç»„äº¤æ¢" class="headerlink" title="åˆ†ç»„äº¤æ¢"></a>åˆ†ç»„äº¤æ¢</h3><p>åˆ†ç»„äº¤æ¢ä¼ è¾“æ•°æ®çš„<strong>ç²’åº¦æ›´å°</strong>ï¼Œå®ƒæ˜¯<strong>åŸºäºåˆ†ç»„</strong>çš„ä¼ è¾“ï¼Œé‚£é¦–å…ˆè¦äº†è§£åˆ†ç»„çš„å®šä¹‰ï¼Œåœ¨ç«¯ä¸ç«¯ä¹‹é—´ä¼ è¾“æ•°æ®çš„å•å…ƒæ˜¯æŠ¥æ–‡ã€‚æŠ¥æ–‡ä¸­åŒ…å«åè®®è®¾è®¡è€…éœ€è¦çš„ä»»ä½•ä¸œè¥¿ã€‚è€Œç½‘ç»œæ ¸å¿ƒçš„è®¾å¤‡å¤„äºç½‘ç»œå±‚ï¼Œå› è€Œæºä¸»æœºå°†æŠ¥æ–‡åˆ†æˆä¸€ä¸ªä¸ªçš„åˆ†ç»„ï¼Œåˆ†ç»„æŒ‰ç…§åè®®è¦æ±‚ï¼Œå°è£…ç‰¹å®šçš„å¤´éƒ¨å’Œå®ä½“éƒ¨åˆ†ï¼Œåœ¨ç½‘ç»œä¸­ä¼ è¾“ã€‚</p><p>ä¸ºäº†é‡åŒ–ä¼ è¾“çš„æ•ˆç‡ï¼Œæˆ‘ä»¬é€šå¸¸å°†åˆ†ç»„çš„é•¿åº¦è®°åšLæ¯”ç‰¹ï¼Œè€Œå°†é“¾è·¯çš„ä¼ è¾“é€Ÿç‡è®°åšRæ¯”ç‰¹/ç§’ï¼Œå³å¸¦å®½ä¸ºRbpsï¼Œé‚£ä¼ è¾“é€Ÿç‡å°±ä¸ºL/Rã€‚</p><p>åˆ†ç»„äº¤æ¢ä¸ºäº†æé«˜ä¼ è¾“çš„æ•ˆç‡å¹¶è®©ä¼ è¾“å˜å¾—ç¨³å®šå¯æ§ï¼Œé‡‡ç”¨<strong>å­˜å‚¨è½¬å‘</strong>çš„æœºåˆ¶ã€‚å³è·¯ç”±å™¨å…ˆå°†æ¥æ”¶åˆ°çš„åˆ†ç»„å­˜å‚¨èµ·æ¥ï¼Œå°†åˆ†ç»„ä¸­çš„æŸäº›ä¿¡æ¯å–å‡ºï¼ŒæŒ‰ç…§ä¸€å®šçš„è·¯ç”±ç®—æ³•å¾—åˆ°è·¯ç”±è¡¨ï¼Œå†ç”±è·¯ç”±è¡¨å³å¯å¾—åˆ°ä¸‹ä¸€æ¡çš„IPåœ°å€ï¼Œæœ€ç»ˆå°†åˆ†ç»„è½¬å‘ç»™ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬æåŠå­˜å‚¨è½¬å‘å¯ä»¥è®©ä¼ è¾“ç¨³å®šå¯ç”¨ï¼Œä½†å®é™…ä¸Šï¼Œ<strong>å­˜å‚¨è½¬å‘åªæ˜¯ä¸€ç§å°½åŠ›è€Œä¸ºçš„æœºåˆ¶</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262117316.png" alt="image-20210707204929034"></p><p>å½“<code>åˆ†ç»„çš„åˆ°è¾¾é€Ÿç‡&gt;é“¾è·¯çš„è¾“å‡ºé€Ÿç‡</code>ï¼Œåˆ†ç»„å°±éœ€è¦æ’é˜Ÿï¼Œå½“é˜Ÿåˆ—å·²æ»¡ï¼Œå³è·¯ç”±å™¨çš„<code>ç¼“å­˜ç”¨å®Œ</code>æ—¶ï¼Œåˆ†ç»„å°±<code>ä¼šè¢«æŠ›å¼ƒ</code>ã€‚</p><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåˆ†ç»„<code>æ²¡æœ‰æ—¶åºçš„è®²ç©¶</code>ï¼Œåˆ†ç»„å…±äº«é“¾è·¯çš„å¸¦å®½èµ„æºã€‚æˆ‘ä»¬å¸¸å°†è¿™ç§æ¨¡å¼ç§°ä¸ºç»Ÿè®¡å¤šè·¯å¤ç”¨ã€‚</p><h3 id="ç½‘ç»œæ ¸å¿ƒçš„å…³é”®åŠŸèƒ½"><a href="#ç½‘ç»œæ ¸å¿ƒçš„å…³é”®åŠŸèƒ½" class="headerlink" title="ç½‘ç»œæ ¸å¿ƒçš„å…³é”®åŠŸèƒ½"></a>ç½‘ç»œæ ¸å¿ƒçš„å…³é”®åŠŸèƒ½</h3><ol><li><p><strong>è·¯ç”±</strong></p><p>å³å†³å®šåˆ†ç»„é‡‡ç”¨çš„æºåˆ°ç›®æ ‡çš„è·¯å¾„ï¼Œä¼ ç»Ÿçš„æ˜¯ä½¿ç”¨<strong>è·¯ç”±ç®—æ³•</strong>å¾—åˆ°ä¸‹ä¸€æ¡çš„åœ°å€ï¼Œè€Œç°åœ¨æ•ˆç‡æ›´é«˜ï¼Œä¹Ÿæ›´é€šç”¨çš„æ–¹å¼æ˜¯â€”â€”<code>æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢</code>ã€‚ç¬¬å››ç« ä¼šç€é‡èŠåˆ°ã€‚</p></li><li><p>è½¬å‘</p><p>å³å°†åˆ†ç»„ä»è·¯ç”±å™¨çš„è¾“å…¥é“¾è·¯è½¬ç§»åˆ°è¾“å‡ºé“¾è·¯ã€‚</p></li></ol><h3 id="åˆ†ç»„äº¤æ¢VSç”µè·¯äº¤æ¢"><a href="#åˆ†ç»„äº¤æ¢VSç”µè·¯äº¤æ¢" class="headerlink" title="åˆ†ç»„äº¤æ¢VSç”µè·¯äº¤æ¢"></a>åˆ†ç»„äº¤æ¢VSç”µè·¯äº¤æ¢</h3><p>ç†è®ºçŸ¥è¯†çš„æŒæ¡ä»…ä»…æ˜¯å®šæ€§ï¼Œè¦æƒ³æ›´é€å½»çš„äº†è§£åŒºåˆ«ï¼Œè¿˜éœ€è¦å®šé‡åˆ†æï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹é¢çš„å°ä¾‹å­â€”â€”</p><blockquote><p>å‡è®¾é“¾è·¯çš„å¸¦å®½æ˜¯1Mbps,,æ¯ä¸ªç”¨æˆ·æ´»åŠ¨æ—¶æ‰€éœ€è¦çš„å¸¦å®½ä¸º100kbpsï¼Œä¸”æ¯ä¸ªç”¨æˆ·åªæœ‰10%çš„æ—¶é—´æ˜¯æ´»åŠ¨çš„ï¼Œåˆ†æç”µè·¯äº¤æ¢å’Œåˆ†ç»„äº¤æ¢æ¨¡å¼ä¸‹æ‰€èƒ½æ”¯æ’‘çš„æœ€å¤§ç”¨æˆ·æ•°é‡ï¼Ÿ</p></blockquote><ul><li><p>ç”µè·¯äº¤æ¢ï¼š æ˜¾ç„¶å¯ä»¥æ”¯æ’‘1M/100K=<strong>10ä¸ª</strong>ç”¨æˆ·</p></li><li><p>åˆ†ç»„äº¤æ¢ï¼šå‡è®¾æœ‰35ä¸ªç”¨æˆ·ï¼ŒæŒ‰ä½¿ç”¨æ¦‚ç‡è®ºçš„çŸ¥è¯†å¯ä»¥æ±‚å¾—<strong>é“¾è·¯ä¸å…è®¸10ä¸ªä»¥ä¸Šç”¨æˆ·æ´»åŠ¨çš„æ¦‚ç‡ä¸º0.004</strong></p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262117658.png" alt="image-20210707204942286"></p><p>é€šä¿—çš„è¯´ï¼Œå…è®¸10ä¸ªä»¥ä¸Šç”¨æˆ·æ´»åŠ¨çš„æ¦‚ç‡å°±ç­‰äºå…è®¸0ä¸ªï¼Œ1ä¸ªã€‚ã€‚ã€‚çš„<strong>æ¦‚ç‡ç´¯åŠ å’Œ</strong>ï¼Œè€Œ35ä¸ªä¸­å¯ä»¥å…è®¸1ä¸ªç”¨æˆ·æ´»åŠ¨çš„æ¦‚ç‡æœä»<strong>ä¼¯åŠªåˆ©å®éªŒï¼Œå³äºŒé¡¹åˆ†å¸ƒ</strong>ã€‚</p><p><img src="http://qnuez6z2b.hn-bkt.clouddn.com/typora/image-20210204122319342.png" alt="image-20210204122319342"></p><p>é€šè¿‡è®¡ç®—ç»“æœï¼Œå¾ˆå®¹æ˜“æ¨æ–­å‡ºåˆ†ç»„äº¤æ¢åœ¨<code>ç”¨æˆ·å®¹é‡</code>æ–¹é¢ä¼˜äºç”µè·¯äº¤æ¢ã€‚</p></li></ul><hr><h2 id="1-4-Internetç»“æ„ä¸ISP"><a href="#1-4-Internetç»“æ„ä¸ISP" class="headerlink" title="1.4 Internetç»“æ„ä¸ISP"></a>1.4 Internetç»“æ„ä¸ISP</h2><p>è¿™é‡Œæˆ‘ä»¬ä¸å†å›é¡¾Internetçš„æ¼”å˜è¿‡ç¨‹ï¼Œä¸‹å›¾ç›´æ¥ç»™å‡ºæœ€ç»ˆçš„æ¡†æ¶â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262117186.png" alt="image-20210707204955995"></p><p>é‚£å¦‚ä½•æ¥è§£é‡Šè¿™å¼ ç½‘ç»œæ¶æ„å›¾å‘¢ï¼Ÿæˆ‘ä»¬ä»¥<strong>ä»è¾¹æ²¿åˆ°æ ¸å¿ƒçš„æ€è·¯</strong>è¯´èµ·ï¼š</p><p>é¦–å…ˆé›¶æ•£çš„ç«¯ç³»ç»Ÿæ¥å…¥åˆ°<code>é™„è¿‘çš„ISPæœåŠ¡å•†</code>æä¾›çš„åŒºåŸŸç½‘ç»œï¼ŒåŒºåŸŸæ¥å…¥å†é€šè¿‡å¾ˆå¤šè·¯ç”±å™¨æ¥å…¥åˆ°å»<code>global ISPS</code>,global ISPSé€šè¿‡äº’è¿IXPçš„æ–¹å¼æ¥å…¥åˆ°å…¶ä»–çš„global ISPSï¼Œè¿™æ ·ä¸€ä¸ªç½‘ç»œæ¡†æ¶å°±æœ‰äº†ã€‚ä½†ç½‘ç»œè¿˜éœ€è¦å®è´¨çš„æ•°æ®ä¼ è¾“ï¼Œè¿™æ—¶å€™<code>ICP(å†…å®¹åˆ†å‘ç½‘ç»œï¼Œå¦‚è°·æ­Œ)</code>å°±åŠ å…¥è¿›å»äº†ï¼Œè€Œä¸ºäº†èŠ‚çœæˆæœ¬ï¼ŒICPé€šå¸¸ä¼šè‡ªå·±æ­å»ºæ›´é è¿‘ç”¨æˆ·çš„ç½‘ç»œæ¥å‘ç”¨æˆ·æä¾›æœåŠ¡ã€‚</p><p>ä¸ºäº†æ›´å½¢è±¡çš„å±•ç¤ºé”™ç»¼å¤æ‚çš„ç½‘ç»œï¼Œæˆ‘ä»¬çœ‹ä¸‹å®é™…åº”ç”¨ä¸­çš„ç½‘ç»œâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262118147.png" alt="image-20210707205016410"></p><hr><h2 id="1-5-åˆ†ç»„å»¶æ—¶-ä¸¢å¤±å’Œååé‡"><a href="#1-5-åˆ†ç»„å»¶æ—¶-ä¸¢å¤±å’Œååé‡" class="headerlink" title="1.5 åˆ†ç»„å»¶æ—¶,ä¸¢å¤±å’Œååé‡"></a>1.5 åˆ†ç»„å»¶æ—¶,ä¸¢å¤±å’Œååé‡</h2><p>åˆåˆ°äº†ä¸‡æ¶çš„çŸ¥è¯†ç‚¹ç¯èŠ‚ï¼Œä½†æœ‹å‹ä»¬å¤§å¯æ”¾å¿ƒï¼Œè¿™äº›æ¦‚å¿µè¿˜æ˜¯å¾ˆå¥½ç†è§£çš„â€”â€”</p><h3 id="åˆ†ç»„å»¶æ—¶"><a href="#åˆ†ç»„å»¶æ—¶" class="headerlink" title="åˆ†ç»„å»¶æ—¶"></a>åˆ†ç»„å»¶æ—¶</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262118516.png" alt="image-20210707205026706"></p><p>åˆ†ç»„å»¶æ—¶æœ‰å››ç§â€”â€”</p><ul><li><p><code>èŠ‚ç‚¹å¤„ç†å»¶æ—¶</code>ï¼šæ£€æŸ¥<strong>åˆ†ç»„é¦–éƒ¨</strong>ä»¥åŠå†³å®šå°†åˆ†ç»„å¯¼å‘ä½•å¤„ã€‚</p></li><li><p><code>æ’é˜Ÿå»¶æ—¶</code>ï¼šåœ¨è¾“å‡ºé“¾è·¯ä¸Š<strong>ç­‰å¾…ä¼ è¾“</strong>çš„æ—¶é—´</p><p>åœ¨æ’é˜Ÿå»¶æ—¶ä¸­æˆ‘ä»¬å¼•å…¥<strong>æµé‡å¼ºåº¦</strong>çš„æ¦‚å¿µâ€”â€”<br>$$<br>æµé‡å¼ºåº¦=La/R<br>$$<br>aæŒ‡çš„æ˜¯åˆ†ç»„åˆ°è¾¾é˜Ÿåˆ—çš„<strong>å¹³å‡é€Ÿç‡</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262118077.png" alt="image-20210707205224266"></p></li><li><p><code>ä¼ è¾“å»¶æ—¶</code>ï¼šé•¿åº¦ä¸ºLçš„åˆ†ç»„åœ¨å¸¦å®½ä¸ºRbpsçš„é“¾è·¯ä¸Šä¼ è¾“çš„æ—¶é—´ä¸º<strong>L/R</strong>.</p></li><li><p><code>ä¼ æ’­å»¶æ—¶</code>ï¼šåœ¨<strong>ç‰©ç†é“¾è·¯ä¸Šçš„ä¼ æ’­æ—¶é—´</strong>ã€‚</p></li></ul><h3 id="åˆ†ç»„ä¸¢å¤±"><a href="#åˆ†ç»„ä¸¢å¤±" class="headerlink" title="åˆ†ç»„ä¸¢å¤±"></a>åˆ†ç»„ä¸¢å¤±</h3><p>å½“åˆ†ç»„åˆ°è¾¾é˜Ÿåˆ—å·²æ»¡çš„è·¯ç”±å™¨æ—¶ï¼Œåˆ†ç»„æ ¹æ®åè®®ç±»å‹è¢«<strong>ä¸¢å¼ƒ</strong>æˆ–ä»ä¸Šä¸€ä¸ªèŠ‚ç‚¹<strong>é‡ä¼ </strong>ã€‚</p><h3 id="ååé‡"><a href="#ååé‡" class="headerlink" title="ååé‡"></a>ååé‡</h3><p>ååé‡æŒ‡å•ä½æ—¶é—´å†…ä»æºç«¯ä¼ è¾“åˆ°ç›®æ ‡ç«¯çš„æ•°æ®é‡ï¼Œå®ƒ<strong>å–å†³äºè·¯å¾„ä¸Šæœ€å°çš„ååé‡</strong>ã€‚</p><hr><h2 id="1-6-åè®®å±‚æ¬¡ä¸æœåŠ¡æ¨¡å‹"><a href="#1-6-åè®®å±‚æ¬¡ä¸æœåŠ¡æ¨¡å‹" class="headerlink" title="1.6 åè®®å±‚æ¬¡ä¸æœåŠ¡æ¨¡å‹"></a>1.6 åè®®å±‚æ¬¡ä¸æœåŠ¡æ¨¡å‹</h2><p>åœ¨è§£å†³å¤æ‚é—®é¢˜æ—¶ï¼Œå°†é—®é¢˜æ¨¡å—åŒ–ï¼Œåˆ†å±‚è§£å†³æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹æ—¥å¸¸ç”Ÿæ´»ä¸­ç§°ä½œèˆªç­çš„ä¾‹å­â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262118996.png" alt="image-20210707205236557"></p><p>è¿™ä¸ªä¾‹å­æœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢ï¼Ÿ</p><ol><li>åœ¨æ¯ä¸€å±‚éƒ½å®ç°äº†<strong>ç‰¹å®šçš„åŠŸèƒ½</strong>ï¼Œæ¯”å¦‚è´­ç¥¨ï¼Œæ‰˜è¿è¡Œæå·´æ‹‰å·´æ‹‰ï¼›</li><li>åœ¨ä½¿ç”¨ä¸Šå±‚æœåŠ¡æ—¶ï¼Œå¿…é¡»ä¾æ‰˜ä¸‹å±‚æä¾›çš„<strong>æœåŠ¡</strong>ã€‚ç®€è¨€ä¹‹ï¼Œæ€»å¾—å…ˆè´­ç¥¨æ‰èƒ½åé£æœºå§ï¼Œå½“ç„¶ï¼Œåƒ&lt;çŒ«å’Œè€é¼ &gt;ä¸­çš„è±æ˜‚çº³å¤šé™¤å¤–~</li><li>æ¯ä¸€å±‚éƒ½æœ‰ç‰¹æœ‰çš„<strong>è§„èŒƒ</strong>ï¼Œæ¯”å¦‚æŒ‰ç‰¹å®šè·¯çº¿èˆªè¡Œã€‚</li></ol><p>åœ¨ä¸Šé¢æˆ‘ä»¬äº†æœåŠ¡ï¼Œé‚£æ€æ ·è§£é‡ŠæœåŠ¡å‘¢ï¼Ÿ</p><p><code>æœåŠ¡</code>ï¼šåº•å±‚å®ä½“å‘ä¸Šå±‚å®ä½“æä¾›ä»–ä»¬ä¹‹é—´çš„é€šä¿¡çš„èƒ½åŠ›ã€‚</p><p>ä¸æœåŠ¡ä¼šå‘ç”Ÿæ¦‚å¿µæ··æ·†çš„ï¼Œæ˜¯<strong>åŸè¯­</strong>çš„æ¦‚å¿µï¼Œè¿™é‡Œçš„åŸè¯­åŒºåˆ«äºæ“ä½œç³»ç»Ÿçš„åŸè¯­ï¼ŒæŒ‡çš„æ˜¯ä½¿ç”¨æœåŠ¡çš„æ–¹å¼ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯<strong>API</strong>ã€‚æœ‰äº†æœåŠ¡ï¼Œè‡ªç„¶å°±æœ‰æœåŠ¡ä½œç”¨çš„å¯¹è±¡â€”â€”</p><p><code>æœåŠ¡è®¿é—®ç‚¹SAP</code>: å³ä¸‹å±‚æä¾›çš„æœåŠ¡è¦é€šè¿‡<strong>æ¥å£</strong>æ¥è®©ä¸Šå±‚è°ƒç”¨ã€‚åœ¨ä¼ è¾“å±‚ï¼ŒSAPå°±æ˜¯ç«¯å£ã€‚</p><p>æˆ‘ä»¬å°†æœåŠ¡çš„ç²’åº¦æ”¾å°å°±æ˜¯<strong>æ•°æ®å•å…ƒDU</strong>ï¼Œä¸‹é¢çš„å›¾ä¼šå±•ç¤ºDUçš„ç»“æ„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262119230.png" alt="image-20210707205247263"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®å•å…ƒæ˜¯ç”±<strong>å®ä½“+ç‰¹å®šçš„åè®®å¤´éƒ¨</strong>æ„æˆçš„ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå‰ç½®çŸ¥è¯†å¤§æŠµå°±å®Œäº†ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šæ­£èœâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262119497.png" alt="image-20210707205300541"></p><p>æ¢ç§æè¿°æ–¹å¼â€”â€”</p><table><thead><tr><th>åè®®åˆ†å±‚</th><th>æ•°æ®å•å…ƒ</th><th>æœåŠ¡</th><th>æœåŠ¡è®¿é—®ç‚¹</th><th>å¸¸ç”¨åè®®</th><th><strong>å…³é”®è¯</strong></th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>æŠ¥æ–‡</td><td>ç½‘ç»œåº”ç”¨</td><td></td><td>HTTP.DNS,SMTP,FTP</td><td></td></tr><tr><td>ä¼ è¾“å±‚</td><td>æŠ¥æ–‡æ®µ</td><td>ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“</td><td>ç«¯å£</td><td>TCP/UDP</td><td>æ‹¥å¡æ§åˆ¶ï¼Œæµé‡ç®¡ç†ï¼Œå¯é æ•°æ®ä¼ è¾“ï¼Œé¢å‘è¿æ¥/ä¸é¢å‘è¿æ¥</td></tr><tr><td>ç½‘ç»œå±‚</td><td>åˆ†ç»„</td><td>ä¸ºæ•°æ®åŒ…ä»æºåˆ°ç›®çš„é€‰æ‹©è·¯ç”±</td><td>IPåœ°å€</td><td>IP</td><td>è·¯ç”±ï¼Œè½¬å‘</td></tr><tr><td>é“¾è·¯å±‚</td><td>æ•°æ®å¸§</td><td>ç›¸é‚»ç½‘ç»œèŠ‚ç‚¹é—´çš„æ•°æ®ä¼ è¾“</td><td></td><td>PPP,802.11WIFI</td><td>ä¸å¯é </td></tr><tr><td>ç‰©ç†å±‚</td><td>å­—èŠ‚</td><td>åœ¨çº¿è·¯ä¸Šä¼ é€bit</td><td></td><td></td><td>é€šä¿¡é“¾è·¯</td></tr></tbody></table><p>è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥è§£ç­”å®é™…ä¸­åº”ç”¨ç¨‹åºé—´çš„é€šä¿¡æ˜¯å¦‚ä½•å®ç°çš„å•¦â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img3/202310262119692.png" alt="image-20210707205315024"></p><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç£ç›˜ä¸æ–‡ä»¶</title>
      <link href="/2021/07/12/ci-pan-yu-wen-jian/"/>
      <url>/2021/07/12/ci-pan-yu-wen-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ç£ç›˜ä¸æ–‡ä»¶"><a href="#ä¸€ã€ç£ç›˜ä¸æ–‡ä»¶" class="headerlink" title="ä¸€ã€ç£ç›˜ä¸æ–‡ä»¶"></a>ä¸€ã€ç£ç›˜ä¸æ–‡ä»¶</h1><hr><h2 id="1-ç”Ÿç£ç›˜çš„ä½¿ç”¨"><a href="#1-ç”Ÿç£ç›˜çš„ä½¿ç”¨" class="headerlink" title="1.ç”Ÿç£ç›˜çš„ä½¿ç”¨"></a>1.ç”Ÿç£ç›˜çš„ä½¿ç”¨</h2><p>ç”Ÿç£ç›˜æŒ‡å•ç‹¬çš„ç£ç›˜ï¼Œä¸åŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿã€‚</p><p><strong>ç£ç›˜çš„ä½¿ç”¨åŒå¤–è®¾ä¸€æ ·</strong>ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶ä¹Ÿæ˜¯ä¸‰æ­¥èµ°ï¼šCPUå‘ç£ç›˜æ§åˆ¶å™¨ä¸­çš„<strong>å¯„å­˜å™¨</strong>è¯»å†™æ•°æ®ï¼Œ<strong>ç£ç›˜æ§åˆ¶å™¨</strong>å®ŒæˆçœŸæ­£çš„å·¥ä½œï¼Œå¹¶<strong>å‘CPUå‘ä¸­æ–­</strong>ä¿¡æ¯ã€‚</p><p>å­¦ä¹ ç£ç›˜ä»è®¤è¯†ç£ç›˜å¼€å§‹ï¼Œç£ç›˜æ˜¯é•¿è¿™æ ·çš„â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262042555.png" alt="image-20201124193703592"></p><p>é‚£ç£ç›˜æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿæˆ‘ä»¬ä»¥<strong>ç£ç›˜è¯»å†™ä¸€ä¸ªå­—èŠ‚</strong>ä¸ºä¾‹ï¼š</p><p>é¦–å…ˆç§»åŠ¨<strong>ç£å¤´</strong>ï¼Œå¹¶ç§»åŠ¨<strong>ç£ç›˜</strong>åˆ°<strong>ç£é“</strong>ä¸Šï¼Œç„¶åæ—‹è½¬ç£é“åˆ°<strong>æ‰‡åŒº</strong>ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­<strong>ç£ç”Ÿç”µ</strong>ï¼Œä»æ‰‡åŒºä¸­è¯»å‡ºä¸€ä¸ªå­—èŠ‚åˆ°<strong>å†…å­˜ç¼“å†²åŒº</strong>ã€‚</p><p>åŒæ ·çš„ï¼Œå¦‚æœè¦ä»å†…å­˜è¯»å–ä¸€ä¸ªå­—èŠ‚åˆ°ç£ç›˜ï¼Œåˆ™åº”è¯¥ä»å†…å­˜ç¼“å†²åŒºä¸­è¯»å–å­—èŠ‚ï¼Œå†æŠŠå®ƒæ”¾åœ¨ç›¸åº”ç£é“çš„ç‰¹å®šæ‰‡åŒºä¸­ã€‚</p><p>äº†è§£äº†è¡¨å±‚çš„å·¥ä½œæœºåˆ¶ï¼Œæ¥ä¸‹æ¥éœ€è¦å°†è¿™ä¸ªè¿‡ç¨‹<strong>å…·è±¡åŒ–</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´è¦å¾€æ§åˆ¶å™¨ä¸­å†™<strong>æŸ±é¢Cï¼Œç£å¤´Hï¼Œæ‰‡åŒºSï¼Œç¼“å­˜ä½ç½®</strong>å°±å¯ä»¥è¯»å†™ç£ç›˜äº†ã€‚</p><p>é‚£ç”¨ä»€ä¹ˆå†™å…¥å‘¢ï¼Ÿè‡ªç„¶æ˜¯<strong>outæŒ‡ä»¤</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262048224.png" alt="image-20201124194841844"></p><p>åˆ°è¿™é‡Œï¼Œæ“ä½œç³»ç»Ÿå·²ç»å¯ä»¥è¿è¡Œäº†ï¼Œä½†<strong>ä¼ å…¥çš„å‚æ•°å¤ªå¤š</strong>äº†ï¼Œæ¯æ¬¡è¯»å†™éƒ½è¦åšè¿™ä¹ˆç¹ççš„ï¼Œé‚£èƒ½å¦<strong>å°†è¿™äº›æ“ä½œå°è£…</strong>ï¼Œæˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€å±‚çš„æŠ½è±¡â€”â€”</p><h3 id="é€šè¿‡ç›˜å—å·è¯»å†™ç£ç›˜"><a href="#é€šè¿‡ç›˜å—å·è¯»å†™ç£ç›˜" class="headerlink" title="é€šè¿‡ç›˜å—å·è¯»å†™ç£ç›˜"></a>é€šè¿‡ç›˜å—å·è¯»å†™ç£ç›˜</h3><p>CPUå¯ä»¥é€šè¿‡æä¾›çš„ç›˜å—å·æ¥ç®—å‡ºä¸Šé¢çš„ä¸‰ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ç”¨<strong>ä¸€ç»´çš„å‚æ•°æ¥ç®—å‡ºä¸‰ç»´çš„å‚æ•°</strong>ï¼Œåœ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°<strong>ç¼–å€</strong>ï¼Œé‚£ä¹ˆæ€æ ·ç¼–å€æ‰æœ€é«˜æ•ˆå‘¢ï¼Ÿè€ƒè™‘åˆ°æˆ‘ä»¬ä½¿ç”¨æ–‡ä»¶æ—¶é€šå¸¸æ˜¯<strong>è¯»å–blockç›¸é‚»çš„ç›˜å—</strong>ï¼Œå› è€Œç¼–å€çš„è®¾è®¡éœ€è¦ä½¿å¾—<strong>è¯»å–ç›¸é‚»çš„ç›˜å—æ¯”è¾ƒå¿«é€Ÿ</strong>ã€‚</p><blockquote><p>ç£ç›˜è®¿é—®æ—¶é—´=å†™å…¥æ§åˆ¶å™¨æ—¶é—´+å¯»é“æ—¶é—´+æ—‹è½¬æ—¶é—´+ä¼ è¾“æ—¶é—´ã€‚</p></blockquote><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>å¯»é“èŠ±è´¹çš„æ—¶é—´æœ€å¤š</strong>ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§ç§»åŠ¨çš„æœºæ¢°è¿åŠ¨ã€‚</p><p>æ‰€ä»¥ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œå¯ä»¥å°†ç›¸é‚»çš„ç›˜å—æ”¾åœ¨åŒä¸€ä¸ªæ‰‡åŒºâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262043931.png" alt="image-20201124200503945"></p><p>é‚£ä¹ˆé—®é¢˜æ˜¯å¦‚ä½•<strong>é€šè¿‡C,H,Så¾—åˆ°æ‰‡åŒºå·block</strong>å‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262043141.png" alt="image-20201124201018062"></p><p>å› ä¸ºè®¿é—®ç£ç›˜çš„æ—¶é—´ç»å¤§éƒ¨åˆ†æ˜¯ç”¨äºå¯»é“çš„ï¼Œå› è€Œéšç€<strong>è¯»å–ç£ç›˜æ‰‡åŒºå¢å¤§</strong>ï¼Œ<strong>è¯»å†™çš„é€Ÿåº¦ä¼šæ˜¾è‘—çš„æé«˜</strong>ï¼Œä½†åŒæ—¶ä¹Ÿä¼šå¸¦æ¥<strong>ç©ºé—´çš„æµªè´¹</strong>ï¼Œè¡¨ç°ä¸ºç£ç›˜çš„ç¢ç‰‡å¢å¤šã€‚</p><p>é‚£æˆ‘ä»¬æ€æ ·<strong>æŠ˜ä¸­</strong>å‘¢ï¼Ÿå¾ˆæŠ±æ­‰ï¼Œæˆ‘ä»¬ç©ºé—´å¤šå¾—æ˜¯ï¼Œ<strong>ç”¨ç©ºé—´æ¢æ—¶é—´</strong>æ˜¯å¤§åŠ¿æ‰€è¶‹ã€‚</p><p>è€Œéšç€è¯»å†™ç©ºé—´çš„å¢å¤§ï¼Œè¯»å†™çš„å•ä½ä¹Ÿ<strong>ä»æ‰‡åŒºå˜ä¸ºäº†ç›˜å—</strong>ï¼Œæœ‰å¤´æœ‰å°¾ï¼Œä¸è¿‡å¦‚æ˜¯ã€‚</p><hr><p>åœ¨ç¬¬äºŒæ¬¡å°è£…ä¹‹å‰ï¼Œæˆ‘ä»¬è¡¥å……ä¸€ç‚¹çŸ¥è¯†ï¼Œä¹Ÿä¸ºä¸‹æ–‡åŸ‹ä¸‹ä¼ç¬”ï¼š</p><p>linux0.11çš„ç›˜å—å·æœ‰å¤šå¤§å‘¢ï¼Ÿ</p><p>æ¯è¯»å–ä¸€ä¸ªç›˜å—ï¼Œä¼šè¯»å–ä¸¤ä¸ªæ‰‡åŒºï¼Œå› æ­¤å¯ä»¥è¯´ç›˜å—ç­‰äºä¸¤ä¸ªæ‰‡åŒºã€‚</p><h3 id="å¤šä¸ªè¿›ç¨‹é€šè¿‡é˜Ÿåˆ—ä½¿ç”¨ç£ç›˜"><a href="#å¤šä¸ªè¿›ç¨‹é€šè¿‡é˜Ÿåˆ—ä½¿ç”¨ç£ç›˜" class="headerlink" title="å¤šä¸ªè¿›ç¨‹é€šè¿‡é˜Ÿåˆ—ä½¿ç”¨ç£ç›˜"></a>å¤šä¸ªè¿›ç¨‹é€šè¿‡é˜Ÿåˆ—ä½¿ç”¨ç£ç›˜</h3><p>åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬è¯´çš„æ˜¯CPUåˆ†é…èµ„æºçš„æœ€å°å•å…ƒâ€”â€”ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†å®é™…åº”ç”¨ä¸­å¤šé“ç¨‹åºå¹¶å‘æ‰§è¡Œæ‰æ˜¯å¸¸æ€ï¼Œè¿™æ—¶å°±éœ€è¦å¼•å…¥é˜Ÿåˆ—â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262045799.png" alt="image-20201124202710472"></p><p>é‚£æ€æ ·ç»„ç»‡ç£ç›˜è®¿é—®çš„è¯·æ±‚æ•ˆç‡æœ€é«˜å‘¢ï¼Ÿæˆ‘ä»¬ä¸»è¦è€ƒè™‘<strong>å¹³å‡è®¿é—®å»¶è¿Ÿ</strong>å’Œ<strong>å¯»é“æ—¶é—´</strong>ï¼Œè€Œå¯»æ±‚ä¸€ç§ç›¸å¯¹é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œæ¢è¨€ä¹‹å°±æ˜¯å¯»æ±‚ä¸€ç§ç®—æ³•â€”â€”</p><p>è¯´åˆ°è°ƒåº¦ç®—æ³•ï¼Œæœ€ç›´è§‚çš„è‡ªç„¶æ˜¯FCFSã€‚</p><h3 id="FCFS"><a href="#FCFS" class="headerlink" title="FCFS"></a>FCFS</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262045425.png" alt="image-20201124225422783"></p><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å…ˆæ¥å…ˆæœåŠ¡çš„ç®—æ³•ä¼šå¯¼è‡´<strong>ç£å¤´æ€»åœ¨é•¿é€”å¥”è¢­</strong>ï¼Œè€Œä¸é¡¾å®ƒç»è¿‡çš„å¯ä»¥<strong>é¡ºä¾¿è®¿é—®</strong>çš„è¿›ç¨‹ã€‚</p><p>åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ”¹è¿›çš„æƒ³æ³•æ˜¯å…ˆå¤„ç†ç¦»å½“å‰ç£å¤´è¿‘çš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯<strong>SSTF</strong>â€”â€”<strong>æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆç®—æ³•</strong></p><h3 id="SSTF"><a href="#SSTF" class="headerlink" title="SSTF"></a>SSTF</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262046831.png" alt="image-20201124230201466"></p><p>è¿™ç§ç®—æ³•çš„ç¡®è§£å†³äº†ç£å¤´è€—æ—¶çš„é—®é¢˜ï¼Œä½†å› ä¸º<strong>ç¨‹åºçš„å±€éƒ¨æ€§</strong>ï¼Œè¿›ç¨‹å¯¹ç£ç›˜çš„<strong>è¯·æ±‚æ€»ä¼šæ¯”è¾ƒé›†ä¸­</strong>ï¼Œè¿™ä¼šå¯¼è‡´<strong>è¾¹ç¼˜åŒ–çš„è¿›ç¨‹</strong>å³ä¾¿ç­‰å¾…äº†å¾ˆä¹…ï¼Œä¹Ÿ<strong>æ²¡æœ‰å¾—åˆ°IOèµ„æº</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>é¥¥é¥¿</strong>é—®é¢˜ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å†æ¥ä¸‹æ¥çš„æ”¹è¿›ä¸­æ—¢è¦å…¼é¡¾æœ€çŸ­å¯»å€ï¼Œä¹Ÿè¦æ»¡è¶³é›¨éœ²å‡æ²¾çš„éœ€è¦ï¼Œè¿™å°±å¼•å‡ºäº†<strong>ç”µæ¢¯ç®—æ³•</strong>â€”â€”SCAN</p><h3 id="SCAN"><a href="#SCAN" class="headerlink" title="SCAN"></a>SCAN</h3><p>æ—¢ç„¶è¯·æ±‚æœ‰å±€éƒ¨æ€§ï¼Œé‚£æˆ‘ä»¬é¦–å…ˆä»<strong>è¯·æ±‚å¯†é›†</strong>çš„åœ°æ–¹å¼€å§‹<strong>ç£å¤´æ‰«æ</strong>ï¼Œç„¶åç£å¤´æ²¿ç€æŸä¸€æ–¹å‘æ‰«æï¼Œæ‰«æå®ŒåæŠ˜è¿”ï¼Œæˆ‘ä»¬æ¥å…·è±¡åŒ–çš„çœ‹ä¸‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262049350.png" alt="image-20201124231412870"></p><p>å¯ä»¥çœ‹åˆ°ä¸­é—´è¯·æ±‚å¯†é›†çš„åœ°æ–¹ä»ç„¶è¢«æ‰«æå¤šæ¬¡ï¼Œè¿™å°±å¥½æ¯”<strong>æˆ‘è¦åç€æ­£åœ¨å¾€ä¸‹çš„ç”µæ¢¯å»ä¸Šé¢ï¼Œè¿™å¯ä¸æ€ä¹ˆæ˜æ™º</strong>ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç­‰ç”µæ¢¯å…ˆä¸‹å»ï¼Œç„¶åæˆ‘ä»¬å†ä¹˜åå‘ä¸Šçš„ç”µæ¢¯ï¼Œè¿™ä¸ªç®—æ³•çš„ä¼˜åŒ–ä¹Ÿåº”è¯¥å¦‚æ­¤â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262049748.png" alt="image-20201124232126400"></p><p>ç†è®ºå®Œäº†ï¼Œä¸Šæ­£èœâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262050529.png" alt="image-20201124234604990"></p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œé¦–å…ˆ<strong>å°†è¯·æ±‚åŠ å…¥åˆ°é˜Ÿåˆ—</strong>ä¸­ï¼ŒåˆIOèµ„æºæ˜¯ä¸´ç•ŒåŒºèµ„æºï¼Œå› æ­¤ç”¨<strong>cli(),sti()</strong>çš„æ–¹å¼ç»™ä¸´ç•ŒåŒºä¸Šé”ï¼Œå¤„ç†å®Œè¯·æ±‚åå†è¿”å›ã€‚</p><p>è‡³æ­¤ï¼Œè°ƒåº¦ç®—æ³•å‘Šä¸€æ®µè½ï¼Œæˆ‘ä»¬æ¥åšä¸€æ€»ç»“â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262050421.png" alt="image-20201124235425309"></p><h2 id="2-ä»ç”Ÿç£ç›˜åˆ°æ–‡ä»¶"><a href="#2-ä»ç”Ÿç£ç›˜åˆ°æ–‡ä»¶" class="headerlink" title="2.ä»ç”Ÿç£ç›˜åˆ°æ–‡ä»¶"></a>2.ä»ç”Ÿç£ç›˜åˆ°æ–‡ä»¶</h2><p>å‰é¢æåŠè¿›ç¨‹é€šè¿‡ç›˜å—å·ä»è€Œç®—å‡ºæ‰‡åŒºå·ï¼Œé‚£<strong>ç›˜å—å·æ˜¯æ€æ ·å¾—åˆ°çš„</strong>å‘¢ï¼Ÿå°±æ˜¯é€šè¿‡<strong>æ–‡ä»¶</strong>ã€‚æˆ‘ä»¬çš„æ ¸å¿ƒåœ¨äºäº†è§£<strong>å¦‚ä½•ä»æ–‡ä»¶è·å–ç›˜å—å·</strong>ã€‚</p><p>ä¸ä½¿ç”¨æ–‡ä»¶çš„ç£ç›˜æ˜¯ç”Ÿç£ç›˜ï¼Œè¿™å°ç»“æˆ‘ä»¬å°±å°†è¿™ç”Ÿç±³ç…®æˆç†Ÿé¥­ï¼Œæ¥çœ‹<strong>ç†Ÿç£ç›˜çš„å·¥ä½œæœºåˆ¶</strong>ã€‚</p><p>é‚£å¦‚ä½•å¼•å…¥æ–‡ä»¶å‘¢ï¼Ÿæˆ‘ä»¬å¯¹ç›˜å—åšè¿›ä¸€æ­¥çš„æŠ½è±¡ï¼Œå°±æˆäº†æ–‡ä»¶ã€‚</p><p>é‚£ä»ç”¨æˆ·è§†è§’æ¥çœ‹ï¼Œæ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ<strong>æ–‡ä»¶æ˜¯ç”¨æ¥å­˜å‚¨å­—ç¬¦çš„</strong>ï¼Œå› æ­¤ä¸å¦¨è¯´<strong>æ–‡ä»¶æ˜¯å­—ç¬¦æµ</strong>ã€‚</p><p>æˆ‘ä»¬çš„é—®é¢˜è½¬å˜ä¸ºè¦å»ºç«‹<strong>å­—ç¬¦æµåˆ°ç›˜å—é›†åˆçš„æ˜ å°„</strong>å…³ç³»ï¼Œé‚£æ˜ å°„å¦‚ä½•ç†è§£å‘¢ï¼ŸåŸºäºç›˜å—å·çš„æ˜ å°„åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„å°ä¾‹å­â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262051886.png" alt="image-20201125092547498"></p><p>æˆ‘ä»¬é€šè¿‡æ˜ å°„å¾—åˆ°äº†å­—ç¬¦çš„ä½ç½®ï¼Œä½†è¿™ä¸ªæ˜ å°„çš„ç»†èŠ‚å¯¹ç”¨æˆ·æ˜¯éšè—çš„ï¼Œæˆ‘ä»¬ä¸å¦¨å‰¥èŒ§æŠ½ä¸ï¼Œçœ‹çœ‹æ˜ å°„æ˜¯é€šè¿‡æ€æ ·çš„ç»“æ„æ¥å®ç°çš„ï¼Ÿ</p><p>æœ€å¸¸è§„çš„æ˜ å°„ç»“æ„æ˜¯ä»¥è¿ç»­ç»“æ„å®ç°æ–‡ä»¶â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262051710.png" alt="image-20201125093111022"></p><p>å­—ç¬¦çš„ä½ç½®ç¡®å®šäº†ï¼Œæ˜ å°„å»ºç«‹èµ·æ¥äº†ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ï¼Œè‡ªç„¶å°±å½¢æˆäº†<strong>FCBâ€”â€”æ–‡ä»¶æ§åˆ¶å—</strong>ï¼Œé€šè¿‡æŸ¥è¡¨æˆ‘ä»¬å¾—çŸ¥äº†å¯¹åº”çš„ç£ç›˜å—ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262051478.png" alt="image-20201125093355040"></p><p>æˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹â€”â€”</p><p><code>é¦–å…ˆç”¨æˆ·æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨æˆ·æ“ä½œæŸäº›å­—ç¬¦æµï¼Œè¿™äº›å­—ç¬¦æµé€šè¿‡æŸ¥FCBè¡¨å¯¹åº”åˆ°ç›¸åº”çš„ç›˜å—ï¼Œç„¶åæ ¹æ®ç›˜å—å·çš„å¾—åˆ°CHSï¼Œæœ€ç»ˆè¯»å†™æ–‡ä»¶ã€‚</code></p><hr><p>é€šè¿‡é¡ºåºç»“æ„æŸ¥è¯¢æ–‡ä»¶ä½ç½®ï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡<strong>æ•°ç»„</strong>çš„æ–¹å¼è®¿é—®ï¼Œæ•°ç»„å¯¹äºè¯å…¸å¼çš„é™æ€æ–‡ä»¶è®¿é—®éå¸¸å‹å¥½ï¼Œä½†å‡å¦‚åœ¨æ•°ç»„ä¸­å†æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå°±éœ€è¦å¯¹å…¶ä»–å…ƒç´ åšä½ç½®çš„ç§»åŠ¨ï¼Œæ˜¾ç„¶ä¸æ–¹ä¾¿ï¼Œé‚£è¿™ç§åŠ¨æ€çš„å†™å…¥ç”¨æ€æ ·çš„ç»“æ„å®ç°å‘¢â€”â€”<strong>é“¾è¡¨</strong></p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262051263.png" alt="image-20201125095036685"></p><p>é“¾è¡¨çš„ç»“æ„åªéœ€è¦æ·»åŠ ä¸€ä¸ª<code>é€»è¾‘å—å·</code>ï¼Œå°†è¿™ä¸ªé€»è¾‘å—å·ä¸ç‰©ç†å—å·<code>å»ºç«‹æ˜ å°„å…³ç³»</code>ï¼Œå°±å¯ä»¥å®ç°åŠ¨æ€çš„åœ¨ç©ºé—²å—ä¸­å†™å…¥ï¼Œä½†é“¾è¡¨çš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œå‡å¦‚éœ€è¦æŸä¸ªç›˜å—å·ï¼Œå®ƒéœ€è¦éå†ä¹‹å‰çš„æ‰€æœ‰ç›˜å—å·ï¼Œå¢åŠ äº†è®¿é—®æ—¶é—´ã€‚</p><p>å“ï¼Œå®‰å¾—ä¸–é—´ä¸‡å…¨æ³•ï¼Œä¸è´Ÿæ•°ç»„ä¸è´Ÿå¿ã€‚</p><p>ä½†æ˜¯å§ï¼Œè¿˜çœŸæœ‰ï¼Œä½†è¿™å°±æ˜¯å¦ä¸€ä¸ªæ•…äº‹äº†â€”â€”<strong>ç´¢å¼•ç»“æ„</strong></p><p>ç´¢å¼•ç»“æ„åœ¨ç”Ÿæ´»ä¸­å¾ˆå¸¸è§ï¼Œä¹¦æœ¬çš„ç›®å½•å°±æ˜¯ç´¢å¼•ï¼Œç›®å½•ä¸‹çš„é¡µæ˜¯è¿ç»­çš„ï¼Œç¬¦åˆæ•°ç»„çš„ç‰¹ç‚¹ï¼Œè€Œç›®å½•é¡µæ˜¯ä¸è¿ç»­çš„ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨ç»“æ„ã€‚</p><p>æˆ‘ä»¬<code>æŸ¥FCBè¡¨</code>å¯ä»¥å¾—åˆ°<code>ç´¢å¼•å—</code>ï¼Œå†é€šè¿‡ç´¢å¼•å—å¾—åˆ°<code>ç‰¹å®šç›˜å—çš„ç´¢å¼•</code>ã€‚å®ƒæ˜¯ä¸€ç§è¿ç»­å’Œé“¾å¼åˆ†é…çš„æœ‰æ•ˆæŠ˜ä¸­ã€‚</p><p>é‚£ç´¢å¼•å¦‚ä½•å…·è±¡è¡¨ç¤ºå‘¢ï¼Ÿå…¶å®æˆ‘ä»¬ä¹‹å‰ä¹ŸæåŠè¿‡ï¼Œä¹Ÿå°±æ˜¯<strong>inode</strong>ï¼Œå³<strong>index nodeã€‚</strong></p><h2 id="3-æ–‡ä»¶ä½¿ç”¨ç£ç›˜çš„å®ç°"><a href="#3-æ–‡ä»¶ä½¿ç”¨ç£ç›˜çš„å®ç°" class="headerlink" title="3.æ–‡ä»¶ä½¿ç”¨ç£ç›˜çš„å®ç°"></a>3.æ–‡ä»¶ä½¿ç”¨ç£ç›˜çš„å®ç°</h2><p>ä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬å®Œæˆäº†ç”Ÿç£ç›˜çš„ä½¿ç”¨ï¼Œè€Œåå¯¹ç”Ÿç£ç›˜è¿›è¡Œä¸€å±‚å±‚çš„æŠ½è±¡ï¼Œæœ€ç»ˆç”¨æ–‡ä»¶çš„å½¢å¼æ¥ä½¿ç”¨ç£ç›˜ï¼Œé‚£æ–‡ä»¶æ˜¯å¦‚ä½•ä½¿ç”¨ç£ç›˜çš„å‘¢ï¼Ÿå®ƒä¸ç”Ÿç£ç›˜çš„ä½¿ç”¨æœ‰ä»€ä¹ˆå¼‚åŒï¼Œé€šè¿‡æ–‡ä»¶ä½¿ç”¨ç£ç›˜çš„æ ¸å¿ƒåˆæ˜¯ä»€ä¹ˆï¼Ÿ</p><hr><p>æˆ‘ä»¬é¦–å…ˆç»™å‡ºä¸€ä¸ªå¤§è‡´çš„è„‰ç»œâ€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262052503.png" alt="image-20201125105359803"></p><p>å¯è§ï¼Œå¯¹ç£ç›˜çš„è¯»å†™ä¸è¿‡æ˜¯åœ¨å¯¹æ–‡ä»¶è¯»å†™çš„åŸºç¡€ä¸Š<code>æ˜¾ç¤ºå¾—åŠ äº†ä¸€æ­¥</code>ï¼šé€šè¿‡inodeæ‰¾åˆ°ç£ç›˜ç›˜å—å·ã€‚</p><p>è¿™ä¸ªæ•…äº‹ä»ç³»ç»Ÿè°ƒç”¨<strong>sys_write</strong>å¼€å§‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262051307.png" alt="image-20201125105002918"></p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡<strong>æ–‡ä»¶æè¿°ç¬¦fd</strong>å¾—åˆ°é‚£ä¸ªæ–‡ä»¶<strong>file</strong>ï¼Œç„¶åé€šè¿‡fileå¾—åˆ°<strong>æ–‡ä»¶ç»“æ„æè¿°ä¿¡æ¯inode</strong>ï¼Œæœ€ç»ˆè°ƒç”¨æ–‡ä»¶å†™å…¥<strong>file_writeå‡½æ•°</strong>ã€‚</p><p>è€Œfile_writeå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„é‚£å¼ åœ°å›¾ï¼š</p><ul><li><input disabled type="checkbox"> <strong>file_write(inode,file,buf,count)</strong></li></ul><p>inodeä¹Ÿå°±æ˜¯ç´¢å¼•èŠ‚ç‚¹ï¼Œä»inodeä¸­æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç›˜å—å·ï¼Œä»fileä¸­æˆ‘ä»¬å¯ä»¥è¦è¯»å†™çš„æ˜¯é‚£ä¸€æ®µå­—ç¬¦ä¸²ï¼Œå…·ä½“çš„è¯´ï¼Œfileä¸­æœ‰ä¸€ä¸ªè¯»å†™æŒ‡é’ˆfssekï¼ŒfseekæŒ‡å‘è¿™æ®µå­—ç¬¦çš„å¼€å§‹åœ°å€ï¼Œè€Œå‚æ•°countè¡¨ç¤ºè¦è¯»å†™å¤šå°‘ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯åç§»ï¼Œæœ€åå°†è¿™æ®µå­—ç¬¦å†™åˆ°bufè¿™æ®µç¼“å†²åŒºä¸Šå»ã€‚</p><p>å¤§è‡´çš„è„‰ç»œæœ‰äº†ï¼Œæˆ‘ä»¬æ¥çœ‹å…·ä½“çš„å®ç°â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262052989.png" alt="image-20201125110645363"></p><p>å¦‚æœæ˜¯è¿½åŠ å­—ç¬¦ï¼Œåˆ™é¦–å…ˆå¾—åˆ°æ–‡ä»¶çš„å¤§å°ï¼Œç„¶åæŒ‡é’ˆåç§»åˆ°æ–‡ä»¶æœ«å°¾ï¼Œæœ€åè¦å®ç°<strong>å°†è¿™æ®µå­—ç¬¦å†™å…¥åˆ°ç£ç›˜ä¸­å»</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262052865.png" alt="image-20201125111052897"></p><p>é¦–å…ˆä½¿ç”¨æ–‡ä»¶æœ«å°¾çš„åœ°å€é™¤ä»¥ç›˜å—çš„å¤§å°å¾—åˆ°<strong>å¯¹åº”çš„ç›˜å—å·</strong>ï¼Œç„¶åå°†ç›˜å—å·æ”¾å…¥åˆ°<strong>ç”µæ¢¯çš„è°ƒåº¦é˜Ÿåˆ—</strong>ä¸­ï¼Œæ¥ç€å¾—åˆ°<strong>å…·ä½“çš„å†™å…¥ä½ç½®</strong>ï¼Œæˆ–è€…è¯´æ˜¯åœ¨<strong>ç›˜å—å·å†…çš„åç§»</strong>ã€‚</p><p>é‚£å…·ä½“çš„ç›˜å—å·å¦‚ä½•ç®—çš„å‘¢ï¼Œè¿™åŒæ—¶ä¹Ÿæ˜¯ä½¿ç”¨<strong>æ–‡ä»¶åŒºåˆ«äºä½¿ç”¨ç›˜å—å·çš„æ ¸å¿ƒ</strong>ï¼Œå¦‚ä¸‹å›¾~</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262052267.png" alt="image-20201125112728570"></p><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸‡ç‰©çš†æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸Šé¢æåŠçš„ä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä½†å¦‚æœæ˜¯ä¸€ä¸ªè®¾å¤‡æ–‡ä»¶å‘¢ï¼Ÿ</p><p>æ–‡ä»¶çš„<strong>æ¡†æ¶æ˜¯ä¸å˜</strong>çš„ï¼Œ<strong>å˜åŒ–çš„åªæ˜¯inode</strong>ä¸­å­˜å‚¨çš„å†…å®¹ï¼Œå¯¹äº<strong>è®¾å¤‡æ–‡ä»¶</strong>æ¥è¯´ï¼Œinodeä¸­å­˜å‚¨æœ‰<strong>æ–‡ä»¶çš„å±æ€§ï¼Œç±»å‹</strong>ç­‰â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262052289.png" alt="image-20201125113249026"></p><p>æ•´ä¸ªè„‰ç»œå·²ç»æ˜æ™°äº†èµ·æ¥ï¼Œä½†éšéšä¹‹ä¸­è¿˜æ˜¯æœ‰ä¸€ç‚¹ç•™ç™½ï¼Œæˆ‘ä»¬æŠŠä»æ–‡ä»¶åå¾—åˆ°æ–‡ä»¶æè¿°ç¬¦ï¼Œå†é€šè¿‡fdå¾—åˆ°inodeçš„è¿‡ç¨‹å½“åšä¸€ä¸ªé»‘ç›’å­æ¥ä½¿ç”¨ï¼Œè‡³äºè¿™ä¸ªé»‘ç›’å­æ˜¯å¦æ˜¯æ½˜å¤šæ‹‰é­”ç›’ï¼Œæˆ‘ä»¬ä¼šåœ¨åä¸€èŠ‚çš„å­¦ä¹ ä¸­çœ‹åˆ°ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬æ¥æ¦‚æ‹¬çš„çœ‹ä¸€ä¸‹æ–‡ä»¶è§†å›¾çš„ä¸¤æ¡ä¸»çº¿ï¼š<strong>ç”Ÿç£ç›˜ä¸ç†Ÿç£ç›˜</strong>â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262054942.png" alt="image-20201125114043926"></p><h1 id="äºŒã€æ–‡ä»¶ç³»ç»Ÿ"><a href="#äºŒã€æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="äºŒã€æ–‡ä»¶ç³»ç»Ÿ"></a>äºŒã€æ–‡ä»¶ç³»ç»Ÿ</h1><h2 id="1-ç›®å½•ä¸æ–‡ä»¶ç³»ç»Ÿ"><a href="#1-ç›®å½•ä¸æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="1.ç›®å½•ä¸æ–‡ä»¶ç³»ç»Ÿ"></a>1.ç›®å½•ä¸æ–‡ä»¶ç³»ç»Ÿ</h2><p>åœ¨<strong>æ–‡ä»¶çš„åŸºç¡€</strong>ä¸Šï¼Œé€šè¿‡<strong>ç›®å½•</strong>æŠŠæ•´ä¸ªç£ç›˜æŠ½è±¡æˆ<strong>æ–‡ä»¶ç³»ç»Ÿ</strong>çš„å½¢å¼ï¼Œæ˜¯ç£ç›˜çš„<strong>ç¬¬å››å±‚æŠ½è±¡</strong>ã€‚</p><p>è€Œè¿™ä¹Ÿæ˜¯æœ€ç»ˆå‘ˆç°ç»™ç”¨æˆ·çš„è§†å›¾ï¼Œåœ¨ç”¨æˆ·çœ¼ä¸­ï¼Œ<strong>ç£ç›˜å°±æ˜¯ä¸€å †æœ‰ç»„ç»‡çš„æ–‡ä»¶</strong>ã€‚è€Œå‰¥èŒ§æŠ½ä¸ä¹‹åï¼Œæˆ‘ä»¬çŸ¥é“<strong>æ–‡ä»¶ç³»ç»Ÿæœ€ç»ˆä¼šæ˜ å°„åˆ°ä¸€ä¸ªä¸ªçš„ç›˜å—å·</strong>ä¸­ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿåªæ˜¯æˆ‘ä»¬å…ˆå…¥ä¸ºä¸»çš„ä»ä¸»è§‚ä¸Šå¾—åˆ°çš„æŠ½è±¡ï¼Œä½†å®é™…ä¸Šä»æ–‡ä»¶åˆ°æ–‡ä»¶ç³»ç»Ÿä»æ˜¯ä¸€ä¸ª<strong>æ¼«é•¿çš„è¿‡ç¨‹</strong>ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬ä»<strong>æ–‡ä»¶</strong>å¯ä»¥å¾ˆè‡ªç„¶çš„æƒ³åˆ°<strong>å¤šæ–‡ä»¶</strong>ï¼Œé‚£å¤šä¸ªæ–‡ä»¶å¦‚ä½•ç»„ç»‡èµ·æ¥å‘¢ï¼Ÿèµ·åˆå¤šä¸ªæ–‡ä»¶è‡ªç„¶åº”è¯¥æ˜¯åœ¨<strong>ä¸€å±‚ç›®å½•</strong>çš„ï¼Œä½†ä¸€å±‚ç›®å½•ç®¡ç†èµ·æ¥ç€å®å›°éš¾ï¼Œæ‰€ä»¥<strong>ç›®å½•æ ‘</strong>å°±åº”è¿è€Œç”Ÿäº†ã€‚</p><p>å‡è®¾å°†æ–‡ä»¶åˆ’åˆ†ä¸ºç‰¹å®šç›®å½•ä¸‹çš„ä¸åŒæ–‡ä»¶ï¼Œå°†åˆ’åˆ†åçš„é›†åˆå†è¿›è¡Œåˆ’åˆ†ï¼ŒKæ¬¡åˆ’åˆ†åï¼Œæ¯ä¸ªé›†åˆä¸­çš„æ–‡ä»¶æ•°ä¸º<strong>O(logk N)</strong>.</p><p>å¯ä»¥çœ‹å‡ºä»å¤šæ–‡ä»¶åˆ°ç›®å½•æ ‘çš„<strong>æ ¸å¿ƒ</strong>æ˜¯éœ€è¦<strong>å¼•å…¥ç›®å½•</strong>çš„æ¦‚å¿µï¼Œé‚£ç›®å½•æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿ</p><p>é‚£æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ï¼Œ<strong>ç›®å½•æ€æ ·ä½¿ç”¨</strong>ï¼Œæˆ‘ä»¬<strong>ä½¿ç”¨è·¯å¾„æ¥å®šä½æŸä¸ªæ–‡ä»¶</strong>ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œä½¿ç”¨è·¯å¾„å¯ä»¥å¾—åˆ°æŸä¸ªæ–‡ä»¶çš„<strong>FCB</strong>ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œè¦è¯†åˆ«æŸä¸ªæ–‡ä»¶ï¼Œå°±è¦å¾—åˆ°è¿™ä¸ªæ–‡ä»¶çš„FCBï¼Œå†å¯¹FCBçš„ä¿¡æ¯è¿›è¡ŒåŒ¹é…ï¼Œå°±å¯ä»¥ç¡®è®¤è¿™ä¸ªæ–‡ä»¶æ˜¯ä»€ä¹ˆã€‚</p><p>è€Œä»è·¯å¾„å®šä½æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œç›´è§‚çš„è¯´ï¼Œç›®å½•åº”è¯¥è¦æœ‰å®ƒç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶çš„FCBå’Œæ–‡ä»¶åï¼Œä½†æ˜¯<strong>FCBæ˜¯åºå¤§</strong>çš„ï¼Œå°†å®ƒè¯»å…¥å†…å­˜æ˜¾ç„¶æ˜¯<strong>ä½æ•ˆ</strong>çš„ï¼Œé‚£åªè¦å°†<strong>éœ€è¦çš„é‚£ä¸ªæ–‡ä»¶çš„FCB</strong>åŠ è½½åˆ°<strong>å†…å­˜</strong>ä¸­ï¼Œæ‰€ä»¥FCBéœ€è¦è¢«è¯†åˆ«ï¼Œå› è€Œéœ€è¦ä¸€ä¸ª<strong>FCBçš„ç¼–å·</strong>ï¼Œè€Œè¿™ä¸ªç¼–å·éœ€è¦<strong>FCBæ•°ç»„</strong>æ¥ç»´æŠ¤ã€‚</p><h3 id="æ ‘çŠ¶ç›®å½•çš„å®Œæ•´å®ç°"><a href="#æ ‘çŠ¶ç›®å½•çš„å®Œæ•´å®ç°" class="headerlink" title="æ ‘çŠ¶ç›®å½•çš„å®Œæ•´å®ç°"></a>æ ‘çŠ¶ç›®å½•çš„å®Œæ•´å®ç°</h3><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262054489.png" alt="image-20201125201135235"></p><p>ç°åœ¨ç›®å½•çš„è„‰ç»œå·²ç»<strong>æ˜æ™°</strong>äº†ã€‚ç£ç›˜åªéœ€è¦ç»´æŠ¤<strong>FCBæ•°ç»„</strong>å’Œ<strong>å¯¹åº”FCBå·çš„æ•°æ®å—</strong>å³å¯ï¼Œæ•°æ®å—ä¸­åŒ…å«æœ‰<strong>æ–‡ä»¶å</strong>å’Œ<strong>å¯¹åº”FCBçš„åœ°å€</strong>ã€‚è€Œå¯¹äºä¸€ä¸ª<strong>ç›®å½•</strong>æ¥è¯´ï¼Œå®ƒä¼šç»´æŠ¤<strong>ç›®å½•ä¸‹æ–‡ä»¶çš„FCBæ•°ç»„å’Œæ•°æ®å—</strong>ã€‚é€å±‚å¾ªç¯ï¼Œæœ€ç»ˆå¾—åˆ°éœ€è¦çš„æ–‡ä»¶ã€‚</p><p>ä½†ä»…ä»…è¿™æ ·æ˜¯ä¸å¤Ÿçš„çš„ï¼Œè¦æƒ³ä¸€ä¸ª<strong>ç³»ç»Ÿèƒ½è‡ªä¸¾</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å¯ç§»æ¤</strong>ï¼Œå°±éœ€è¦é¦–å…ˆåšå¥½<strong>æ¡†æ¶</strong>ï¼Œè¿›ä¸€æ­¥è¯´ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ª<strong>æ‰å®çš„æ ¹åŸº</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>æ ¹ç›®å½•çš„ç»´æŠ¤</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262054937.png" alt="image-20201125203034066"></p><p>å°½ç®¡PPTå·²ç»å¾ˆè¯¦ç»†äº†ï¼Œä½†ä¸ºäº†åŠ æ·±è®°å¿†ï¼Œæˆ‘ä»¬å†æ¥æ€»ç»“ä¸€æ‰‹â€”â€”</p><p><code>å¼•å¯¼å—</code>ï¼šæ“ä½œç³»ç»Ÿå¯åŠ¨ä¹‹ååŠ è½½ï¼Œå³<code>å›ºåŒ–çš„å¼•å¯¼å—</code></p><p><code>è¶…çº§å—</code>ï¼šè®°å½•ä½å›¾çš„ç©ºé—´å¤§å°ç­‰ä¿¡æ¯</p><p><code>ièŠ‚ç‚¹çš„ä½å›¾</code>ï¼šè®°å½•<strong>ièŠ‚ç‚¹çš„äº‹åŠ¡</strong>ï¼Œå°±ç›¸å½“äºæ˜¯åŠ¨æ€è®°å½•ièŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ièŠ‚ç‚¹çš„å¤§å°ï¼Œä½ç½®ï¼Œæ€§è´¨ç­‰ä¿¡æ¯</p><p><code>ç›˜å—ä½å›¾</code> ï¼šè®°å½•ç›˜å—çš„çŠ¶æ€ï¼Œå¤§å°ï¼Œä½ç½®ç­‰,å¯ç±»æ¯”è®¡ç®—æœºç½‘ç»œé‡ŒP2Pä½“ç³»ä¸­çš„æ¯äººæŒæœ‰ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¹¶ä½¿ç”¨<strong>ä½å›¾æ¥è¡¨å¾æ•°æ®çš„çŠ¶æ€</strong>ã€‚</p><p>è‡³æ­¤ï¼Œå°±åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„æ€»ç»“ç¯èŠ‚äº†â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262055520.png" alt="image-20201125204155061"></p><h2 id="2-ç›®å½•è§£æä»£ç å®ç°"><a href="#2-ç›®å½•è§£æä»£ç å®ç°" class="headerlink" title="2.ç›®å½•è§£æä»£ç å®ç°"></a>2.ç›®å½•è§£æä»£ç å®ç°</h2><p>åœ¨ä¸Šé¢çš„æµç¨‹ä¸­ï¼Œä»…æœ‰<strong>ç›®å½•çš„å®ç°</strong>æˆ‘ä»¬æ˜¯ä»¥<strong>é»‘ç›’å­</strong>çš„å½¢å¼å±•ç¤ºçš„ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ‰“å¼€è¿™ä¸ªé»‘ç›’å­â€”â€”</p><p><strong>ç›®å½•åŒæ ·æ˜¯æ–‡ä»¶</strong>ï¼Œè€Œå¯¹æ–‡ä»¶çš„æ¢å¯»ï¼Œæ˜¯ä»<strong>openå¼€å§‹</strong>çš„ï¼Œåˆ<strong>ä»¥inodeä½œä¸ºä¸»çº¿</strong>çš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262055805.png" alt="image-20201125213742823"></p><p>é¦–å…ˆæ ¹æ®è·¯å¾„åå¾—åˆ°ç´¢å¼•ï¼Œé€šè¿‡ç´¢å¼•æ‰¾åˆ°ç›®å½•åï¼Œæœ€ç»ˆè¿›å…¥æ ¸å¿ƒçš„<strong>get_dirå‡½æ•°</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262056183.png" alt="image-20201125214016996"></p><p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–æ ¹ç›®å½•çš„inodeï¼ŒæŒ‡å‘è·¯å¾„åçš„æŒ‡é’ˆåç§»ã€‚<strong>ç›®å½•çš„inode</strong>æ˜¯åœ¨ç³»ç»Ÿåˆå§‹åŒ–æ˜¯å°±å­˜å‚¨åœ¨<strong>shellè¿›ç¨‹ä¸­</strong>ï¼Œè€Œ<strong>åæ¥åˆ›å»ºçš„è¿›ç¨‹éƒ½è¦ç”±shellè¿›ç¨‹åˆ›å»º</strong>ï¼Œè‡ªç„¶ä¹Ÿä¼š<strong>æ‹·è´shellè¿›ç¨‹çš„å†…å®¹</strong>ï¼Œæ ¹ç›®å½•çš„inodeå¾—ä»¥æµä¼ ä¸‹æ¥ã€‚</p><blockquote><p>å…³é”®çš„æµç¨‹å°±æ˜¯é¦–å…ˆæ‰¾åˆ°æ ¹ç›®å½•rootï¼Œæ¥ç€ä»è·¯å¾„ä¸­è¯»å–åˆ°ç›®å½•é¡¹ï¼Œç„¶åä»ç›®å½•é¡¹çš„FCBä¸­æ‰¾åˆ°ç´¢å¼•èŠ‚ç‚¹å·inodeï¼Œæœ€ç»ˆæ ¹æ®æ•°æ®å—å†…å®¹å†è¯»å–ä¸‹ä¸€ä¸ªç›®å½•ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262056218.png" alt="image-20201125214627114"></p><p><strong>æ“ä½œç³»ç»Ÿåˆå§‹åŒ–</strong>æ—¶ï¼Œä¼šå®Œæˆ<strong>è®¾å¤‡çš„æŒ‚è½½</strong>ï¼Œè€Œç£ç›˜çš„æŒ‚è½½ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>è¶…çº§å—çš„è¯»å–</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262056571.png" alt="image-20201125214942682"></p><p>ç„¶åæ ¹æ®è¿™ä¸ªæ•°ç»„ä¸­å‰åŠéƒ¨åˆ†çš„å ç”¨ç©ºé—´å¾—åˆ°<strong>inodeçš„ä½ç½®</strong>ï¼Œæ‰¾åˆ°äº†inodeçš„ä½ç½®ï¼Œç›®å½•è¿™ä¸ªæ–‡ä»¶å°±ä¸å†ç¥ç§˜äº†â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262057767.png" alt="image-20201125215119581"></p><p><strong>å¾ªç¯è¯»å–</strong>åˆ°å¶å­ç»“ç‚¹çš„æ–‡ä»¶ï¼Œ<strong>å¤§ç»“å±€</strong>â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262057093.png" alt="image-20201125215235130"></p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤–è®¾ä¸æ–‡ä»¶ç³»ç»Ÿ</title>
      <link href="/2021/07/12/wai-she-yu-wen-jian-xi-tong/"/>
      <url>/2021/07/12/wai-she-yu-wen-jian-xi-tong/</url>
      
        <content type="html"><![CDATA[<p>æ“ä½œç³»ç»Ÿçš„<strong>æ ¸å¿ƒ</strong>æ— éæ˜¯<strong>å¤šè¿›ç¨‹å›¾åƒ</strong>å’Œ<strong>æ–‡ä»¶å›¾åƒ</strong>ï¼Œå®ƒä»¬å…±åŒæ”¯æ’‘äº†ä¸€ä¸ªè®¡ç®—æœº<strong>æœ€åŸºç¡€çš„éª¨æ¶</strong>ï¼Œå‰è€…ä½¿å¤šé“ç¨‹åºèƒ½å¤Ÿè¢«åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶æœ‰åºçš„è¿è¡Œä¸åˆ‡æ¢ï¼Œè¿™å…¶ä¸­åˆåŒ…å«æœ‰å†…å­˜çš„ç®¡ç†ï¼›è€Œåè€…å°†å®Œæˆç¨‹åºå¦‚ä½•å®ç°æŒä¹…åŒ–å­˜å‚¨ï¼Œå¦‚ä½•å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œç»Ÿä¸€çš„æ–‡ä»¶è§†å›¾æ˜¯å¦‚ä½•æ­å»ºçš„è¿™äº›ä»»åŠ¡ã€‚</p><p>å®Œæˆå¤šè¿›ç¨‹ï¼Œå†…å­˜è¿™äº›æ ¸å¿ƒçš„å›¾åƒå¯ä»¥ä½¿<strong>å¤šé“ç¨‹åº</strong>åœ¨åº•å±‚å®Œæˆè¿è¡Œï¼Œä½†äº¤äº’æ˜¯ä¸èƒ½å®ç°çš„ã€‚äººæ˜¯é€šè¿‡ä½¿ç”¨ç¡¬ä»¶æ¥é—´æ¥ä¸CPUäº¤äº’çš„ã€‚å› è€Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ä¹ ä½¿ç”¨å¤–è®¾ï¼Œä¹Ÿå°±æ˜¯<strong>ç”¨äºè¯»å’Œå†™çš„ç»ˆç«¯è®¾å¤‡</strong>ï¼Œè€Œè¿™äº›è¯»å’Œå†™æ“ä½œçš„å¯¹è±¡ä¸ä¸€è€Œè¶³ï¼Œä½†å› ä¸ºå…¶ä¸€è‡´çš„å±æ€§ï¼Œéƒ½æŠŠä»–ä»¬å½’äº<strong>æ–‡ä»¶ç³»ç»Ÿ</strong>ã€‚</p><p>æˆ‘ä»¬å…ˆç»™å‡ºä¸€ä¸ªåŸºæœ¬çš„æ¶æ„â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262034241.png" alt="image-20201122092432000"></p><p>å…³äºå¤–è®¾ä¸æ–‡ä»¶ç³»ç»Ÿçš„æ•…äº‹ä¹Ÿå°±æ­¤å¼€å§‹äº†ã€‚ã€‚ã€‚</p><hr><h2 id="1-IOç³»ç»Ÿ"><a href="#1-IOç³»ç»Ÿ" class="headerlink" title="1.IOç³»ç»Ÿ"></a>1.IOç³»ç»Ÿ</h2><h3 id="æ˜¾ç¤ºå™¨"><a href="#æ˜¾ç¤ºå™¨" class="headerlink" title="æ˜¾ç¤ºå™¨"></a>æ˜¾ç¤ºå™¨</h3><p>é¦–å…ˆæˆ‘ä»¬ç»™å‡ºä¸€ä¸ªç›´è§‚çš„éœ€æ±‚ï¼Œå¦‚ä½•åœ¨å±å¹•ä¸Šä½¿ç”¨printfæ‰“å°å‡ºhello,world?</p><p>ä¸€ä¸ªç›´è§‚çš„çš„<strong>å¤§è‡´æµç¨‹</strong>æ˜¯ï¼šé¦–å…ˆç”±<strong>CPUå‘å‡ºå†™çš„å‘½ä»¤</strong>ï¼Œè¿™ä¸ªå‘½ä»¤é€šè¿‡<strong>PCIæ€»çº¿</strong>ä¼ è¾“åˆ°å¤–è®¾æ§åˆ¶å™¨ä¸­çš„<strong>å¯„å­˜å™¨</strong>ï¼Œç„¶å<strong>å¤–è®¾æ§åˆ¶å™¨</strong>å‘CPUå‘å‡º<strong>ä¸­æ–­</strong>ï¼Œå¹¶<strong>å°†æ•°æ®ä»æ–‡ä»¶å‘æ˜¾å­˜ä¸­å†™å…¥</strong>ã€‚</p><p>æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„å¸¸è¯†åˆ¤æ–­ï¼Œå‘å¯„å­˜å™¨ä¸­å†™ä¸å°±å¥½äº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦æ–‡ä»¶çš„è§†å›¾ï¼Ÿ</p><p>ç›´æ¥å‘å¯„å­˜å™¨ä¸­å†™å›ºç„¶å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œå¹¶ä¸”åœ¨æ±‡ç¼–è¯­è¨€çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ã€‚ä½†å®ƒéœ€è¦æŸ¥è¯¢å¯„å­˜å™¨çš„åœ°å€ï¼Œè¦å†™å…¥å†…å®¹çš„æ ¼å¼å’Œè¯­ä¹‰ï¼Œæˆ‘ä»¬è¦å…¼é¡¾å¾ˆå¤šè¦ç´ ï¼Œæ‰€ä»¥è¿™æ ·æ˜¯ä¸å¯å–çš„ã€‚</p><p>è¿™æ—¶å°±éœ€è¦æ ¹æ®ä»–ä»¬å…±åŒçš„ç‰¹æ€§æ¥æŠ½è±¡å‡ºæ¥ä¸€ä¸ªæ¥å£ï¼Œæ¥è´Ÿè´£å®ŒæˆåŸºç¡€çš„åŠŸèƒ½ï¼Œè€Œç”±å…·ä½“çš„å¤–è®¾æ¥æ‰©å±•ï¼Œè¿™é‡Œçš„æ¥å£å°±æ˜¯â€”â€”<strong>æ–‡ä»¶è§†å›¾</strong>ã€‚</p><p>äº†è§£äº†è®¾è®¡çš„åˆè¡·ï¼Œæˆ‘ä»¬æ¥èµæä¸€æ®µæ“ä½œå¤–è®¾çš„ç¨‹åºâ€”â€”</p><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> fd <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"/dev/xxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é€šè¿‡è¿™ä¸ªé€šä¿—çš„ä¾‹å­æˆ‘ä»¬å¾—è§<strong>æ¥å£</strong>çš„åºå±±çœŸé¢ç›®â€”â€”</p><p>ä¸ç®¡ä»€ä¹ˆè®¾å¤‡ï¼Œæ“ä½œç³»ç»Ÿéƒ½ä¸ºå…¶æä¾›äº†ç»Ÿä¸€çš„æ¥å£<strong>open,read,write,close</strong>ï¼Œè€Œè¿™äº›è®¾å¤‡ç”¨<strong>/dev/xxx</strong>æ¥æ ‡è¯†ã€‚é€šè¿‡è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ§åˆ¶å™¨çš„åœ°å€ï¼Œå†…å®¹æ ¼å¼ç­‰ç­‰ã€‚</p><p>æ¥å£å‘ˆç°ç»™æˆ‘ä»¬çš„æ˜¯ä¸€ä¸ªå°è£…å¥½çš„åŠŸèƒ½å—ï¼Œè€Œæˆ‘ä»¬ä¸ä»…è¦ä¼šçŸ¥é“æ¥å£çš„å­˜åœ¨ï¼Œè¿˜è¦é€šè¿‡æ¥å£æ¥æ¢å¯»<strong>åº•å±‚çš„æ•…äº‹</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262034926.png" alt="image-20201124151108165"></p><p>å¤§è‡´çš„æµç¨‹æ¡†æ¶æœ‰äº†ï¼Œæˆ‘ä»¬æ¥çœ‹printfå‡½æ•°æ˜¯å¦‚ä½•åœ¨æ˜¾ç¤ºå™¨ä¸Šè¾“å‡ºçš„â€”â€”</p><p>printfåº“é¦–å…ˆ<strong>åˆ›å»ºç¼“å­˜buf</strong>ï¼Œç„¶åå°†<strong>æ ¼å¼åŒ–çš„è¾“å‡º</strong>éƒ½å†™åˆ°ç¼“å­˜ä¸­ï¼Œ<strong>ç¼“å­˜æ»¡äº†</strong>ä»¥åå†å†™åˆ°æ˜¾å­˜ä¸­ï¼Œè€Œå¦‚ä½•å†™åˆ°æ˜¾å­˜ä¸­å‘¢ï¼Ÿæ ¸å¿ƒå°±åœ¨äº<strong>sys_writeå‡½æ•°</strong>ï¼Œï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sys_write</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> fd<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span>buf<span class="token punctuation">,</span><span class="token keyword">int</span> count<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">struct</span> file<span class="token operator">*</span> file<span class="token punctuation">;</span>    file <span class="token operator">=</span> current <span class="token operator">-></span> <span class="token function">filp</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>    inode <span class="token operator">=</span> file <span class="token operator">-></span> f_inode<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¯¥å‡½æ•°å°†ç¼“å†²åŒºä¸­çš„æ•°æ®å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦çš„æ–‡ä»¶ä¸­ã€‚å®ƒå®ç°çš„<strong>æ ¸å¿ƒè¿‡ç¨‹</strong>æ˜¯ï¼šé€šè¿‡æ–‡ä»¶æè¿°ç¬¦fdå¾—åˆ°<code>æ–‡ä»¶ä¿¡æ¯</code>ï¼Œå†é€šè¿‡æ–‡ä»¶ä¿¡æ¯ä¸­çš„<code>å¥æŸ„æŒ‡å‘</code>æ‰¾åˆ°å­˜æ”¾æ–‡ä»¶å±æ€§(æ¯”å¦‚åœ¨ç£ç›˜ä¸­å­˜æ”¾çš„blockä½ç½®)çš„<code>ç´¢å¼•èŠ‚ç‚¹inode</code>.</p><blockquote><p>è¿™é‡Œéå¸¸æœ‰å¿…è¦è¯´ä¸‹æ–‡ä»¶æè¿°ç¬¦fdä¸ç´¢å¼•èŠ‚ç‚¹inodeã€‚</p><p>fd:æ–‡ä»¶æè¿°ç¬¦å³æ˜¯<code>æ–‡ä»¶åœ°å€çš„å¼•ç”¨</code>ï¼Œå®ƒä½œä¸ºè¿›ç¨‹æ–‡ä»¶æè¿°ç¬¦çš„è¡¨é¡¹è¢«å­˜å‚¨åœ¨å…¶ä¸­ï¼Œä¹Ÿå¯ç§°fdä¸ºè¿›ç¨‹<code>æ–‡ä»¶æè¿°ç¬¦è¡¨çš„ä¸‹æ ‡</code>ã€‚</p><p>inodeï¼šinodeæ˜¯ä¸€ä¸ªå­˜å‚¨æ–‡ä»¶ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­å­˜å‚¨æœ‰<code>æ–‡ä»¶çš„çœŸæ­£ä½ç½®</code>ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶åœ¨<code>ç£ç›˜ä¸Šblockçš„ä½ç½®</code>ï¼Œ</p><p>inodeæ˜¯fdä¹‹åçš„æ•…äº‹äº†ï¼Œé€šè¿‡æ–‡ä»¶æè¿°ç¬¦è¡¨å¯ä»¥æŸ¥æ‰¾åˆ°fdå¯¹åº”çš„é‚£ä¸ªæ¡ç›®ï¼Œ<code>å–å‡ºæ‰“å¼€æ–‡ä»¶çš„å¥æŸ„</code>ï¼Œé€šè¿‡å¥æŸ„çš„æŒ‡å‘æ‰¾åˆ°inodeã€‚</p><ul><li><input checked disabled type="checkbox"> å¥æŸ„æ˜¯WONDOWSç”¨æ¥æ ‡è¯†è¢«åº”ç”¨ç¨‹åºæ‰€å»ºç«‹æˆ–ä½¿ç”¨çš„å¯¹è±¡çš„å”¯ä¸€æ•´æ•°ï¼ŒWINDOWSä½¿ç”¨å„ç§å„æ ·çš„å¥æŸ„æ ‡è¯†è¯¸å¦‚åº”ç”¨ç¨‹åºå®ä¾‹ï¼Œçª—å£ï¼Œæ§åˆ¶ï¼Œä½å›¾ï¼ŒGDIå¯¹è±¡ç­‰ç­‰ã€‚WINDOWSå¥æŸ„æœ‰ç‚¹è±¡Cè¯­è¨€ä¸­çš„æ–‡ä»¶å¥æŸ„ã€‚</li></ul><p>ä¸Šå›¾â€”â€”</p></blockquote><p>é‚£<code>æ–‡ä»¶æ˜¯å¦‚ä½•é€šè¿‡å½“å‰è¿›ç¨‹çš„ä¿¡æ¯è¢«æ‰¾åˆ°</code>çš„å‘¢ï¼Ÿè¿™å°±æ˜¯æ“ä½œç³»ç»Ÿå…¨å±€åŒ–çš„é›å½¢äº†â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262034969.png" alt="image-20201124152440698"></p><p>è¿™é‡Œä»å½“å‰è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶åºåˆ—ä¸­æ‰¾åˆ°<strong>dev/tty0æ–‡ä»¶</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å¤–è®¾</strong>ï¼Œé‚£è¿™é‡Œçš„<strong>openç³»ç»Ÿè°ƒç”¨</strong>åšäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262034666.png" alt="image-20201124152750656"></p><p>è€Œè¿™äº›æ­¥éª¤çš„æ ¸å¿ƒå°±æ˜¯å»ºç«‹ä¸€ä¸ªé“¾â€”â€”</p><p><img src="C:%5CUsers%5Czyz%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201124152913538.png" alt="image-20201124152913538"></p><p>æ¥ç€æˆ‘ä»¬éœ€è¦çŸ¥é“æ–‡ä»¶çš„å®é™…ç‰©ç†åœ°å€ï¼Œå³é€š<code>è¿‡inodeçš„ç»“æ„ä½“æ‰¾åˆ°å®é™…å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ä½ç½®</code>ï¼Œç„¶åæ¥ç€å¾€ä¸‹èµ°â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262035900.png" alt="image-20201124153222880"></p><p>è¿™é‡Œåˆ¤æ–­å¤–è®¾çš„ç±»å‹ï¼Œå¾—åˆ°æ˜¯<strong>å­—ç¬¦å‹çš„è®¾å¤‡</strong>ï¼Œç„¶åå°†è¾“å‡ºå†…å®¹æ”¾åœ¨<strong>è¾“å‡ºé˜Ÿåˆ—ä¸­</strong>ä»¥<strong>å­—ç¬¦</strong>çš„å½¢å¼è¾“å‡ºâ€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262035442.png" alt="image-20201124153420690"></p><p>è¾“å‡ºçš„æ—¶å€™å³ä½¿ä»<strong>ç”¨æˆ·ç¼“å†²åŒºè¯»å–</strong>ï¼Œç„¶å<strong>è°ƒç”¨å†™å‡½æ•°</strong>å»â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262036021.png" alt="image-20201124153549847"></p><p>å¼€å§‹å†™å…¥ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262036584.png" alt="image-20201124153650464"></p><p>é‚£ä»æ˜¾å­˜çš„ä»€ä¹ˆä½ç½®å¼€å§‹å†™å…¥å‘¢ï¼Ÿç›´è§‚çš„è¯´ï¼Œæ˜¯å…‰æ ‡æ‰€åœ¨å¤„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¯»å–å…‰æ ‡çš„ä½ç½®â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262036435.png" alt="image-20201124153855802"></p><p>è€Œè¾“å‡ºçš„å†…å®¹æ˜¯ä¸ä»…ä»…åŒ…å«å­—ç¬¦çš„ï¼Œè¿˜æœ‰å®ƒçš„é¢œè‰²ï¼Œå› è€ŒposæŒ‡é’ˆéœ€è¦åŠ 2â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262036633.png" alt="image-20201124154015935"></p><p>printfç³»ç»Ÿè°ƒç”¨çš„æ•…äº‹å°±åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œæˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹â€”â€”</p><p>é¦–å…ˆè°ƒç”¨printfåº“å‡½æ•°â€”â€”ã€‹æ ¸å¿ƒæ˜¯ç³»ç»Ÿè°ƒç”¨writeâ€”â€”ã€‹é€šè¿‡å­—ç¬¦è®¾å¤‡æ¥å£è°ƒç”¨åŸºæœ¬åŠŸèƒ½â€”â€”ã€‹ttyè®¾å¤‡å†™å…¥ç¼“å†²åŒºâ€”â€”ã€‹æ˜¾ç¤ºå™¨å†™ï¼Œå³å†™å…¥ç¼“å­˜ï¼Œåœ¨æ˜¾ç¤ºå™¨å±•ç¤ºã€‚</p><hr><h3 id="é”®ç›˜"><a href="#é”®ç›˜" class="headerlink" title="é”®ç›˜"></a>é”®ç›˜</h3><p>å¤–è®¾åŒ…æ‹¬æ˜¾ç¤ºå™¨å’Œé”®ç›˜ï¼Œä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä»‹ç»äº†<strong>æ˜¾ç¤ºå™¨çš„å·¥ä½œæœºåˆ¶</strong>ï¼Œåœ¨æ¥ä¸‹æ¥çš„ç¯‡å¹…ä¸­æˆ‘ä»¬å°†äº†è§£åˆ°<strong>é”®ç›˜æ˜¯å¦‚ä½•å·¥ä½œçš„</strong>ã€‚</p><p>è®©å¤–è®¾å·¥ä½œèµ·æ¥æ— éä¸‰æ­¥ï¼šé¦–å…ˆ<strong>CPU</strong>é€šè¿‡<strong>outæŒ‡ä»¤</strong>å‘å¤–è®¾æ§åˆ¶å™¨çš„æŸäº›<strong>å¯„å­˜å™¨</strong>å‘å‡º<strong>è¯»/å†™</strong>çš„å‘½ä»¤ï¼Œæ¥ç€<strong>æŠŠoutæŒ‡ä»¤ä»¥æˆ‘å‘¢é—´çš„å½¢å¼å°è£…èµ·æ¥</strong>å‘å‡º<strong>ä¸­æ–­</strong>ï¼Œå½¢æˆç»Ÿä¸€çš„<strong>æ–‡ä»¶è§†å›¾</strong>ï¼Œæœ€ç»ˆ<strong>å‘å†…å­˜ä¸­è¯»å†™æ•°æ®</strong>ã€‚</p><p>é‚£å¦‚ä½•ä½¿ç”¨é”®ç›˜å‘¢ï¼Ÿä»æŒ‰ä¸‹é”®ç›˜å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ä»<strong>é”®ç›˜ä¸­æ–­å¤„ç†</strong>å¼€å§‹ï¼Œå†æ·±å…¥çš„è¯´ï¼Œä»<strong>ä¸­æ–­åˆå§‹åŒ–</strong>å¼€å§‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262037091.png" alt="image-20201124161528247"></p><p>ç„¶åéœ€è¦çŸ¥é“ä»ç¡¬ä»¶çš„å“ªä¸ª<strong>ç«¯å£æ‰«æ</strong>æŒ‰ä¸‹çš„é”®â€”â€”<br><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262040730.png" alt="image-20201124161642136"></p><p>é‚£<strong>60ç«¯å£</strong>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±æ˜¯<strong>æ‰«æç </strong>ï¼Œé€šè¿‡æ‰«æç æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“<strong>æŒ‰ä¸‹äº†å“ªä¸ªé”®</strong>ï¼Œè¿›å…¥åˆ†æ”¯<strong>key_table</strong></p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262037429.png" alt="image-20201124161856604"></p><p>åœ¨è¿™ä¸ªåˆ†æ”¯ä¸­ï¼Œå¯ä»¥<strong>çŸ¥é“æŒ‰ä¸‹ä»€ä¹ˆé”®æ—¶å°†è§¦å‘çš„å‡½æ•°</strong>ã€‚æˆ‘ä»¬è¿›å…¥æ˜¾ç¤ºå­—ç¬¦å‡½æ•°â€”â€”<strong>do-selfå‡½æ•°</strong>ï¼Œåœ¨è¿™é‡Œå–å¾—æŒ‰ä¸‹é”®çš„<strong>ASIIç </strong>ï¼Œå¹¶å°†å…¶æ”¾å…¥<strong>ç¼“å†²é˜Ÿåˆ—read_qçš„å¤´éƒ¨</strong>ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†<strong>CPUå¯¹å­—ç¬¦çš„è¯»å–</strong>ï¼Œæœ€åæˆ‘ä»¬éœ€è¦å®Œæˆ<strong>å›æ˜¾</strong>å³å¯â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262037093.png" alt="image-20201124162445909"></p><hr><p>æˆ‘ä»¬æ¥å¯¹è¿™ä¸ªè¿‡ç¨‹åšä¸€æ€»ç»“â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262037526.png" alt="image-20201124162614747"></p><p>è‡³æ­¤ï¼Œå¤–è®¾çš„å·¥ä½œæœºåˆ¶å°±å‘Šä¸€æ®µè½äº†ï¼Œæˆ‘ä»¬å†ä»¥å¤–è®¾çš„è§†è§’æ¥åˆ‡è¿›å»â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262037732.png" alt="image-20201124162727355"></p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è™šæ‹Ÿå†…å­˜</title>
      <link href="/2021/07/12/xu-ni-nei-cun/"/>
      <url>/2021/07/12/xu-ni-nei-cun/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨ç¬¬ä¸‰ç« çš„å†…å­˜ç®¡ç†ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ¦‚å¿µæ˜¯è™šæ‹Ÿå†…å­˜ï¼Œè™šæ‹Ÿå†…å­˜æ˜¯ç”¨<strong>äºåˆ†ç¦»ç”¨æˆ·ä¸ç‰©ç†å±‚</strong>ï¼Œä¸”å®ç°ç‰©<strong>ç†å†…å­˜çš„æ‰©å±•</strong>çš„ã€‚</p><p>ä½†å¯¹äºè™šæ‹Ÿå†…å­˜çš„<strong>å†…åœ¨æœºç†</strong>ï¼Œæˆ‘ä»¬æ²¡æœ‰å¤ªå¤šçš„è°ˆåŠï¼Œåªæ˜¯æŠŠå®ƒå½“åšä¸€ä¸ª<strong>é»‘ç›’å­</strong>æ¥ä½¿ç”¨ï¼Œåœ¨è¿™ä¸€ç« ä¸­æˆ‘ä»¬å°†å‰–æ ¹é—®åº•ï¼Œæ¥æ­å¼€è°œåº•ã€‚ã€‚ã€‚</p><hr><h2 id="1-è¯·æ±‚è°ƒé¡µå’Œå†…å­˜æ¢å…¥"><a href="#1-è¯·æ±‚è°ƒé¡µå’Œå†…å­˜æ¢å…¥" class="headerlink" title="1.è¯·æ±‚è°ƒé¡µå’Œå†…å­˜æ¢å…¥"></a>1.è¯·æ±‚è°ƒé¡µå’Œå†…å­˜æ¢å…¥</h2><p>ä»ç”¨æˆ·çš„è§†è§’æ¥çœ‹ï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯<strong>ç‹¬äº«</strong>ç³»ç»Ÿçš„å…¨éƒ¨å†…å­˜çš„ï¼Œç„¶è€Œæˆ‘ä»¬çŸ¥é“<strong>ç‰©ç†å†…å­˜æ˜¯æœ‰é™</strong>çš„ï¼Œä¸å¯èƒ½è®©æ¯ä¸ªè¿›ç¨‹çœŸçš„ä»»æ„ä½¿ç”¨æ‰€æœ‰å†…å­˜ï¼Œé‚£è¿™ç§<strong>å†…å­˜å¾ˆå¤§çš„å‡è±¡</strong>æ˜¯å¦‚ä½•åˆ¶é€ å‡ºæ¥çš„å‘¢ï¼Ÿ</p><p>å°±æ˜¯é€šè¿‡<strong>è™šæ‹Ÿå†…å­˜</strong>çš„å¼•å…¥ï¼Œåœ¨<strong>ç”¨æˆ·çš„è§†è§’</strong>èƒ½çœ‹å¾—åˆ°çš„å†…å­˜åœ°å€æ˜¯<strong>é€»è¾‘åœ°å€ï¼Œå®ƒæ˜¯åˆ†æ®µä½¿ç”¨</strong>çš„ï¼Œè€Œåˆ†çš„è¿™äº›æ®µåˆæœ€ç»ˆå‰¥å¼€æ‰ç¢æˆ<strong>ä¸€é¡µä¸€é¡µçš„åœ°å€ç©ºé—´</strong>ã€‚</p><p>ä½†ä»…æœ‰è¿™äº›é€»è¾‘åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç°æœ‰åœ°å€ç©ºé—´æ˜¯ä¸å¤Ÿçš„ï¼Œæ•°æ®æœ€ç»ˆæ˜¯éœ€è¦è¢«å­˜å‚¨åœ¨å®å®åœ¨åœ¨çš„å­˜å‚¨ç©ºé—´ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯<strong>æ˜ å°„åˆ°ç‰©ç†å†…å­˜</strong>ã€‚</p><p>ä½†4Gçš„è™šæ‹Ÿå†…å­˜æ˜ å°„1Gçš„ç‰©ç†å†…å­˜ï¼Œå¬èµ·æ¥ç€å®ä¸æ€ä¹ˆé è°±ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><ul><li><input checked disabled type="checkbox"> <code>åªæœ‰åœ¨éœ€è¦çš„æ—¶å€™æ‰åšæ˜ å°„</code></li></ul><p>è¿™å°±å¥½æ¯”ä»“åº“ä¸é—¨åº—çš„å…³ç³»ï¼Œé—¨åº—çš„<strong>è´§æŸœæ˜¯æœ‰é™</strong>çš„ï¼Œå½“é¡¾å®¢è¦æ±‚ä¸€æ ·ä¸œè¥¿æ—¶ï¼Œå°±éœ€è¦ä»ä»“åº“ä¸­å–å‡ºæ¥æ”¾åˆ°è´§æ¶ï¼Œè¿™æ ·çœ‹èµ·æ¥<strong>å•†åº—æ€»æ˜¯ä¸ç¼ºè´§</strong>ï¼Œä½†å®é™…ä¸Šè¿™<strong>å½’åŠŸäºä»“åº“</strong>ã€‚</p><p>è¿™é‡Œçš„ä»ä»“åº“å–ä¸œè¥¿åˆ°é—¨åº—çš„åŠ¨ä½œå°±ç›¸å½“äº<strong>ä»ç£ç›˜ä¸Šè¯·æ±‚è°ƒé¡µåˆ°å†…å­˜</strong>ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™è¦è°ƒé¡µå‘¢ï¼Ÿæ˜¾ç„¶æ˜¯<strong>ç¼ºé¡µ</strong>çš„æ—¶å€™ï¼Ÿ</p><p>å—¯ï¼Œå†æ¥ä¸€ä¸‹çµé­‚å©é—®â€”â€”<strong>ä¸ºä»€ä¹ˆä¼šç¼ºé¡µ</strong>å‘¢ï¼Ÿ</p><p>ç”¨æˆ·ç¨‹åºä¸­çš„åœ°å€æ˜¯é€»è¾‘åœ°å€ï¼Œé€»è¾‘åœ°å€ç»è¿‡åœ°å€ç¿»è¯‘æˆä¸ºç‰©ç†åœ°å€ï¼Œé€»è¾‘åœ°å€éœ€è¦æ˜ å°„åˆ°ç‰©ç†åœ°å€æ‰èƒ½çœŸæ­£è¢«ä½¿ç”¨ï¼Œé‚£å‡å¦‚æ˜ å°„å¤±è´¥å‘¢ï¼Ÿ<strong>æ˜ å°„å¤±è´¥</strong>ä¹Ÿå°±æ˜¯è¯´<strong>ç‰©ç†å†…å­˜ä¸­æ²¡æœ‰å¯¹åº”çš„åœ°å€</strong>ã€‚</p><p>è¿™æ—¶å°±è¯¥è¯·æ±‚è°ƒé¡µäº†ï¼Œä»ç£ç›˜è°ƒé¡µåˆ°ç‰©ç†åœ°å€ï¼Œæ˜ å°„æˆåŠŸï¼Œç»§ç»­æ‰§è¡Œã€‚</p><h3 id="ä¸€ä¸ªå®é™…ç³»ç»Ÿçš„è¯·æ±‚è°ƒé¡µ"><a href="#ä¸€ä¸ªå®é™…ç³»ç»Ÿçš„è¯·æ±‚è°ƒé¡µ" class="headerlink" title="ä¸€ä¸ªå®é™…ç³»ç»Ÿçš„è¯·æ±‚è°ƒé¡µ"></a>ä¸€ä¸ªå®é™…ç³»ç»Ÿçš„è¯·æ±‚è°ƒé¡µ</h3><p>è¯·æ±‚è°ƒé¡µæ—¶ï¼Œå°±ä¼šæ‰§è¡Œç¼ºé¡µä¸­æ–­ã€‚é‚£é¦–å…ˆè¦è·å–ç¼ºé¡µä¸­æ–­çš„<strong>ä¸­æ–­å·</strong>ï¼Œè€Œä¸­æ–­å·æ˜¯åœ¨<strong>æ“ä½œç³»ç»Ÿåˆå§‹åŒ–</strong>çš„æ—¶å€™è®¾ç½®çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ç»™å‡ºï¼š</p><ul><li><input checked disabled type="checkbox"> æ“ä½œç³»ç»Ÿåˆå§‹åŒ–æ—¶è®¾ç½®ä¸­æ–­å‘é‡è¡¨ <strong>interrupt vector table</strong> (<strong>IVT</strong>) ï¼Œå®ƒé‡Œé¢å­˜å‚¨æœ‰å¾ˆå¤šè¡¨é¡¹ï¼Œå³ä¸­æ–­å‘é‡ï¼Œä¹Ÿå°±æ˜¯ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262059073.png" alt="image-20201121190122738"></p><p>æ¥ä¸‹æ¥è·³è½¬ä¸­æ–­å¤„ç†ç¨‹åºï¼Œé¦–å…ˆå¯¹<strong>é”™è¯¯ç è¿›è¡Œå‹æ ˆ</strong>ï¼Œå¹¶å°†<strong>é¡µçš„é”™è¯¯çº¿æ€§åœ°å€</strong>å­˜å‚¨åœ¨<strong>å¯„å­˜å™¨cr2</strong>ä¸­â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262059110.png" alt="image-20201121190333570"></p><p>å°†çŠ¶æ€ä¿å­˜åï¼Œè·³è½¬<strong>ç”³è¯·ç‰©ç†å†…å­˜çš„å‡½æ•°</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262059121.png" alt="image-20201121190506454"></p><p>æœ€å<strong>å°†è¯·æ±‚çš„é¡µåŠ è½½åˆ°ç‰©ç†å†…å­˜</strong>ä¸­ï¼Œ<strong>é‡æ–°è®¾ç½®æ˜ å°„åœ°å€</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262059012.png" alt="image-20201121190556951"></p><h2 id="2-å†…å­˜æ¢å‡º"><a href="#2-å†…å­˜æ¢å‡º" class="headerlink" title="2.å†…å­˜æ¢å‡º"></a>2.å†…å­˜æ¢å‡º</h2><p>ä¸ºäº†ä¿æŒè´§æ¶ä¸Šæ€»æœ‰äººä»¬æƒ³è¦çš„å•†å“ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†è´§æŸœä¸­ä¸å¸¸ç”¨çš„å•†å“å…ˆæ’¤åˆ°ä»“åº“ä¸­ä»¥è…¾å‡ºç©ºé—´ã€‚</p><ul><li><input checked disabled type="checkbox"> å†…å­˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ‰æ¢å…¥ï¼Œå°±å¿…ç„¶æœ‰æ¢å‡ºã€‚</li></ul><p>é‚£æ€æ ·å®ç°å†…å­˜çš„æ¢å‡ºå‘¢ï¼Ÿæ¢å‡ºå“ªä¸ªå¯¹äºç³»ç»Ÿæ˜¯æœ€æœ‰åˆ©çš„å‘¢ï¼Ÿ</p><p>ç›´è§‚çš„æƒ³æ³•ï¼Œé¦–å…ˆåº”è¯¥æ˜¯<strong>å…ˆæ¥å…ˆæ¢å‡º</strong>ï¼Œæƒ³æ³•å¾ˆæœ´å®ï¼Œä½†ç³»ç»Ÿä¸­çš„è¿›ç¨‹éƒ½æ˜¯æœ‰<strong>ä¼˜å…ˆçº§</strong>çš„ã€‚æ‰€ä»¥ç»§ç»­å¾€åæƒ³â€”â€”</p><p>æˆ‘ä»¬æƒ³è®©<strong>ä¸é‡è¦çš„æ¢å‡º</strong>ï¼Œé‚£æ€æ ·ä½“ç°ä¸é‡è¦å‘¢ï¼Ÿç›´ç™½çš„è¯´ï¼Œå°±æ˜¯<strong>å¾ˆå°‘ç”¨åˆ°</strong>ï¼Œè¿™å°±è¡ç”Ÿå‡ºäº†<strong>MINç®—æ³•</strong>ï¼Œå®ƒçš„æ ¸å¿ƒåœ¨äº<strong>æ¢å‡ºè¿™ä¸ªåºåˆ—ä¸­æœ€è¿œçš„å°†è¢«ä½¿ç”¨çš„é‚£ä¸ªè¿›ç¨‹</strong>ã€‚</p><p>è¿™ä¸ªæƒ³æ³•è¿˜æ˜¯å¾ˆniceçš„ï¼Œä½†æˆ‘ä»¬æ— æ³•é¢„çŸ¥ä»¥åå‘ç”Ÿçš„äº‹æƒ…ï¼Œä¹Ÿå°±æ— æ³•åšå‡ºæœ‰æ•ˆçš„é¢„ä¼°ã€‚</p><p>ä½†è¿™ç§æƒ³æ³•æ˜¯å€¼å¾—å€Ÿé‰´çš„ï¼Œç”±è¿™ç§æƒ³æ³•è¿›è€Œè¡ç”Ÿå‡ºäº†<strong>LRUç®—æ³•</strong>ï¼Œæ‰€è°“LRUç®—æ³•ï¼Œå°±æ˜¯é€‰å‡º<strong>æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong>çš„é‚£ä¸ªè¿›ç¨‹ï¼Œç„¶åæ¢å‡ºã€‚è¿™é‡Œä¹Ÿåº”ç”¨äº†<strong>ç¨‹åºå±€éƒ¨æ€§</strong>çš„ç‰¹ç‚¹ã€‚</p><h3 id="LRUçš„å‡†ç¡®å®ç°â€”â€”æ—¶é—´æˆ³"><a href="#LRUçš„å‡†ç¡®å®ç°â€”â€”æ—¶é—´æˆ³" class="headerlink" title="LRUçš„å‡†ç¡®å®ç°â€”â€”æ—¶é—´æˆ³"></a>LRUçš„å‡†ç¡®å®ç°â€”â€”æ—¶é—´æˆ³</h3><p>å‡è®¾å­˜åœ¨ä¸€ä¸ª<strong>é¡µåºåˆ—ABCABDADBCB</strong>ï¼Œä½†åªæœ‰<strong>å››ä¸ªå­˜å‚¨å—</strong>ï¼Œè¿™æ—¶éœ€è¦é€‰å‡º<strong>å…·æœ‰æœ€å°æ—¶é—´æˆ³çš„é¡µ</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262059836.png" alt="image-20201121201707370"></p><p>ä½†é¡µè¡¨ldtä¹Ÿæ˜¯éœ€è¦ç»´æŠ¤çš„ï¼Œæ¯æ›´æ¢ä¸€æ¬¡æ—¶é—´æˆ³ï¼Œå°±è¦å¯¹é¡µè¡¨è¿›è¡Œæ›´æ–°ï¼Œè€Œé¡µè¡¨æ˜¯å†…å­˜ä¸­çš„ï¼Œè®¿å­˜æ¬¡æ•°è¿‡å¤šå®ç°ä»£ä»·æœªå…è¿‡é«˜ã€‚</p><h3 id="LRUçš„å‡†ç¡®å®ç°â€”â€”é¡µç æ ˆ"><a href="#LRUçš„å‡†ç¡®å®ç°â€”â€”é¡µç æ ˆ" class="headerlink" title="LRUçš„å‡†ç¡®å®ç°â€”â€”é¡µç æ ˆ"></a>LRUçš„å‡†ç¡®å®ç°â€”â€”é¡µç æ ˆ</h3><p>é¡µç æ ˆçš„å®ç°ä»£ä»·åŒæ ·å¾ˆå¤§ï¼Œå› è€Œä¸ä½œä¸ºå®é™…åº”ç”¨ä½¿ç”¨ï¼Œä½†å¾ˆæœ‰å¿…è¦äº†è§£å®ƒçš„æ€æƒ³â€”â€”</p><p>æ ˆä¸­åªæœ‰ä¸‰ä¸ªé¡µçš„å†…å­˜ç©ºé—´ï¼Œ<strong>æœ€åº•å±‚çš„ç©ºé—´</strong>å­˜æ”¾<strong>æœ€-è¿‘æœ€å°‘ä½¿ç”¨çš„é¡µ</strong>ï¼Œ<strong>æœ€ä¸Šå±‚çš„ç©ºé—´</strong>å­˜æ”¾<strong>å½“å‰ä½¿ç”¨çš„é¡µ</strong>ã€‚</p><p>å› æ­¤åœ¨å‘ç”Ÿç¼ºé¡µæ—¶ï¼Œå°†<strong>æœ€åº•å±‚æ ˆå†…çš„é¡µå¼¹å‡º</strong>ï¼Œç„¶åå°†å…¶å‹å…¥æ ˆé¡¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262059971.png" alt="image-20201121202032441"></p><p>ä¸€è¨€ä»¥è”½ä¹‹ï¼ŒLRUçš„å‡†ç¡®å®ç°åœ¨å®é™…åº”ç”¨ä¸­ä»£ä»·å¤ªå¤§ï¼Œä¸å¯å–ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å®é™…åº”ç”¨ä¸­ä½¿ç”¨çš„è¿‘ä¼¼å®ç°ï¼š</p><h3 id="LRUçš„è¿‘ä¼¼å®ç°â€”â€”å°†æ—¶é—´å’Œå˜æˆæ˜¯å’Œå¦"><a href="#LRUçš„è¿‘ä¼¼å®ç°â€”â€”å°†æ—¶é—´å’Œå˜æˆæ˜¯å’Œå¦" class="headerlink" title="LRUçš„è¿‘ä¼¼å®ç°â€”â€”å°†æ—¶é—´å’Œå˜æˆæ˜¯å’Œå¦"></a>LRUçš„è¿‘ä¼¼å®ç°â€”â€”å°†æ—¶é—´å’Œå˜æˆæ˜¯å’Œå¦</h3><p>è®°å½•æ—¶é—´å’Œçš„ç³»ç»Ÿå¼€é”€å¤ªå¤§ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½åªç»´æŠ¤ä¸€ä¸ªæ ‡å¿—ä½ï¼Œä¹Ÿå°±æ˜¯ä¸ºä½¿ç”¨é¡µæ¡†çš„æ¯ä¸€é¡µè®¾ç½®ä¸€ä¸ª<strong>å¼•ç”¨ä½</strong>ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æš‚ä¸”ä¸è€ƒè™‘å¤šå°‘ä¸ªé¡µæ¡†ï¼Œä¹Ÿå°±æ˜¯å¤šå°‘ä¸ªå¸§æ›´ä¸ºåˆé€‚ã€‚è€Œæ˜¯ç€é‡æè¿°å®ƒçš„è¿è¡Œæœºåˆ¶<strong>SCR</strong>(å†ç»™ä¸€æ¬¡æœºä¼šç®—æ³•)â€”â€”</p><p>æˆ‘ä»¬ç”¨<strong>å¾ªç¯é˜Ÿåˆ—</strong>æ¥è¡¨è¿°<strong>é¡µæ¡†</strong>ï¼Œå‡å¦‚<strong>åŠ è½½ä¸€é¡µ</strong>åˆ°é¡µæ¡†ä¸­ï¼Œ<strong>ç¡¬ä»¶</strong>ä¼šè‡ªåŠ¨<strong>è®¾ç½®æ ‡å¿—ä½R=1</strong>ï¼Œå¦‚æœ<strong>å‘ç”Ÿç¼ºé¡µ</strong>ï¼Œå°±<strong>æ‰«æè¿™ä¸ªå¾ªç¯é˜Ÿåˆ—</strong>ï¼Œå¦‚æœ<strong>æ ‡å¿—ä½R=1</strong>ï¼Œåˆ™å°†å®ƒ<strong>ç½®ä¸º0</strong>ï¼Œè¡¨ç¤º<strong>è¿™ä¸ªé¡µæœ€è¿‘æ²¡æœ‰è¢«ä½¿ç”¨è¿‡</strong>ï¼Œå¦‚æœæ ‡å¿—ä½<strong>R=0</strong>,åˆ™<strong>æ·˜æ±°è¯¥é¡µ</strong>ï¼Œå¹¶<strong>æ¢å…¥æ–°çš„é¡µ</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262100517.png" alt="image-20201121215941114"></p><p>è¿™æ ·å°±å®Œç¾äº†å—ï¼Ÿå‡å¦‚å¾ˆ<strong>å°‘å‘ç”Ÿç¼ºé¡µ</strong>ï¼Œé‚£ä¹ˆæŒ‡é’ˆå°±ä¸éœ€è¦ç½®ä½ï¼Œä¹Ÿå°±ä¸<strong>éœ€è¦ç§»åŠ¨æŒ‡é’ˆ</strong>ï¼Œè¿™æ ·æ ‡å¿—ä½<strong>Rçš„å€¼ä¼šåœ¨0å’Œ1ä¹‹é—´åå¤åˆ‡æ¢</strong>ï¼Œè¿™æ ·SCRç®—æ³•å°±ä¼šé€€åŒ–ä¸º<strong>FIFO</strong>ï¼Œè€Œè¿™æœ¬è´¨ä¸Šæ˜¯å› ä¸º<strong>æ ‡å¿—ä½Rè®°å½•äº†å¤ªå¤šå†å²ä¿¡æ¯</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦<strong>æ¸…é™¤å†å²ä¿¡æ¯</strong>ï¼Œä¹Ÿå°±éœ€è¦å¼•å…¥ä¸€ä¸ª<strong>è·‘å¾—æ›´å¿«çš„æŒ‡é’ˆ</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262100702.png" alt="image-20201121215954545"></p><p>è¿™æ ·çš„æ¨¡å‹æ›´åƒæ˜¯ä¸€ä¸ªæ—¶é’Ÿï¼Œå› è€ŒSCRç®—æ³•åˆç§°<strong>CLOCKç®—æ³•</strong></p><p>é‚£ä¹ˆç½®æ¢çš„ç­–ç•¥æœ‰äº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œåˆ†é…å¤šå°‘å¸§æ›´åˆé€‚å‘¢ï¼Ÿ</p><p>å‡å¦‚å¸§è¿‡å¤šï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨<strong>å†…å­˜çš„é«˜æ•ˆåˆ©ç”¨</strong>äº†ï¼Œå¦‚æœåˆ†çš„å°‘ï¼Œåˆä¼šå¯¼è‡´æ¢å…¥é¢‘ç¹ï¼Œè¿›ç¨‹æ€»åœ¨ç­‰å¾…IOï¼ŒCPUåˆ©ç”¨ç‡ä¸‹é™ï¼Œæœ€ç»ˆå‘ç”Ÿ<strong>é¢ ç°¸ç°è±¡</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img2/202310262100133.png" alt="image-20201121215924180"></p><p>è¿™é‡Œæˆ‘ä»¬åªæ˜¯æå‡ºé€šè¿‡<strong>å·¥ä½œé›†çš„ç®—æ³•</strong>å¯ä»¥ç®—å‡ºåˆ†é…å¤šå°‘åˆé€‚ï¼Œè€Œä¸å†è¿‡å¤šè®¨è®ºã€‚</p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†…å­˜ç®¡ç†</title>
      <link href="/2021/07/12/nei-cun-guan-li/"/>
      <url>/2021/07/12/nei-cun-guan-li/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€å†…å­˜ä½¿ç”¨ä¸åˆ†æ®µ"><a href="#1ã€å†…å­˜ä½¿ç”¨ä¸åˆ†æ®µ" class="headerlink" title="1ã€å†…å­˜ä½¿ç”¨ä¸åˆ†æ®µ"></a>1ã€å†…å­˜ä½¿ç”¨ä¸åˆ†æ®µ</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœºè¿è¡Œçš„<strong>æ ¸å¿ƒ</strong>ä¸å¤–äº<strong>å–æŒ‡æ‰§è¡Œ</strong>ï¼Œè€Œä»<strong>å“ªé‡Œå–æŒ‡ä»¤</strong>å‘¢ï¼Œè‡ªç„¶æ˜¯<strong>å†…å­˜</strong>ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œæ˜¯ä»<strong>ç£ç›˜åŠ è½½åˆ°å†…å­˜</strong>ä¸­çš„ä¸€æ®µç¨‹åºã€‚ä½†æŒ‡ä»¤æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬è¦å–å¾—<strong>å“ªä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€</strong>å‘¢ï¼Ÿæˆ‘ä»¬ä»ç”¨æˆ·è§†è§’çœ‹ï¼Œç¨‹åºæ˜¯ä»<strong>mainå‡½æ•°</strong>å¼€å§‹æ‰§è¡Œçš„ï¼Œè€Œä»æ±‡ç¼–çš„è§’åº¦æ¥è¯´ï¼Œå°±æ˜¯ç¨‹åºå…¥å£<strong>ENTRYä¹‹åçš„åœ°å€</strong>ã€‚</p><p>é‚£é¦–å…ˆå…ˆè®©ç¨‹åºè¿›å…¥å†…å­˜ï¼Œè€Œç¨‹åºå¾ˆ<strong>è‡ªç„¶</strong>çš„å°±è¦æ”¾åœ¨entryä¹‹åæŒ‡å®šçš„é‚£ä¸ªåœ°å€ä¸­ã€‚æˆ‘ä»¬å‡è®¾è¿™æ®µç¨‹åºå°±æ”¾åœ¨ä»¥<strong>0x0000ä¸ºèµ·å§‹åœ°å€</strong>çš„è¿™æ®µå†…å­˜é‡Œã€‚è¿™æ—¶<strong>å†²çª</strong>äº§ç”Ÿäº†ã€‚è¿™æ®µå†…å­˜æ˜¯ç”¨äºæ“ä½œç³»ç»Ÿåˆå§‹åŒ–æ—¶æ”¾ç½®æŒ‡ä»¤çš„<strong>å›ºå®š</strong>çš„åŒºåŸŸã€‚</p><p>é‚£ä¹ˆï¼Œç¨‹åºçš„å…¥å£åœ°å€æ˜¾ç„¶éœ€è¦å®šä½åˆ°å¦ä¸€æ®µ<strong>ç©ºé—²çš„å†…å­˜ç©ºé—´</strong>ï¼Œç”¨ä¸“ä¸šæœ¯è¯­è¯´ï¼Œå°±æ˜¯æŒ‡<strong>é‡å®šå‘</strong>ã€‚</p><blockquote><p>é‡å®šå‘ : ä¿®æ”¹ç¨‹åºä¸­çš„åœ°å€ï¼Œä½¿å…¶å˜æˆç›¸å¯¹åœ°å€</p></blockquote><p>è€Œé‡å®šå‘çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œ<strong>ç›´æ¥å®šä½åˆ°æ–°çš„åœ°å€</strong>å’Œ<strong>åŸºåœ°å€åŠ ä¸Šå˜åŒ–çš„åç§»åœ°å€</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬æ›´å¤šçš„å»ä½¿ç”¨åç§»åœ°å€ï¼Œä¹Ÿå°±æ˜¯<strong>ç›¸å¯¹åœ°å€</strong>ã€‚</p><p>æ—¢ç„¶çŸ¥é“éœ€è¦å°†åœ°å€é‡å®šå‘ï¼Œé‚£æˆ‘ä»¬å°±è¯•ç€åœ¨è¿è¡Œç¨‹åºçš„è¿‡ç¨‹ä¸­<strong>å¼•å…¥é‡å®šå‘</strong>ï¼Œä½†è¿™åˆè®©äººçŠ¯éš¾äº†ï¼Œå°±æ‹¿æ±‡ç¼–æ¥è¯´ï¼Œç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹éœ€è¦ç»è¿‡<strong>ç¼–è¯‘</strong>ï¼Œ<strong>è¿æ¥</strong>ï¼Œ<strong>è¿è¡Œ</strong>ä¸‰ä¸ªè¿‡ç¨‹ï¼Œé‚£æˆ‘ä»¬è¦åœ¨é‚£ä¸ªé˜¶æ®µé‡å®šå‘å‘¢ï¼Ÿ</p><p>å‡è®¾åœ¨ç¼–è¯‘æ—¶é‡å®šå‘ï¼Œè¿™æ—¶å°†åœ°å€æå‰è¿›è¡Œåç§»æ”¾ç½®åœ¨ä¸€æ®µç©ºé—²åœ°å€ä¸­ï¼Œä½†è¿è¡Œçš„æ—¶å€™ï¼Œè¿™æ®µç©ºé—²åœ°å€è¢«<strong>åˆ«çš„è¿›ç¨‹å ç”¨</strong>äº†ï¼Œå—¯ï¼Œè®¡ç®—æœºçš„ä¸–ç•Œä¹Ÿå……æ»¡ç€æ— å¸¸ï¼Œæˆ‘ä»¬ä¸å¦‚è¯•è¯•è½½å…¥å†…å­˜æ—¶é‡å®šå‘â€”â€”</p><p>è¿™ç§æƒ³æ³•å¥½åƒè¿˜è¡Œï¼Œèµ·ç å†…å­˜æ˜¯è‡ªå·±çš„äº†ã€‚ä½†æ˜¯è°å‘Šè¯‰ä½ é‡å®šå‘åªä¼šå‘ç”Ÿä¸€æ¬¡å‘¢ï¼Ÿä¸ºäº†çµæ´»å®Œæˆä»»åŠ¡ï¼Œ<strong>äº¤æ¢</strong>å˜å¾—å¿…ä¸å¯å°‘ï¼Œéš¾é“æˆ‘è¦<strong>è½½å…¥næ¬¡</strong>å—ï¼Ÿå¥½çš„ï¼Œä¸‹ä¸€ä½ï¼š</p><p>é‚£å°±<strong>è¿è¡Œæ—¶è½½å…¥</strong>å§ï¼Œè¿™ç§åŠ¨æ€åˆ‡æ¢çš„æ–¹å¼çš„ç¡®<strong>æ»¡è¶³äº†æ‰€æœ‰éœ€æ±‚</strong>ï¼Œå®ƒæ€»ä¼šç”³è¯·ä¸€æ®µç©ºé—²çš„ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…è¢«è‡ªå·±ä½¿ç”¨çš„å†…å­˜ã€‚</p><hr><p>åˆ°è¿™é‡Œå·²ç»è¿ˆå‡ºäº†ä¸€å¤§æ­¥ï¼Œæ—¢ç„¶åˆæ­¥çš„æƒ³æ³•ç¡®å®šäº†ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å…ˆå°†è¿™ä¸ªæƒ³æ³•è§„èŒƒåŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥<strong>åœ°å€ç¿»è¯‘</strong>ä¸<strong>é€»è¾‘åœ°å€</strong>ï¼Œ<strong>ç‰©ç†åœ°å€</strong>çš„æ¦‚å¿µã€‚</p><p>æ‰€è°“åœ°å€ç¿»è¯‘ï¼Œå°±æ˜¯æŒ‡æ¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œéƒ½è¦ä»é€»è¾‘åœ°å€ç®—å‡ºç‰©ç†åœ°å€ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¾‹å­</p><p>mov ax , [300]</p><p>è¿™é‡Œçš„300æ˜¯åç§»åœ°å€ï¼Œæ¢å¥è¯è¯´ï¼Œè¿™é‡Œçš„[300]æŒ‡çš„æ˜¯é€»è¾‘åœ°å€ï¼Œè€Œå®é™…çš„[300]è¡¨ç¤ºçš„ç‰©ç†åœ°å€ç­‰äºå½“å‰è¿™ä¸ª<strong>å›ºå®šçš„åç§»åœ°å€</strong>åŠ ä¸Š<strong>å˜åŒ–çš„åŸºåœ°å€</strong>ã€‚</p><p>é‚£æˆ‘æ—¢ç„¶æ¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤éƒ½è¦ç”¨åˆ°åŸºåœ°å€ï¼Œé‚£åŸºåœ°å€åº”è¯¥æ˜¯ä¸€ä¸ª<strong>å…¨å±€çš„å˜é‡</strong>ï¼Œè€Œå¯¹äºä¸€ä¸ªè¿è¡Œçš„ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹æ¥è¯´ï¼Œè¿™ä¸ªå…¨å±€çš„å˜é‡åº”è¯¥å­˜å‚¨åœ¨<strong>PCB</strong>ä¸­ï¼Œåˆå› ä¸ºå®ƒè¢«ç”¨åˆ°çš„<strong>é¢‘ç‡å¾ˆé«˜</strong>ï¼Œè¿›è€Œå®ƒä¼šè¢«æ”¾ç½®åœ¨CPUçš„é›¶çº§ç¼“å­˜â€”â€”<strong>å¯„å­˜å™¨ldtr</strong>ä¸­ã€‚</p><ul><li><input checked disabled type="checkbox"> GDTè¡¨ç¤ºå…¨å±€æè¿°ç¬¦ï¼Œæ®µæè¿°ç¬¦è¢«æ”¾ç½®åœ¨GDTä¸­ï¼Œç”¨æ¥å¯¹ä»»åŠ¡å®ç°éš”ç¦»ã€‚è€Œæœ‰GDTï¼Œå°±è‡ªç„¶ä¹Ÿè¡ç”Ÿäº†LDTï¼Œå³å±€éƒ¨æè¿°ç¬¦ï¼Œå®ƒä¸“å±äºæŸä¸ªä»»åŠ¡ã€‚</li></ul><p>è¿™æ—¶ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œå·²ç»å¯ä»¥å®Œæˆäº†ï¼Œæˆ‘ä»¬ä¸å¦¨è®°åš<strong>flag1</strong></p><hr><h3 id="åˆ†æ®µ"><a href="#åˆ†æ®µ" class="headerlink" title="åˆ†æ®µ"></a>åˆ†æ®µ</h3><p>ä¸ºäº†æ›´å¥½åœ°ä½¿ç”¨å†…å­˜ï¼Œ<strong>åˆ†æ²»æ€æƒ³</strong>çš„å¼•å…¥è‡ªç„¶åŠ¿åœ¨å¿…è¡Œï¼Œç¨‹åºæ ¹æ®æ¯ä¸€æ®µä»£ç çš„<strong>å±æ€§</strong>ä¸<strong>åŠŸèƒ½</strong>å°†å…¶åˆ†æˆäº†å¤šä¸ªæ®µï¼Œåˆ†ææ¯ä¸ªæ®µçš„åŠŸèƒ½å˜å¾—å®¹æ˜“äº†å¾ˆå¤šã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<strong>æ®µ</strong>æ‰æ˜¯ç¨‹åºè¿è¡Œçš„<strong>å•å…ƒ</strong>ã€‚</p><p>è¿™ä¸ªå•å…ƒæœ‰å®ƒçš„<strong>çŠ¶æ€</strong>ï¼Œå®ƒçš„<strong>æ‰§è¡Œç»“æœ</strong>ç­‰ç­‰ï¼Œè€Œåœ¨ç¨‹åºè½½å…¥çš„æ—¶å€™ï¼Œè¿™äº›<strong>æ®µ</strong>ä¹Ÿè¢«è½½å…¥åˆ°<strong>ä¸åŒçš„åœ°å€</strong>ä¸­ï¼Œé™ä½äº†ç®¡ç†çš„å¤æ‚åº¦ã€‚</p><p>ä¸ºäº†<strong>æè¿°</strong>è¿™äº›æ®µçš„ä¿¡æ¯ï¼ŒåŒæ—¶æ–¹ä¾¿ç®¡ç†è¿™äº›ä¸ªæ®µï¼Œå°±è¡ç”Ÿå‡ºäº†è¿›ç¨‹çš„<strong>æ®µè¡¨</strong>â€”â€”<strong>LDT</strong>,æ®µè¡¨ä¸­å­˜æ”¾æ¯ä¸ªæ®µçš„åŸºåœ°å€ï¼Œæ®µå·ï¼Œé•¿åº¦ï¼Œæƒé™ç­‰ç­‰â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262001902.png" alt="image-20231026200149765"></p><p>è¿™ä¸ªè¡¨çš„æ€æƒ³ä¸æ˜¯ç¬¬ä¸€æ¬¡å¼•å…¥ï¼Œæ›´å‡†ç¡®çš„è¯´ï¼Œåœ¨<strong>æ“ä½œç³»ç»Ÿå¯åŠ¨</strong>çš„æ—¶å€™å°±éœ€è¦ç»´æŠ¤ä¸€ä¸ªæ®µè¡¨â€”â€”<strong>GDT</strong>,æ“ä½œç³»ç»Ÿæ•…äº‹çš„å¤§å¹•ä¹Ÿæ˜¯å°±æ­¤æ­å¼€çš„ã€‚</p><p>å¯¹äºå†…å­˜çš„ä½¿ç”¨ï¼Œå¤§çš„æ¥è¯´æ˜¯åˆ†<strong>ä¸‰ä¸ªé˜¶æ®µ</strong>çš„ï¼Œé¦–å…ˆå°†<strong>ç¨‹åºåˆ†æ®µ</strong>ï¼Œè¿™æ˜¯åœ¨<strong>ç¼–è¯‘æ—¶æœŸ</strong>å®Œæˆçš„ï¼Œæˆ‘ä»¬åªéœ€è¦æ˜¾å¼çš„å‘Šè¯‰ç¼–è¯‘å™¨è‡ªå·±å£°æ˜çš„ä¸åŒçš„æ®µï¼Œæ¥ç€å°±éœ€è¦åœ¨å†…å­˜ä¸­æ‰¾å‡ºä¸€æ®µ<strong>ç©ºé—²çš„å†…å­˜ç©ºé—´</strong>ï¼Œé‚£æ˜¯å“ªä¸€æ®µå‘¢ï¼Ÿæ€ä¹ˆçŸ¥é“è¿™æ®µå†…å­˜å¯ä»¥è¢«ä½¿ç”¨å‘¢ï¼Ÿè¿™äº›æ˜¯åè¯äº†ï¼›æœ€åå°±å°†åˆ†å¥½æ®µçš„ç¨‹åº<strong>è½½å…¥</strong>åˆ°åˆ†å¥½åŒºçš„å†…å­˜ä¸­æ‰§è¡Œã€‚</p><p>ç¬¬ä¸€æ­¥æˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥çœ‹åˆ†åŒºæ€æƒ³æ˜¯å¦‚ä½•å¼•å…¥çš„ï¼Œå†…å­˜åˆæ˜¯å¦‚ä½•å®ç°åˆ†åŒºçš„ï¼Ÿ</p><hr><h2 id="2ã€å†…å­˜åˆ†åŒºä¸åˆ†é¡µ"><a href="#2ã€å†…å­˜åˆ†åŒºä¸åˆ†é¡µ" class="headerlink" title="2ã€å†…å­˜åˆ†åŒºä¸åˆ†é¡µ"></a>2ã€å†…å­˜åˆ†åŒºä¸åˆ†é¡µ</h2><ul><li><input checked disabled type="checkbox"> å¦‚ä½•åˆ†åŒºï¼Ÿæè¿°åˆ†åŒºåçš„æ¯æ®µå†…å­˜ï¼Œå¦‚ä½•è¡¨ç¤ºå·²ç»åˆ†å‡ºå»äº†ï¼Œå¦‚ä½•å°†è¿™æ®µå†…å­˜ç”¨ä½œç‰¹å®šç”¨é€”ï¼Ÿ</li><li><input checked disabled type="checkbox"> åˆ†æˆå®šé•¿çš„/ä¸å®šé•¿çš„ï¼›å¦‚ä½•æè¿°å†…å­˜æ®µï¼›åˆ†é…çš„ç®—æ³•ï¼Ÿåˆ†åŒºä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿåˆ†é¡µ</li></ul><p>è¿™é‡Œé¦–å…ˆæ¥è¯´äº›é¢˜å¤–è¯ï¼Œåœ¨å¼€å§‹è¿™èŠ‚ä¹‹å‰ï¼Œæˆ‘è¯•ç€æå‡ºé’ˆå¯¹å†…å­˜åˆ†åŒºæˆ‘è®¤ä¸ºåº”è¯¥æå‡ºçš„é—®é¢˜ï¼Œä½†äº‹å®è¯æ˜ï¼Œæˆ‘<strong>æ€ç»´çš„å‡ºå‘ç‚¹</strong>æ˜¯é”™çš„ï¼Œ</p><p>é’ˆå¯¹å†…å­˜åˆ†åŒºçš„å…·ä½“é—®é¢˜ï¼Œæˆ‘å¼€é—¨è§å±±çš„è®¤ä¸ºåº”è¯¥æœ‰æè¿°åˆ†åŒºåçš„æ•°æ®ç»“æ„ï¼Œè¿™æ ·æƒ³å›ºç„¶æ²¡é”™ï¼Œä½†æ›´é‡è¦çš„å¯¹äºä¸€ä¸ª<strong>å®é™…ç³»ç»Ÿçš„æ¶æ„</strong>ï¼Œä»<strong>éœ€æ±‚å…¥æ‰‹æ‰æ˜¯æœ€åˆ‡å®</strong>çš„ï¼Œå¯¹äºå†…å­˜åˆ†åŒºï¼Œä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Œå› ä¸º<strong>ç¨‹åºåˆ†æ®µ</strong>çš„æ€æƒ³ï¼Œå†³å®š<strong>æ®µçš„å¤§å°æ˜¯ä¸å®š</strong>çš„ï¼Œè€Œä¸ä¹‹å¯¹åº”çš„ï¼ŒåŠ è½½åˆ°çš„é‚£æ®µå†…å­˜ä¹Ÿåº”è¯¥æ˜¯ä¸æ®µçš„å¤§å°ç›¸åŒ¹é…çš„ã€‚</p><hr><p>ç°åœ¨æˆ‘ä»¬å¼€å§‹è¿›å…¥æ­£é¢˜ï¼Œç¨‹åºåˆ†æ®µçš„å¼•å…¥å¯¼è‡´æ¯ä¸€ä¸ªæ®µçš„é•¿åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œ<strong>å†…å­˜</strong>åªæ˜¯ä¸€ä¸ªç”¨æ¥è£…è½½æŒ‡ä»¤å’Œæ•°æ®çš„<strong>å®¹å™¨</strong>ï¼Œ<strong>å®¹å™¨çš„å¤§å°æ˜¯ç”±æˆ‘éœ€è¦å¤šå°‘æ°´æ¥å†³å®šçš„</strong>ï¼Œç›¸åº”çš„ï¼Œä¸ºæ¯ä¸ªç¨‹åºæ®µç”³è¯·çš„ç©ºé—²å†…å­˜çš„å¤§å°ä¹Ÿæ˜¯ç”±æ®µæ¥å†³å®šçš„ï¼Œå› æ­¤ï¼Œå®šé•¿çš„åˆ†é…å†…å­˜æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ï¼Œè¿™é‡Œæˆ‘ä»¬æ ¹æ®<strong>æ®µçš„é•¿åº¦</strong>å†³å®š<strong>ç”³è¯·çš„å†…å­˜ç©ºé—´</strong>ã€‚</p><p>é‚£ç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è‡ªç„¶å°±éœ€è¦çŸ¥é“é‚£æ®µå†…å­˜æ˜¯ç©ºé—²çš„ï¼Œè¿™æ®µå†…å­˜æœ‰å¤šå¤§ã€‚è¿™æ ·æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥<strong>æè¿°è¿™äº›ä¿¡æ¯çš„æ•°æ®ç»“æ„</strong>ï¼Œ<strong>åˆ†åŒºè¡¨</strong>å°±è¢«å¼•å…¥è¿›æ¥äº†ã€‚å½“æˆ‘ä»¬éœ€è¦çš„å†…å­˜ç©ºé—´å¤§å°å’Œè¿™æ®µç©ºé—´<strong>è¿‘ä¼¼åŒ¹é…</strong>çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å°†ç¨‹åºåŠ è½½è¿›å»ï¼Œæ‰§è¡Œå®Œäº†å†å°†å†…å­˜ç©ºé—´é‡Šæ”¾ã€‚</p><p>é‚£åœ¨åŒ¹é…å†…å­˜ç©ºé—´çš„æ—¶å€™ï¼Œå°±å‡ºç°äº†é—®é¢˜ï¼Œæˆ‘ä»¬æ˜¯åº”è¯¥<strong>å°±è¿‘åŒ¹é…</strong>ï¼Œè¿˜æ˜¯èŠ±è´¹æ—¶é—´åš<strong>æœ€ä¼˜åŒ¹é…</strong>å‘¢ï¼Ÿè¿™é‡Œæ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œå¯ä»¥å‚è€ƒç›¸åº”çš„<strong>æ—¶é—´</strong>ï¼Œ<strong>ç©ºé—´å¤æ‚åº¦</strong>å’Œ<strong>å ç”¨ç©ºé—´å¤§å°</strong>çµæ´»é€‰æ‹©ã€‚</p><p>è™½ç„¶åˆ†åŒºè§£å†³äº†å†…å­˜ä½¿ç”¨çš„ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œä½†æˆ‘ä»¬è€ƒè™‘è¿™æ ·çš„ä¾‹å­ï¼šå‡å¦‚ä¸€ä¸ª200Kçš„æ®µç”³è¯·äº†ä¸€æ®µ500Kçš„å†…å­˜ç©ºé—´ï¼Œä½†å‰©ä½™çš„300Kï¼Œåˆ«çš„æ®µå¹¶ä¸èƒ½ä½¿ç”¨ã€‚å¾ˆå¤šè¿™æ ·çš„<strong>å†…å­˜ç¢ç‰‡</strong>èšå°‘æˆå¤šï¼Œå°±é€ æˆäº†<strong>å†…å­˜ç©ºé—´çš„æµªè´¹</strong>ã€‚</p><p>è§£å†³å†…å­˜ç¢ç‰‡ç›´è§‚çš„æƒ³æ³•å°±æ˜¯å°†æ²¡æœ‰çš„å†…å­˜åˆå¹¶ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ç´§ç¼©ï¼Œä½†å†…å­˜ç´§ç¼©æ—¶ï¼Œéœ€è¦è°ƒæ•´<strong>æ¯æ¡æŒ‡ä»¤</strong>çš„åŸºåœ°å€ï¼Œè¿™ä¸ª<strong>ä»»åŠ¡é‡æ˜¯å·¨å¤§çš„</strong>ï¼Œè¿™ç§æ–¹å¼ä¸å¯å–ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å°†å†…å­˜åˆ†é¡µï¼Œåœ¨<strong>æ“ä½œç³»ç»Ÿåˆå§‹åŒ–</strong>çš„æ—¶å€™ï¼Œ<strong>memmap</strong>ä¼šå°†å†…å­˜åˆ†æˆ<strong>4kçš„é¡µå•å…ƒ</strong>ï¼Œé¡µå•å…ƒç”±<strong>é¡µæ¡†å·æŒ‡ç¤º</strong>ä¸­ï¼Œè€Œé¡µæ¡†å·çš„ä½ç½®åˆç”±<strong>é¡µå¤´æŒ‡é’ˆ</strong>æ¥æŒ‡å‘ï¼Œè¿™ä¸ªæŒ‡é’ˆæœ€ç»ˆè¢«æ”¾åˆ°äº†<strong>å¯„å­˜å™¨</strong>ä¸­ã€‚</p><h2 id="3ã€å¤šçº§é¡µè¡¨å’Œå¿«è¡¨"><a href="#3ã€å¤šçº§é¡µè¡¨å’Œå¿«è¡¨" class="headerlink" title="3ã€å¤šçº§é¡µè¡¨å’Œå¿«è¡¨"></a>3ã€å¤šçº§é¡µè¡¨å’Œå¿«è¡¨</h2><h3 id="å¤šçº§é¡µè¡¨"><a href="#å¤šçº§é¡µè¡¨" class="headerlink" title="å¤šçº§é¡µè¡¨"></a>å¤šçº§é¡µè¡¨</h3><p>ä¸Šä¸€å°èŠ‚æå‡ºäº†ä¸€ç§<strong>å¯è¡Œ</strong>çš„å°†<strong>å†…å­˜åˆ†é¡µ</strong>çš„<strong>æ€æƒ³</strong>ã€‚ä½†å®é™…åº”ç”¨ä¸ç†è®ºæ€»æ˜¯å­˜åœ¨<strong>å·®è·</strong>çš„ï¼Œæˆ‘ä»¬é¦–å…ˆ<strong>é‡åŒ–</strong>çš„æ¥çœ‹ç»´æŠ¤å•ä¸ªé¡µéœ€è¦çš„<strong>å†…å­˜å¼€é”€</strong>ï¼š</p><p>ä¸€é¡µå†…å­˜æœ‰4Kçš„ç©ºé—´ï¼Œè€Œ32ä½çš„ç³»ç»Ÿæœ‰32ä½çš„åœ°å€æ€»çº¿ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„å¯»å€èƒ½åŠ›æ˜¯2çš„32æ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯4GBï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå°±éœ€è¦ç»´æŠ¤4GB/4KB=2çš„<strong>20æ¬¡æ–¹ä¸ªé¡µè¡¨</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>1MB</strong>çš„å†…å­˜ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹éœ€è¦1MBçš„å†…å­˜ç©ºé—´ï¼Œè€Œå¤šä¸ªè¿›ç¨‹<strong>å¹¶å‘æ‰§è¡Œ</strong>ï¼Œéœ€è¦ç©ºé—´å°±ä¼šå˜å¾—å¾ˆå¤§ï¼Œè¿™æ ·æ˜¾ç„¶<strong>ä¸å¯å–</strong>ã€‚</p><p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ª<strong>è¯¯åŒº</strong>ï¼Œæœ‰å¾ˆå¤šé¡µè¡¨åœ¨å®é™…ä½¿ç”¨ä¸­æ˜¯è¢«<strong>é—²ç½®</strong>çš„ï¼Œæ—¢ç„¶å®ƒæ˜¯é—²ç½®çš„ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ç»´æŠ¤å®ƒï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥<strong>åˆ å»éƒ¨åˆ†ä¸ä¼šç”¨åˆ°çš„é¡µè¡¨</strong>ï¼Œè¿™æ ·çš„è¯ï¼Œå‡è®¾å°±åªéœ€è¦1KBçš„ç©ºé—´æ¥å­˜å‚¨é¡µè¡¨äº†ï¼Œä½†<strong>é¡µè¡¨</strong>æ˜¯å­˜å‚¨åœ¨<strong>PCB</strong>ä¸­çš„ï¼ŒPCBåˆæ˜¯ä¼šè¢«åŠ è½½åˆ°<strong>å†…å­˜</strong>çš„ï¼Œè€ŒåŠ è½½åˆ°å†…å­˜çš„è¿‡ç¨‹ä¹Ÿæ˜¯éœ€è¦<strong>ç»´æŠ¤é˜Ÿåˆ—ç­‰æ•°æ®ç»“æ„</strong>çš„ï¼Œ<strong>è®¿å­˜çš„å¼€é”€å¤ªå¤§</strong>äº†ã€‚</p><p>é‚£èƒ½ä¸èƒ½æœ‰ä¸€ç§æ–¹å¼ï¼Œæ—¢å¯ä»¥ä½¿é¡µè¡¨è¿ç»­ï¼Œä¹Ÿå¯ä»¥å ç”¨ç©ºé—´å°‘å‘¢ï¼Ÿ</p><blockquote><p>åœ¨å¹³æ—¶è¯»ä¹¦æ—¶ï¼Œæˆ‘ä»¬è¦é”å®šæŸä¸€é¡µï¼Œä¼šä»æ‰¾è¿™ä¸€é¡µæ‰€åœ¨çš„ç›®å½•ï¼Œç„¶åæµè§ˆè¿™ä¸ªç›®å½•ä¸‹çš„å…·ä½“é¡µå°±è¡Œäº†ã€‚è€Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå¤šçº§é¡µè¡¨å°±æ˜¯è¿™æ ·çš„ç›®å½•ã€‚å¤šçº§é¡µè¡¨åˆåˆ’åˆ†ä¸ºé¡µç›®å½•é¡¹å’Œé¡µè¡¨ï¼Œåªä¼šå°†éœ€è¦çš„é¡µåŠ è½½åˆ°å†…å­˜ä¸­å»ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“åˆ†æè¿™ä¸ªè¿‡ç¨‹â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262017602.png" alt="image-20210707195238389"></p><p>åœ¨<strong>è™šæ‹Ÿå†…å­˜</strong>ä¸­ï¼Œä¸€ä¸ªå…·ä½“çš„åœ°å€ç”±<strong>å››ä¸ªå­—èŠ‚</strong>æ¥æŒ‡ç¤ºï¼Œ<strong>å‰åä½å­˜å‚¨é¡µç›®å½•å·</strong>ï¼Œæ¥ä¸‹æ¥çš„<strong>10ä½ç”¨æ¥å­˜æ”¾é¡µå·</strong>ï¼Œå‰©ä¸‹çš„<strong>12ä½ç”¨æ¥é¡µå†…åœ°å€çš„åç§»</strong>ã€‚</p><p>é¡µç›®å½•åœ¨å†…å­˜ä¸­å›ºå®šé©»ç•™ï¼Œéœ€è¦å ç”¨16Kçš„å†…å­˜ç©ºé—´ã€‚è¿™è¿œå°äºå°†æ‰€æœ‰é¡µè¡¨åŠ è½½åˆ°å†…å­˜çš„4Mã€‚</p><p><strong>é¡µç›®å½•å·</strong>ç”±<strong>é¡µç›®å½•æŒ‡é’ˆ</strong>æ¥æŒ‡å‘ï¼Œæ‰¾åˆ°å…·ä½“çš„ç›®å½•åï¼Œç„¶å<strong>å°†è¿™ä¸ªç›®å½•ä¸­çš„é¡µåŠ è½½åˆ°å†…å­˜</strong>ï¼Œæ¥ç€æ‰¾åˆ°å…·ä½“çš„é¡µï¼Œæœ€ç»ˆç”±<strong>é¡µå†…åç§»</strong>æ‰¾åˆ°å…·ä½“çš„<strong>ç‰©ç†å†…å­˜ä½ç½®</strong>ã€‚</p><h3 id="å¿«è¡¨"><a href="#å¿«è¡¨" class="headerlink" title="å¿«è¡¨"></a>å¿«è¡¨</h3><p>çœ‹ä¹¦æ—¶ï¼Œä½œè€…æ€»ä¼šæœ‰æ„ç»™è¯»è€…æ ‡æ³¨å‡º<strong>é‡ç‚¹çš„ç« èŠ‚</strong>ï¼Œè¿™æ ·æˆ‘ä»¬æ‰¾æœ‰ç”¨çŸ¥è¯†çš„<strong>æ—¶é—´åˆä¼šå‡å°‘å¾ˆå¤š</strong>ï¼ŒåŒæ ·ï¼Œå¯¹äºå¤šçº§é¡µè¡¨æ¥è¯´ï¼Œ16Kçš„é¡µè¡¨<strong>å¯»å€</strong>èµ·æ¥ä¹Ÿæ˜¯å¾ˆ<strong>æµªè´¹æ—¶é—´</strong>çš„ï¼Œèƒ½ä¸èƒ½ç»™æˆ‘æŠŠ<strong>å¸¸ç”¨çš„é¡µæ ‡æ³¨èµ·æ¥</strong>å‘¢ï¼Ÿ</p><p>è¿™ç§æ€æƒ³åœ¨äº’è”ç½‘ä¸­æ˜¯å¸¸è§çš„ï¼Œ<strong>æµè§ˆå™¨ä¼šå°†ç»å¸¸è®¿é—®çš„åŸŸååšç¼“å­˜</strong>ï¼Œ<strong>æ•°æ®åº“ä¼šå¯¹ç»å¸¸ç”¨åˆ°çš„sqlè¯­å¥å’Œæ•°æ®åšç¼“å­˜</strong>ï¼Œè€Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œç”±<strong>TLB</strong>æ¥å­˜å‚¨é¡µç›®å½•çš„ç¼“å­˜ã€‚</p><ul><li><input checked disabled type="checkbox"> TCBï¼Œä¹Ÿå°±æ˜¯å¿«è¡¨ï¼Œå®ƒæ˜¯ä¸€ç§<strong>ç›¸è¿å­˜å‚¨çš„å¯„å­˜å™¨</strong></li></ul><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262017253.png" alt="image-20210707195249863"></p><p>é¦–å…ˆåœ¨TLBä¸­æ‰¾æ˜¯å¦å­˜åœ¨å¯¹åº”çš„é€»è¾‘åœ°å€ï¼Œ<strong>å¦‚æœæœ‰</strong>ï¼Œç›´æ¥è½¬åŒ–<strong>é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€</strong>ï¼Œå½“ç„¶ï¼Œè¿™ä¸€æ­¥<strong>å¯¹äºç”¨æˆ·æ˜¯é€æ˜</strong>çš„ã€‚</p><p>å¦‚æœåœ¨TLBä¸­<strong>æ²¡æœ‰æ‰¾åˆ°</strong>é€»è¾‘åœ°å€ï¼Œå³TLBæœªå‘½ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡<strong>å¤šçº§é¡µè¡¨</strong>æ¥æŸ¥æ‰¾ã€‚</p><p>é‚£ä¹ˆTLBåœ¨ç†è®ºå±‚é¢æ˜¯å¾ˆå¥½ç”¨ï¼Œä½†çœŸæ­£åº”ç”¨æ•ˆæœå¦‚ä½•å‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262017790.png" alt="image-20210707195302146"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒTLBçš„æ•ˆç‡çš„ç¡®å¾ˆé«˜ï¼Œä½†æ˜¯éœ€è¦å»ºç«‹åœ¨TLBå‘½ä¸­ç‡é«˜çš„æƒ…å†µä¸‹çš„ï¼Œç„¶è€Œå®é™…æƒ…å†µä¸‹TLBæ˜¯ä¸å¤§çš„ï¼Œé‚£ä¸ºä»€ä¹ˆä»ç„¶å¯ä»¥å‘æŒ¥ä½œç”¨å‘¢?è¿™æ˜¯å› ä¸º<strong>ç¨‹åºçš„åœ°å€è®¿é—®</strong>å­˜åœ¨<strong>å±€éƒ¨æ€§</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262018224.png" alt="image-20210707195318860"></p><h2 id="4ã€æ®µé¡µç»“åˆçš„å®é™…å†…å­˜ç®¡ç†"><a href="#4ã€æ®µé¡µç»“åˆçš„å®é™…å†…å­˜ç®¡ç†" class="headerlink" title="4ã€æ®µé¡µç»“åˆçš„å®é™…å†…å­˜ç®¡ç†"></a>4ã€æ®µé¡µç»“åˆçš„å®é™…å†…å­˜ç®¡ç†</h2><h3 id="å†…å­˜ç®¡ç†çš„æ¨¡å‹"><a href="#å†…å­˜ç®¡ç†çš„æ¨¡å‹" class="headerlink" title="å†…å­˜ç®¡ç†çš„æ¨¡å‹"></a>å†…å­˜ç®¡ç†çš„æ¨¡å‹</h3><p>æ®µæ˜¯ç¨‹åºå‘˜ç¼–å†™ç¨‹åºçš„æ–¹å¼ï¼Œè€Œé¡µæ˜¯ç‰©ç†å†…å­˜çš„ä½¿ç”¨æ–¹å¼ï¼Œé‚£å¦‚ä½•å°†æ®µé¡µç»“åˆå‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262018137.png" alt="image-20210707195330375"></p><p>é¦–å…ˆåœ¨<strong>è™šæ‹Ÿå†…å­˜</strong>ä¸­åˆ’åˆ†ä¸€æ®µ<strong>åœ°å€ç©ºé—´</strong>ç”¨äºå­˜æ”¾åº”ç”¨ç¨‹åºçš„æ®µã€‚</p><ul><li><input checked disabled type="checkbox"> è¿™é‡Œçš„åœ°å€ç©ºé—´åªæ˜¯<strong>é€»è¾‘ä¸Š</strong>çš„ï¼Œ<strong>ç‰©ç†åœ°å€</strong>è¿˜éœ€è¦åšè¿›ä¸€æ­¥çš„<strong>æ˜ å°„</strong>ã€‚</li></ul><p>è¿™é‡Œçš„<strong>è™šæ‹Ÿå†…å­˜æ˜¯åˆ†æ®µ</strong>çš„ï¼Œæ¥ç€å°†åˆ†æ®µçš„è™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°<strong>åˆ†é¡µçš„ç‰©ç†åœ°å€</strong>ä¸Šå»ã€‚</p><p>è€Œä»ç”¨æˆ·çš„è§’åº¦æ¥è¯´ï¼šæ®µé¢å‘ç”¨æˆ·ï¼Œé¡µé¢å‘ç¡¬ä»¶ã€‚ä»é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„å¯¹äºç”¨æˆ·æ—¶é€æ˜çš„ï¼Œåªæœ‰æ˜ å°„åˆ°æ®µæ˜¯å¯¹ç”¨æˆ·å¯è§çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262018835.png" alt="image-20210707195343879"></p><h3 id="ä¸€ä¸ªå®é™…çš„æ®µï¼Œé¡µç»“åˆ"><a href="#ä¸€ä¸ªå®é™…çš„æ®µï¼Œé¡µç»“åˆ" class="headerlink" title="ä¸€ä¸ªå®é™…çš„æ®µï¼Œé¡µç»“åˆ"></a>ä¸€ä¸ªå®é™…çš„æ®µï¼Œé¡µç»“åˆ</h3><p>è¦ä½“ç°å®é™…çš„å†…å­˜ç®¡ç†ï¼Œé‚£å°±ä¸€å®šè¦<strong>ä½¿ç”¨å†…å­˜</strong>ï¼Œè€Œä½¿ç”¨å†…å­˜å³æ˜¯<strong>å°†ç¨‹åºåŠ è½½åˆ°å†…å­˜</strong>ï¼ŒåŠ è½½åˆ°å†…å­˜çš„ç¨‹åºæ›´å…·ä½“çš„è¯´å®ƒæ˜¯ä¸€ä¸ª<strong>è¿›ç¨‹</strong>ã€‚</p><p>åˆ™æ‰€è°“çš„å†…å­˜ç®¡ç†æ˜¯ä»<strong>è¿›ç¨‹åˆ›å»º</strong>å¼€å§‹çš„ï¼Œè€Œè¿›ç¨‹åˆ›å»ºæ—¶ä½¿ç”¨<strong>forkç³»ç»Ÿè°ƒç”¨</strong>ï¼Œæ•…äº‹çš„å¤§å¹•ä¹Ÿä¾¿å°±æ­¤æ‹‰å¼€äº†â€”â€”</p><ul><li><input checked disabled type="checkbox"> è¿™ä¸ªè¿‡ç¨‹åˆ†ä¸º<strong>åˆ†å‰²è™šæ‹Ÿå†…å­˜</strong>-ã€‹<strong>å»ºæ®µè¡¨</strong>-ã€‹<strong>åˆ†é…åˆ°ç‰©ç†å†…å­˜</strong>-ã€‹<strong>å»ºé¡µè¡¨</strong>-ã€‹<strong>æ˜ å°„å®Œæˆ</strong></li></ul><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262018867.png" alt="image-20210707195411176"></p><p>ä¸Šå›¾é¦–å…ˆåœ¨<strong>copy_processå‡½æ•°</strong>ä¸­è°ƒç”¨<strong>copy_memå‡½æ•°</strong>ï¼Œåœ¨è¯¥å‡½æ•°ä¸­é¦–å…ˆ<strong>åˆ†é…è™šå­˜</strong>ï¼Œä¸ºæ¯ä¸ª<strong>è¿›ç¨‹</strong>åˆ†é…<strong>64MB</strong>çš„è™šå­˜ï¼Œè¦æ³¨æ„çš„æ˜¯è™šå­˜åœ°å€æ˜¯<strong>ä¸é‡å¤</strong>çš„ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¼è‡´ç›¸åŒçš„åœ°å€å†²çªã€‚</p><p>æ¥ç€<strong>å»ºç«‹æ®µè¡¨</strong>ï¼Œä¹Ÿå°±æ˜¯åœ¨PCBä¸­å»ºç«‹<strong>æ®µè¡¨LDT</strong>ï¼Œåœ¨åæœŸè¿›ç¨‹åˆ‡æ¢çš„æ—¶å€™ï¼ŒPCBä¹Ÿå°±è·Ÿç€åˆ‡æ¢ã€‚</p><p>æ¥ä¸‹æ¥å¼€å§‹åˆ†é…ç‰©ç†å†…å­˜â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262018281.png" alt="image-20210707195423193"></p><p>è°ƒç”¨<strong>copy_page_tableså‡½æ•°</strong>å°†è™šæ‹Ÿå†…å­˜çš„åœ°å€<strong>old_data_baseæ˜ å°„</strong>åˆ°ç‰©ç†å†…å­˜çš„åœ°å€<strong>new_data_base</strong>ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ<strong>è™šæ‹Ÿåœ°å€ç”¨from_diræŒ‡ä»£</strong>ï¼Œ<strong>ç‰©ç†åœ°å€ç”¨to_diræŒ‡ä»£</strong>ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><p>fromå³ç§»22ä½å¾—åˆ°<strong>ç›®å½•é¡¹çš„ç¼–å·</strong>ï¼Œåˆå› ä¸ºä¸€ä¸ªè™šæ‹Ÿåœ°å€å 4ä¸ªå­—èŠ‚ï¼Œåˆ™è¡¨ç°ä¸ºfrom&gt;&gt;20</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262019602.png" alt="image-20210707195447747"></p><p>åœ¨ä¸‹é¢çš„å¾ªç¯ä¸­ï¼Œå°†å…·ä½“çš„é¡µæ˜ å°„åˆ°ç‰©ç†åœ°å€â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262019373.png" alt="image-20210707195510386"></p><p>æœ€ç»ˆï¼Œæ‰§è¡ŒæŒ‡ä»¤ï¼Œåœ¨å¯¹åº”çš„å†…å­˜åœ°å€ç©ºé—´ä¸­å®Œæˆ<strong>å†™æ—¶å¤åˆ¶</strong>ï¼Œå³ç»<strong>åœ°å€æ€»çº¿</strong>å°†æ•°æ®å‘é€åˆ°ç‰©ç†ç©ºé—´ä¸­ï¼Œæ•´ä¸ªè¿‡ç¨‹çš„<strong>åœ°å€ç¿»è¯‘</strong>ç”±<strong>ç¡¬ä»¶MMU</strong>å®Œæˆï¼Œå°†<strong>é€»è¾‘åœ°å€</strong>ç¿»è¯‘ä¸º<strong>è™šæ‹Ÿåœ°å€</strong>ï¼Œå†å°†è™šæ‹Ÿåœ°å€ç¿»è¯‘ä¸º<strong>ç‰©ç†åœ°å€</strong>â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262019235.png" alt="image-20210707195523166"></p><p>å®Œç»“â€”â€”</p><p><img src="https://cdn.jsdelivr.net/gh/YuZhe727/xiaozhe_img/img/202310262019707.png" alt="image-20210707195535245"></p><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> linux0.11 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿›ç¨‹ä¸çº¿ç¨‹</title>
      <link href="/2021/07/11/jin-cheng-yu-xian-cheng/"/>
      <url>/2021/07/11/jin-cheng-yu-xian-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å¤šè¿›ç¨‹å›¾åƒçš„å¼•å‡º"><a href="#ä¸€ã€å¤šè¿›ç¨‹å›¾åƒçš„å¼•å‡º" class="headerlink" title="ä¸€ã€å¤šè¿›ç¨‹å›¾åƒçš„å¼•å‡º"></a>ä¸€ã€å¤šè¿›ç¨‹å›¾åƒçš„å¼•å‡º</h1><h2 id="1-å¤šè¿›ç¨‹å›¾åƒ"><a href="#1-å¤šè¿›ç¨‹å›¾åƒ" class="headerlink" title="1.å¤šè¿›ç¨‹å›¾åƒ"></a>1.å¤šè¿›ç¨‹å›¾åƒ</h2><p>å¤šä¸ªè¿›ç¨‹åŒæ—¶å­˜åœ¨äºå†…å­˜ï¼Œå¯èƒ½ä¼šå‡ºç°å‰ä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ä¸­çš„å†…å®¹è¢«ç¬¬äºŒä¸ªè¿›ç¨‹æ›´æ”¹ã€‚è¿™æ ·æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆä¼šæƒ³åˆ°ï¼Œæ˜¯å¦å¯ä»¥è®¾ç½®<strong>DPL</strong>çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å°†å…¶è®¾ç½®ä¸º<strong>ç‰¹æƒçº§åˆ«</strong>ï¼Œè¿™æ ·è¿›ç¨‹ä¹‹é—´å°±ä¸èƒ½äº’ç›¸è®¿é—®äº†ï¼Œä½†è¿™é‡Œå¿½ç•¥äº†ä¸€ä¸ªé—®é¢˜ï¼ŒDPLçš„è®¾ç½®æ˜¯é’ˆå¯¹<strong>æ“ä½œç³»ç»Ÿ</strong>è€Œè¨€çš„ï¼Œè¿›ç¨‹çš„DPLéƒ½ç­‰äº3ï¼Œå³<strong>ç”¨æˆ·çº§æƒé™</strong>ï¼Œä¾ç„¶å¯ä»¥äº’ç›¸è®¿é—®ï¼Œæ‰€ä»¥è¿™ç§è§£å†³æ–¹å¼çš„æ€è·¯æ˜¯é”™è¯¯çš„ã€‚</p><p>é‚£å¦‚ä½•ä¿è¯è¿›ç¨‹é—´ä¸å†²çªå‘¢ï¼Ÿç›´è§‚çš„è§£å†³æ–¹å¼ï¼Œå°±æ˜¯ç»™è¿›ç¨‹<strong>ä¸Šé”</strong>ï¼Œé™åˆ¶å¯¹<strong>å†…å­˜åœ°å€çš„è¯»å†™</strong>ã€‚</p><p><strong>æ˜ å°„è¡¨</strong>å°±æ˜¯å®ç°é™åˆ¶è®¿é—®çš„é‚£ä¸ªåˆ©å™¨ã€‚æ˜ å°„è¡¨çš„æ€è·¯å³æ˜¯åˆ©ç”¨<strong>è™šæ‹Ÿå†…å­˜</strong>å®ç°<strong>åœ°å€åˆ†ç¦»</strong>ã€‚</p><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ‰€è°“çš„å¤šè¿›ç¨‹å›¾åƒï¼Œä¸å•å•æ˜¯è¿›ç¨‹çš„ç®¡ç†ï¼Œè¿˜æ¶‰åŠåˆ°å†…å­˜çš„ç®¡ç†ã€‚</p><h3 id="å¤šè¿›ç¨‹å¦‚ä½•åˆä½œ"><a href="#å¤šè¿›ç¨‹å¦‚ä½•åˆä½œ" class="headerlink" title="å¤šè¿›ç¨‹å¦‚ä½•åˆä½œ"></a>å¤šè¿›ç¨‹å¦‚ä½•åˆä½œ</h3><p>å…ˆçœ‹ä¸‹é¢çš„ä¾‹å­â€”â€”</p><p>å‡è®¾æœ‰ä¸€æ®µç©ºé—²çš„å†…å­˜ç©ºé—´ï¼Œä¸¤å—è¿›ç¨‹éƒ½æƒ³åˆ©ç”¨è¿™å—å†…å­˜ç©ºé—´ï¼Œè¿™æ ·æœ‰å¯èƒ½ä¼šå‡ºç°ä¸€å—å†…å­˜ç©ºé—´å‡ºç°<strong>ä¸¤ä¸ªä¸å®Œæ•´çš„è¿›ç¨‹ç‰‡æ®µ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›ç¨‹é—´æ˜¯å¯ä»¥äº’ç›¸åˆä½œçš„ï¼Œä½†åˆä½œçš„æ–¹å¼éœ€è¦è¢«åè°ƒã€‚</p><p>é‚£æ€æ ·åè°ƒå‘¢ï¼Œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œè¦æƒ³è§‰çŸ¥æ­¤äº‹ï¼Œä¸å¦¨ç†è§£<strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…å®ä¾‹</strong>â€”â€”</p><blockquote><p>ç”Ÿäº§è€…ä¸æ–­çš„äº§ç”Ÿæ•°æ®æ”¾å…¥ç¼“å†²åŒºï¼Œè€Œæ¶ˆè´¹è€…ä»ç¼“å†²åŒºä¸­å–å‡ºæ•°æ®è¿›è¡Œå¤„ç†ï¼Œå½“ç¼“å†²åŒºå·²æ»¡çš„æ—¶å€™ï¼Œç”Ÿäº§è€…é˜»å¡ï¼Œå½“ç¼“å†²åŒºä¸ºç©ºçš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…é˜»å¡</p></blockquote><p>æˆ‘ä»¬ä¼šä½¿ç”¨ä¸‰ç§æ–¹å¼æ¥å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜â€”â€”</p><p>åœ¨ä¸‹æ–‡çš„è¿›ç¨‹åŒæ­¥ä¸­ä¼šæåŠã€‚ã€‚ã€‚</p><h1 id="äºŒã€çº¿ç¨‹çš„å¼•å‡ºä¸å®ç°"><a href="#äºŒã€çº¿ç¨‹çš„å¼•å‡ºä¸å®ç°" class="headerlink" title="äºŒã€çº¿ç¨‹çš„å¼•å‡ºä¸å®ç°"></a>äºŒã€çº¿ç¨‹çš„å¼•å‡ºä¸å®ç°</h1><p>ä»ä¸Šä¸€èŠ‚æˆ‘ä»¬çŸ¥é“å¤šè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„æœ€åŸºæœ¬ï¼Œæœ€æ ¸å¿ƒçš„å›¾åƒï¼Œå¤šè¿›ç¨‹å¯ä»¥è¢«ç»„ç»‡ï¼Œåˆä½œä¸åˆ‡æ¢ã€‚</p><p>å¤šè¿›ç¨‹çš„ç»„ç»‡æ˜¯é€šè¿‡<strong>çŠ¶æ€ä¸é˜Ÿåˆ—</strong>æ¥å®ç°çš„</p><p>é‚£ä¹ˆå¤šè¿›ç¨‹æ˜¯å¦‚ä½•è¢«<strong>åˆ‡æ¢</strong>çš„å‘¢ï¼Ÿä¸”å¬æˆ‘å¨“å¨“é“æ¥â€”â€”</p><hr><h2 id="1-ç”¨æˆ·çº§çº¿ç¨‹"><a href="#1-ç”¨æˆ·çº§çº¿ç¨‹" class="headerlink" title="1.ç”¨æˆ·çº§çº¿ç¨‹"></a>1.ç”¨æˆ·çº§çº¿ç¨‹</h2><h3 id="çº¿ç¨‹çš„å¼•å‡º"><a href="#çº¿ç¨‹çš„å¼•å‡º" class="headerlink" title="çº¿ç¨‹çš„å¼•å‡º"></a>çº¿ç¨‹çš„å¼•å‡º</h3><p>æ—¢ç„¶æˆ‘ä»¬è¦äº†è§£çš„æ˜¯è¿›ç¨‹é—´çš„åˆ‡æ¢ï¼Œé‚£ä¸ºä»€ä¹ˆå­¦ä¹ çš„å´æ˜¯çº¿ç¨‹å‘¢ï¼Ÿ</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹å®è§‚ä¸Šçš„è¿›ç¨‹åˆ‡æ¢ï¼šä¸€ä¸ª<strong>è¿›ç¨‹</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>æŒ‡ä»¤æ‰§è¡Œåºåˆ—</strong>+<strong>èµ„æº</strong>ï¼Œåœ¨å‘ç”Ÿå¤–ä¸­æ–­åï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ã€‚åœ¨è¿™æœŸé—´ï¼ŒæŒ‡ä»¤è®¿é—®çš„å†…å­˜åœ°å€æ˜¯é€šè¿‡<strong>æ˜ å°„è¡¨</strong>æ¥è·å–çš„ã€‚è¿™ä¸ªåˆ‡æ¢æ˜¯ç”±ä¸­æ–­å¼•èµ·çš„ï¼Œå› è€Œä¼šè¿›å…¥å†…æ ¸æ€ï¼Œä¼šæ¶‰åŠåˆ°<strong>èµ„æºçš„åˆ†é…</strong>ã€‚è€Œèµ„æºçš„åˆ†é…æ˜¯æµªè´¹æ—¶é—´çš„ï¼Œé‚£ä¹ˆä¸ºäº†æé«˜è¿›ç¨‹æ‰§è¡Œçš„æ•ˆç‡ï¼Œèƒ½å¦å°†èµ„æºä¸æŒ‡ä»¤çš„<strong>æ‰§è¡Œåˆ†ç¦»</strong>å¼€ï¼Œå®ç°ä¸åŠ¨èµ„æºè€Œåªåˆ‡æ¢æŒ‡ä»¤åºåˆ—å‘¢ï¼Ÿâ€”â€”</p><p>æˆ‘ä»¬æ¥çœ‹ç›´è§‚çš„è¡¨è¿°â€”â€”<br><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010326080.png" alt="image-20210619010326080"></p><p>è¿™æ ·å°±å¼•å‡ºäº†è½»å·§çº§çš„è¿›ç¨‹â€”â€”<strong>çº¿ç¨‹</strong>ã€‚</p><h3 id="çº¿ç¨‹çš„ä»·å€¼"><a href="#çº¿ç¨‹çš„ä»·å€¼" class="headerlink" title="çº¿ç¨‹çš„ä»·å€¼"></a>çº¿ç¨‹çš„ä»·å€¼</h3><p>è¦å›ç­”<strong>çº¿ç¨‹</strong>æ˜¯å¦å®ç”¨ï¼Œä¹Ÿå°±æ˜¯è¦å›ç­”<strong>å¤šä¸ªæ‰§è¡Œåºåˆ—+ä¸€ä¸ªåœ°å€ç©ºé—´</strong>çš„æ€æƒ³æ˜¯å¦å®ç”¨ã€‚</p><p>æˆ‘é—¨æ¥çœ‹ä¸‹é¢çš„ä¾‹å­â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010341740.png" alt="image-20210619010341740"></p><p>è¿™ä¸ªç½‘é¡µå‘ˆç°å‡ºæ¥çš„æ˜¯ï¼Œé¦–å…ˆæ–‡å­—è¢«åŠ è½½å‡ºæ¥ï¼Œæ¥ç€å›¾ç‰‡è¢«åŠ è½½ï¼Œæœ€åå…¨éƒ¨å†…å®¹éƒ½å±•ç¤ºäº†å‡ºæ¥ã€‚</p><p>å®é™…ä¸Šå®ƒçš„ç¨‹åºæ‰§è¡Œæµç¨‹æ˜¯å¤šä¸ªçº¿ç¨‹ä»<strong>æµè§ˆå™¨çš„ç¼“å†²åŒº</strong>ä¸­è¯»å–<strong>åŒä¸€ä»½èµ„æº</strong>ï¼Œç¨‹åºæ‰§è¡Œå±•ç¤ºæ–‡æœ¬çš„çº¿ç¨‹æ—¶ï¼Œåœ¨æ­¤æœŸé—´åˆ‡æ¢åˆ°å±•ç¤ºå›¾ç‰‡çš„çº¿ç¨‹ï¼Œè¿‡ä¸€æ®µæ—¶é—´åˆåˆ‡æ¢å›æ¥ï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒã€‚</p><p>è¿™é‡Œæˆ‘æè¿°çš„æ¯”è¾ƒ<strong>ç”Ÿæ¶©</strong>ï¼Œå…¶å®å¤šçº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸€è¨€ä»¥è”½ä¹‹ï¼Œå…¶å®å°±æ˜¯ç¼–ç¨‹æ—¶<strong>å¤šæ¡çº¿è·¯å¹¶å‘æ‰§è¡Œ</strong>ï¼š</p><h3 id="çº¿ç¨‹çš„åˆ‡æ¢"><a href="#çº¿ç¨‹çš„åˆ‡æ¢" class="headerlink" title="çº¿ç¨‹çš„åˆ‡æ¢"></a>çº¿ç¨‹çš„åˆ‡æ¢</h3><p>å¼€å±€ä¸€å¼ å›¾ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010356747.png" alt="image-20210619010356747"></p><p>å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œçº¿ç¨‹é—´çš„åˆ‡æ¢æ˜¯é€šè¿‡ä¸€ä¸ªå«åš<strong>Yield</strong>çš„å‡½æ•°æ¥å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„<strong>æ ¸å¿ƒ</strong>å°±åœ¨äºå†™å‡ºyeildå‡½æ•°çš„å®ç°â€”â€”</p><p>è¦å®Œæˆåˆ‡æ¢ï¼Œå°±è¦ä¿å­˜ä¸Šä¸€ä¸ªçº¿ç¨‹çš„çŠ¶æ€ï¼ŒçŠ¶æ€çš„ä¿å­˜æ˜¯ä¾èµ–æ ˆæ¥å®ç°çš„ï¼Œæˆ‘ä»¬å…ˆä»ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸€ä¸ªæ ˆè®²èµ·â€”â€”</p><h4 id="ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸€ä¸ªæ ˆ"><a href="#ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸€ä¸ªæ ˆ" class="headerlink" title="ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸€ä¸ªæ ˆ"></a>ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸€ä¸ªæ ˆ</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010411788.png" alt="image-20210619010411788"></p><p>è¿™å¼ å›¾åˆ°åº•è¡¨è¾¾äº†ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>åœ¨å‡½æ•°Bä¸­è°ƒç”¨Yieldå‡½æ•°ï¼Œè¿™æ—¶éœ€è¦å°†ç¨‹åºBçš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å‹æ ˆï¼Œè·³è½¬åï¼Œåœ¨Cå‡½æ•°ä¸­è°ƒç”¨äº†Då‡½æ•°å¹¶å‹æ ˆï¼Œåœ¨Då‡½æ•°ä¸­è°ƒç”¨Yieldå‡½æ•°ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦è·³è½¬204çš„ä½ç½®ï¼Œè·³è½¬åï¼ŒPCæŒ‡é’ˆæŒ‡å‘äº†åœ°å€204ï¼Œæ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œé‡åˆ°<strong>}</strong>åï¼Œå¼¹æ ˆå¹¶è·³è½¬ï¼Œç„¶åç¨‹åºæŒ‡é’ˆè·³åˆ°404å¤„ã€‚</p><p>å—¯å“¼ï¼Œæ˜¯æˆ‘å‰§æœ¬æ‹¿é”™äº†å—ï¼Ÿçš„ç¡®ï¼Œå°±æ˜¯è¿™ä¹ˆæˆå‰§æ€§ï¼Œæˆ‘è¦çš„æ˜¯<strong>å¼¹æ ˆ104</strong>å¹¶è·³è½¬ï¼Œå¯æ²¡æƒ³è°ƒå›<strong>404</strong>å•Šï¼Œæ­»å¾ªç¯ã€‚ã€‚ã€‚</p><p>é‚£ä¹ˆè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬<strong>å…±ç”¨äº†ä¸€ä¸ªæ ˆ</strong>ï¼ï¼ï¼</p><p>æ‰€ä»¥æˆ‘ä»¬å¾ˆè‡ªç„¶çš„éœ€è¦ä»<strong>ä¸€ä¸ªæ ˆ</strong>è¿‡æ¸¡åˆ°äº†<strong>ä¸¤ä¸ªæ ˆ</strong>ã€‚</p><h4 id="ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸¤ä¸ªæ ˆ"><a href="#ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸¤ä¸ªæ ˆ" class="headerlink" title="ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸¤ä¸ªæ ˆ"></a>ä¸¤ä¸ªæ‰§è¡Œåºåˆ—ä¸ä¸¤ä¸ªæ ˆ</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010426291.png" alt="image-20210619010426291"></p><p>ç°åœ¨çº¿ç¨‹åˆ‡æ¢çš„æ—¶å€™ï¼Œé¦–å…ˆyieldå‡½æ•°éœ€è¦åˆ‡æ¢æ ˆï¼Œè¿™é‡Œå°±éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿä¿å­˜å½“å‰çº¿ç¨‹æ ˆçŠ¶æ€çš„<strong>å®¹å™¨</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>TCB</strong>ã€‚</p><p>æˆ‘ä»¬æœ€ååœ¨æ‰§è¡Œyieldå‡½æ•°æ—¶ï¼Œé¦–å…ˆåˆ‡æ¢TCBï¼Œç„¶åYiledå‡½æ•°ç»“æŸï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œ<strong>}</strong>,ä¹Ÿå°±æ˜¯æ‰§è¡Œ<strong>retæŒ‡ä»¤</strong></p><p>å¼¹æ ˆæ‰§è¡Œ104ï¼Œä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢å°±è¿™æ ·æœ‰æƒŠæ— é™©çš„å®Œæˆäº†ã€‚</p><ul><li><input checked disabled type="checkbox"> è¿™é‡Œä¸éœ€è¦jmp 204,å› ä¸ºYieldå‡½æ•°æ‰§è¡Œå®Œåï¼Œå°±ä¼š<strong>é»˜è®¤å¾€ä¸‹é¡ºåºæ‰§è¡Œ</strong>ã€‚</li></ul><p>å®Œæˆäº†ä¸¤ä¸ªæ ˆï¼Œæˆ‘ä»¬å†å°†åŒ…å«çº¿ç¨‹åˆ‡æ¢çš„<strong>ThreadCreate</strong>å‡½æ•°åšåˆå§‹åŒ–ï¼Œå¹¶åœ¨å…¶ä¸­å…³è”<strong>TCBä¸æ ˆ</strong>ã€‚</p><p>è¿™æ ·ï¼Œä¸€ä¸ªå®Œæ•´çš„è¿›ç¨‹å°±æœ‰äº†â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010441251.png" alt="image-20210619010441251"></p><hr><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å›ç­”è¿™ä¸ªå°ç»“ä¸ºä»€ä¹ˆå«ç”¨æˆ·çº§çº¿ç¨‹ï¼Œå› ä¸º<strong>fieldæ˜¯ç”¨æˆ·çº§åº”ç”¨ç¨‹åº</strong>ã€‚</p><p>æ•´ä¸ªç”¨æˆ·çº§çº¿ç¨‹å¯ä»¥å®ç°æœ‰åºçš„åˆ‡æ¢äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦å†…æ ¸çº§çº¿ç¨‹å‘¢ï¼Ÿå½“ç„¶æ˜¯å› ä¸ºå®ƒæœ‰å…¶å¤©ç”Ÿçš„<strong>é™åˆ¶</strong>ï¼Œè€Œä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œæ ¸å¿ƒçº§çº¿ç¨‹æ˜¯ç”¨æˆ·çº§çº¿ç¨‹çš„<strong>æ‰©å±•</strong>ã€‚</p><h3 id="ç”¨æˆ·çº§çº¿ç¨‹çš„ç¼ºç‚¹"><a href="#ç”¨æˆ·çº§çº¿ç¨‹çš„ç¼ºç‚¹" class="headerlink" title="ç”¨æˆ·çº§çº¿ç¨‹çš„ç¼ºç‚¹"></a>ç”¨æˆ·çº§çº¿ç¨‹çš„ç¼ºç‚¹</h3><p>å½“ç”¨æˆ·çº§çº¿ç¨‹åœ¨æ‰§è¡ŒæŒ‡ä»¤è¿‡ç¨‹ä¸­å‘ç”Ÿä¸­æ–­ï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œç„¶åæ‰§è¡Œä¸­æ–­ç¨‹åºï¼Œåœ¨æ‰§è¡Œå®Œåï¼Œå› ä¸ºæƒé™å·²ç»æ”¹å˜ï¼Œ<strong>æ— æ³•åˆ‡æ¢å›ç”¨æˆ·çº§çº¿ç¨‹</strong>ï¼Œç”¨æˆ·çº§çº¿ç¨‹ä¸å†æ‰§è¡Œã€‚</p><h2 id="2-å†…æ ¸çº§çº¿ç¨‹"><a href="#2-å†…æ ¸çº§çº¿ç¨‹" class="headerlink" title="2.å†…æ ¸çº§çº¿ç¨‹"></a>2.å†…æ ¸çº§çº¿ç¨‹</h2><p>æˆ‘ä»¬é¦–å…ˆæ¥å›é¡¾ä¸€ä¸‹<strong>å†…æ ¸çº§çº¿ç¨‹çš„åˆ‡æ¢</strong>â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010458893.png" alt="image-20210619010458893"></p><p>å®è§‚çš„çœ‹ï¼Œå†…æ ¸çº§çº¿ç¨‹ç”±ç”¨æˆ·çº§çº¿ç¨‹çš„ä¸¤ä¸ªæ ˆæ¼”å˜æˆäº†ä¸¤å¥—æ ˆï¼Œå®ƒçš„çš„å®ç°æœºåˆ¶å¤§è‡´åˆ†ä¸ºäº”æ­¥â€”â€”</p><ol><li>ç”¨æˆ·æ ˆé€šè¿‡<strong>intä¸­æ–­æŒ‡ä»¤</strong>è·³è½¬åˆ°å†…æ ¸æ ˆ</li><li>åœ¨å†…æ ¸æ ˆä¸­å­˜å‚¨å½“å‰å†…æ ¸çº¿ç¨‹çš„çŠ¶æ€ï¼Œè€Œå†…æ ¸æ ˆåˆç”±<strong>çº¿ç¨‹æ§åˆ¶å—TCB1</strong>ç»´æŠ¤</li><li>é€šè¿‡<strong>Scheduleå‡½æ•°</strong>å®Œæˆå†…æ ¸çº§çº¿ç¨‹è·³è½¬</li><li>åœ¨å†…æ ¸æ ˆä¸­å­˜å‚¨å½“å‰å†…æ ¸çº¿ç¨‹çš„çŠ¶æ€ï¼Œè€Œå†…æ ¸æ ˆåˆç”±çº¿ç¨‹æ§åˆ¶å—TCB2ç»´æŠ¤</li><li>ç”±å†…æ ¸æ ˆè·³è½¬å›ç”¨æˆ·æ ˆ</li></ol><p>ä¸‹é¢æˆ‘ä»¬å°†å…·ä½“å®ç°è¿™ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼š</p><hr><p>è¿™ä¸ªæ•…äº‹é¦–å…ˆä»è¿›å…¥å†…æ ¸å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ä»æŸä¸ª<strong>ä¸­æ–­</strong>å¼€å§‹ï¼Œè¿™é‡Œçš„ç³»ç»Ÿè°ƒç”¨æ¡ˆä¾‹æˆ‘ä»¬é€‰æ‹©<strong>fork()</strong>,fork()å‡½æ•°æ˜¯ç”¨äºåˆ›å»ºè¿›ç¨‹çš„ï¼Œè€Œ<strong>è¿›ç¨‹</strong>å®è´¨ä¸Šæ˜¯<strong>èµ„æº+æŒ‡ä»¤åºåˆ—</strong>ï¼Œ<strong>æŒ‡ä»¤åºåˆ—</strong>å°±æ˜¯ä¸€ç³»åˆ—çš„<strong>çº¿ç¨‹</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨forkå‡½æ•°ï¼Œæ˜¯å¯ä»¥å®Œæˆå†…æ ¸çº§çº¿ç¨‹çš„åˆ‡æ¢çš„ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¾‹å­â€”â€”</p><h3 id="ä¸­æ–­å…¥å£"><a href="#ä¸­æ–­å…¥å£" class="headerlink" title="ä¸­æ–­å…¥å£"></a>ä¸­æ–­å…¥å£</h3><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010514141.png" alt="image-20210619010514141"></p><p>åœ¨mainå‡½æ•°ä¸­è°ƒç”¨äº†Aå‡½æ•°ï¼Œä¹‹ååœ¨Aå‡½æ•°çš„æ‰§è¡Œä¸­åˆè°ƒç”¨äº†forkç³»ç»Ÿè°ƒç”¨ï¼Œforkç³»ç»Ÿè°ƒç”¨ä¼šå¼•èµ·ä¸­æ–­ï¼Œåœ¨è§¦å‘ä¸­æ–­å¤„ç†ç¨‹åºæ—¶ï¼Œé¦–å…ˆä¼šå°†ä¹‹å‰ç”¨æˆ·æ€çš„æ ˆè¿›è¡Œä¿å­˜ï¼Œä¹Ÿå°±æ˜¯å°†SS,SPå‹æ ˆï¼Œæ¥ç€è·³è½¬forkçš„ä¸­æ–­å¤„ç†ç¨‹åºï¼Œä¹Ÿå°±æ˜¯<strong>system_callå‡½æ•°</strong>â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010528293.png" alt="image-20210619010528293"></p><p>åœ¨system_callä¸­ï¼Œé¦–å…ˆä¼šåšå¯„å­˜å™¨çš„å‹æ ˆï¼Œä¹Ÿå°±æ˜¯<strong>å‡†å¤‡åˆ‡æ¢</strong>ï¼Œç„¶åè·³è½¬sys_forkç³»ç»Ÿè°ƒç”¨<strong>å¼€å§‹åˆ‡æ¢</strong>ï¼Œåœ¨è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ä¸­ï¼Œé¦–å…ˆå°†å½“å‰çº¿ç¨‹çš„<strong>TCBç½®ç»™ex</strong>ï¼Œæ¥ç€åˆ¤æ–­exçš„çŠ¶æ€ï¼Œæœ¬è´¨ä¸Šæ˜¯åˆ¤æ–­<strong>TCB</strong>çš„state<strong>ï¼Œå¦‚æœ</strong>é0<strong>çš„è¯ï¼Œä¹Ÿå°±æ˜¯å¤„äº</strong>é˜»å¡çŠ¶æ€<strong>ã€‚å°±éœ€è¦æ‰§è¡Œscheduleä»¥å®Œæˆ</strong>åˆ‡æ¢<strong>ï¼Œæ­¤å¤–ï¼Œå½“</strong>æ—¶é—´ç‰‡ç”¨å®Œ**ä»¥åï¼Œä¹Ÿéœ€è¦è¿›è¡Œåˆ‡æ¢ã€‚</p><h3 id="ä¸­æ–­å‡ºå£"><a href="#ä¸­æ–­å‡ºå£" class="headerlink" title="ä¸­æ–­å‡ºå£"></a>ä¸­æ–­å‡ºå£</h3><p>å®Œæˆäº†åˆ‡æ¢ï¼Œé‚£æ€æ ·è¿”å›å‘¢ï¼Ÿé€šè¿‡<strong>ä¸­æ–­å‡ºå£</strong>ï¼Œé‚£ä¸­æ–­å‡ºå£åšäº†ä»€ä¹ˆå‘¢ï¼Ÿå¯¹åº”ä¸­æ–­å…¥å£ä¸€ç³»åˆ—çš„å…¥æ ˆï¼Œä¸­æ–­å‡ºå£ä¼šåšå¼¹æ ˆæ“ä½œã€‚</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010541971.png" alt="image-20210619010541971"></p><p>æˆ‘ä»¬æè¿°äº†ä¸­æ–­å…¥å£å’Œä¸­æ–­å‡ºå£ï¼Œé‚£åœ¨ä¸­æ–­çš„è¿‡ç¨‹ä¸­åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ</p><p>åœ¨ä¸­æ–­ä¸­é¦–å…ˆæ‰¾åˆ°è¦åˆ‡æ¢çš„çº¿ç¨‹ï¼Œå†<strong>åˆ‡æ¢</strong>åˆ°è¯¥çº¿ç¨‹ã€‚è¿™é‡Œé¢ä¼šæ¶‰åŠåˆ°çº¿ç¨‹çš„è°ƒåº¦ä¸åˆ‡æ¢ï¼Œçº¿ç¨‹çš„è°ƒåº¦æˆ‘ä»¬åé¢ä¼šæåŠï¼Œè¿™é‡Œæˆ‘ä»¬åªçœ‹çº¿ç¨‹çš„åˆ‡æ¢â€”â€”</p><h3 id="ä¸­æ–­è¿‡ç¨‹â€”â€”çº¿ç¨‹åˆ‡æ¢"><a href="#ä¸­æ–­è¿‡ç¨‹â€”â€”çº¿ç¨‹åˆ‡æ¢" class="headerlink" title="ä¸­æ–­è¿‡ç¨‹â€”â€”çº¿ç¨‹åˆ‡æ¢"></a>ä¸­æ–­è¿‡ç¨‹â€”â€”çº¿ç¨‹åˆ‡æ¢</h3><p>çº¿ç¨‹çš„åˆ‡æ¢æ˜¯é€šè¿‡<strong>switch_to</strong>æ¥å®Œæˆçš„ï¼Œåœ¨å‡½æ•°ä¸­ä¸»è¦é€šè¿‡<strong>é•¿è·³è½¬</strong>æ¥å®ç°çº¿ç¨‹è·³è½¬â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010558855.png" alt="image-20210619010558855"></p><p>é¦–å…ˆä½¿ç”¨<strong>movwæŒ‡ä»¤</strong>å°†CPUä¸­å¯„å­˜å™¨çš„å†…å®¹éƒ½å†™å…¥åˆ°åˆ°<strong>TSS</strong>ä¸­ï¼Œ<strong>TSS</strong>ä¹Ÿå°±æ˜¯<strong>ä»»åŠ¡ç»“æ„æ®µ</strong>ï¼Œå®ƒæ˜¯<strong>è¿›ç¨‹æ§åˆ¶å—PCB</strong>çš„ä¸€éƒ¨åˆ†ã€‚</p><p>é¦–å…ˆé€šè¿‡<strong>TRå¯„å­˜å™¨</strong>(<strong>ç±»CSå¯„å­˜å™¨</strong>)æ‰¾åˆ°ä½äº<strong>GDTè¡¨</strong>ä¸­çš„<strong>TSSæè¿°ç¬¦</strong>ï¼Œå³æŒ‡å‘TSSæ®µçš„æŒ‡é’ˆï¼Œæœ€ç»ˆé€šè¿‡TSSæè¿°ç¬¦å®šä½åˆ°TSSæ®µã€‚</p><p>è€Œ<strong>é•¿è·³è½¬</strong>åšçš„æ— éå°±æ˜¯é€šè¿‡TRå¯„å­˜å™¨æ‰¾åˆ°å¦ä¸€ä¸ªçº¿ç¨‹çš„TSSæè¿°ç¬¦ï¼Œé€šè¿‡TSSæè¿°ç¬¦æ‰¾åˆ°TSSæ®µï¼Œå¹¶å°†å¯„å­˜å™¨ä¸­çš„çš„å†…å®¹ä¹ŸåŠ è½½åˆ°TSSæ®µä¸­ã€‚</p><p>ä½†ä»¥TSSçš„æ–¹å¼å®ç°è·³è½¬çš„æ•ˆç‡æ˜¯ä½ä¸‹çš„ï¼Œå› ä¸ºTSSä¸­çš„<strong>é•¿è·³è½¬</strong>éœ€è¦å¯¹ä¸€ç³»åˆ—<strong>å¯„å­˜å™¨</strong>æ“ä½œã€‚ä¹‹åæˆ‘ä»¬å°†é‡‡ç”¨<strong>KIN stack</strong>çš„æ–¹å¼å®Œæˆåˆ‡æ¢ã€‚</p><blockquote><p>å‚è€ƒlinuxè¿›ç¨‹åˆ‡æ¢ä¸TSSç»“æ„<a href="https://blog.51cto.com/stonehorse/1113115" target="_blank" rel="noopener">https://blog.51cto.com/stonehorse/1113115</a></p></blockquote><hr><p>åœ¨ä¸Šä¸€å°èŠ‚çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†çº¿ç¨‹çš„åˆ‡æ¢ï¼Œæ¥ç€æˆ‘ä»¬å°†èŒƒå›´æ”¾å¤§ï¼Œæ¥ä¸€èµ·å­¦ä¹ çº¿ç¨‹åˆ›å»ºï¼Œå³<strong>ThreaCreateå‡½æ•°</strong></p><p>é¦–å…ˆä»<strong>sys_forkå‡½æ•°</strong>å¼€å§‹æˆ‘ä»¬çš„æ±‚çŸ¥ä¹‹æ—…â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010627862.png" alt="image-20210619010627862"></p><p>åœ¨<strong>sys_forkå‡½æ•°</strong>ä¸­ï¼Œé¦–å…ˆå°†<strong>ç”¨æˆ·æ€çŠ¶æ€å…¥æ ˆ</strong>ï¼Œä»¥ä¾¿å­è¿›ç¨‹è°ƒç”¨ï¼Œæ¥ç€åœ¨sys_forkå‡½æ•°ä¸­è°ƒç”¨<strong>copy_process</strong>ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°çš„å‚æ•°æœ‰ä¸€é•¿ä¸²ï¼Œç»†å¿ƒè§‚å¯Ÿçš„è¯ï¼Œä¼šå‘ç°éƒ½æ˜¯<strong>çˆ¶è¿›ç¨‹å‹å…¥æ ˆä¸­çš„å†…å®¹</strong>ï¼Œä¹Ÿå°±æ˜¯å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹æ˜¯<strong>å…±ç”¨</strong>ä¸€å¥—ç”¨æˆ·æ ˆçš„ã€‚</p><p>é‚£ä¹ˆå­è¿›ç¨‹åˆ›å»ºçš„ç»†èŠ‚æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010642915.png" alt="image-20210619010642915"></p><p>é¦–å…ˆ<strong>ç”³è¯·äº†ä¸€é¡µ</strong>çš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹å®ƒçš„æ¸Šæºï¼šå¼€æœºæ—¶<strong>memmap</strong>åˆå§‹åŒ–ï¼Œå°†å†…å­˜åˆ†ä»¥<strong>4k</strong>ä¸ºæœ€å°å•å…ƒçš„é¡µï¼Œéœ€è¦ç”³è¯·<strong>å†…æ ¸ç©ºé—´</strong>æ—¶ï¼Œåˆ™é€‰å–memmap<strong>ä¸ç­‰äº0çš„</strong>çš„ä¸€é¡µå†…å­˜ç©ºé—´å³å¯ã€‚</p><p>æ¥ç€<strong>åˆ›å»ºTCB,</strong>ä¹Ÿå°±æ˜¯ä»ç”³è¯·çš„å†…å­˜èµ·å§‹å¼€å§‹å¾€åä¸€é¡µçš„è¿™æ®µå†…å­˜ç©ºé—´ã€‚</p><p>ç„¶ååˆ›å»ºå†…æ ¸æ ˆå’Œç”¨æˆ·æ ˆï¼Œæœ€ç»ˆå°†<strong>TCBä¸æ ˆç›¸å…³è”</strong>ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€ç³»åˆ—çš„åˆå§‹åŒ–å³å¯ï¼Œè¿™é‡Œé¢å€¼å¾—å…³æ³¨çš„æ˜¯ipçš„åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯ä»æ ˆä¸­å–å‡ºä¸­æ–­åä¸‹ä¸€æ¡æŒ‡ä»¤çš„å†…å­˜åœ°å€ï¼Œå¦å¤–è¿˜éœ€è¦eaxåˆå§‹åŒ–ä¸º0ï¼Œé‚£ä¹ˆeaxæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ä¸€ä¸ªåˆ¤æ–­ï¼š<strong>if(!fork()){å­è¿›ç¨‹æ‰§è¡Œ}</strong>,è¿™é‡Œåˆ¤æ–­çš„æ¡ä»¶å³æ˜¯<strong>eaxçš„å€¼</strong>ï¼Œå¦‚æœeaxç­‰äº<strong>0</strong>ï¼Œ<strong>å­è¿›ç¨‹æ‰§è¡Œ</strong>ï¼Œåä¹‹ï¼Œçˆ¶è¿›ç¨‹æ‰§è¡Œã€‚</p><p>æ˜ç¡®äº†å­è¿›ç¨‹çš„æ‰§è¡Œæ¡ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹å­è¿›ç¨‹çš„å…·ä½“æ‰§è¡Œçš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯<strong>execç³»ç»Ÿè°ƒç”¨</strong>â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010701378.png" alt="image-20210619010701378"></p><p>æˆ‘ä»¬ä»çˆ¶è¿›ç¨‹çš„<strong>shell</strong>è¿›å…¥å­è¿›ç¨‹çš„æ‰§è¡Œï¼Œå½“å­è¿›ç¨‹æ‰§è¡Œå®Œåï¼Œéœ€è¦è¿”å›ï¼Œé‚£å®ƒä¼š<strong>è¿”å›åˆ°å“ªé‡Œ</strong>å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“åœ¨è·³è½¬æ‰§è¡Œçš„ç»“æŸï¼Œä¼šæ‰§è¡ŒæŒ‡ä»¤<strong>iret</strong>ï¼Œæ‰€ä»¥è¿”å›çš„åœ°å€å–å†³äºiretä¸­<strong>ret</strong>æŒ‡ä»¤å¼¹æ ˆçš„<strong>IPå¯„å­˜å™¨</strong>å†…å®¹ã€‚é‚£IPæŒ‡å‘å“ªé‡Œå‘¢ï¼Ÿ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010718802.png" alt="image-20210619010718802"></p><p>IPæŒ‡å‘çš„ä½ç½®ï¼Œæˆ–è€…è¯´IPå¯„å­˜å™¨ä¸­åœ°å€å–å†³äº<strong>struct_execç³»ç»Ÿè°ƒç”¨</strong>çš„å‚æ•°ã€‚åœ¨å®ƒçš„æ‰§è¡Œä¸­ï¼Œå°†exå¯„å­˜å™¨ä¸­çš„<strong>a.entry</strong>æ–¹æ³•çš„åœ°å€åŠ è½½åˆ°retä¸­ä½œä¸º<strong>IP</strong>çš„æŒ‡å‘åœ°å€ï¼Œa.entryæ˜¯<strong>å¯æ‰§è¡Œæ–‡ä»¶çš„å…¥å£åœ°å€</strong>ï¼Œå½“å®ƒè¿æ¥äº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œä¼šå°†æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå³ç£ç›˜ä¸­çš„å†…å®¹<strong>å†™å…¥åˆ°</strong>å†…å­˜æ‰§è¡Œï¼Œå­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼</p><h2 id="3-æ“ä½œç³»ç»Ÿçš„é‚£æ£µæ ‘"><a href="#3-æ“ä½œç³»ç»Ÿçš„é‚£æ£µæ ‘" class="headerlink" title="3.æ“ä½œç³»ç»Ÿçš„é‚£æ£µæ ‘"></a>3.æ“ä½œç³»ç»Ÿçš„é‚£æ£µæ ‘</h2><blockquote><p>ç³»ç»Ÿè°ƒç”¨å°±æ˜¯ä¸€ç§è½¯ä¸­æ–­å¤„ç†ç¨‹åº</p></blockquote><p>åœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸çœ‹å­¦ä¹ æ–°çš„å†…å®¹ï¼Œå› ä¸ºæ—§çš„å†…å®¹è¿˜ä¸€å›¢ä¹±éº»ã€‚æ‰€ä»¥æˆ‘ä»¬æœ‰å¿…è¦å°†ä¹‹å‰çš„çŸ¥è¯†ç‚¹<strong>è¿ç‚¹æˆçº¿</strong>ï¼Œè®©å®ƒä»<strong>èŒèŠ½</strong>å¼€å§‹ï¼Œéšæ—¶å…‰æµ¸æ·«ï¼Œæœ€ç»ˆé•¿æˆ<strong>å‚å¤©å¤§æ ‘</strong>ã€‚</p><p>å³ä¾¿æ“ä½œç³»ç»Ÿè¿™é¢—å¾ˆåºå¤§çš„å‚å¤©å¤§æ ‘ä¹Ÿæ˜¯è¦ä»ä¸€ä¸ªå¾ˆå°çš„ç«å…‰å‘æ•£çš„ã€‚å°±å¦‚åŒæå¿—å†›è€å¸ˆå‘Šè¯«æˆ‘ä»¬çš„ä¸€æ ·â€”â€”</p><blockquote><p>The mind is not a vessel that needs filling,but wood that needs ignitng</p><p>æˆ‘ä»¬çš„å¤§è„‘ä¸æ˜¯è£…æ»¡æ°´çš„å®¹å™¨ï¼Œè€Œåº”è¯¥æ˜¯ç‚¹ç‡ƒçš„ç«å…‰ã€‚</p></blockquote><p>æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥çš„å†…å®¹æˆ‘ä»¬å°†ä»ä¸€ä¸ªå¾ˆå°ï¼Œå¾ˆå…·ä½“ï¼Œå¾ˆæœ‰ä»·å€¼çš„IDEAå¼€å§‹â€”â€”</p><ul><li><input checked disabled type="checkbox"> æˆ‘ä»¬è¦åœ¨å±å¹•ä¸Šäº¤é”™å‡ºç°Aå’ŒB</li></ul><p>é¦–å…ˆå›é¡¾ä¸€ä¸‹çº¿ç¨‹åˆ‡æ¢çš„æ€è·¯â€”â€”</p><ul><li><input checked disabled type="checkbox"> <strong>è¿è½¬CPU</strong>-ã€‹<strong>CPUæ²¡æœ‰å¥½å¥½è¿è½¬</strong>-ã€‹<strong>è¦è®©CPUå¥½å¥½è¿è½¬ï¼Œé¦–å…ˆä»Aå‡½æ•°è·³åˆ°Bå‡½æ•°</strong>-ã€‹<strong>è·³è½¬æ—¶ä½¿ç”¨1ä¸ªæ ˆå’Œ1ä¸ªyeildå‘ç”Ÿæ··ä¹±</strong>-ã€‹<strong>è¯•ç€ä½¿ç”¨ä¸¤ä¸ªæ ˆå’Œä¸¤ä¸ªTCB</strong>-ã€‹<strong>è¿™æ ·å¯ä»¥è¿è½¬æ²¡é”™ï¼Œä½†åªèƒ½åœ¨ç”¨æˆ·æ€è¿è½¬æ˜¯ä¸åˆé€‚çš„</strong>-ã€‹<strong>å¼•å…¥ä¸¤å¥—æ ˆï¼Œå³å†…æ ¸æ ˆçš„åˆ‡æ¢</strong></li></ul><p>é¦–å…ˆä»<strong>ç”¨æˆ·ä»£ç </strong>å¼€å§‹â€”â€”</p><pre class=" language-c"><code class="language-c"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æˆ‘ä»¬å†å°†å…¶ç”¨<strong>æ±‡ç¼–</strong>æ¥è¡¨è¿°â€”â€”</p><pre class=" language-asm"><code class="language-asm">main(){    mov _NR_fork,%eax    int 0x80100: mov %eax,res    cmp1,res,0    jne 208200: printf("A")    jmp 200208: ...304: wait()}</code></pre><p>æ¥ç€å¤ç°æ‰§è¡Œ<strong>int 0x80</strong>åçš„ä»£ç â€”â€”</p><pre class=" language-ASM"><code class="language-ASM">main(){    mov _NR_fork,%eax    int 0x80100: mov %eax , res    cmp1 res,0}set_system_gate(0x80,&system_call);system_call:    call sys_call_table(,%eax,4)</code></pre><p>é¦–å…ˆå°†<strong>ç³»ç»Ÿè°ƒç”¨å·</strong>èµ‹ç»™<strong>_NR_fork</strong>ï¼Œè§¦å‘ä¸­æ–­<strong>0x80</strong>ï¼Œè¿›å…¥<strong>system_call</strong>ï¼Œåœ¨è¯¥ç³»ç»Ÿè°ƒç”¨ä¸­ï¼Œè·³è½¬<strong>system_call_table</strong>,å°†1èµ‹ç»™eax,ä¹Ÿå°±æ˜¯å½“å‰å†…æ ¸è¿›ç¨‹ä¸º<strong>çˆ¶è¿›ç¨‹</strong>ï¼Œåœ¨å…¶ä¸­è°ƒç”¨<strong>sys_fork</strong>â€”â€”</p><pre class=" language-ASM"><code class="language-ASM">sys_fork:    push1 ..    call copy_process    ret</code></pre><p>å¼€å§‹<strong>åˆ›å»ºå­è¿›ç¨‹</strong>ï¼Œå­è¿›ç¨‹çš„åˆ›å»ºä¹Ÿå°±æ˜¯å¯¹çˆ¶è¿›ç¨‹çš„å¤åˆ¶ï¼Œå³<strong>copy_process</strong>_</p><pre class=" language-C"><code class="language-C">copy_process(... ,long eip,..){    p = (PCB *)get_free_page();        p->tss.esp0 = p+4k;        p->tss.esp = esp;        p->tss.eax = 0;        p->tss.eip = eip;}</code></pre><p>å®Œæˆäº†<strong>PCBçš„åˆ›å»ºä¸åˆå§‹åŒ–</strong>ï¼Œä¹Ÿå°±æ˜¯å®Œæˆäº†å­è¿›ç¨‹çš„åˆ›å»ºï¼Œæ¥ç€<strong>ret</strong>è¿”å›åˆ°çˆ¶è¿›ç¨‹ï¼Œ<strong>iret</strong>è¿”å›ç”¨æˆ·æ€ã€‚</p><p>ç„¶åæ¥ç€è°ƒç”¨mainå‡½æ•°ï¼Œä¸æ–­çš„<strong>åˆ›å»ºçº¿ç¨‹</strong>ï¼Œæ¥ç€æ‰§è¡Œmainå‡½æ•°ï¼Œå°±åˆ°äº†<strong>wait()å‡½æ•°</strong>ï¼Œå®ƒçš„å…·ä½“å®ç°æ˜¯â€”â€”</p><pre class=" language-C"><code class="language-C">sys_waitpid(){    current -> state = TASK_INTERRUPTTIBLE;        schedule();}</code></pre><p>å°†å½“å‰çº¿ç¨‹çš„çŠ¶æ€ç½®ä¸º<strong>é˜»å¡</strong>ï¼Œå¼€å§‹åˆ‡æ¢â€”â€”</p><pre class=" language-C"><code class="language-C">shedule(){    if((*p)->state == TASK_RUNNING &&  (*p)->counter > c)            c = (*p) -> counter,next = i;           ...               switch_to(next);}</code></pre><p>å¦‚æœå½“å‰çŠ¶æ€ä¸ºè¿è¡Œæ€ï¼Œä½¿ç”¨<strong>è°ƒåº¦ç®—æ³•</strong>å¾—åˆ°<strong>è¦åˆ‡æ¢çš„çº¿ç¨‹</strong>ï¼Œè¿›å…¥åˆ‡æ¢â€”â€”</p><p>åˆ‡æ¢ä»¥åï¼Œå°±å¯ä»¥æ‰“å‡ºBäº†ï¼Œä½†æˆ‘ä»¬éœ€è¦çš„æ˜¯äº¤æ›¿æ‰§è¡Œï¼Œæ‰€ä»¥è¦ä»Bå†è¿›å…¥Aï¼Œä¹Ÿå°±æ˜¯è¦å®Œæˆåˆ‡æ¢ï¼Œè€Œåˆ‡æ¢æ˜¯åœ¨å†…æ ¸æ€å®Œæˆçš„ï¼Œè€Œç”¨æˆ·æ€éœ€è¦ä½¿ç”¨ä¸­æ–­æ‰èƒ½è¿›å…¥å†…æ ¸ï¼Œé‚£ä½¿ç”¨å“ªä¸ªä¸­æ–­å‘¢ï¼Ÿ</p><p><strong>æ—¶é’Ÿä¸­æ–­</strong>ï¼ï¼ï¼</p><pre class=" language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">sched_int</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">set_intr_gate</span><span class="token punctuation">(</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>timer_interrupt<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">void</span>  _time_interrupt<span class="token punctuation">:</span>    call do_time<span class="token keyword">void</span> <span class="token function">do_time</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">--</span>current <span class="token operator">-></span> counter <span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>             <span class="token keyword">return</span> <span class="token punctuation">;</span>        current <span class="token operator">-></span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span></code></pre><p>å°†<strong>ä¸­æ–­ç±»å‹ç </strong>èµ‹ç»™ç³»ç»Ÿè°ƒç”¨<strong>time_interrupt</strong>,åœ¨å…¶ä¸­è·³è½¬<strong>do_time</strong>,åœ¨do_timeä¸­åˆ¤æ–­å½“å‰çº¿ç¨‹çš„æ•°ç›®ï¼Œå¦‚æœ<strong>å¤§äº0</strong>ï¼Œ<strong>ä¸åˆ‡æ¢</strong>ï¼Œå¦åˆ™è°ƒç”¨scheduleåˆ‡æ¢çº¿ç¨‹ã€‚</p><p>æœ€ç»ˆåœ¨<strong>schdule</strong>ä¸­è°ƒç”¨<strong>switch_to</strong>ã€‚ä¸æ–­å¾ªç¯ï¼Œå®Œç»“~</p><h1 id="ä¸‰ã€-CPUè°ƒåº¦"><a href="#ä¸‰ã€-CPUè°ƒåº¦" class="headerlink" title="ä¸‰ã€ CPUè°ƒåº¦"></a>ä¸‰ã€ CPUè°ƒåº¦</h1><p>åœ¨ä¸Šé¢çš„æè¿°ä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹çš„åˆ‡æ¢å°±è¿™æ ·ä¸æ»‘åœ°å®Œæˆäº†ï¼Œä½†æˆ‘ä»¬æ€»å°†CPUè°ƒåº¦åˆ»æ„çš„å½“åšä¸€ä¸ªé»‘ç›’å­ï¼Œè¿™æ˜¯å› ä¸ºCPUè°ƒåº¦çš„ç¡®æ˜¯ä¸€ä¸ªå¾ˆæªå¿ƒçš„ä»»åŠ¡ï¼Œä½†äº†è§£å®ƒåˆèƒ½åŠ æ·±æˆ‘ä»¬å¯¹ç³»ç»Ÿè®¾è®¡è®¾è®¡çš„ç†è§£ï¼Œå› æ­¤ï¼Œè¿™èŠ‚å†…å®¹ï¼Œæˆ‘ä»¬å°±æ˜çŸ¥å±±æœ‰è™ï¼Œåå‘è™å±±è¡Œäº†â€”â€”</p><hr><h2 id="1-cpuè°ƒåº¦ç­–ç•¥"><a href="#1-cpuè°ƒåº¦ç­–ç•¥" class="headerlink" title="1.cpuè°ƒåº¦ç­–ç•¥"></a>1.cpuè°ƒåº¦ç­–ç•¥</h2><p>å½“ä¸€ä¸ªçº¿ç¨‹é˜»å¡åï¼Œå°±è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£åº”è¯¥åˆ‡æ¢åˆ°å“ªä¸€ä¸ªçº¿ç¨‹å‘¢ï¼Ÿç›´è§‚çš„è¯´ï¼Œæˆ‘ä»¬éœ€è¦<strong>å°½å¯èƒ½å¿«</strong>çš„å®Œæˆä»»åŠ¡ã€‚é‚£å¦‚ä½•è¡¡é‡ä»»åŠ¡æ‰§è¡Œçš„æ•ˆç‡å‘¢ï¼Ÿå°±è¿ä»»åŠ¡æœ¬èº«éƒ½æœ‰ä¸åŒçš„ç±»å‹ï¼Œæ¯”å¦‚<strong>I/Oå‹</strong>ï¼Œ<strong>CPUå‹</strong>ï¼ŒæŒ‰ç…§ä¸åŒçš„åˆ†ç±»è§’åº¦ï¼Œåˆæœ‰<strong>å‰å°å‹ä»»åŠ¡</strong>å’Œ<strong>åå°å‹</strong>ä»»åŠ¡ã€‚</p><p>æˆ‘ä»¬åªæ‰ä½å®ƒ<strong>å…³é”®</strong>çš„å‡ ä¸ªç‚¹æ¥è®¾è®¡ä¸€ä¸ªè°ƒåº¦ç®—æ³•â€”â€”</p><ol><li><strong>å‘¨è½¬æ—¶é—´çŸ­</strong>ï¼Œä»ä»»åŠ¡è¿›å…¥åˆ°ä»»åŠ¡ç»“æŸï¼Œä¹Ÿå°±æ˜¯å°½å¯èƒ½å¿«çš„å®Œæˆä»»åŠ¡ã€‚<strong>å‘¨è½¬æ—¶é—´=ç­‰å¾…æ—¶é—´+è¿è¡Œæ—¶é—´</strong>ã€‚</li><li><strong>å“åº”æ—¶é—´çŸ­</strong>ï¼Œå³ä»æ“ä½œåˆ°å“åº”çš„æ—¶é—´çŸ­</li><li><strong>ç³»ç»Ÿå†…è€—å°‘</strong>ï¼Œå³ç³»ç»Ÿååé‡å¤§ï¼Œæ‰§è¡Œä»»åŠ¡å¤š</li></ol><p>æˆ‘ä»¬æ¥çœ‹ç¬¦åˆæŸäº›ç‚¹çš„å…·ä½“çš„ç®—æ³•æ€æƒ³ï¼Œå¹¶ç”¨ä¸Šé¢çš„<strong>æŒ‡æ ‡</strong>æ¥è¡¡é‡å®ƒï¼š</p><h3 id="FCFS"><a href="#FCFS" class="headerlink" title="FCFS"></a>FCFS</h3><p>å…ˆæ¥å…ˆæœåŠ¡æ˜¯æœ€ç›´è§‚çš„è°ƒåº¦ç®—æ³•ï¼Œä½†ä¸€ä¸ªç³»ç»Ÿæ˜¯å¤æ‚çš„ï¼Œä»…è€ƒè™‘åˆ°å…¬å¹³åªä¼šäº‹å€åŠŸåŠã€‚</p><p>å‡è®¾æœ‰nä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡çš„å‘¨è½¬æ—¶é—´åˆ†åˆ«ä¸ºTiï¼Œåˆ™å®ƒçš„<strong>å¹³å‡å“åº”æ—¶é—´</strong>ä¸º<strong>ï¼šT1+T2+T3+Tn/n</strong>,å®ƒçš„ç¬¬<strong>nä¸ªä»»åŠ¡çš„å“åº”å‘¨è½¬</strong>ä¸º<strong>T1+T2+T3+â€¦+Tn</strong>ï¼Œå‡å¦‚è¯´T1çš„æ—¶é—´æ¯”å…¶ä»–æ—¶é—´çš„åŠ å’Œè¿˜è¦å¤§ï¼Œè¿™æ ·æ˜¾ç„¶å‘¨è½¬æ—¶é—´æœ‰å¯èƒ½å¾ˆé•¿ï¼Œéå¸¸<strong>ä¸åˆç†</strong>ã€‚</p><p>é‚£èƒ½å¦åœ¨FCFCè°ƒåº¦ç®—æ³•çš„å‰æä¸‹ï¼Œæ ¹æ®ä»»åŠ¡çš„é•¿çŸ­æ¥å†³å®šæ‰§è¡Œçš„é¡ºåºå‘¢ï¼Ÿé‚£æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹SJFâ€”â€”<strong>çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•</strong></p><h3 id="SJF"><a href="#SJF" class="headerlink" title="SJF"></a>SJF</h3><p>å‡è®¾æœ‰nä¸ªä»»åŠ¡ï¼ŒæŒ‰çŸ­ä½œä¸šä¼˜å…ˆçš„åŸåˆ™ï¼Œè°ƒåº¦çš„ç»“æœåˆ†åˆ«æ˜¯ï¼š<strong>P1,P2,P3â€¦Pn</strong>,åˆ™å®ƒæ€»çš„å‘¨è½¬æ—¶é—´ä¸º<strong>n<em>P1+(n-1)</em>p2+â€¦.</strong>ï¼Œè¿™æ ·å®ƒçš„å‘¨è½¬æ—¶é—´æ˜¾ç„¶å¾—åˆ°æ˜¾è‘—çš„é™ä½ã€‚</p><p>ä½†å‡å¦‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªå¾ˆé•¿çš„ä½œä¸šï¼Œä½†å®ƒåˆéå¸¸ç´§æ€¥ï¼Œæˆ‘æ˜¯ä¸æ˜¯åº”è¯¥é€‚å½“çš„æ ¹æ®ä¼˜å…ˆçº§æ¥è°ƒæ•´æ‰§è¡Œçš„é¡ºåºå‘¢ï¼Ÿè¿™å°±è¦è°ˆåŠRRâ€”â€”<strong>è½®è½¬æ—¶é—´ç‰‡è°ƒåº¦ç®—æ³•</strong>ã€‚</p><h3 id="RR"><a href="#RR" class="headerlink" title="RR"></a>RR</h3><p>æ—¶é—´ç‰‡è½®è½¬çš„æ€æƒ³æ˜¯å°†ä½œä¸šå†<strong>ç»†åˆ†</strong>ï¼Œç„¶åCPUä¸ºæ¯ä¸ªä½œä¸šåˆ†é…<strong>æ—¶é—´ç‰‡</strong>ï¼Œæ¥ç€æ¥<strong>äº¤é”™</strong>åœ°æ‰§è¡Œä»»åŠ¡çš„æœ€å°å•å…ƒã€‚</p><p>ä½†è¿™é‡ŒåŒæ ·é¢ä¸´é—®é¢˜ï¼Œå‡å¦‚<strong>æ—¶é—´ç‰‡å¤§</strong>çš„è¯ï¼Œ<strong>å“åº”æ—¶é—´é•¿</strong>ï¼›<strong>æ—¶é—´ç‰‡å°</strong>çš„è¯ï¼Œç³»ç»Ÿå†…è€—å¤§ï¼Œ<strong>ååé‡å°</strong></p><p>æˆ‘ä»¬å…ˆæ¥å¾®ç¬‘åœ°è¯´å¥fuck~</p><p>é‚£å‡å¦‚æˆ‘ä»¬å¯¹å‘¨è½¬æ—¶é—´å’Œå“åº”æ—¶é—´çš„éœ€æ±‚åŒæ—¶å­˜åœ¨ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è®¾ç½®<strong>ä¼˜å…ˆçº§</strong>ï¼åŒæ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦é¦–å…ˆéµå®ˆä¸€ä¸ªåŸåˆ™ï¼Œäººä»¬æ›´å…³å¿ƒè®¡ç®—æœºä¸äººçš„äº¤äº’æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯<strong>å‰å°ä»»åŠ¡æ‰§è¡Œå¿«</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæŒ‰<strong>RR</strong>çš„åŸåˆ™æ¥å®‰æ’<strong>å‰å°ä»»åŠ¡</strong>ï¼Œæ¥ç€æŒ‰ç…§<strong>SJF</strong>çš„åŸåˆ™æ¥å®‰æ’<strong>åå°ä»»åŠ¡</strong>ï¼Œè¿™ä¸¤ç±»ä»»åŠ¡ä¹‹é—´é€šè¿‡<strong>åŠ¨æ€çš„ä¼˜å…ˆçº§è®¾ç½®</strong>è¿›è¡Œäº’ç›¸åˆ‡æ¢ã€‚</p><p>è¦æ»¡è¶³ä¸Šä¸€å°èŠ‚çš„å¤æ‚æŒ‡æ ‡ï¼Œç»™æˆ‘ä»¬çš„ç›´è§‚æ„Ÿå—å°±æ˜¯ï¼Œè¿™ä¸ªå®ç°çš„ç®—æ³•ä¸€å®šç¹çè‡³æï¼Œä½†<strong>linux0.11ä¸­çš„schduleå‡½æ•°</strong>å´å¾ˆå¥½åœ°å¤„ç†äº†è¿™ä¸ªé—®é¢˜â€”â€”</p><h2 id="2-ä¸€ä¸ªå®é™…çš„scheduleå‡½æ•°"><a href="#2-ä¸€ä¸ªå®é™…çš„scheduleå‡½æ•°" class="headerlink" title="2.ä¸€ä¸ªå®é™…çš„scheduleå‡½æ•°"></a>2.ä¸€ä¸ªå®é™…çš„scheduleå‡½æ•°</h2><p>æˆ‘ä»¬åœ¨å¼€å§‹ä¹‹å‰ï¼Œé¦–å…ˆè¦æ˜ç¡®æ—¶é—´ç‰‡å’Œä¼˜å…ˆçº§æ˜¯æœ‰ä¸€å®šçš„å…³ç³»çš„ï¼Œæ—¶é—´ç‰‡å¤§çš„æœ¬èº«ä¸€å®šç¨‹åº¦ä¸Šä¼˜å…ˆçº§å°±é«˜ï¼Œèƒ½è§£å†³å¤æ‚é—®é¢˜çš„ç®—æ³•å³ä¾¿ä»£ç é‡å°‘ï¼Œä½†æ€æƒ³çš„æ·±åº¦å´ä¸ä¼šä½ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬è¨€å½’æ­£ä¼ ï¼Œæ¥çœ‹cheduleå‡½æ•°çš„å®ç°â€”â€”</p><pre class=" language-C"><code class="language-C">schele(void){    while(1){         int i = NR_TASKS;          int c= -1;         int next = 0;              p = &tasks[NR_TASKS];              while(i--){            if(*p -> state == TASK_RUNNING &&  *p -> counter > c){//åŠ å…¥å½“å‰ä½œä¸šçš„çŠ¶æ€ä¸ºå°±ç»ªæ€ä¸”ä¼˜å…ˆçº§å¤§                    c = *p -> counter;                        next = i;               }         }        if(c){            break;     //æ‰¾åˆ°æœ€å¤§çš„counter        }        for(p = &LAST_TASK;p > &FIRST_TASK; p--){    //é‡æ–°è®¾ç½®ä¼˜å…ˆçº§            (*p) -> counter = ((*p) -> counter >> 1) + *p ->priority;        }        switch_to(next);    }}</code></pre><p>åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œcounteræ˜¯å…³é”®ï¼Œå®ƒå…¼é¡¾äº†ä¼˜å…ˆçº§ä¸æ—¶é—´ç‰‡â€”â€”</p><pre class=" language-C"><code class="language-C">//æ—¶é—´ç‰‡void do_time(){    if(-- current -> counter >0)            return;    current -> counter = 0;    schedule();}</code></pre><p>å³<strong>æ—¶é—´ç‰‡ä¸º0</strong>æ—¶ï¼Œåˆ™<strong>åˆ‡æ¢æ—¶é—´ç‰‡</strong>ã€‚åœ¨è¿™é‡Œ<strong>counter</strong>æ»¡è¶³<strong>è½®è½¬è°ƒåº¦</strong>ï¼Œä¿è¯äº†<strong>å“åº”</strong>ã€‚</p><p>è€Œä¸‹é¢çš„ç¨‹åºä¸­ï¼Œcounteråˆä½“ç°äº†ä¼˜å…ˆçº§â€”â€”</p><pre class=" language-C"><code class="language-C">if(*p -> state == TASK_RUNNING &&  *p -> counter > c){//åŠ å…¥å½“å‰ä½œä¸šçš„çŠ¶æ€ä¸ºå°±ç»ªæ€ä¸”ä¼˜å…ˆçº§å¤§            c = *p -> counter;            next = i;     }for(p = &LAST_TASK;p > &FIRST_TASK; p--){    //é‡æ–°è®¾ç½®ä¼˜å…ˆçº§            (*p) -> counter = ((*p) -> counter >> 1) + *p ->priority; }</code></pre><p>è¿™é‡Œcounterä½“ç°çš„æ˜¯åŠ¨æ€çš„ä¼˜å…ˆçº§ï¼Œè¡¨ç°å‡ºæ¥çš„æ˜¯é˜»å¡åè¿›ç¨‹çš„ä¼˜å…ˆçº§ä¼šé«˜äºéé˜»å¡è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯ä¼˜å…ˆå‰å°è¿›ç¨‹ã€‚</p><p>ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œcounteræ˜¯å¦è¶…å‡ºä¼šå“åº”æ—¶é—´çš„ç•Œï¼Œæˆ‘ä»¬ä¸å¦¨æ¥å®šé‡åœ°çœ‹ä¸€ä¸‹â€”â€”</p><p>å‡è®¾è¿›ç¨‹nå¼€å§‹å“åº”æ—¶çš„æ—¶é—´ä¸ºp,è€Œè¿›ç¨‹nçš„å“åº”æ—¶é—´(<strong>æ—¶é—´ç‰‡</strong>)æ˜¯p+p/2,åŒæ ·å¯ä»¥ç±»æ¯”å¾—åˆ°ç¬¬<strong>æ— ç©·ä¸ª</strong>è¿›ç¨‹çš„å“åº”æ—¶é—´ä¸º<strong>p+p/2+p/4+â€¦+p/(2çš„æ— ç©·æ¬¡æ–¹) &lt; 2p</strong></p><h1 id="å››-ã€è¿›ç¨‹åŒæ­¥å’Œæ­»é”"><a href="#å››-ã€è¿›ç¨‹åŒæ­¥å’Œæ­»é”" class="headerlink" title="å››.ã€è¿›ç¨‹åŒæ­¥å’Œæ­»é”"></a>å››.ã€è¿›ç¨‹åŒæ­¥å’Œæ­»é”</h1><p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç« ä¸­å­¦ä¹ åˆ°äº†çº¿ç¨‹é—´çš„åˆ‡æ¢æ˜¯å¦‚ä½•å®Œæˆçš„ï¼Œè€Œ<strong>è¿›ç¨‹</strong>ç­‰äº<strong>èµ„æº</strong>+<strong>å¯æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—(çº¿ç¨‹),</strong>é‚£è¦å®Œæˆè¿›ç¨‹çš„åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹çš„<strong>å¹¶å‘æ‰§è¡Œ</strong>ï¼Œå²‚ä¸æ˜¯åªéœ€è¦çŸ¥é“<strong>èµ„æº</strong>æ˜¯å¦‚ä½•è¢«<strong>è°ƒåº¦</strong>çš„å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆèµ„æºå¦‚ä½•è¡¨ç¤ºï¼Œåˆå¦‚ä½•é‡åŒ–å‘¢ï¼Œåœ¨è°ƒåº¦èµ„æºçš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ€æ ·çš„é—®é¢˜ï¼Œåˆåº”è¯¥æ€æ ·è§£å†³å‘¢ï¼Ÿè¿™ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½å°†åœ¨ä¸‹é¢çš„å†…å®¹ä¸­æ‰¾åˆ°ç­”æ¡ˆâ€”â€”</p><hr><h2 id="1-è¿›ç¨‹åŒæ­¥ä¸ä¿¡å·é‡"><a href="#1-è¿›ç¨‹åŒæ­¥ä¸ä¿¡å·é‡" class="headerlink" title="1.è¿›ç¨‹åŒæ­¥ä¸ä¿¡å·é‡"></a>1.è¿›ç¨‹åŒæ­¥ä¸ä¿¡å·é‡</h2><p>æ‰€è°“è¿›ç¨‹çš„åˆä½œï¼Œå°±æ˜¯å¤šä¸ªè¿›ç¨‹æ¥å®ŒæˆåŒä¸€ä¸ªä»»åŠ¡ï¼Œä¹‹å‰æˆ‘ä»¬æµ…è°ˆè¿‡<strong>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…</strong>çš„å®ä¾‹ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹å®ƒè¿›è¡Œè¿›ä¸€æ­¥çš„å‰–æâ€”â€”</p><blockquote><p>å¯¹äºç”Ÿäº§è€…è€Œè¨€ï¼Œå®ƒç”Ÿäº§äº†ä¸€ä¸ªèµ„æºå¹¶æ”¾å…¥ç¼“å†²åŒºï¼Œå½“ç¼“å†²åŒºæ»¡çš„æ—¶å€™ï¼Œå°±ä¸å†ç”Ÿäº§ã€‚</p><p>åŒæ ·çš„ï¼Œå¯¹äºæ¶ˆè´¹è€…è€Œè¨€ï¼Œå®ƒæ¶ˆè´¹æ¥è‡ªç¼“å†²åŒºçš„èµ„æºï¼Œå½“ç¼“å†²åŒºç©ºçš„æ—¶å€™ï¼Œå®ƒå°±ä¸å†æ¶ˆè´¹ã€‚</p></blockquote><p>ä»è¿™ç§æœºåˆ¶ä¸­ï¼Œæˆ‘ä»¬çœ‹å‡ºï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªæ”¾ç½®èµ„æºçš„ç¼“å†²åŒºâ€”â€”</p><pre class=" language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> BUFFER_SIZE 10</span><span class="token comment" spellcheck="true">//å£°æ˜èµ„æºçš„ç»“æ„</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span> item<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ç¼“å†²åŒºçš„å¤§å°</span>item buffer<span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> in <span class="token operator">=</span> out <span class="token operator">=</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬æ¥çœ‹æœ€ç›´è§‚çš„ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…è¿›ç¨‹æ¨¡å‹</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//ç”Ÿäº§è€…</span><span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> BUFFER_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>    buffer<span class="token punctuation">[</span>in<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>    in <span class="token operator">=</span>  <span class="token punctuation">(</span>in <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> BUFFER_SIZE<span class="token punctuation">;</span>    counter<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//æ¶ˆè´¹è€…</span><span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    item <span class="token operator">=</span> buffer<span class="token punctuation">[</span>out<span class="token punctuation">]</span> <span class="token punctuation">;</span>    out<span class="token operator">=</span>  <span class="token punctuation">(</span>iout<span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> BUFFER_SIZE<span class="token punctuation">;</span>    counter<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨è¿™ä¸ªæœ€åŸºç¡€çš„æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬çš„ç¡®<strong>åšåˆ°</strong>äº†å»æ§åˆ¶ç”Ÿäº§è€…æ¶ˆè´¹è€…è¿è¡Œçš„<strong>æ—¶æœº</strong>ï¼Œä½†è¿›ç¨‹çš„è°ƒåº¦æ˜¯<strong>ä¸å¯é¢„æµ‹</strong>çš„ï¼Œæˆ‘ä»¬ä¸å¦¨å†æ‰©å……ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨<strong>ä¿¡å·counter</strong>æ§åˆ¶è¿›ç¨‹çš„<strong>ä¼‘çœ ä¸å”¤é†’</strong>ã€‚</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//ç”Ÿäº§è€…</span><span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> BUFFER_SIZE<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç¼“å†²åŒºå·²æ»¡ä»¥åï¼Œå°±è®©åˆ›å»ºå¥½çš„è¿›ç¨‹è¿›å…¥ä¼‘çœ é˜Ÿåˆ—</span>    <span class="token punctuation">}</span>    buffer<span class="token punctuation">[</span>in<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>    in <span class="token operator">=</span>  <span class="token punctuation">(</span>in <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> BUFFER_SIZE<span class="token punctuation">;</span>    counter<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>counter  <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å”¤é†’æ¶ˆè´¹è€…    </span>    <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//æ¶ˆè´¹è€…</span><span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç¼“å†²åŒºä¸ºç©ºçš„æ—¶å€™ï¼Œå°±è®©æ¶ˆè´¹è€…è¿›ç¨‹è¿›å‡ºå…¥ä¼‘çœ é˜Ÿåˆ—</span>    <span class="token punctuation">}</span>    item <span class="token operator">=</span> buffer<span class="token punctuation">[</span>out<span class="token punctuation">]</span> <span class="token punctuation">;</span>    out<span class="token operator">=</span>  <span class="token punctuation">(</span>iout<span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> BUFFER_SIZE<span class="token punctuation">;</span>    counter<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>counter  <span class="token operator">==</span> BUFFER_SIZE<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å”¤é†’ç”Ÿäº§è€…</span>    <span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><p>ä¸€ä¸ªç¬¬äºŒç‰ˆçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹å°±è¿™æ ·å½¢æˆçš„ï¼Œå®ƒæ— ç–‘æ›´å®Œå–„äº†ä¸€äº›ï¼Œä½†å› ä¸º<strong>counterä¿¡å·</strong>ç»ˆç©¶è¡¨ç¤ºçš„æ¯”è¾ƒ<strong>å®è§‚</strong>ï¼Œå¯¼è‡´åœ¨ç»†èŠ‚ä¸Šå‡ºé”™äº†â€”â€”</p><p>å‡è®¾ç¼“å†²åŒº<strong>å·²æ»¡</strong>ï¼Œè¿™æ—¶<strong>ç”Ÿäº§è€…è¿›ç¨‹P1</strong>è¿è¡Œï¼Œå¹¶è¿›å…¥<strong>ä¼‘çœ é˜Ÿåˆ—</strong>ï¼Œç´§æ¥ç€<strong>ç”Ÿäº§è€…è¿›ç¨‹P2</strong>è¿è¡Œï¼Œä¹Ÿè¿›å…¥ä¼‘çœ é˜Ÿåˆ—ï¼Œæ­¤æ—¶counterç­‰äº<strong>BUFFER_SIZE</strong>.ç„¶åæ¶ˆè´¹è€…è¿›ç¨‹è¿è¡Œä¸€æ¬¡ï¼Œ<strong>ç¼“å†²åŒºå†…å†…å®¹å‡1</strong>ï¼Œå”¤é†’ç”Ÿäº§è€…ï¼Œä½†åœ¨ç”Ÿäº§è€…æ‰§è¡Œä¹‹å‰ï¼Œåˆæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…è¿›ç¨‹è¿è¡Œï¼Œæ­¤æ—¶counterç­‰äº<strong>BUFFER_SIZE-2</strong>,åˆ™ç”Ÿäº§è€…è¿›ç¨‹<strong>P2ä¸ä¼šè¢«å”¤é†’</strong>ã€‚</p><p>å‡ºç°è¿™æ ·çš„é—®é¢˜æ— ç–‘æ˜¯å› ä¸º<strong>ä¿¡å·counter</strong>ä»…ä»…èƒ½è¡¨ç¤º<strong>ç¼“å†²åŒºä¸­ç©ºé—²çš„çŠ¶æ€</strong>ï¼Œè€Œæ— æ³•åˆ¤æ–­<strong>ä¼‘çœ é˜Ÿåˆ—</strong>ä¸­æœ‰å‡ ä¸ªè¿›ç¨‹ï¼Œæ¢å¥è¯è¯´ï¼Œäº‹æƒ…<strong>ä¸æ˜¯é0å³1</strong>çš„ï¼Œå¯èƒ½è¿™ä¸ª1è¡¨ç¤ºçš„è¿˜æœ‰1.0å’Œ1.00çš„åŒºåˆ†â€”â€”</p><p>å› è€Œæˆ‘ä»¬è¦ä½¿è¿™ä¸ªä¿¡å·å¯ä»¥è¡¨è¾¾ä¼‘çœ å’Œå”¤é†’ä¸¤ç§çŠ¶æ€ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªæ—¶å€™å·²ç»ä¸èƒ½ç§°ä¸ºä¿¡å·äº†ï¼Œä¸å¦‚å°±å«<strong>ä¿¡å·é‡</strong>ï¼Ÿ</p><h3 id="ä»ä¿¡å·åˆ°ä¿¡å·é‡"><a href="#ä»ä¿¡å·åˆ°ä¿¡å·é‡" class="headerlink" title="ä»ä¿¡å·åˆ°ä¿¡å·é‡"></a>ä»ä¿¡å·åˆ°ä¿¡å·é‡</h3><p>é€šè¿‡ä¿¡å·é‡æˆ‘ä»¬å¯ä»¥åˆ¤æ–­ä¼‘çœ æˆ–è€…å”¤é†’çš„çŠ¶æ€ã€‚</p><p>å§‘ä¸”å°†ä¿¡å·é‡è®°ä¸º<strong>sem</strong>ï¼Œå½“<strong>sem=0</strong>æ—¶ï¼Œè¡¨ç¤º<strong>æ— èµ„æºå¯ç”¨</strong>ï¼Œæ·¡ç„¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºè¿›ç¨‹è€Œè¨€ï¼Œæ‰€è°“çš„èµ„æºå°±æ˜¯<strong>ç©ºé—²çš„ç©ºé—´</strong>ï¼›å½“<strong>sem&lt;0</strong>æ—¶ï¼Œè¡¨ç¤º<strong>æœ‰è¿›ç¨‹åœ¨ç­‰å¾…èµ„æº</strong>ï¼Œå‡è®¾sem=-2ï¼Œè¡¨ç¤ºæœ‰ä¸¤ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…èµ„æºï¼›å½“<strong>sem&gt;0</strong>æ—¶ï¼Œè¡¨ç¤ºæœ‰<strong>å¤šå°‘ä¸ªç©ºé—²èµ„æº</strong>ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»™å‡ºä¿¡å·é‡çš„å®˜æ–¹å®šä¹‰ï¼š</p><blockquote><p>1965å¹´ï¼Œç”±è·å…°å­¦è€…Dijkstraæå‡ºçš„ä¿¡å·é‡ç”¨äº<code>è®°å½•</code>ï¼Œä¿¡å·ç”¨äºsleepå’Œwakeup.</p></blockquote><p>æˆ‘ä»¬å°†ä¿¡å·é‡å†å»ç»†åŒ–ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">struct</span> semphore<span class="token punctuation">{</span>    <span class="token keyword">int</span> value<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è®°å½•èµ„æºä¸ªæ•°</span>    PCB <span class="token operator">*</span> queue<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è®°å½•ç­‰å¾…è¿›ç¨‹çš„é˜Ÿåˆ—</span><span class="token punctuation">}</span></code></pre><p>æ­¤å¤–ï¼Œç”±ä¿¡å·é‡è¡ç”Ÿå‡ºäº†P,VåŸè¯­ã€‚<strong>P</strong>å¯ä»¥è®°åš<strong>test</strong>ï¼Œ<strong>V</strong>åˆ™ä¸º<strong>increament</strong></p><p>ä¸‹é¢ç»™å‡ºP,VåŸè¯­çš„å®ç°â€”â€”</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//påŸè¯­ï¼šæ²¡èµ„æºï¼Œé˜Ÿåˆ—ä¼‘çœ </span><span class="token function">P</span><span class="token punctuation">(</span>semaphore s<span class="token punctuation">)</span><span class="token punctuation">{</span>    s<span class="token punctuation">.</span>value<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">sleep</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//VåŸè¯­ï¼šæœ‰èµ„æºï¼Œå”¤é†’é˜Ÿåˆ—</span><span class="token function">V</span><span class="token punctuation">(</span>semaphore s<span class="token punctuation">)</span><span class="token punctuation">{</span>    s<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>value <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">wakeup</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å›è¿‡å¤´æ¥çœ‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é—®é¢˜äº†ï¼Œè¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> fd <span class="token operator">=</span> <span class="token function">open</span> <span class="token punctuation">(</span><span class="token string">'buffer.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å†™in</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å†™out</span>semaphore full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>semaphore empty <span class="token operator">=</span> BUFFER_SIZE<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜äº’æ–¥ä¿¡å·é‡ä¸º1,å³å¹¶å‘ä¿®æ”¹æ•°</span>semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token function">Producer</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ¤æ–­ç¼“å†²åŒºæ˜¯å¦å·²æ»¡</span>    <span class="token function">P</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//åˆ¤æ–­mutexæ˜¯å¦å°äº0,ä¹Ÿå°±æ˜¯åˆ¤æ–­è®¿é—®çš„å½“å‰èµ„æºæ˜¯å¦ä¸ºäº’æ–¥ä¿¡å·é‡</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mutex--</span>    <span class="token comment" spellcheck="true">//åœ¨è¿™é‡Œå†™å…¥inï¼Œå³å°†itemå†™åˆ°inçš„ä½ç½®</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mutex++</span>    <span class="token function">V</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//full++</span><span class="token punctuation">}</span><span class="token function">Consumer</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">P</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ¤æ–­ç¼“å†²åŒºä¸ºç©º</span>    <span class="token comment" spellcheck="true">//åˆ¤æ–­mutexæ˜¯å¦å°äº0,ä¹Ÿå°±æ˜¯åˆ¤æ–­è®¿é—®çš„å½“å‰èµ„æºæ˜¯å¦ä¸ºäº’æ–¥ä¿¡å·é‡</span>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mutex--</span>    <span class="token comment" spellcheck="true">//åœ¨è¿™é‡Œå†™å…¥ioutï¼Œå³ä»æ–‡ä»¶ä¸­çš„outä½ç½®è¯»å‡ºåˆ°itemä¸­</span>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mutex++</span>    <span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//empty++</span><span class="token punctuation">}</span></code></pre><p>é¡ºç•…å¦‚æ–¯ï¼Œç§’å•Š~</p><p>åˆ°è¿™é‡Œçš„ç¡®å·²ç»è¿ˆå‡ºäº†ä¸€å¤§æ­¥ï¼Œä½†ä»æœ‰äº›å°ç‘•ç–µï¼Œé‚£å°±æ˜¯ç”±äº<strong>è¿›ç¨‹è°ƒåº¦é¡ºåº</strong>ä¸ç¡®å®šï¼Œå¯¼è‡´<strong>ä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªä¿¡å·é‡</strong>çš„çŠ¶å†µâ€”â€”</p><h2 id="2-å¯¹ä¿¡å·é‡çš„ä¸´ç•ŒåŒº"><a href="#2-å¯¹ä¿¡å·é‡çš„ä¸´ç•ŒåŒº" class="headerlink" title="2.å¯¹ä¿¡å·é‡çš„ä¸´ç•ŒåŒº"></a>2.å¯¹ä¿¡å·é‡çš„ä¸´ç•ŒåŒº</h2><p>ä¸ºä»€ä¹ˆè¦ä¿æŠ¤ä¸´ç•ŒåŒºå‘¢ï¼Ÿä»€ä¹ˆæ˜¯ä¸´ç•ŒåŒºï¼Œä¸”å¬æˆ‘å¨“å¨“é“æ¥â€”â€”</p><p>å› ä¸ºä¸¤ä¸ªè¿›ç¨‹å¯¹åŒä¸€ä»½æ•°æ®å­˜åœ¨ç«äº‰å…³ç³»ï¼Œå› è€Œéœ€è¦å°†è¿™ä»½èµ„æºä½œä¸º<strong>ä¸´ç•ŒåŒº</strong>ã€‚è€Œè¿™é‡Œçš„<strong>ç«äº‰æ¡ä»¶</strong>æ˜¯<strong>æŒ‡å’Œè°ƒåº¦æœ‰å…³çš„å…±äº«è¯­ä¹‰é”™è¯¯</strong>ã€‚</p><ul><li><input checked disabled type="checkbox"> ä¸´ç•ŒåŒºï¼š <strong>ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥è¯¥è¿›ç¨‹çš„é‚£ä¸€æ®µä»£ç ï¼Œä¸´ç•ŒåŒºçš„åŸºæœ¬åŸåˆ™æ˜¯äº’æ–¥</strong>ï¼Œ</li></ul><p>ç„¶è€Œä»…ä»…å£°æ˜ä¸€æ®µä»£ç ä¸ºä¸´ç•ŒåŒºä»£ç æ˜¯ä¸å¤Ÿçš„ï¼Œä¸€æ®µå¥½çš„ä¸´ç•ŒåŒºä»£ç è¿˜åº”è¯¥æ˜¯<strong>æœ‰ç©ºè®©è¿›</strong>ä¸”<strong>æœ‰é™ç­‰å¾…</strong>ã€‚</p><p>é¦–å…ˆå¼€å§‹è¿›å…¥ä¸´ç•ŒåŒºçš„ç¬¬ä¸€ç§å°è¯•â€”â€”è½®æ¢æ³•ã€‚</p><h4 id="1-è½®æ¢æ³•"><a href="#1-è½®æ¢æ³•" class="headerlink" title="1.è½®æ¢æ³•"></a>1.è½®æ¢æ³•</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010827920.png" alt="image-20210619010827920"></p><p>é¦–å…ˆï¼Œè¿™ä¸ªä¸´ç•ŒåŒºçš„è®¾è®¡æ˜¯æ»¡è¶³äº’æ–¥çš„ï¼Œä½†å‡å¦‚åœ¨è°ƒç”¨è¿›ç¨‹P0ä»¥åï¼Œç»§ç»­è°ƒç”¨è¿›ç¨‹P0ï¼Œè¿™æ—¶å°±ä¸å†æ»¡è¶³æœ‰ç©ºå°±è¿›çš„åŸåˆ™äº†ï¼Œæ‰€ä»¥ä¸‹ä¸€ä½â€”â€”</p><h4 id="2-æ ‡è®°æ³•"><a href="#2-æ ‡è®°æ³•" class="headerlink" title="2.æ ‡è®°æ³•"></a>2.æ ‡è®°æ³•</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010842398.png" alt="image-20210619010842398"></p><p>CPUå¤§é‡æ—¶é—´é—²ç½®çš„é—®é¢˜çš„ç¡®å¾—åˆ°äº†è§£å†³ï¼Œä¸”æ»¡è¶³äº’æ–¥ï¼Œä½†å‡å¦‚æœ‰è¿™ä¹ˆä¸€ç§æƒ…æ™¯â€”â€”</p><p>ä¸¤ä¸ªæ ‡è®°éƒ½ä¸ºtrueï¼Œé‚£ä¹ˆä¸¤ä¸ªè¿›ç¨‹éƒ½ä¸å†æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç±»æ¯”ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼šå‡è®¾å†°ç®±é‡Œæ²¡æœ‰ç‰›å¥¶ï¼Œå¦»å­çœ‹åˆ°ä¸ˆå¤«å¤§çš„æ ‡è®°åï¼Œè®¤ä¸ºä¸ˆå¤«ä¼šä¹°ï¼Œè€Œä¸ˆå¤«çœ‹åˆ°å¦»å­ç•™ä¸‹çš„æ ‡è®°åï¼Œè®¤ä¸ºå¦»å­ä¼šä¹°ï¼Œè¿™æ ·æ²¡æœ‰çœŸçš„å»ä¹°äº†ç‰›å¥¶ã€‚</p><p>è¿™æ˜¯ä¸€ç§å¯¹ç§°æ³•<strong>ï¼Œè€Œåœ¨ç°å®ä¸­ï¼Œè¦æ‰“ç ´è¿™ç§æ²¡äººä¹°ç‰›å¥¶çš„çª˜å†µï¼Œå°±éœ€è¦ä¸€ä¸ªäºº</strong>ç›¸å¯¹å‹¤å¿«ä¸€äº›ã€‚</p><h4 id="3-petersonç®—æ³•"><a href="#3-petersonç®—æ³•" class="headerlink" title="3.petersonç®—æ³•"></a>3.petersonç®—æ³•</h4><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010856746.png" alt="image-20210619010856746"></p><p>è€Œ<strong>æ˜ å°„åˆ°è¿›ç¨‹åˆä½œ</strong>ï¼Œä¹Ÿåº”è¯¥å¦‚æ­¤ï¼Œåœ¨ä¸¤ä¸ªæ ‡è®°éƒ½ä¸ºtrueçš„æƒ…å†µä¸‹ï¼Œéœ€è¦æœ‰ä¸€ä¸ªè¿›ç¨‹å»æ‰§è¡Œï¼Œè€Œå¦ä¸€ä¸ªè¿›ç¨‹åˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œæˆ‘ä»¬æ¥çœ‹å…·ä½“çš„å®ç°â€”â€”<br><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010910974.png" alt="image-20210619010910974"></p><p>è¿™æ˜¯<strong>petersonç®—æ³•</strong>çš„æ€æƒ³ï¼Œå®ƒæ»¡è¶³äº†ä¸€ä¸ªå¥½ä¸´ç•ŒåŒºçš„å‡ ä¸ªæ¡ä»¶ï¼Œæ˜¯ç›®å‰æœ€å¥½çš„ä¸´ç•ŒåŒºå®ç°æ–¹å¼ï¼ï¼ï¼</p><p>ä¸¤ä¸ªè¿›ç¨‹ç«äº‰ä¸´ç•ŒåŒºçš„é—®é¢˜è§£å†³äº†ï¼Œé‚£ä¸€ä¸ªå¤šä¸ªè¿›ç¨‹å‘¢ï¼Œæ‰€è°“<strong>ä¸‡æ³•ä¸ç¦»å…¶å®—</strong>ï¼Œæˆ‘ä»¬æ¥å®é™…åœ°ä½“ä¼šä¸€ä¸‹</p><hr><h4 id="é¢åŒ…åº—ç®—æ³•"><a href="#é¢åŒ…åº—ç®—æ³•" class="headerlink" title="é¢åŒ…åº—ç®—æ³•"></a>é¢åŒ…åº—ç®—æ³•</h4><p>æˆ‘ä»¬åœ¨å¼€å§‹çš„æ—¶å€™å¼ºè°ƒè¿‡ï¼Œè¡¡é‡ä¸´ç•ŒåŒºç®—æ³•çš„æ ‡å‡†æ˜¯<strong>äº’æ–¥è¿›å…¥</strong>ï¼Œ<strong>æœ‰ç©ºè®©è¿›</strong>ï¼Œ<strong>æœ‰é™ç­‰å¾…</strong>ã€‚è€Œæ­£åœ¨ä¹‹å‰çš„ç¯‡å¹…ä¸­ï¼Œæˆ‘ä»¬ä¹ŸéªŒè¯äº†è¦åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œéœ€è¦ç»“åˆ<strong>è½®æ¢</strong>å’Œ<strong>æ ‡è®°</strong>çš„æ€æƒ³ï¼Œé‚£åœ¨å¤šä¸ªè¿›ç¨‹ä¸­å¦‚ä½•ä½“ç°å‘¢ï¼Ÿ</p><ul><li><input checked disabled type="checkbox"> <p>è½®è½¬ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªåºå·</p></li><li><input checked disabled type="checkbox"> <p>æ ‡è®° ï¼šè¿›ç¨‹ä¸­åºå·æœ€å°çš„è¿›å…¥</p></li></ul><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010925494.png" alt="image-20210619010925494"></p><p>é¦–å…ˆ<strong>é€‰ä¸­</strong>ç¬¬iä¸ªè¿›ç¨‹ï¼Œå³å°†å®ƒ<strong>æ ‡è®°</strong>ã€‚å¹¶å°†<strong>å½“å‰è¿›ç¨‹åºå·æœ€å°</strong>çš„åºå·èµ‹ç»™æ•°ç»„<strong>numçš„ç¬¬iä¸ªå…ƒç´ </strong>ã€‚</p><p>æ¥ç€å†å–æ¶ˆå½“å‰çš„æ ‡è®°ï¼Œå³åšæ ‡è®°åªæ˜¯ä¸ºäº†å–å‡ºå½“å‰æœ€å°çš„åºå·ã€‚ç„¶å<strong>éå†åºå·</strong>ï¼Œå‡å¦‚æœ‰è¢«é€‰ä¸­çš„å…¶ä»–è¿›ç¨‹ï¼Œä¸”è¯¥è¿›ç¨‹çš„åºå·æ¯”å½“å‰è¿›ç¨‹å°ï¼Œåˆ™ç­‰å¾…å®ƒæ‰§è¡Œå®Œï¼Œå¦åˆ™æ‰§è¡Œå½“å‰è¿›ç¨‹ã€‚è¿›ç¨‹ç»“æŸåï¼Œå°†æ•°ç»„numçš„ç¬¬iä¸ªå…ƒç´ ç½®0.å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</p><p>å¤šä¸ªè¿›ç¨‹åŒæ­¥çš„é—®é¢˜çš„ç¡®å¯ä»¥é€šè¿‡é¢åŒ…åº—ç®—æ³•å¾—åˆ°è§£å†³ï¼Œä½†è¿™ä¹ˆç¹ççš„ç®—æ³•çœ‹ç€å°±å¤´ç–¼ï¼Œè€Œä¸”å›é¡¾ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿä¸´ç•ŒåŒºï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸º<strong>ä¸å¯æ§çš„è°ƒåº¦</strong>å¯¼è‡´çš„ï¼Œè€Œè°ƒåº¦æ˜¯è¦è¿›å…¥<strong>å†…æ ¸</strong>çš„ï¼Œä¸”è¿›å…¥å†…æ ¸çš„æ–¹å¼æ˜¯<strong>ä¸­æ–­</strong>ï¼Œé‚£æˆ‘ä»¬åªè®©ä¸€ä¸ªè¿›ç¨‹è§¦å‘ä¸­æ–­ä¸å°±å¯ä»¥ä¿æŠ¤ä¸´ç•ŒåŒºäº†å—ï¼Ÿé‚£ä¹ˆè¿™æ ·å¯è¡Œå—ï¼Ÿ</p><p>è¿™å°±è¦è°ˆåˆ°è½¯ç¡¬ä»¶ååŒå¼€å‘ä¸­çš„<strong>ç¡¬ä»¶</strong>äº†â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010938594.png" alt="image-20210619010938594"></p><p>è¿™é‡Œä½¿ç”¨<strong>cli()</strong>å°†<strong>ä¸­æ–­çš„å¯„å­˜å™¨INTR</strong>ç½®<strong>1</strong>ï¼Œè€Œåœ¨æ‰§è¡Œå®Œä¸´ç•ŒåŒºä»£ç ä»¥åï¼Œå†å°†å…¶<strong>ç½®0</strong>ï¼Œå°±å¯ä»¥å®ç°åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹è®¿é—®ä¸´ç•ŒåŒºäº†ã€‚è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒåœ¨äºä¸­æ–­å¯„å­˜å™¨ï¼Œä½†å‡å¦‚æ˜¯<strong>å¤šæ ¸CPU</strong>ï¼Œé‚£æ¯ä¸ªCPUä¸­éƒ½æœ‰è¿™æ ·ä¸€ä¸ªå¯„å­˜å™¨ï¼Œæ”¹å˜ä¸€ä¸ªCPUçš„ä¸­æ–­å¯„å­˜å™¨å¯¹åˆ«çš„CPUæ˜¯æ²¡æœ‰å½±å“çš„ï¼Œå¯è§è¿™ä¸ªæ–¹æ³•æ˜¯æœ‰<strong>å±€é™æ€§</strong>çš„ã€‚</p><p>é‚£è¦æ€ä¹ˆåŠå‘¢ï¼Ÿæ˜¾ç„¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€çš„ä¿¡å·é‡æ¥æ ‡è®°å½“å‰ä¸´ç•ŒåŒºçš„çŠ¶æ€ã€‚è¿™é‡Œæˆ‘ä»¬å°è¯•<strong>ç¡¬ä»¶åŸå­æŒ‡ä»¤æ³•</strong></p><pre class=" language-c"><code class="language-c">boolean     <span class="token comment" spellcheck="true">//è¿™æ˜¯ä¸€æ®µåŸå­ä»£ç ï¼Œå³ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸å›åˆ‡å‡º</span>    <span class="token function">TestAndSet</span><span class="token punctuation">(</span>boolean <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//1.å‡å¦‚xä¸ºtrueï¼Œåˆ™æ‰§è¡Œå®Œ   2.å‡å¦‚ä¸ºfalse,å°†xç½®ä¸ºtrueå¹¶å°†falseè¿”å›</span>        booean rv <span class="token operator">=</span> x<span class="token punctuation">;</span>        x <span class="token operator">=</span> true <span class="token punctuation">;</span>        <span class="token keyword">return</span> rv <span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">TestAndSet</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸´ç•ŒåŒº</span>lock <span class="token operator">=</span> false<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å‰©ä½™åŒº</span></code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡å¦‚<strong>ä¿¡å·é‡æ˜¯ä¸Šé”</strong>çš„çš„ï¼Œåˆ™è¿›å…¥å¹¶æ‰§è¡Œå®Œï¼Œ<strong>æ‰§è¡Œå®Œåå¼€é”</strong>ï¼›è€Œå‡å¦‚è¿›å»ä¹‹åå‘ç°<strong>é”æ˜¯å¼€ç€</strong>çš„ï¼Œåˆ™<strong>é©¬ä¸Šä¸Šé”</strong>ï¼Œå¹¶è¿”å›ç­‰å¾…ä¸‹æ¬¡æ‰§è¡Œã€‚è¿™ç§æ–¹å¼å¯¹äºå¤šCPUåŒæ ·æ˜¯å¯è¡Œçš„ã€‚</p><h2 id="3-ä¸´ç•ŒåŒºçš„ä»£ç å®ç°"><a href="#3-ä¸´ç•ŒåŒºçš„ä»£ç å®ç°" class="headerlink" title="3.ä¸´ç•ŒåŒºçš„ä»£ç å®ç°"></a>3.ä¸´ç•ŒåŒºçš„ä»£ç å®ç°</h2><p>åœ¨ä¹‹å‰æˆ‘ä»¬å®Œæˆäº†ä¿¡å·é‡çš„å¼•å‡ºï¼Œä¸´ç•ŒåŒºçš„ä¿æŠ¤ï¼Œæ¥ä¸‹æ¥æ¥çœ‹å¦‚ä½•ä½¿ç”¨ä»£ç å®ç°ä¸´ç•ŒåŒºã€‚è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´å…¥ä¸»é¢˜â€”â€”</p><pre class=" language-c"><code class="language-c">sem<span class="token punctuation">.</span>c <span class="token comment" spellcheck="true">//è¿›å…¥å†…æ ¸</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//å£°æ˜ä¿¡å·é‡çš„ç»“æ„ä½“</span>    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> value<span class="token punctuation">;</span>    task_struct <span class="token operator">*</span> queue<span class="token punctuation">;</span><span class="token punctuation">}</span>semable<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">//ç”¨æˆ·æ€çš„ç¨‹åº</span> producer<span class="token punctuation">.</span>c <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">//ä»ä¿¡å·é‡ç»“æ„ä½“ä¸­è¯»å–emptyçš„ä¸‹æ ‡</span>     sd <span class="token operator">=</span> <span class="token function">sem_open</span><span class="token punctuation">(</span><span class="token string">"empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span>ï¼ˆ<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span>ï¼‰<span class="token punctuation">{</span>           <span class="token comment" spellcheck="true">//è®¾ç½®é˜»å¡çŠ¶æ€ï¼Œåˆ‡æ¢è¿›ç¨‹</span>           <span class="token function">sem_wait</span><span class="token punctuation">(</span>sd<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment" spellcheck="true">//åœ¨æ–‡ä»¶fdä¸­å†™å…¥4ä¸ªå­—èŠ‚çš„æ•°æ®</span>           <span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//åœ¨semableä¸­å¯»æ‰¾nameå¯¹åº”çš„ï¼Œæ²¡æ‰¾åˆ°åˆ™åˆ›å»ºï¼Œæ‰¾åˆ°åˆ™è¿”å›ä¸‹æ ‡</span><span class="token function">sys_sem_open</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sys_sem_wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> sd<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ä¸­æ–­ä¿æŠ¤</span>    <span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>semtable<span class="token punctuation">[</span>sd<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token operator">--</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//è¿™é‡Œè®¾ç½®è‡ªå·±ä¸ºé˜»å¡ï¼Œå°†è‡ªå·±åŠ å…¥åˆ°é˜Ÿåˆ—semtable.[sd].queueä¸­å» </span>            <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>          <span class="token function">sti</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å¤æ‚çš„æ€æƒ³æœ€ç»ˆä¹Ÿä¸è¿‡å‡ç»“ä¸ºè¿™å‡ å¥å®è§‚çš„ä»£ç ï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿè¦ä¸å¿˜åˆå¿ƒï¼Œå»æ¢å¯»é‚£<strong>å†°å±±ä¸‹çš„ç™¾åˆ†ä¹‹ä¹å</strong>ã€‚</p><p>è¿™æ ·æ€æƒ³çš„åº”ç”¨åœ¨linux0.11ä¸­æ›´æ˜¯è¢«å¹¿æ³›çš„åº”ç”¨ï¼Œè®©æˆ‘ä»¬æ¥ä»é‚£é‡Œå­¦ç‚¹æ€æƒ³å§â€”â€”</p><pre class=" language-c"><code class="language-c"><span class="token comment" spellcheck="true">//è¯»ç£ç›˜å—</span><span class="token function">bread</span><span class="token punctuation">(</span><span class="token keyword">int</span> dev<span class="token punctuation">,</span><span class="token keyword">int</span> block<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">struct</span> buffer_head <span class="token operator">*</span>bh<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å¼€å§‹ç£ç›˜è¯»åç¡çœ ï¼Œåˆ‡æ¢è¿›ç¨‹ï¼Œå†ç”±ç£ç›˜ä¸­æ–­å°†å…¶å”¤é†’ï¼Œå³åŒæ­¥</span>    <span class="token function">ll_rw_block</span><span class="token punctuation">(</span>READ<span class="token punctuation">,</span>bh<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">wait_on_buffer</span><span class="token punctuation">(</span>bh<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//é”ä½ä¸´ç•ŒåŒº</span><span class="token function">lock_buffer</span> <span class="token punctuation">(</span>buffer_head <span class="token operator">*</span>bh<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//while?ä¸ºä»€ä¹ˆä¸ç”¨if</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>bh <span class="token operator">-></span> b_lock<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//è¿›å…¥åï¼Œä¸ç®¡ä¹‹å‰æ˜¯å¦ä¸Šé”ï¼Œä¹‹åéƒ½è¦ä¸Šé”</span>        <span class="token function">sleep_on</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>bh_wait<span class="token punctuation">)</span><span class="token punctuation">;</span>        bh <span class="token operator">-></span> b_lock <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">sti</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">sleep_on</span><span class="token punctuation">(</span><span class="token keyword">struct</span> task_struct<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">//åŠ å…¥é˜Ÿåˆ—ï¼Œå·ç§°ä¸–ç•Œä¸Šæœ€éšè”½çš„é˜Ÿåˆ—ï¼Ÿ</span>    <span class="token keyword">struct</span> task_struct <span class="token operator">*</span>tmp<span class="token punctuation">;</span>        tmp <span class="token operator">=</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>        <span class="token operator">*</span>p <span class="token operator">=</span> current<span class="token punctuation">;</span>        current <span class="token operator">-></span> state <span class="token operator">=</span> TASK_UNINTERUPTIBLE<span class="token punctuation">;</span>        <span class="token function">schdule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">{</span>        tmp <span class="token operator">-></span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æˆ‘ä»¬æ¥æŒ‘æˆ˜ä¸€ä¸‹ä¸–ç•Œä¸Šæœ€<strong>éšè”½çš„é˜Ÿåˆ—</strong>â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619010955043.png" alt="image-20210619010955043"></p><p>å°†tmpæŒ‡å‘task_struct,å†å°†pæŒ‡å‘å½“å‰çš„task_structï¼Œ<strong>å½“å‰çš„å³æ˜¯é˜Ÿåˆ—çš„é˜Ÿé¦–</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å°†tmpæŒ‡å‘é˜Ÿé¦–çš„ä¸‹ä¸€ä¸ªï¼ŒpæŒ‡å‘é˜Ÿé¦–ã€‚åˆè¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯å­˜å‚¨åœ¨è¿™ä¸ªè¿›ç¨‹çš„å†…æ ¸æ ˆä¸­çš„ï¼Œå› æ­¤<strong>ä¸‹ä¸€æ¬¡</strong>å¯ä»<strong>ä¸‹ä¸€ä¸ªè¿›ç¨‹</strong>task_structçš„å†…æ ¸æ ˆä¸­å–å‡º<strong>tmp</strong>æŒ‡å‘<strong>ä¸Šä¸€ä¸ªè¿›ç¨‹</strong>ï¼Œå†å°†<strong>æŒ‡é’ˆp</strong>æŒ‡å‘<strong>å½“å‰è¿›ç¨‹</strong>ã€‚</p><p>è¿™æ ·å°±å¯ä»¥å›ç­”ä½¿ç”¨<strong>while</strong>ï¼Œæ˜¯å°†<strong>æ‰€æœ‰çš„è¿›ç¨‹çŠ¶æ€</strong>éƒ½åˆ¤æ–­äº†ä¸€æ¬¡ï¼Œä»è€Œæ‰¾å‡ºé‚£ä¸ª<strong>ä¼˜å…ˆçº§é«˜çš„</strong>ï¼Œè®©ä»–æ¥æ‰§è¡Œã€‚</p><p>è¿™é‡Œçš„pæ˜¯æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºpæŒ‡å‘çš„æ˜¯ä¸€ä¸ª<strong>å†…å­˜ç©ºé—´çš„èµ·å§‹åœ°å€</strong>ï¼Œåˆ™ä¸‰çº§æŒ‡é’ˆï¼Œnçº§æŒ‡é’ˆåŒæ ·â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619011007670.png" alt="image-20210619011007670"></p><p>ä¸Šé¢çš„å†…å®¹åœ¨åˆ‡æ¢è¿›ç¨‹æ—¶ï¼Œä¼šå°†å½“å‰è¿›ç¨‹åŠ å…¥é˜»å¡é˜Ÿåˆ—ï¼Œé‚£å¦‚ä½•å”¤é†’å‘¢ï¼Ÿ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619011019527.png" alt="image-20210619011019527"></p><p>é€šè¿‡<strong>ç£ç›˜ä¸­æ–­</strong>è°ƒç”¨<strong>å¯¹ä¸´ç•ŒåŒºå¼€é”çš„å‡½æ•°</strong>ï¼Œå¹¶åœ¨å…¶ä¸­è°ƒç”¨<strong>wake_upå‡½æ•°</strong>ï¼Œåœ¨å…¶ä¸­æ”¹å˜äº†<strong>å½“å‰è¿›ç¨‹çš„çŠ¶æ€</strong>ï¼Œç„¶åä½¿ç”¨<strong>iretè¿”å›ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</strong>ã€‚</p><hr><h2 id="4-æ­»é”å¤„ç†"><a href="#4-æ­»é”å¤„ç†" class="headerlink" title="4.æ­»é”å¤„ç†"></a>4.æ­»é”å¤„ç†</h2><p>æˆ‘ä»¬ä¾ç„¶ä»¥ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ä½œä¸ºä¾‹å­ï¼Œæˆ‘ä»¬çŸ¥é“ä¸ç®¡åœ¨ç”Ÿäº§è€…æŠ‘æˆ–æ¶ˆè´¹è€…å‡½æ•°ï¼Œé¦–å…ˆéƒ½æ˜¯è¦åˆ¤æ–­ç¼“å†²åŒºæ˜¯å¦å·²æ»¡æˆ–è€…ç¼“å†²åŒºä¸ºç©ºï¼Œé‚£å‡å¦‚å°†åˆ¤æ–­ä¸ä¹‹åçš„ä»£ç è°ƒæ¢ä½ç½®ï¼Œä¼šå¯¼è‡´æ€æ ·çš„ç»“æœå‘¢ï¼Ÿ</p><p>è¿™æ ·çš„è¯ä¼šå¯¼è‡´<strong>æ­»é”</strong>ï¼Œé€šä¿—çš„è¯´ï¼Œä¹Ÿå°±æ˜¯<strong>å¤šä¸ªè¿›ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹æŒæœ‰çš„èµ„æºï¼Œè€Œé€ æˆè°ä¹Ÿæ— æ³•æ‰§è¡Œçš„ç°è±¡</strong></p><p><strong>æœ¬è´¨ä¸Š</strong>è¯´ï¼Œæ­»é”çš„æˆå› æ˜¯å› ä¸ºè‡ªå·±å æœ‰çš„èµ„æºå’Œç”³è¯·çš„èµ„æºé€ æˆ<strong>ç¯è·¯ç­‰å¾…</strong>ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹æ­»é”çš„å¿…è¦æ¡ä»¶â€”â€”</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619011032749.png" alt="image-20210619011032749"></p><p>é‚£æ€æ ·å¤„ç†æ­»é”å‘¢ï¼Ÿ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619011048485.png" alt="image-20210619011048485"></p><p>é‚£é’ˆå¯¹æ¯ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å…·ä½“åœ¨è¿›ç¨‹åŒæ­¥ä¸­å¦‚ä½•åšå‘¢ï¼Ÿ</p><ol><li><p><code>æ­»é”é¢„é˜²</code> ï¼š<strong>ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰éœ€è¦èµ„æº</strong>ï¼Œè¿™æ ·å°±ä¸éœ€è¦å› ä¸ºèµ„æºå†²çªè€Œé€ æˆç¯è·¯ç­‰å¾…ï¼Œä½†æ•ˆç‡å¤ªä½ï¼Œæ²¡æœ‰ä½¿ç”¨çš„ä»·å€¼ï¼›å¦å¤–ä¸€ç§ç›´è§‚çš„æƒ³æ³•å°±æ˜¯<strong>èµ„æºç”³è¯·æŒ‰éœ€è¿›è¡Œ</strong>ï¼Œä¸ä¼šé€ æˆæ­»é”æ²¡é”™ï¼Œä½†èµ„æºæµªè´¹æ¯”è¾ƒä¸¥é‡ï¼Œæœæ–­å¼ƒå‘ã€‚</p></li><li><p><code>æ­»é”é¿å…</code>ï¼š æ­»é”é¿å…çš„æ€æƒ³è¢«<strong>é“¶è¡Œå®¶ç®—æ³•</strong>â€œå®Œç¾â€åœ°å®ç°äº†â€”â€”</p><p>å‡è®¾ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹å­˜åœ¨ä¸€<strong>ä¸ªå¯ä»¥å®Œæˆçš„æ‰§è¡Œåºåˆ—</strong>ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äº<strong>å®‰å…¨çŠ¶æ€</strong>ï¼Œè€Œé“¶è¡Œå®¶ç®—æ³•å°±æ˜¯ç”¨æ¥æ‰¾å‡ºè¿™ä¸ªå®‰å…¨åºåˆ—çš„ã€‚</p><p>å¯¹äºä¸€ä¸ªè¿›ç¨‹æ¥è¯´ï¼Œå®ƒä¸èµ„æºé—´çš„å…³ç³»åˆ†ä¸º<strong>ç›®å‰å æœ‰çš„èµ„æº</strong>ï¼Œ<strong>è¿˜éœ€è¦çš„èµ„æº</strong>ï¼Œ<strong>å¯ä¾›åˆ†é…çš„èµ„æº</strong>ä¸‰ç§ã€‚</p><p>æ¥çœ‹å…·ä½“çš„å®ç°â€”â€”</p><pre class=" language-c"><code class="language-c"><span class="token keyword">int</span> Available<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ¯ç§èµ„æºå‰©ä½™çš„æ•°é‡</span><span class="token keyword">int</span> Allocation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å·²åˆ†é…çš„èµ„æºæ•°é‡</span><span class="token keyword">int</span> Need<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¿›ç¨‹è¿˜éœ€è¦çš„å„ç§èµ„æºæ•°é‡</span><span class="token keyword">int</span> work<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å·¥ä½œå‘é‡</span>bool Finish <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¿›ç¨‹æ˜¯å¦ç»“æŸ</span>work <span class="token operator">=</span> Available<span class="token punctuation">;</span>Finish<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> false<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>Finish<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>false<span class="token operator">&amp;&amp;</span> Need<span class="token punctuation">[</span>i<span class="token punctuation">]</span>â‰¤Work<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Work <span class="token operator">=</span> Work <span class="token operator">+</span> Allocation<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            Finish<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> true<span class="token punctuation">;</span>             <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span>         <span class="token punctuation">{</span>            <span class="token keyword">goto</span> end<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>End<span class="token punctuation">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>Finish<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>false<span class="token punctuation">)</span>         <span class="token keyword">return</span> â€œdeadlockâ€<span class="token punctuation">;</span><span class="token function">T</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">O</span><span class="token punctuation">(</span>mn2<span class="token punctuation">)</span></code></pre><p>é“¶è¡Œå®¶ç®—æ³•çš„å®ç°ç›¸å¯¹é€šä¿—æ˜“æ‡‚ä¸€äº›ï¼Œä½†åŒæ—¶å¸¦æ¥äº†<strong>æ—¶é—´å¤æ‚åº¦é«˜</strong>çš„é—®é¢˜ï¼Œè€Œæ—¶é—´å¤æ‚åº¦é«˜çš„åŸå› åœ¨äºå®ƒä¼šäº‹æ— å·¨ç»†çš„åˆ¤æ–­æ¯ä¸€ä¸ªï¼Œä½†å‡ºç°æ­»é”çš„æ¦‚ç‡æ¯•ç«Ÿæ¯”è¾ƒä½ï¼Œæ‰€ä»¥åˆ¤æ–­æ‰€æœ‰å°±æ˜¾å¾—æµªè´¹æ—¶é—´ã€‚</p><p>é‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥<strong>å…ˆå‡è£…åˆ†é…</strong>ï¼Œç„¶<strong>åè°ƒç”¨é“¶è¡Œå®¶ç®—æ³•</strong>ï¼Œå†åˆ¤æ–­æ˜¯å¦å¯è¡Œå‘¢ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±éœ€è¦ç”³è¯·ä¸€ä¸ª<strong>æ­»é”è¿›ç¨‹ç»„</strong>ï¼Œåˆ¤æ–­æ¯ä¸€ä¸ªåºåˆ—æ˜¯å¦ä¸ºå®‰å…¨åºåˆ—ã€‚</p></li><li><p><code>æ­»é”æ£€æµ‹+æ¢å¤</code> ï¼šæ ¸å¿ƒæ€æƒ³åœ¨äºå…ˆå‘ç°é—®é¢˜ï¼Œç„¶åå†å¤„ç†ï¼Œå½“å‘ç”Ÿæ­»é”çš„æ—¶å€™ï¼Œå°±è®©<strong>è¿›ç¨‹å›æ»š</strong>ï¼Œä½†æ˜¯å®ç°æœºåˆ¶æ¯”è¾ƒå¤æ‚</p></li><li><p><code>æ­»é”å¿½ç•¥</code> ï¼šç©¶æç§˜è¯€â€”â€”<strong>é‡å¯</strong>ï¼›</p></li></ol><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> linux0.11 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»ŸåŸºç¡€</title>
      <link href="/2021/07/11/cao-zuo-xi-tong-ji-chu/"/>
      <url>/2021/07/11/cao-zuo-xi-tong-ji-chu/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ</h2><h3 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1.å¼•è¨€"></a>1.å¼•è¨€</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹<strong>è®¡ç®—æœºç¡¬ä»¶</strong>è®¾å¤‡çš„åˆ†å¸ƒ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004641611.png" alt="image-20210619004641611"></p><p><strong>image-20210619004641611</strong></p><p>é‚£ä¹ˆæœ‰äº†è¿™äº›ç¡¬ä»¶è®¾å¤‡ï¼Œè®¡ç®—æœºå¯ä»¥å¹²ä»€ä¹ˆå‘¢ï¼Œè®¡ç®—æœºå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¾ˆå¤šå®é™…çš„é—®é¢˜ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬åœ¨é”®ç›˜ä¸Šè¾“å…¥â€œhello worldâ€ï¼Œè®¡ç®—æœºä¼šå¸®æˆ‘ä»¬å°†å…¶å±•ç¤ºåœ¨æ˜¾ç¤ºå™¨ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬ç»™å‡ºå®ç°çš„æœºåˆ¶ï¼š</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004659758.png" alt="image-20210619004659758"></p><p><strong>image-20210619004659758</strong></p><p>ä½†åœ¨å®é™…å®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€é”®å…¥å³å¯ï¼Œè€Œåº•å±‚å¤æ‚çš„æ“ä½œå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒä¸€ä¸ªé»‘ç›’å­ï¼Œæ˜¯ä¸å¯è§çš„ã€‚é‚£è¿™ä¸ªå°è£…èµ·æ¥çš„é»‘ç›’å­æ˜¯ç”±ä»€ä¹ˆå®ç°çš„å‘¢ï¼Œ</p><p>è¿™é‡Œæˆ‘ä»¬å…ˆç»™å‡ºç»“è®ºâ€”â€”<code>æ“ä½œç³»ç»Ÿ</code></p><h3 id="2-å®šä¹‰"><a href="#2-å®šä¹‰" class="headerlink" title="2.å®šä¹‰"></a>2.å®šä¹‰</h3><blockquote><p>æ“ä½œç³»ç»ŸOperatingSystemï¼Œç®€ç§°OSOperatingSystemï¼Œç®€ç§°OSæ˜¯ç®¡ç†è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„è®¡ç®—æœºç¨‹åºã€‚æ“ä½œç³»ç»Ÿéœ€è¦å¤„ç†å¦‚ç®¡ç†ä¸é…ç½®å†…å­˜ã€å†³å®šç³»ç»Ÿèµ„æºä¾›éœ€çš„ä¼˜å…ˆæ¬¡åºã€æ§åˆ¶è¾“å…¥è®¾å¤‡ä¸è¾“å‡ºè®¾å¤‡ã€æ“ä½œç½‘ç»œä¸ç®¡ç†æ–‡ä»¶ç³»ç»Ÿç­‰åŸºæœ¬äº‹åŠ¡ã€‚æ“ä½œç³»ç»Ÿä¹Ÿæä¾›ä¸€ä¸ªè®©ç”¨æˆ·ä¸ç³»ç»Ÿäº¤äº’çš„æ“ä½œç•Œé¢ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹å®šä¹‰è¿›è¡Œå‰–æ</p><p>æ“ä½œç³»ç»Ÿç®¡ç†çš„è®¡ç®—æœºç¡¬ä»¶éƒ½æœ‰ä»€ä¹ˆï¼Ÿ</p><ul><li><strong>cpuç®¡ç†</strong></li><li><strong>å†…å­˜ç®¡ç†</strong></li><li><strong>ç»ˆç«¯ç®¡ç†</strong></li><li><strong>ç£ç›˜ç®¡ç†</strong></li><li><strong>æ–‡ä»¶ç®¡ç†</strong></li><li>ç½‘ç»œç®¡ç†</li><li>ç”µæºç®¡ç†</li><li>å¤šæ ¸ç®¡ç†</li></ul><p>è€Œå¯¹äºæ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬åº”è¯¥åšåˆ°<strong>èƒ½æ”¹æ“ä½œç³»ç»Ÿ</strong>ã€‚</p><h2 id="äºŒã€æ‰“å¼€é’¢ç´çš„ç›–å­"><a href="#äºŒã€æ‰“å¼€é’¢ç´çš„ç›–å­" class="headerlink" title="äºŒã€æ‰“å¼€é’¢ç´çš„ç›–å­"></a>äºŒã€æ‰“å¼€é’¢ç´çš„ç›–å­</h2><p>æˆ‘ä»¬ä¸å¦¨æŠŠæ“ä½œç³»ç»Ÿæ¯”ä½œä¸€ä¸ªé’¢ç´ï¼Œè¦å¼¹å‡ºç¾å¦™çš„ä¹æ›²ï¼Œæˆ‘ä»¬ä¸ä»…è¦äº†è§£æ¯ä¸ªç´é”®çš„ä½œç”¨ï¼Œä¹Ÿè¦å¯ä»¥æ‰“å¼€ç›–å­ï¼Œé€šè¿‡è°ƒæ•´ç´å¼¦çš„ç²—ç»†é•¿çŸ­æ”¹å˜éŸ³è°ƒã€‚</p><p>æˆ‘ä»¬ä¸å¦¨è¯•ç€æ‰“å¼€è®¡ç®—æœºçš„ç›–å­ï¼Œä»æ‰“å¼€ç”µæºçš„é‚£ä¸€åˆ»å¼€å§‹ï¼Œæ“ä½œç³»ç»Ÿçš„æ•…äº‹å°±å·²ç„¶å¼€å§‹äº†â€”â€”</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ ¹æ®è®¤çŸ¥çŒœæµ‹ä¸€ä¸‹ï¼Œæ‰“å¼€ç”µæºåæ˜¾ç¤ºâ€loading â€¦â€,é‚£è¿™äº›æ•°æ®æ˜¯é€šè¿‡æ€æ ·çš„æ›²æŠ˜æœ€ç»ˆå‘é€åˆ°æ˜¾å­˜çš„å‘¢ï¼Ÿå¼€æœºåï¼Œæ•´ä¸ªIOè®¾å¤‡å’Œæ–‡ä»¶ç³»ç»Ÿéƒ½å¯ä»¥ç”¨äº†ï¼Œæ˜¯ä¸æ˜¯åœ¨å¼€æœºæ—¶å®Œæˆçš„åˆå§‹åŒ–å‘¢ï¼Œå¦‚æœæ˜¯ï¼Œåˆåšäº†æ€æ ·çš„åˆå§‹åŒ–å‘¢ï¼Ÿ</p><p>è¿™ä¸€åˆ‡ï¼Œéƒ½è¦ä»æœ€æ ¸å¿ƒçš„æ€æƒ³â€”â€”<strong>å†¯è¯ºä¾æ›¼ç»“æ„</strong>è°ˆèµ·ã€‚</p><h3 id="1-å†¯è¯ºä¾æ›¼ç»“æ„"><a href="#1-å†¯è¯ºä¾æ›¼ç»“æ„" class="headerlink" title="1.å†¯è¯ºä¾æ›¼ç»“æ„"></a>1.å†¯è¯ºä¾æ›¼ç»“æ„</h3><p>è‰ºæœ¯æ¥æºäºç”Ÿæ´»ï¼ŒæŠ€æœ¯ä¹Ÿä¸ä¾‹å¤–ï¼Œè®¡ç®—æœºè¯´åˆ°åº•å°±æ˜¯ä¸€ä¸ªè®¡ç®—æ¨¡å‹ï¼Œå½“äººè¦è®¡ç®—1+1=2çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå…ˆå°†1+1å†™åœ¨çº¸ä¸Šï¼Œç„¶åå¤§è„‘è¿ç®—å‡ºç»“æœ2ï¼Œå†å°†å…¶å†™åˆ°çº¸ä¸Šã€‚è¿™é‡Œï¼Œ<code>çº¸å°±å¦‚åŒä¸€ä¸ªå­˜å‚¨å™¨ï¼Œè€Œå¤§è„‘å°±æ˜¯è¿ç®—å™¨ï¼Œæ§åˆ¶å™¨ï¼Œç¬”æ˜¯è¾“å…¥è¾“å‡ºè®¾å¤‡</code>ã€‚å¾ˆé…·å¯¹å§ï¼Œä½†æ˜¯1*1=ï¼Ÿæ€ä¹ˆæå‘¢ï¼Ÿ2/2å‘¢ï¼Œçœ‹æ¥è¿™ä¸ªè®¡ç®—æ¨¡å‹è¿˜éœ€è¦å­˜å‚¨å¤šç§æ¨¡å¼ï¼Œè€Œè¿ç®—å™¨èƒ½è¯†åˆ«ä¸åŒçš„æ¨¡å¼ã€‚è‡³æ­¤ï¼Œæ— é¾™ç é›†é½ï¼Œæˆ‘ä»¬å¯ä»¥å¬å”¤ç¥é¾™â€”â€”å†¯è¯ºä¾æ›¼ç»“æ„</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004719586.png" alt="image-20210619004719586"></p><p><strong>image-20210619004719586</strong></p><p><strong>æ‰€è°“å¤§é“è‡³ç®€ï¼Œä¸è¿‡å¦‚æ˜¯</strong></p><hr><h2 id="ä¸‰ã€æ“çºµç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹"><a href="#ä¸‰ã€æ“çºµç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹" class="headerlink" title="ä¸‰ã€æ“çºµç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹"></a>ä¸‰ã€æ“çºµç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</h2><p>å°å°çš„åˆ†å‰²ä¸€æ‰‹ï¼Œå› ä¸ºä»¥ä¸ŠçŸ¥è¯†å¸®åŠ©æˆ‘ä»¬åœ¨è„‘æµ·ä¸­å½¢æˆäº†ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æœ€å°å•å…ƒï¼Œæ¥ä¸‹æ¥å°±è¦ä¸€æ¢ç©¶ç«Ÿäº†ã€‚</p><p>è®¡ç®—æœºå¯¹åº”ç”¨ç¨‹åºçš„å¤„ç†ï¼Œä¹Ÿå°±æ˜¯å–æŒ‡æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆå®ƒæŒ‡å‘å†…å­˜ä½•å¤„å‘¢ï¼Ÿ</p><ol><li><p>X86 PCåˆšå¼€æœºæ—¶CPUå¤„äº<strong>å®æ¨¡å¼</strong>ï¼Œæ­¤æ—¶<strong>CS=0XFFFF,IP=0X0000</strong>,å¯»å€åˆ°<strong>0XFFFFO</strong>,ä¹Ÿå°±æ˜¯<strong>ROM BIOSæ˜ å°„åŒº</strong>ï¼Œæ¥ç€æ£€æŸ¥<strong>RAM,é”®ç›˜ï¼Œæ˜¾ç¤ºå™¨ï¼Œè½¯ç¡¬ç£ç›˜</strong>ï¼Œå°†<strong>ç£ç›˜çš„0ç£é“0æ‰‡åŒº</strong>è¯»å…¥<strong>0X7C00</strong>å¤„ï¼Œè®¾ç½®cs=0x7c0,ip=0x0000</p></li><li><p>ä¸ºä»€ä¹ˆè¦è·³è½¬åˆ°0X7C00å¤„å‘¢ï¼Ÿè¿™å—å†…å­˜åŒºåŸŸå­˜å‚¨çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™é‡Œå­˜æ”¾çš„æ˜¯ç£ç›˜å¼•å¯¼æ‰‡åŒºè¯»å…¥çš„512ä¸ªå­—èŠ‚ï¼Œä¹Ÿæ˜¯å¼€æœºåæ‰§è¡Œçš„ç¬¬ä¸€æ®µæˆ‘ä»¬å¯ä»¥æ§åˆ¶çš„ç¨‹åºï¼Œæ“ä½œç³»ç»Ÿçš„æ•…äº‹ä»è¿™é‡Œå¼€å§‹â€¦â€¦..</p></li></ol><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004735500.png" alt="image-20210619004735500"></p><p>   <strong>image-20210619004735500</strong></p><p>   ä»£ç å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸è¿½æ±‚æ¯å¥éƒ½èƒ½çœ‹æ‡‚ï¼Œè€Œè¦æŠ“ä½æ ¸å¿ƒç‚¹â€”â€”</p><p>   è¿™æ®µä»£ç å°†å¼•å¯¼æ‰‡åŒºçš„ä»£ç <code>ä»¥å­—èŠ‚ä¸ºå•ä½å¾ªç¯åŠ è½½åˆ°CS=INITSEGï¼Œip= GO</code>å¤„,æˆ–ç§°<strong>æ®µé—´è·³è½¬</strong></p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004753041.png" alt="image-20210619004753041"></p><p>   <strong>image-20210619004753041</strong></p><p>   åœ¨bootsect.sä¸­<strong>åŠ è½½load_setupæ¨¡å—</strong>ï¼Œè¯¥æ¨¡å—é€šè¿‡ä¸­æ–­ä¿¡å·0X13è¯»å–åˆ°æ‰‡åŒºæ•°é‡ï¼Œå¹¶è·³è½¬<strong>ok_load_setup</strong>æ¨¡å—ï¼Œ</p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004806578.png" alt="image-20210619004806578"></p><p>   <strong>image-20210619004806578</strong></p><p>   åœ¨è¯¥æ¨¡å—ä¸­è·å–ç£ç›˜å‚æ•°ï¼Œè¯»å–å…‰æ ‡ä½ç½®ï¼Œå¾ªç¯å†™å…¥24ä¸ªå­—ç¬¦ï¼Œå¹¶åœ¨æœ€åè·³è½¬<strong>read_itæ ‡å·</strong>ï¼Œè€Œè¯¥æ ‡å·å±äº<strong>Systemæ¨¡å—</strong></p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004820607.png" alt="image-20210619004820607"></p><p>   <strong>image-20210619004820607</strong></p><p>   åœ¨Systemæ¨¡å—ä¸­ï¼Œè¯»å–ç£é“ï¼Œé‡æ–°å›åˆ°setupæ¨¡å—æ‰§è¡Œï¼ŒCPUè¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œå¹¶åˆå§‹åŒ–ä¸­æ–­æ§åˆ¶ï¼Œé‚£CPUæ˜¯å¦‚ä½•è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„å‘¢ï¼Ÿè‡ªç„¶éœ€è¦æ ‡å¿—å¯„å­˜å™¨cr0.å½“<code>PE=1æ—¶å¯åŠ¨ä¿æŠ¤æ¨¡å¼ï¼ŒPG=1æ—¶è‡ªåŠ¨åˆ†é¡µ</code>ï¼ŒCPUåœ¨è¿›å…¥ä¿æŠ¤æ¨¡å¼åï¼Œæœ‰ä¸€ä¸ªå…³é”®è·³è½¬ï¼Œå³jmpi 0, 8,è¿™é‡Œè®¾ç½®cs=8æ˜¯ç”¨æ¥æŸ¥è¯¢GDTè¡¨ï¼Œå³ä¸­æ–­å‘é‡è¡¨ã€‚è¿™é‡Œæˆ‘ä»¬ç®€å•é‚£æè¿°ä¸€ä¸‹GDTè¡¨çš„è¡¨é¡¹â€”â€”</p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004835241.png" alt="image-20210619004835241"></p><p>   <strong>image-20210619004835241</strong></p><p>   é‚£ä¹ˆç¨‹åºè®¡æ•°å™¨PCè·³è½¬åˆ°äº†å“ªå‘¢ï¼Ÿé‚£å°±æ˜¯å…³é”®çš„Systemæ¨¡å—ï¼Œ</p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004851277.png" alt="image-20210619004851277"></p><p>   <strong>image-20210619004851277</strong></p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619004906587.png" alt="image-20210619004906587"></p><p>   <strong>image-20210619004906587</strong></p><p>   <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619005014321.png" alt="image-20210619005014321"></p><p>   <strong>image-20210619005014321</strong></p><p>   å¼€å±€å‡ å¼ å›¾ï¼Œå‰©ä¸‹å…¨é ç¼–ï¼Œå‡è£…æœ‰â€<strong>æ±‡</strong>å­—â€</p><p>   æ‰ç–å­¦æµ…ï¼Œè¿™å‡ å¼ å›¾ä»¥æˆ‘çš„æ°´å‡†å®åœ¨æ— æ³•ç»™å‡ºä¸€ä¸ªå®¹æ˜“ç†è§£çš„ç­”æ¡ˆï¼Œç­‰ä»€ä¹ˆæ—¶å€™ç»è¿‡æ—¶é—´æ²‰æ·€çªç„¶æ‚Ÿäº†ï¼Œå†å›æ¥è®²è¿°è¿™äº›æ±‡ç¼–èƒŒåçš„æ•…äº‹â€¦â€¦â€¦</p><h2 id="å››ã€æ“ä½œç³»ç»Ÿçš„æ¥å£"><a href="#å››ã€æ“ä½œç³»ç»Ÿçš„æ¥å£" class="headerlink" title="å››ã€æ“ä½œç³»ç»Ÿçš„æ¥å£"></a>å››ã€æ“ä½œç³»ç»Ÿçš„æ¥å£</h2><p>è¦å­¦ä¹ æ“ä½œç³»ç»Ÿçš„æ¥å£ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆäº†è§£æ¥å£æ˜¯ä»€ä¹ˆï¼Œåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ’åº§ï¼Œæ²¹é—¨è¿™ç§ç±»å‹çš„ç‰©ä»¶ï¼Œå…¶å®å°±æ˜¯åœ¨ä½¿ç”¨æ¥å£ã€‚ç‰›æ´¥è¯å…¸æ˜¯è¿™æ ·å®šä¹‰æ¥å£çš„ï¼š</p><blockquote><p>æ¥å£æ˜¯è¿æ¥ä¸¤ä¸ªä¸œè¥¿ï¼Œå±è”½ç»†èŠ‚ï¼Œç”¨äºä¿¡å·è½¬æ¢çš„</p></blockquote><p>é‚£ä¹ˆä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿçš„æ¥å£å‘¢ï¼Ÿ</p><p><img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619005049553.png" alt="image-20210619005049553"></p><p><strong>image-20210619005049553</strong></p><p>å¯è§ï¼Œæ“ä½œç³»ç»Ÿæ¥å£å°†ä¸Šå±‚è½¯ä»¶å’Œæ“ä½œç³»ç»Ÿè¿æ¥èµ·æ¥ã€‚è¡¨é¢ä¸Šçœ‹ç”¨æˆ·å¯ä»¥ç›´æ¥ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œç„¶è€Œæ“ä½œç³»ç»Ÿæ¥å£æ˜¯é¢å¯¹ç”¨æˆ·çš„å—ï¼Ÿ</p><p>æ˜¾ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨è®¡ç®—æœºçš„æ–¹å¼æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯</p><ul><li><p>å‘½ä»¤è¡Œ</p></li><li><p>å›¾å½¢åŒ–ç•Œé¢</p></li><li><p>åº”ç”¨ç¨‹åº</p></li></ul><p>  <img src="https://zyz-img.oss-cn-chengdu.aliyuncs.com/img/image-20210619005102257.png" alt="image-20210619005102257"></p><p>  <strong>image-20210619005102257</strong></p><p>ç”±æ­¤å¯ä»¥çœ‹å‡ºæ“ä½œç³»ç»Ÿæ¥å£ä¸æ˜¯é¢å‘ç”¨æˆ·çš„ï¼Œè¿™ä¸‰ç§æ–¹å¼éƒ½å½’äºè°ƒç”¨ç³»ç»Ÿå¸¸ç”¨çš„Cè¯­è¨€å‡½æ•°åŠæ™®é€šå‡½æ•°(<strong>åº”ç”¨ç¨‹åºæ¥å£</strong>)æ¥å®ç°ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡ºæ“ä½œç³»ç»Ÿæ¥å£ä¸€ä¸ªç›¸å¯¹è´´è¿‘çš„å®šä¹‰äº†â€”â€”</p><blockquote><p>æ“ä½œç³»ç»Ÿæ¥å£ï¼šæ¥å£è¡¨ç°ä¸ºè°ƒç”¨ï¼Œåˆç”±ç³»ç»Ÿæä¾›ï¼Œå› è€Œç§°æ“ä½œç³»ç»Ÿæ¥å£ä¸ºç³»ç»Ÿè°ƒç”¨</p></blockquote><p>æ—¢ç„¶äº¤äº’çš„è¿‡ç¨‹æ˜¯é€šè¿‡å‡½æ•°æ¥å®ç°çš„ï¼Œé‚£é€šå¸¸ä¼šè°ƒç”¨é‚£äº›å‡½æ•°å‘¢ï¼ŒIEEEç»„ç»‡é’ˆå¯¹ç³»ç»Ÿè°ƒç”¨åˆ¶å®šäº†ä¸€ä¸ªæ ‡å‡†æ—ï¼Œå³<strong>POSIX</strong></p><blockquote><p><strong>å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£</strong>ï¼ˆè‹±è¯­ï¼šPortable Operating System Interfaceï¼Œç¼©å†™ä¸ºPOSIXï¼‰ï¼Œæ˜¯IEEEä¸ºè¦åœ¨å„ç§UNIXæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œçš„è½¯ä»¶ï¼Œè€Œå®šä¹‰APIçš„ä¸€ç³»åˆ—äº’ç›¸å…³è”çš„æ ‡å‡†çš„æ€»ç§°</p></blockquote><ul><li>å‚è€ƒç›®å½•ï¼š</li></ul><ol><li>å“ˆå·¥å¤§æå¿—å†›è€å¸ˆæ“ä½œç³»ç»Ÿ</li><li>è“æ¡¥å®éªŒæ¥¼</li></ol><hr><blockquote><p>å±±é«˜è·¯è¿œï¼Œé™æ°´æ·±æµã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
